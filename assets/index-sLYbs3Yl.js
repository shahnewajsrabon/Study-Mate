(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function V2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $y={exports:{}},Sd={};var OE;function G4(){if(OE)return Sd;OE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var d in i)d!=="key"&&(o[d]=i[d])}else o=i;return i=o.ref,{$$typeof:n,type:s,key:l,ref:i!==void 0?i:null,props:o}}return Sd.Fragment=e,Sd.jsx=t,Sd.jsxs=t,Sd}var LE;function H4(){return LE||(LE=1,$y.exports=G4()),$y.exports}var h=H4(),Ky={exports:{}},Ue={};var UE;function $4(){if(UE)return Ue;UE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),v=Symbol.iterator;function T(M){return M===null||typeof M!="object"?null:(M=v&&M[v]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,j={};function P(M,H,Q){this.props=M,this.context=H,this.refs=j,this.updater=Q||k}P.prototype.isReactComponent={},P.prototype.setState=function(M,H){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,H,"setState")},P.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function L(){}L.prototype=P.prototype;function z(M,H,Q){this.props=M,this.context=H,this.refs=j,this.updater=Q||k}var $=z.prototype=new L;$.constructor=z,I($,P.prototype),$.isPureReactComponent=!0;var te=Array.isArray;function ce(){}var D={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(M,H,Q){var se=Q.ref;return{$$typeof:n,type:M,key:H,ref:se!==void 0?se:null,props:Q}}function O(M,H){return A(M.type,H,M.props)}function U(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function q(M){var H={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Q){return H[Q]})}var V=/\/+/g;function Pe(M,H){return typeof M=="object"&&M!==null&&M.key!=null?q(""+M.key):H.toString(36)}function Ve(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ce,ce):(M.status="pending",M.then(function(H){M.status==="pending"&&(M.status="fulfilled",M.value=H)},function(H){M.status==="pending"&&(M.status="rejected",M.reason=H)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function F(M,H,Q,se,fe){var ye=typeof M;(ye==="undefined"||ye==="boolean")&&(M=null);var we=!1;if(M===null)we=!0;else switch(ye){case"bigint":case"string":case"number":we=!0;break;case"object":switch(M.$$typeof){case n:case e:we=!0;break;case y:return we=M._init,F(we(M._payload),H,Q,se,fe)}}if(we)return fe=fe(M),we=se===""?"."+Pe(M,0):se,te(fe)?(Q="",we!=null&&(Q=we.replace(V,"$&/")+"/"),F(fe,H,Q,"",function(tt){return tt})):fe!=null&&(U(fe)&&(fe=O(fe,Q+(fe.key==null||M&&M.key===fe.key?"":(""+fe.key).replace(V,"$&/")+"/")+we)),H.push(fe)),1;we=0;var pe=se===""?".":se+":";if(te(M))for(var Ce=0;Ce<M.length;Ce++)se=M[Ce],ye=pe+Pe(se,Ce),we+=F(se,H,Q,ye,fe);else if(Ce=T(M),typeof Ce=="function")for(M=Ce.call(M),Ce=0;!(se=M.next()).done;)se=se.value,ye=pe+Pe(se,Ce++),we+=F(se,H,Q,ye,fe);else if(ye==="object"){if(typeof M.then=="function")return F(Ve(M),H,Q,se,fe);throw H=String(M),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return we}function ie(M,H,Q){if(M==null)return M;var se=[],fe=0;return F(M,se,"","",function(ye){return H.call(Q,ye,fe++)}),se}function ne(M){if(M._status===-1){var H=M._result;H=H(),H.then(function(Q){(M._status===0||M._status===-1)&&(M._status=1,M._result=Q)},function(Q){(M._status===0||M._status===-1)&&(M._status=2,M._result=Q)}),M._status===-1&&(M._status=0,M._result=H)}if(M._status===1)return M._result.default;throw M._result}var Ee=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},oe={map:ie,forEach:function(M,H,Q){ie(M,function(){H.apply(this,arguments)},Q)},count:function(M){var H=0;return ie(M,function(){H++}),H},toArray:function(M){return ie(M,function(H){return H})||[]},only:function(M){if(!U(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ue.Activity=b,Ue.Children=oe,Ue.Component=P,Ue.Fragment=t,Ue.Profiler=i,Ue.PureComponent=z,Ue.StrictMode=s,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(M){return D.H.useMemoCache(M)}},Ue.cache=function(M){return function(){return M.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(M,H,Q){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var se=I({},M.props),fe=M.key;if(H!=null)for(ye in H.key!==void 0&&(fe=""+H.key),H)!S.call(H,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&H.ref===void 0||(se[ye]=H[ye]);var ye=arguments.length-2;if(ye===1)se.children=Q;else if(1<ye){for(var we=Array(ye),pe=0;pe<ye;pe++)we[pe]=arguments[pe+2];se.children=we}return A(M.type,fe,se)},Ue.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Ue.createElement=function(M,H,Q){var se,fe={},ye=null;if(H!=null)for(se in H.key!==void 0&&(ye=""+H.key),H)S.call(H,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(fe[se]=H[se]);var we=arguments.length-2;if(we===1)fe.children=Q;else if(1<we){for(var pe=Array(we),Ce=0;Ce<we;Ce++)pe[Ce]=arguments[Ce+2];fe.children=pe}if(M&&M.defaultProps)for(se in we=M.defaultProps,we)fe[se]===void 0&&(fe[se]=we[se]);return A(M,ye,fe)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(M){return{$$typeof:d,render:M}},Ue.isValidElement=U,Ue.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:ne}},Ue.memo=function(M,H){return{$$typeof:m,type:M,compare:H===void 0?null:H}},Ue.startTransition=function(M){var H=D.T,Q={};D.T=Q;try{var se=M(),fe=D.S;fe!==null&&fe(Q,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ce,Ee)}catch(ye){Ee(ye)}finally{H!==null&&Q.types!==null&&(H.types=Q.types),D.T=H}},Ue.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ue.use=function(M){return D.H.use(M)},Ue.useActionState=function(M,H,Q){return D.H.useActionState(M,H,Q)},Ue.useCallback=function(M,H){return D.H.useCallback(M,H)},Ue.useContext=function(M){return D.H.useContext(M)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(M,H){return D.H.useDeferredValue(M,H)},Ue.useEffect=function(M,H){return D.H.useEffect(M,H)},Ue.useEffectEvent=function(M){return D.H.useEffectEvent(M)},Ue.useId=function(){return D.H.useId()},Ue.useImperativeHandle=function(M,H,Q){return D.H.useImperativeHandle(M,H,Q)},Ue.useInsertionEffect=function(M,H){return D.H.useInsertionEffect(M,H)},Ue.useLayoutEffect=function(M,H){return D.H.useLayoutEffect(M,H)},Ue.useMemo=function(M,H){return D.H.useMemo(M,H)},Ue.useOptimistic=function(M,H){return D.H.useOptimistic(M,H)},Ue.useReducer=function(M,H,Q){return D.H.useReducer(M,H,Q)},Ue.useRef=function(M){return D.H.useRef(M)},Ue.useState=function(M){return D.H.useState(M)},Ue.useSyncExternalStore=function(M,H,Q){return D.H.useSyncExternalStore(M,H,Q)},Ue.useTransition=function(){return D.H.useTransition()},Ue.version="19.2.4",Ue}var zE;function nv(){return zE||(zE=1,Ky.exports=$4()),Ky.exports}var C=nv();const M2=V2(C);var Qy={exports:{}},Ad={},Yy={exports:{}},Xy={};var BE;function K4(){return BE||(BE=1,(function(n){function e(F,ie){var ne=F.length;F.push(ie);e:for(;0<ne;){var Ee=ne-1>>>1,oe=F[Ee];if(0<i(oe,ie))F[Ee]=ie,F[ne]=oe,ne=Ee;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var ie=F[0],ne=F.pop();if(ne!==ie){F[0]=ne;e:for(var Ee=0,oe=F.length,M=oe>>>1;Ee<M;){var H=2*(Ee+1)-1,Q=F[H],se=H+1,fe=F[se];if(0>i(Q,ne))se<oe&&0>i(fe,Q)?(F[Ee]=fe,F[se]=ne,Ee=se):(F[Ee]=Q,F[H]=ne,Ee=H);else if(se<oe&&0>i(fe,ne))F[Ee]=fe,F[se]=ne,Ee=se;else break e}}return ie}function i(F,ie){var ne=F.sortIndex-ie.sortIndex;return ne!==0?ne:F.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var f=[],m=[],y=1,b=null,v=3,T=!1,k=!1,I=!1,j=!1,P=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function $(F){for(var ie=t(m);ie!==null;){if(ie.callback===null)s(m);else if(ie.startTime<=F)s(m),ie.sortIndex=ie.expirationTime,e(f,ie);else break;ie=t(m)}}function te(F){if(I=!1,$(F),!k)if(t(f)!==null)k=!0,ce||(ce=!0,q());else{var ie=t(m);ie!==null&&Ve(te,ie.startTime-F)}}var ce=!1,D=-1,S=5,A=-1;function O(){return j?!0:!(n.unstable_now()-A<S)}function U(){if(j=!1,ce){var F=n.unstable_now();A=F;var ie=!0;try{e:{k=!1,I&&(I=!1,L(D),D=-1),T=!0;var ne=v;try{t:{for($(F),b=t(f);b!==null&&!(b.expirationTime>F&&O());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,v=b.priorityLevel;var oe=Ee(b.expirationTime<=F);if(F=n.unstable_now(),typeof oe=="function"){b.callback=oe,$(F),ie=!0;break t}b===t(f)&&s(f),$(F)}else s(f);b=t(f)}if(b!==null)ie=!0;else{var M=t(m);M!==null&&Ve(te,M.startTime-F),ie=!1}}break e}finally{b=null,v=ne,T=!1}ie=void 0}}finally{ie?q():ce=!1}}}var q;if(typeof z=="function")q=function(){z(U)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Pe=V.port2;V.port1.onmessage=U,q=function(){Pe.postMessage(null)}}else q=function(){P(U,0)};function Ve(F,ie){D=P(function(){F(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(F){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var ne=v;v=ie;try{return F()}finally{v=ne}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(F,ie){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ne=v;v=F;try{return ie()}finally{v=ne}},n.unstable_scheduleCallback=function(F,ie,ne){var Ee=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Ee+ne:Ee):ne=Ee,F){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ne+oe,F={id:y++,callback:ie,priorityLevel:F,startTime:ne,expirationTime:oe,sortIndex:-1},ne>Ee?(F.sortIndex=ne,e(m,F),t(f)===null&&F===t(m)&&(I?(L(D),D=-1):I=!0,Ve(te,ne-Ee))):(F.sortIndex=oe,e(f,F),k||T||(k=!0,ce||(ce=!0,q()))),F},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(F){var ie=v;return function(){var ne=v;v=ie;try{return F.apply(this,arguments)}finally{v=ne}}}})(Xy)),Xy}var FE;function Q4(){return FE||(FE=1,Yy.exports=K4()),Yy.exports}var Wy={exports:{}},Cn={};var qE;function Y4(){if(qE)return Cn;qE=1;var n=nv();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,m,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:f,containerInfo:m,implementation:y}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Cn.createPortal=function(f,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(f,m,null,y)},Cn.flushSync=function(f){var m=l.T,y=s.p;try{if(l.T=null,s.p=2,f)return f()}finally{l.T=m,s.p=y,s.d.f()}},Cn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(f,m))},Cn.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Cn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var y=m.as,b=d(y,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?s.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:T}):y==="script"&&s.d.X(f,{crossOrigin:b,integrity:v,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Cn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);s.d.M(f,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(f)},Cn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,b=d(y,m.crossOrigin);s.d.L(f,y,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Cn.preloadModule=function(f,m){if(typeof f=="string")if(m){var y=d(m.as,m.crossOrigin);s.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(f)},Cn.requestFormReset=function(f){s.d.r(f)},Cn.unstable_batchedUpdates=function(f,m){return f(m)},Cn.useFormState=function(f,m,y){return l.H.useFormState(f,m,y)},Cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Cn.version="19.2.4",Cn}var GE;function O2(){if(GE)return Wy.exports;GE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wy.exports=Y4(),Wy.exports}var HE;function X4(){if(HE)return Ad;HE=1;var n=Q4(),e=nv(),t=O2();function s(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(s(188))}function m(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(s(188));return a!==r?null:r}for(var c=r,u=a;;){var g=c.return;if(g===null)break;var x=g.alternate;if(x===null){if(u=g.return,u!==null){c=u;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===c)return f(g),r;if(x===u)return f(g),a;x=x.sibling}throw Error(s(188))}if(c.return!==u.return)c=g,u=x;else{for(var w=!1,N=g.child;N;){if(N===c){w=!0,c=g,u=x;break}if(N===u){w=!0,u=g,c=x;break}N=N.sibling}if(!w){for(N=x.child;N;){if(N===c){w=!0,c=x,u=g;break}if(N===u){w=!0,u=x,c=g;break}N=N.sibling}if(!w)throw Error(s(189))}}if(c.alternate!==u)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?r:a}function y(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=y(r),a!==null)return a;r=r.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),z=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var V=Symbol.for("react.client.reference");function Pe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===V?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case I:return"Fragment";case P:return"Profiler";case j:return"StrictMode";case te:return"Suspense";case ce:return"SuspenseList";case A:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case z:return r.displayName||"Context";case L:return(r._context.displayName||"Context")+".Consumer";case $:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return a=r.displayName||null,a!==null?a:Pe(r.type)||"Memo";case S:a=r._payload,r=r._init;try{return Pe(r(a))}catch{}}return null}var Ve=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},Ee=[],oe=-1;function M(r){return{current:r}}function H(r){0>oe||(r.current=Ee[oe],Ee[oe]=null,oe--)}function Q(r,a){oe++,Ee[oe]=r.current,r.current=a}var se=M(null),fe=M(null),ye=M(null),we=M(null);function pe(r,a){switch(Q(ye,a),Q(fe,r),Q(se,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?aE(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=aE(a),r=oE(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}H(se),Q(se,r)}function Ce(){H(se),H(fe),H(ye)}function tt(r){r.memoizedState!==null&&Q(we,r);var a=se.current,c=oE(a,r.type);a!==c&&(Q(fe,r),Q(se,c))}function jt(r){fe.current===r&&(H(se),H(fe)),we.current===r&&(H(we),_d._currentValue=ne)}var In,cr;function rn(r){if(In===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);In=a&&a[1]||"",cr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+In+r+cr}var Mn=!1;function rs(r,a){if(!r||Mn)return"";Mn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ae){var ee=ae}Reflect.construct(r,[],he)}else{try{he.call()}catch(ae){ee=ae}r.call(he.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),w=x[0],N=x[1];if(w&&N){var B=w.split(`
`),J=N.split(`
`);for(g=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(u===B.length||g===J.length)for(u=B.length-1,g=J.length-1;1<=u&&0<=g&&B[u]!==J[g];)g--;for(;1<=u&&0<=g;u--,g--)if(B[u]!==J[g]){if(u!==1||g!==1)do if(u--,g--,0>g||B[u]!==J[g]){var le=`
`+B[u].replace(" at new "," at ");return r.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",r.displayName)),le}while(1<=u&&0<=g);break}}}finally{Mn=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?rn(c):""}function wu(r,a){switch(r.tag){case 26:case 27:case 5:return rn(r.type);case 16:return rn("Lazy");case 13:return r.child!==a&&a!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return rs(r.type,!1);case 11:return rs(r.type.render,!1);case 1:return rs(r.type,!0);case 31:return rn("Activity");default:return""}}function Tu(r){try{var a="",c=null;do a+=wu(r,c),c=r,r=r.return;while(r);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var $t=Object.prototype.hasOwnProperty,an=n.unstable_scheduleCallback,Mi=n.unstable_cancelCallback,Qg=n.unstable_shouldYield,sf=n.unstable_requestPaint,On=n.unstable_now,eo=n.unstable_getCurrentPriorityLevel,Eu=n.unstable_ImmediatePriority,Su=n.unstable_UserBlockingPriority,Oi=n.unstable_NormalPriority,Yg=n.unstable_LowPriority,rf=n.unstable_IdlePriority,af=n.log,of=n.unstable_setDisableYieldValue,Os=null,_n=null;function bs(r){if(typeof af=="function"&&of(r),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(Os,r)}catch{}}var Ut=Math.clz32?Math.clz32:cf,lf=Math.log,pl=Math.LN2;function cf(r){return r>>>=0,r===0?32:31-(lf(r)/pl|0)|0}var ur=256,to=262144,Kt=4194304;function dr(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function hr(r,a,c){var u=r.pendingLanes;if(u===0)return 0;var g=0,x=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var N=u&134217727;return N!==0?(u=N&~x,u!==0?g=dr(u):(w&=N,w!==0?g=dr(w):c||(c=N&~r,c!==0&&(g=dr(c))))):(N=u&~x,N!==0?g=dr(N):w!==0?g=dr(w):c||(c=u&~r,c!==0&&(g=dr(c)))),g===0?0:a!==0&&a!==g&&(a&x)===0&&(x=g&-g,c=a&-a,x>=c||x===32&&(c&4194048)!==0)?a:g}function Ls(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Xg(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uf(){var r=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),r}function fr(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function no(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Wg(r,a,c,u,g,x){var w=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var N=r.entanglements,B=r.expirationTimes,J=r.hiddenUpdates;for(c=w&~c;0<c;){var le=31-Ut(c),he=1<<le;N[le]=0,B[le]=-1;var ee=J[le];if(ee!==null)for(J[le]=null,le=0;le<ee.length;le++){var ae=ee[le];ae!==null&&(ae.lane&=-536870913)}c&=~he}u!==0&&so(r,u,0),x!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=x&~(w&~a))}function so(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-Ut(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|c&261930}function Au(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var u=31-Ut(c),g=1<<u;g&a|r[u]&a&&(r[u]|=a),c&=~g}}function ku(r,a){var c=a&-a;return c=(c&42)!==0?1:ro(c),(c&(r.suspendedLanes|a))!==0?0:c}function ro(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Qr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function df(){var r=ie.p;return r!==0?r:(r=window.event,r===void 0?32:CE(r.type))}function Us(r,a){var c=ie.p;try{return ie.p=r,a()}finally{ie.p=c}}var zs=Math.random().toString(36).slice(2),Qt="__reactFiber$"+zs,fn="__reactProps$"+zs,mr="__reactContainer$"+zs,gl="__reactEvents$"+zs,Jg="__reactListeners$"+zs,hf="__reactHandles$"+zs,ff="__reactResources$"+zs,pr="__reactMarker$"+zs;function yl(r){delete r[Qt],delete r[fn],delete r[gl],delete r[Jg],delete r[hf]}function gr(r){var a=r[Qt];if(a)return a;for(var c=r.parentNode;c;){if(a=c[mr]||c[Qt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=mE(r);r!==null;){if(c=r[Qt])return c;r=mE(r)}return a}r=c,c=r.parentNode}return null}function vs(r){if(r=r[Qt]||r[mr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function is(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(s(33))}function yr(r){var a=r[ff];return a||(a=r[ff]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Yt(r){r[pr]=!0}var Nu=new Set,Iu={};function xr(r,a){br(r,a),br(r+"Capture",a)}function br(r,a){for(Iu[r]=a,r=0;r<a.length;r++)Nu.add(a[r])}var Cu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ru={},ju={};function mf(r){return $t.call(ju,r)?!0:$t.call(Ru,r)?!1:Cu.test(r)?ju[r]=!0:(Ru[r]=!0,!1)}function xl(r,a,c){if(mf(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function as(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function Xt(r,a,c,u){if(u===null)r.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+u)}}function mn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Li(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Du(r,a,c){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,x=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return g.call(this)},set:function(w){c=""+w,x.call(this,w)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function ot(r){if(!r._valueTracker){var a=Li(r)?"checked":"value";r._valueTracker=Du(r,a,""+r[a])}}function io(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),u="";return r&&(u=Li(r)?r.checked?"true":"false":r.value),r=u,r!==c?(a.setValue(r),!0):!1}function vr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ao=/[\n"\\]/g;function qn(r){return r.replace(ao,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function bl(r,a,c,u,g,x,w,N){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),a!=null?w==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+mn(a)):r.value!==""+mn(a)&&(r.value=""+mn(a)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),a!=null?Pu(r,w,mn(a)):c!=null?Pu(r,w,mn(c)):u!=null&&r.removeAttribute("value"),g==null&&x!=null&&(r.defaultChecked=!!x),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.name=""+mn(N):r.removeAttribute("name")}function pf(r,a,c,u,g,x,w,N){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),a!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){ot(r);return}c=c!=null?""+mn(c):"",a=a!=null?""+mn(a):c,N||a===r.value||(r.value=a),r.defaultValue=a}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=N?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w),ot(r)}function Pu(r,a,c){a==="number"&&vr(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Ui(r,a,c,u){if(r=r.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<r.length;c++)g=a.hasOwnProperty("$"+r[c].value),r[c].selected!==g&&(r[c].selected=g),g&&u&&(r[c].defaultSelected=!0)}else{for(c=""+mn(c),a=null,g=0;g<r.length;g++){if(r[g].value===c){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}a!==null||r[g].disabled||(a=r[g])}a!==null&&(a.selected=!0)}}function gf(r,a,c){if(a!=null&&(a=""+mn(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+mn(c):""}function zi(r,a,c,u){if(a==null){if(u!=null){if(c!=null)throw Error(s(92));if(Ve(u)){if(1<u.length)throw Error(s(93));u=u[0]}c=u}c==null&&(c=""),a=c}c=mn(a),r.defaultValue=c,u=r.textContent,u===c&&u!==""&&u!==null&&(r.value=u),ot(r)}function Gn(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var yf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vu(r,a,c){var u=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,c):typeof c!="number"||c===0||yf.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function Mu(r,a,c){if(a!=null&&typeof a!="object")throw Error(s(62));if(r=r.style,c!=null){for(var u in c)!c.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in a)u=a[g],a.hasOwnProperty(g)&&c[g]!==u&&Vu(r,g,u)}else for(var x in a)a.hasOwnProperty(x)&&Vu(r,x,a[x])}function vl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(r){return Bi.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Bs(){}var Ou=null;function _s(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Fi=null,_r=null;function oo(r){var a=vs(r);if(a&&(r=a.stateNode)){var c=r[fn]||null;e:switch(r=a.stateNode,a.type){case"input":if(bl(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var u=c[a];if(u!==r&&u.form===r.form){var g=u[fn]||null;if(!g)throw Error(s(90));bl(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)u=c[a],u.form===r.form&&io(u)}break e;case"textarea":gf(r,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Ui(r,!!c.multiple,a,!1)}}}var wl=!1;function qi(r,a,c){if(wl)return r(a,c);wl=!0;try{var u=r(a);return u}finally{if(wl=!1,(Fi!==null||_r!==null)&&(dm(),Fi&&(a=Fi,r=_r,_r=Fi=null,oo(a),r)))for(a=0;a<r.length;a++)oo(r[a])}}function Fs(r,a){var c=r.stateNode;if(c===null)return null;var u=c[fn]||null;if(u===null)return null;c=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(s(231,a,typeof c));return c}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lo=!1;if(ws)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){lo=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{lo=!1}var wr=null,Lu=null,co=null;function Uu(){if(co)return co;var r,a=Lu,c=a.length,u,g="value"in wr?wr.value:wr.textContent,x=g.length;for(r=0;r<c&&a[r]===g[r];r++);var w=c-r;for(u=1;u<=w&&a[c-u]===g[x-u];u++);return co=g.slice(r,1<u?1-u:void 0)}function uo(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Yr(){return!0}function qs(){return!1}function wn(r){function a(c,u,g,x,w){this._reactName=c,this._targetInst=g,this.type=u,this.nativeEvent=x,this.target=w,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(c=r[N],this[N]=c?c(x):x[N]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Yr:qs,this.isPropagationStopped=qs,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),a}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tr=wn(Xr),Gi=b({},Xr,{view:0,detail:0}),zu=wn(Gi),Hi,Tl,Er,El=b({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Er&&(Er&&r.type==="mousemove"?(Hi=r.screenX-Er.screenX,Tl=r.screenY-Er.screenY):Tl=Hi=0,Er=r),Hi)},movementY:function(r){return"movementY"in r?r.movementY:Tl}}),Bu=wn(El),ho=b({},El,{dataTransfer:0}),bf=wn(ho),vf=b({},Gi,{relatedTarget:0}),fo=wn(vf),Fu=b({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),_f=wn(Fu),Sl=b({},Xr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),wf=wn(Sl),Tf=b({},Xr,{data:0}),Sr=wn(Tf),Ef={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Af={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kf(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Af[r])?!!a[r]:!1}function $i(){return kf}var Ln=b({},Gi,{key:function(r){if(r.key){var a=Ef[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=uo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Sf[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(r){return r.type==="keypress"?uo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?uo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Nf=wn(Ln),If=b({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wr=wn(If),p=b({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),_=wn(p),E=b({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=wn(E),X=b({},El,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),re=wn(X),xe=b({},Xr,{newState:0,oldState:0}),Be=wn(xe),zt=[9,13,27,32],rt=ws&&"CompositionEvent"in window,At=null;ws&&"documentMode"in document&&(At=document.documentMode);var Ts=ws&&"TextEvent"in window&&!At,Ar=ws&&(!rt||At&&8<At&&11>=At),Gs=" ",Hs=!1;function mo(r,a){switch(r){case"keyup":return zt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Al(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var kl=!1;function m5(r,a){switch(r){case"compositionend":return Al(a);case"keypress":return a.which!==32?null:(Hs=!0,Gs);case"textInput":return r=a.data,r===Gs&&Hs?null:r;default:return null}}function p5(r,a){if(kl)return r==="compositionend"||!rt&&mo(r,a)?(r=Uu(),co=Lu=wr=null,kl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ar&&a.locale!=="ko"?null:a.data;default:return null}}var g5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yw(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!g5[r.type]:a==="textarea"}function xw(r,a,c,u){Fi?_r?_r.push(u):_r=[u]:Fi=u,a=xm(a,"onChange"),0<a.length&&(c=new Tr("onChange","change",null,c,u),r.push({event:c,listeners:a}))}var qu=null,Gu=null;function y5(r){eE(r,0)}function Cf(r){var a=is(r);if(io(a))return r}function bw(r,a){if(r==="change")return a}var vw=!1;if(ws){var Zg;if(ws){var e0="oninput"in document;if(!e0){var _w=document.createElement("div");_w.setAttribute("oninput","return;"),e0=typeof _w.oninput=="function"}Zg=e0}else Zg=!1;vw=Zg&&(!document.documentMode||9<document.documentMode)}function ww(){qu&&(qu.detachEvent("onpropertychange",Tw),Gu=qu=null)}function Tw(r){if(r.propertyName==="value"&&Cf(Gu)){var a=[];xw(a,Gu,r,_s(r)),qi(y5,a)}}function x5(r,a,c){r==="focusin"?(ww(),qu=a,Gu=c,qu.attachEvent("onpropertychange",Tw)):r==="focusout"&&ww()}function b5(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Cf(Gu)}function v5(r,a){if(r==="click")return Cf(a)}function _5(r,a){if(r==="input"||r==="change")return Cf(a)}function w5(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var os=typeof Object.is=="function"?Object.is:w5;function Hu(r,a){if(os(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),u=Object.keys(a);if(c.length!==u.length)return!1;for(u=0;u<c.length;u++){var g=c[u];if(!$t.call(a,g)||!os(r[g],a[g]))return!1}return!0}function Ew(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Sw(r,a){var c=Ew(r);r=0;for(var u;c;){if(c.nodeType===3){if(u=r+c.textContent.length,r<=a&&u>=a)return{node:c,offset:a-r};r=u}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ew(c)}}function Aw(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Aw(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function kw(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=vr(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=vr(r.document)}return a}function t0(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var T5=ws&&"documentMode"in document&&11>=document.documentMode,Nl=null,n0=null,$u=null,s0=!1;function Nw(r,a,c){var u=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;s0||Nl==null||Nl!==vr(u)||(u=Nl,"selectionStart"in u&&t0(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$u&&Hu($u,u)||($u=u,u=xm(n0,"onSelect"),0<u.length&&(a=new Tr("onSelect","select",null,a,c),r.push({event:a,listeners:u}),a.target=Nl)))}function po(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var Il={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionrun:po("Transition","TransitionRun"),transitionstart:po("Transition","TransitionStart"),transitioncancel:po("Transition","TransitionCancel"),transitionend:po("Transition","TransitionEnd")},r0={},Iw={};ws&&(Iw=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function go(r){if(r0[r])return r0[r];if(!Il[r])return r;var a=Il[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in Iw)return r0[r]=a[c];return r}var Cw=go("animationend"),Rw=go("animationiteration"),jw=go("animationstart"),E5=go("transitionrun"),S5=go("transitionstart"),A5=go("transitioncancel"),Dw=go("transitionend"),Pw=new Map,i0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");i0.push("scrollEnd");function $s(r,a){Pw.set(r,a),xr(a,[r])}var Rf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Es=[],Cl=0,a0=0;function jf(){for(var r=Cl,a=a0=Cl=0;a<r;){var c=Es[a];Es[a++]=null;var u=Es[a];Es[a++]=null;var g=Es[a];Es[a++]=null;var x=Es[a];if(Es[a++]=null,u!==null&&g!==null){var w=u.pending;w===null?g.next=g:(g.next=w.next,w.next=g),u.pending=g}x!==0&&Vw(c,g,x)}}function Df(r,a,c,u){Es[Cl++]=r,Es[Cl++]=a,Es[Cl++]=c,Es[Cl++]=u,a0|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function o0(r,a,c,u){return Df(r,a,c,u),Pf(r)}function yo(r,a){return Df(r,null,null,a),Pf(r)}function Vw(r,a,c){r.lanes|=c;var u=r.alternate;u!==null&&(u.lanes|=c);for(var g=!1,x=r.return;x!==null;)x.childLanes|=c,u=x.alternate,u!==null&&(u.childLanes|=c),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(g=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,g&&a!==null&&(g=31-Ut(c),r=x.hiddenUpdates,u=r[g],u===null?r[g]=[a]:u.push(a),a.lane=c|536870912),x):null}function Pf(r){if(50<md)throw md=0,gy=null,Error(s(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Rl={};function k5(r,a,c,u){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(r,a,c,u){return new k5(r,a,c,u)}function l0(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Jr(r,a){var c=r.alternate;return c===null?(c=ls(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Mw(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Vf(r,a,c,u,g,x){var w=0;if(u=r,typeof r=="function")l0(r)&&(w=1);else if(typeof r=="string")w=j4(r,c,se.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case A:return r=ls(31,c,a,g),r.elementType=A,r.lanes=x,r;case I:return xo(c.children,g,x,a);case j:w=8,g|=24;break;case P:return r=ls(12,c,a,g|2),r.elementType=P,r.lanes=x,r;case te:return r=ls(13,c,a,g),r.elementType=te,r.lanes=x,r;case ce:return r=ls(19,c,a,g),r.elementType=ce,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:w=10;break e;case L:w=9;break e;case $:w=11;break e;case D:w=14;break e;case S:w=16,u=null;break e}w=29,c=Error(s(130,r===null?"null":typeof r,"")),u=null}return a=ls(w,c,a,g),a.elementType=r,a.type=u,a.lanes=x,a}function xo(r,a,c,u){return r=ls(7,r,u,a),r.lanes=c,r}function c0(r,a,c){return r=ls(6,r,null,a),r.lanes=c,r}function Ow(r){var a=ls(18,null,null,0);return a.stateNode=r,a}function u0(r,a,c){return a=ls(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Lw=new WeakMap;function Ss(r,a){if(typeof r=="object"&&r!==null){var c=Lw.get(r);return c!==void 0?c:(a={value:r,source:a,stack:Tu(a)},Lw.set(r,a),a)}return{value:r,source:a,stack:Tu(a)}}var jl=[],Dl=0,Mf=null,Ku=0,As=[],ks=0,Ki=null,kr=1,Nr="";function Zr(r,a){jl[Dl++]=Ku,jl[Dl++]=Mf,Mf=r,Ku=a}function Uw(r,a,c){As[ks++]=kr,As[ks++]=Nr,As[ks++]=Ki,Ki=r;var u=kr;r=Nr;var g=32-Ut(u)-1;u&=~(1<<g),c+=1;var x=32-Ut(a)+g;if(30<x){var w=g-g%5;x=(u&(1<<w)-1).toString(32),u>>=w,g-=w,kr=1<<32-Ut(a)+g|c<<g|u,Nr=x+r}else kr=1<<x|c<<g|u,Nr=r}function d0(r){r.return!==null&&(Zr(r,1),Uw(r,1,0))}function h0(r){for(;r===Mf;)Mf=jl[--Dl],jl[Dl]=null,Ku=jl[--Dl],jl[Dl]=null;for(;r===Ki;)Ki=As[--ks],As[ks]=null,Nr=As[--ks],As[ks]=null,kr=As[--ks],As[ks]=null}function zw(r,a){As[ks++]=kr,As[ks++]=Nr,As[ks++]=Ki,kr=a.id,Nr=a.overflow,Ki=r}var Tn=null,wt=null,Ze=!1,Qi=null,Ns=!1,f0=Error(s(519));function Yi(r){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qu(Ss(a,r)),f0}function Bw(r){var a=r.stateNode,c=r.type,u=r.memoizedProps;switch(a[Qt]=r,a[fn]=u,c){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(c=0;c<gd.length;c++)Qe(gd[c],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),pf(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),zi(a,u.value,u.defaultValue,u.children)}c=u.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||u.suppressHydrationWarning===!0||rE(a.textContent,c)?(u.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),u.onScroll!=null&&Qe("scroll",a),u.onScrollEnd!=null&&Qe("scrollend",a),u.onClick!=null&&(a.onclick=Bs),a=!0):a=!1,a||Yi(r,!0)}function Fw(r){for(Tn=r.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:Ns=!1;return;case 27:case 3:Ns=!0;return;default:Tn=Tn.return}}function Pl(r){if(r!==Tn)return!1;if(!Ze)return Fw(r),Ze=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||Ry(r.type,r.memoizedProps)),c=!c),c&&wt&&Yi(r),Fw(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));wt=fE(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));wt=fE(r)}else a===27?(a=wt,ca(r.type)?(r=My,My=null,wt=r):wt=a):wt=Tn?Cs(r.stateNode.nextSibling):null;return!0}function bo(){wt=Tn=null,Ze=!1}function m0(){var r=Qi;return r!==null&&(Qn===null?Qn=r:Qn.push.apply(Qn,r),Qi=null),r}function Qu(r){Qi===null?Qi=[r]:Qi.push(r)}var p0=M(null),vo=null,ei=null;function Xi(r,a,c){Q(p0,a._currentValue),a._currentValue=c}function ti(r){r._currentValue=p0.current,H(p0)}function g0(r,a,c){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===c)break;r=r.return}}function y0(r,a,c,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var x=g.dependencies;if(x!==null){var w=g.child;x=x.firstContext;e:for(;x!==null;){var N=x;x=g;for(var B=0;B<a.length;B++)if(N.context===a[B]){x.lanes|=c,N=x.alternate,N!==null&&(N.lanes|=c),g0(x.return,c,r),u||(w=null);break e}x=N.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(s(341));w.lanes|=c,x=w.alternate,x!==null&&(x.lanes|=c),g0(w,c,r),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===r){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function Vl(r,a,c,u){r=null;for(var g=a,x=!1;g!==null;){if(!x){if((g.flags&524288)!==0)x=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var N=g.type;os(g.pendingProps.value,w.value)||(r!==null?r.push(N):r=[N])}}else if(g===we.current){if(w=g.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(_d):r=[_d])}g=g.return}r!==null&&y0(a,r,c,u),a.flags|=262144}function Of(r){for(r=r.firstContext;r!==null;){if(!os(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function _o(r){vo=r,ei=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function En(r){return qw(vo,r)}function Lf(r,a){return vo===null&&_o(r),qw(r,a)}function qw(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},ei===null){if(r===null)throw Error(s(308));ei=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else ei=ei.next=a;return c}var N5=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},I5=n.unstable_scheduleCallback,C5=n.unstable_NormalPriority,Wt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function x0(){return{controller:new N5,data:new Map,refCount:0}}function Yu(r){r.refCount--,r.refCount===0&&I5(C5,function(){r.controller.abort()})}var Xu=null,b0=0,Ml=0,Ol=null;function R5(r,a){if(Xu===null){var c=Xu=[];b0=0,Ml=wy(),Ol={status:"pending",value:void 0,then:function(u){c.push(u)}}}return b0++,a.then(Gw,Gw),a}function Gw(){if(--b0===0&&Xu!==null){Ol!==null&&(Ol.status="fulfilled");var r=Xu;Xu=null,Ml=0,Ol=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function j5(r,a){var c=[],u={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(u.status="rejected",u.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),u}var Hw=F.S;F.S=function(r,a){NT=On(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&R5(r,a),Hw!==null&&Hw(r,a)};var wo=M(null);function v0(){var r=wo.current;return r!==null?r:bt.pooledCache}function Uf(r,a){a===null?Q(wo,wo.current):Q(wo,a.pool)}function $w(){var r=v0();return r===null?null:{parent:Wt._currentValue,pool:r}}var Ll=Error(s(460)),_0=Error(s(474)),zf=Error(s(542)),Bf={then:function(){}};function Kw(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Qw(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(Bs,Bs),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Xw(r),r;default:if(typeof a.status=="string")a.then(Bs,Bs);else{if(r=bt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=u}},function(u){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Xw(r),r}throw Eo=a,Ll}}function To(r){try{var a=r._init;return a(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Eo=c,Ll):c}}var Eo=null;function Yw(){if(Eo===null)throw Error(s(459));var r=Eo;return Eo=null,r}function Xw(r){if(r===Ll||r===zf)throw Error(s(483))}var Ul=null,Wu=0;function Ff(r){var a=Wu;return Wu+=1,Ul===null&&(Ul=[]),Qw(Ul,r,a)}function Ju(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function qf(r,a){throw a.$$typeof===v?Error(s(525)):(r=Object.prototype.toString.call(a),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Ww(r){function a(K,G){if(r){var W=K.deletions;W===null?(K.deletions=[G],K.flags|=16):W.push(G)}}function c(K,G){if(!r)return null;for(;G!==null;)a(K,G),G=G.sibling;return null}function u(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function g(K,G){return K=Jr(K,G),K.index=0,K.sibling=null,K}function x(K,G,W){return K.index=W,r?(W=K.alternate,W!==null?(W=W.index,W<G?(K.flags|=67108866,G):W):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function w(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function N(K,G,W,ue){return G===null||G.tag!==6?(G=c0(W,K.mode,ue),G.return=K,G):(G=g(G,W),G.return=K,G)}function B(K,G,W,ue){var De=W.type;return De===I?le(K,G,W.props.children,ue,W.key):G!==null&&(G.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===S&&To(De)===G.type)?(G=g(G,W.props),Ju(G,W),G.return=K,G):(G=Vf(W.type,W.key,W.props,null,K.mode,ue),Ju(G,W),G.return=K,G)}function J(K,G,W,ue){return G===null||G.tag!==4||G.stateNode.containerInfo!==W.containerInfo||G.stateNode.implementation!==W.implementation?(G=u0(W,K.mode,ue),G.return=K,G):(G=g(G,W.children||[]),G.return=K,G)}function le(K,G,W,ue,De){return G===null||G.tag!==7?(G=xo(W,K.mode,ue,De),G.return=K,G):(G=g(G,W),G.return=K,G)}function he(K,G,W){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=c0(""+G,K.mode,W),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return W=Vf(G.type,G.key,G.props,null,K.mode,W),Ju(W,G),W.return=K,W;case k:return G=u0(G,K.mode,W),G.return=K,G;case S:return G=To(G),he(K,G,W)}if(Ve(G)||q(G))return G=xo(G,K.mode,W,null),G.return=K,G;if(typeof G.then=="function")return he(K,Ff(G),W);if(G.$$typeof===z)return he(K,Lf(K,G),W);qf(K,G)}return null}function ee(K,G,W,ue){var De=G!==null?G.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return De!==null?null:N(K,G,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case T:return W.key===De?B(K,G,W,ue):null;case k:return W.key===De?J(K,G,W,ue):null;case S:return W=To(W),ee(K,G,W,ue)}if(Ve(W)||q(W))return De!==null?null:le(K,G,W,ue,null);if(typeof W.then=="function")return ee(K,G,Ff(W),ue);if(W.$$typeof===z)return ee(K,G,Lf(K,W),ue);qf(K,W)}return null}function ae(K,G,W,ue,De){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return K=K.get(W)||null,N(G,K,""+ue,De);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:return K=K.get(ue.key===null?W:ue.key)||null,B(G,K,ue,De);case k:return K=K.get(ue.key===null?W:ue.key)||null,J(G,K,ue,De);case S:return ue=To(ue),ae(K,G,W,ue,De)}if(Ve(ue)||q(ue))return K=K.get(W)||null,le(G,K,ue,De,null);if(typeof ue.then=="function")return ae(K,G,W,Ff(ue),De);if(ue.$$typeof===z)return ae(K,G,W,Lf(G,ue),De);qf(G,ue)}return null}function Se(K,G,W,ue){for(var De=null,nt=null,Re=G,qe=G=0,Xe=null;Re!==null&&qe<W.length;qe++){Re.index>qe?(Xe=Re,Re=null):Xe=Re.sibling;var st=ee(K,Re,W[qe],ue);if(st===null){Re===null&&(Re=Xe);break}r&&Re&&st.alternate===null&&a(K,Re),G=x(st,G,qe),nt===null?De=st:nt.sibling=st,nt=st,Re=Xe}if(qe===W.length)return c(K,Re),Ze&&Zr(K,qe),De;if(Re===null){for(;qe<W.length;qe++)Re=he(K,W[qe],ue),Re!==null&&(G=x(Re,G,qe),nt===null?De=Re:nt.sibling=Re,nt=Re);return Ze&&Zr(K,qe),De}for(Re=u(Re);qe<W.length;qe++)Xe=ae(Re,K,qe,W[qe],ue),Xe!==null&&(r&&Xe.alternate!==null&&Re.delete(Xe.key===null?qe:Xe.key),G=x(Xe,G,qe),nt===null?De=Xe:nt.sibling=Xe,nt=Xe);return r&&Re.forEach(function(ma){return a(K,ma)}),Ze&&Zr(K,qe),De}function Me(K,G,W,ue){if(W==null)throw Error(s(151));for(var De=null,nt=null,Re=G,qe=G=0,Xe=null,st=W.next();Re!==null&&!st.done;qe++,st=W.next()){Re.index>qe?(Xe=Re,Re=null):Xe=Re.sibling;var ma=ee(K,Re,st.value,ue);if(ma===null){Re===null&&(Re=Xe);break}r&&Re&&ma.alternate===null&&a(K,Re),G=x(ma,G,qe),nt===null?De=ma:nt.sibling=ma,nt=ma,Re=Xe}if(st.done)return c(K,Re),Ze&&Zr(K,qe),De;if(Re===null){for(;!st.done;qe++,st=W.next())st=he(K,st.value,ue),st!==null&&(G=x(st,G,qe),nt===null?De=st:nt.sibling=st,nt=st);return Ze&&Zr(K,qe),De}for(Re=u(Re);!st.done;qe++,st=W.next())st=ae(Re,K,qe,st.value,ue),st!==null&&(r&&st.alternate!==null&&Re.delete(st.key===null?qe:st.key),G=x(st,G,qe),nt===null?De=st:nt.sibling=st,nt=st);return r&&Re.forEach(function(q4){return a(K,q4)}),Ze&&Zr(K,qe),De}function gt(K,G,W,ue){if(typeof W=="object"&&W!==null&&W.type===I&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case T:e:{for(var De=W.key;G!==null;){if(G.key===De){if(De=W.type,De===I){if(G.tag===7){c(K,G.sibling),ue=g(G,W.props.children),ue.return=K,K=ue;break e}}else if(G.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===S&&To(De)===G.type){c(K,G.sibling),ue=g(G,W.props),Ju(ue,W),ue.return=K,K=ue;break e}c(K,G);break}else a(K,G);G=G.sibling}W.type===I?(ue=xo(W.props.children,K.mode,ue,W.key),ue.return=K,K=ue):(ue=Vf(W.type,W.key,W.props,null,K.mode,ue),Ju(ue,W),ue.return=K,K=ue)}return w(K);case k:e:{for(De=W.key;G!==null;){if(G.key===De)if(G.tag===4&&G.stateNode.containerInfo===W.containerInfo&&G.stateNode.implementation===W.implementation){c(K,G.sibling),ue=g(G,W.children||[]),ue.return=K,K=ue;break e}else{c(K,G);break}else a(K,G);G=G.sibling}ue=u0(W,K.mode,ue),ue.return=K,K=ue}return w(K);case S:return W=To(W),gt(K,G,W,ue)}if(Ve(W))return Se(K,G,W,ue);if(q(W)){if(De=q(W),typeof De!="function")throw Error(s(150));return W=De.call(W),Me(K,G,W,ue)}if(typeof W.then=="function")return gt(K,G,Ff(W),ue);if(W.$$typeof===z)return gt(K,G,Lf(K,W),ue);qf(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,G!==null&&G.tag===6?(c(K,G.sibling),ue=g(G,W),ue.return=K,K=ue):(c(K,G),ue=c0(W,K.mode,ue),ue.return=K,K=ue),w(K)):c(K,G)}return function(K,G,W,ue){try{Wu=0;var De=gt(K,G,W,ue);return Ul=null,De}catch(Re){if(Re===Ll||Re===zf)throw Re;var nt=ls(29,Re,null,K.mode);return nt.lanes=ue,nt.return=K,nt}}}var So=Ww(!0),Jw=Ww(!1),Wi=!1;function w0(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function T0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ji(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Zi(r,a,c){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(it&2)!==0){var g=u.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),u.pending=a,a=Pf(r),Vw(r,null,c),a}return Df(r,u,a,c),Pf(r)}function Zu(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var u=a.lanes;u&=r.pendingLanes,c|=u,a.lanes=c,Au(r,c)}}function E0(r,a){var c=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,c===u)){var g=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?g=x=w:x=x.next=w,c=c.next}while(c!==null);x===null?g=x=a:x=x.next=a}else g=x=a;c={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var S0=!1;function ed(){if(S0){var r=Ol;if(r!==null)throw r}}function td(r,a,c,u){S0=!1;var g=r.updateQueue;Wi=!1;var x=g.firstBaseUpdate,w=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var B=N,J=B.next;B.next=null,w===null?x=J:w.next=J,w=B;var le=r.alternate;le!==null&&(le=le.updateQueue,N=le.lastBaseUpdate,N!==w&&(N===null?le.firstBaseUpdate=J:N.next=J,le.lastBaseUpdate=B))}if(x!==null){var he=g.baseState;w=0,le=J=B=null,N=x;do{var ee=N.lane&-536870913,ae=ee!==N.lane;if(ae?(Ye&ee)===ee:(u&ee)===ee){ee!==0&&ee===Ml&&(S0=!0),le!==null&&(le=le.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Se=r,Me=N;ee=a;var gt=c;switch(Me.tag){case 1:if(Se=Me.payload,typeof Se=="function"){he=Se.call(gt,he,ee);break e}he=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Me.payload,ee=typeof Se=="function"?Se.call(gt,he,ee):Se,ee==null)break e;he=b({},he,ee);break e;case 2:Wi=!0}}ee=N.callback,ee!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:N.tag,payload:N.payload,callback:N.callback,next:null},le===null?(J=le=ae,B=he):le=le.next=ae,w|=ee;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;ae=N,N=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);le===null&&(B=he),g.baseState=B,g.firstBaseUpdate=J,g.lastBaseUpdate=le,x===null&&(g.shared.lanes=0),ra|=w,r.lanes=w,r.memoizedState=he}}function Zw(r,a){if(typeof r!="function")throw Error(s(191,r));r.call(a)}function e1(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)Zw(c[r],a)}var zl=M(null),Gf=M(0);function t1(r,a){r=ui,Q(Gf,r),Q(zl,a),ui=r|a.baseLanes}function A0(){Q(Gf,ui),Q(zl,zl.current)}function k0(){ui=Gf.current,H(zl),H(Gf)}var cs=M(null),Is=null;function ea(r){var a=r.alternate;Q(Bt,Bt.current&1),Q(cs,r),Is===null&&(a===null||zl.current!==null||a.memoizedState!==null)&&(Is=r)}function N0(r){Q(Bt,Bt.current),Q(cs,r),Is===null&&(Is=r)}function n1(r){r.tag===22?(Q(Bt,Bt.current),Q(cs,r),Is===null&&(Is=r)):ta()}function ta(){Q(Bt,Bt.current),Q(cs,cs.current)}function us(r){H(cs),Is===r&&(Is=null),H(Bt)}var Bt=M(0);function Hf(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Py(c)||Vy(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ni=0,Fe=null,mt=null,Jt=null,$f=!1,Bl=!1,Ao=!1,Kf=0,nd=0,Fl=null,D5=0;function Vt(){throw Error(s(321))}function I0(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!os(r[c],a[c]))return!1;return!0}function C0(r,a,c,u,g,x){return ni=x,Fe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=r===null||r.memoizedState===null?U1:H0,Ao=!1,x=c(u,g),Ao=!1,Bl&&(x=r1(a,c,u,g)),s1(r),x}function s1(r){F.H=id;var a=mt!==null&&mt.next!==null;if(ni=0,Jt=mt=Fe=null,$f=!1,nd=0,Fl=null,a)throw Error(s(300));r===null||Zt||(r=r.dependencies,r!==null&&Of(r)&&(Zt=!0))}function r1(r,a,c,u){Fe=r;var g=0;do{if(Bl&&(Fl=null),nd=0,Bl=!1,25<=g)throw Error(s(301));if(g+=1,Jt=mt=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}F.H=z1,x=a(c,u)}while(Bl);return x}function P5(){var r=F.H,a=r.useState()[0];return a=typeof a.then=="function"?sd(a):a,r=r.useState()[0],(mt!==null?mt.memoizedState:null)!==r&&(Fe.flags|=1024),a}function R0(){var r=Kf!==0;return Kf=0,r}function j0(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function D0(r){if($f){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}$f=!1}ni=0,Jt=mt=Fe=null,Bl=!1,nd=Kf=0,Fl=null}function Un(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Fe.memoizedState=Jt=r:Jt=Jt.next=r,Jt}function Ft(){if(mt===null){var r=Fe.alternate;r=r!==null?r.memoizedState:null}else r=mt.next;var a=Jt===null?Fe.memoizedState:Jt.next;if(a!==null)Jt=a,mt=r;else{if(r===null)throw Fe.alternate===null?Error(s(467)):Error(s(310));mt=r,r={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Jt===null?Fe.memoizedState=Jt=r:Jt=Jt.next=r}return Jt}function Qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sd(r){var a=nd;return nd+=1,Fl===null&&(Fl=[]),r=Qw(Fl,r,a),a=Fe,(Jt===null?a.memoizedState:Jt.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?U1:H0),r}function Yf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return sd(r);if(r.$$typeof===z)return En(r)}throw Error(s(438,String(r)))}function P0(r){var a=null,c=Fe.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var u=Fe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Qf(),Fe.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),u=0;u<r;u++)c[u]=O;return a.index++,c}function si(r,a){return typeof a=="function"?a(r):a}function Xf(r){var a=Ft();return V0(a,mt,r)}function V0(r,a,c){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=c;var g=r.baseQueue,x=u.pending;if(x!==null){if(g!==null){var w=g.next;g.next=x.next,x.next=w}a.baseQueue=g=x,u.pending=null}if(x=r.baseState,g===null)r.memoizedState=x;else{a=g.next;var N=w=null,B=null,J=a,le=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(Ye&he)===he:(ni&he)===he){var ee=J.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===Ml&&(le=!0);else if((ni&ee)===ee){J=J.next,ee===Ml&&(le=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},B===null?(N=B=he,w=x):B=B.next=he,Fe.lanes|=ee,ra|=ee;he=J.action,Ao&&c(x,he),x=J.hasEagerState?J.eagerState:c(x,he)}else ee={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},B===null?(N=B=ee,w=x):B=B.next=ee,Fe.lanes|=he,ra|=he;J=J.next}while(J!==null&&J!==a);if(B===null?w=x:B.next=N,!os(x,r.memoizedState)&&(Zt=!0,le&&(c=Ol,c!==null)))throw c;r.memoizedState=x,r.baseState=w,r.baseQueue=B,u.lastRenderedState=x}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function M0(r){var a=Ft(),c=a.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var u=c.dispatch,g=c.pending,x=a.memoizedState;if(g!==null){c.pending=null;var w=g=g.next;do x=r(x,w.action),w=w.next;while(w!==g);os(x,a.memoizedState)||(Zt=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),c.lastRenderedState=x}return[x,u]}function i1(r,a,c){var u=Fe,g=Ft(),x=Ze;if(x){if(c===void 0)throw Error(s(407));c=c()}else c=a();var w=!os((mt||g).memoizedState,c);if(w&&(g.memoizedState=c,Zt=!0),g=g.queue,U0(l1.bind(null,u,g,r),[r]),g.getSnapshot!==a||w||Jt!==null&&Jt.memoizedState.tag&1){if(u.flags|=2048,ql(9,{destroy:void 0},o1.bind(null,u,g,c,a),null),bt===null)throw Error(s(349));x||(ni&127)!==0||a1(u,a,c)}return c}function a1(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Fe.updateQueue,a===null?(a=Qf(),Fe.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function o1(r,a,c,u){a.value=c,a.getSnapshot=u,c1(a)&&u1(r)}function l1(r,a,c){return c(function(){c1(a)&&u1(r)})}function c1(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!os(r,c)}catch{return!0}}function u1(r){var a=yo(r,2);a!==null&&Yn(a,r,2)}function O0(r){var a=Un();if(typeof r=="function"){var c=r;if(r=c(),Ao){bs(!0);try{c()}finally{bs(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:r},a}function d1(r,a,c,u){return r.baseState=c,V0(r,mt,typeof u=="function"?u:si)}function V5(r,a,c,u,g){if(Zf(r))throw Error(s(485));if(r=a.action,r!==null){var x={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){x.listeners.push(w)}};F.T!==null?c(!0):x.isTransition=!1,u(x),c=a.pending,c===null?(x.next=a.pending=x,h1(a,x)):(x.next=c.next,a.pending=c.next=x)}}function h1(r,a){var c=a.action,u=a.payload,g=r.state;if(a.isTransition){var x=F.T,w={};F.T=w;try{var N=c(g,u),B=F.S;B!==null&&B(w,N),f1(r,a,N)}catch(J){L0(r,a,J)}finally{x!==null&&w.types!==null&&(x.types=w.types),F.T=x}}else try{x=c(g,u),f1(r,a,x)}catch(J){L0(r,a,J)}}function f1(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(u){m1(r,a,u)},function(u){return L0(r,a,u)}):m1(r,a,c)}function m1(r,a,c){a.status="fulfilled",a.value=c,p1(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,h1(r,c)))}function L0(r,a,c){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=c,p1(a),a=a.next;while(a!==u)}r.action=null}function p1(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function g1(r,a){return a}function y1(r,a){if(Ze){var c=bt.formState;if(c!==null){e:{var u=Fe;if(Ze){if(wt){t:{for(var g=wt,x=Ns;g.nodeType!==8;){if(!x){g=null;break t}if(g=Cs(g.nextSibling),g===null){g=null;break t}}x=g.data,g=x==="F!"||x==="F"?g:null}if(g){wt=Cs(g.nextSibling),u=g.data==="F!";break e}}Yi(u)}u=!1}u&&(a=c[0])}}return c=Un(),c.memoizedState=c.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g1,lastRenderedState:a},c.queue=u,c=M1.bind(null,Fe,u),u.dispatch=c,u=O0(!1),x=G0.bind(null,Fe,!1,u.queue),u=Un(),g={state:a,dispatch:null,action:r,pending:null},u.queue=g,c=V5.bind(null,Fe,g,x,c),g.dispatch=c,u.memoizedState=r,[a,c,!1]}function x1(r){var a=Ft();return b1(a,mt,r)}function b1(r,a,c){if(a=V0(r,a,g1)[0],r=Xf(si)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=sd(a)}catch(w){throw w===Ll?zf:w}else u=a;a=Ft();var g=a.queue,x=g.dispatch;return c!==a.memoizedState&&(Fe.flags|=2048,ql(9,{destroy:void 0},M5.bind(null,g,c),null)),[u,x,r]}function M5(r,a){r.action=a}function v1(r){var a=Ft(),c=mt;if(c!==null)return b1(a,c,r);Ft(),a=a.memoizedState,c=Ft();var u=c.queue.dispatch;return c.memoizedState=r,[a,u,!1]}function ql(r,a,c,u){return r={tag:r,create:c,deps:u,inst:a,next:null},a=Fe.updateQueue,a===null&&(a=Qf(),Fe.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(u=c.next,c.next=r,r.next=u,a.lastEffect=r),r}function _1(){return Ft().memoizedState}function Wf(r,a,c,u){var g=Un();Fe.flags|=r,g.memoizedState=ql(1|a,{destroy:void 0},c,u===void 0?null:u)}function Jf(r,a,c,u){var g=Ft();u=u===void 0?null:u;var x=g.memoizedState.inst;mt!==null&&u!==null&&I0(u,mt.memoizedState.deps)?g.memoizedState=ql(a,x,c,u):(Fe.flags|=r,g.memoizedState=ql(1|a,x,c,u))}function w1(r,a){Wf(8390656,8,r,a)}function U0(r,a){Jf(2048,8,r,a)}function O5(r){Fe.flags|=4;var a=Fe.updateQueue;if(a===null)a=Qf(),Fe.updateQueue=a,a.events=[r];else{var c=a.events;c===null?a.events=[r]:c.push(r)}}function T1(r){var a=Ft().memoizedState;return O5({ref:a,nextImpl:r}),function(){if((it&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function E1(r,a){return Jf(4,2,r,a)}function S1(r,a){return Jf(4,4,r,a)}function A1(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function k1(r,a,c){c=c!=null?c.concat([r]):null,Jf(4,4,A1.bind(null,a,r),c)}function z0(){}function N1(r,a){var c=Ft();a=a===void 0?null:a;var u=c.memoizedState;return a!==null&&I0(a,u[1])?u[0]:(c.memoizedState=[r,a],r)}function I1(r,a){var c=Ft();a=a===void 0?null:a;var u=c.memoizedState;if(a!==null&&I0(a,u[1]))return u[0];if(u=r(),Ao){bs(!0);try{r()}finally{bs(!1)}}return c.memoizedState=[u,a],u}function B0(r,a,c){return c===void 0||(ni&1073741824)!==0&&(Ye&261930)===0?r.memoizedState=a:(r.memoizedState=c,r=CT(),Fe.lanes|=r,ra|=r,c)}function C1(r,a,c,u){return os(c,a)?c:zl.current!==null?(r=B0(r,c,u),os(r,a)||(Zt=!0),r):(ni&42)===0||(ni&1073741824)!==0&&(Ye&261930)===0?(Zt=!0,r.memoizedState=c):(r=CT(),Fe.lanes|=r,ra|=r,a)}function R1(r,a,c,u,g){var x=ie.p;ie.p=x!==0&&8>x?x:8;var w=F.T,N={};F.T=N,G0(r,!1,a,c);try{var B=g(),J=F.S;if(J!==null&&J(N,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var le=j5(B,u);rd(r,a,le,fs(r))}else rd(r,a,u,fs(r))}catch(he){rd(r,a,{then:function(){},status:"rejected",reason:he},fs())}finally{ie.p=x,w!==null&&N.types!==null&&(w.types=N.types),F.T=w}}function L5(){}function F0(r,a,c,u){if(r.tag!==5)throw Error(s(476));var g=j1(r).queue;R1(r,g,a,ne,c===null?L5:function(){return D1(r),c(u)})}function j1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:ne},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function D1(r){var a=j1(r);a.next===null&&(a=r.alternate.memoizedState),rd(r,a.next.queue,{},fs())}function q0(){return En(_d)}function P1(){return Ft().memoizedState}function V1(){return Ft().memoizedState}function U5(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=fs();r=Ji(c);var u=Zi(a,r,c);u!==null&&(Yn(u,a,c),Zu(u,a,c)),a={cache:x0()},r.payload=a;return}a=a.return}}function z5(r,a,c){var u=fs();c={lane:u,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Zf(r)?O1(a,c):(c=o0(r,a,c,u),c!==null&&(Yn(c,r,u),L1(c,a,u)))}function M1(r,a,c){var u=fs();rd(r,a,c,u)}function rd(r,a,c,u){var g={lane:u,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Zf(r))O1(a,g);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var w=a.lastRenderedState,N=x(w,c);if(g.hasEagerState=!0,g.eagerState=N,os(N,w))return Df(r,a,g,0),bt===null&&jf(),!1}catch{}if(c=o0(r,a,g,u),c!==null)return Yn(c,r,u),L1(c,a,u),!0}return!1}function G0(r,a,c,u){if(u={lane:2,revertLane:wy(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Zf(r)){if(a)throw Error(s(479))}else a=o0(r,c,u,2),a!==null&&Yn(a,r,2)}function Zf(r){var a=r.alternate;return r===Fe||a!==null&&a===Fe}function O1(r,a){Bl=$f=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function L1(r,a,c){if((c&4194048)!==0){var u=a.lanes;u&=r.pendingLanes,c|=u,a.lanes=c,Au(r,c)}}var id={readContext:En,use:Yf,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};id.useEffectEvent=Vt;var U1={readContext:En,use:Yf,useCallback:function(r,a){return Un().memoizedState=[r,a===void 0?null:a],r},useContext:En,useEffect:w1,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,Wf(4194308,4,A1.bind(null,a,r),c)},useLayoutEffect:function(r,a){return Wf(4194308,4,r,a)},useInsertionEffect:function(r,a){Wf(4,2,r,a)},useMemo:function(r,a){var c=Un();a=a===void 0?null:a;var u=r();if(Ao){bs(!0);try{r()}finally{bs(!1)}}return c.memoizedState=[u,a],u},useReducer:function(r,a,c){var u=Un();if(c!==void 0){var g=c(a);if(Ao){bs(!0);try{c(a)}finally{bs(!1)}}}else g=a;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=z5.bind(null,Fe,r),[u.memoizedState,r]},useRef:function(r){var a=Un();return r={current:r},a.memoizedState=r},useState:function(r){r=O0(r);var a=r.queue,c=M1.bind(null,Fe,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:z0,useDeferredValue:function(r,a){var c=Un();return B0(c,r,a)},useTransition:function(){var r=O0(!1);return r=R1.bind(null,Fe,r.queue,!0,!1),Un().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var u=Fe,g=Un();if(Ze){if(c===void 0)throw Error(s(407));c=c()}else{if(c=a(),bt===null)throw Error(s(349));(Ye&127)!==0||a1(u,a,c)}g.memoizedState=c;var x={value:c,getSnapshot:a};return g.queue=x,w1(l1.bind(null,u,x,r),[r]),u.flags|=2048,ql(9,{destroy:void 0},o1.bind(null,u,x,c,a),null),c},useId:function(){var r=Un(),a=bt.identifierPrefix;if(Ze){var c=Nr,u=kr;c=(u&~(1<<32-Ut(u)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Kf++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=D5++,a="_"+a+"r_"+c.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:q0,useFormState:y1,useActionState:y1,useOptimistic:function(r){var a=Un();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=G0.bind(null,Fe,!0,c),c.dispatch=a,[r,a]},useMemoCache:P0,useCacheRefresh:function(){return Un().memoizedState=U5.bind(null,Fe)},useEffectEvent:function(r){var a=Un(),c={impl:r};return a.memoizedState=c,function(){if((it&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},H0={readContext:En,use:Yf,useCallback:N1,useContext:En,useEffect:U0,useImperativeHandle:k1,useInsertionEffect:E1,useLayoutEffect:S1,useMemo:I1,useReducer:Xf,useRef:_1,useState:function(){return Xf(si)},useDebugValue:z0,useDeferredValue:function(r,a){var c=Ft();return C1(c,mt.memoizedState,r,a)},useTransition:function(){var r=Xf(si)[0],a=Ft().memoizedState;return[typeof r=="boolean"?r:sd(r),a]},useSyncExternalStore:i1,useId:P1,useHostTransitionStatus:q0,useFormState:x1,useActionState:x1,useOptimistic:function(r,a){var c=Ft();return d1(c,mt,r,a)},useMemoCache:P0,useCacheRefresh:V1};H0.useEffectEvent=T1;var z1={readContext:En,use:Yf,useCallback:N1,useContext:En,useEffect:U0,useImperativeHandle:k1,useInsertionEffect:E1,useLayoutEffect:S1,useMemo:I1,useReducer:M0,useRef:_1,useState:function(){return M0(si)},useDebugValue:z0,useDeferredValue:function(r,a){var c=Ft();return mt===null?B0(c,r,a):C1(c,mt.memoizedState,r,a)},useTransition:function(){var r=M0(si)[0],a=Ft().memoizedState;return[typeof r=="boolean"?r:sd(r),a]},useSyncExternalStore:i1,useId:P1,useHostTransitionStatus:q0,useFormState:v1,useActionState:v1,useOptimistic:function(r,a){var c=Ft();return mt!==null?d1(c,mt,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:P0,useCacheRefresh:V1};z1.useEffectEvent=T1;function $0(r,a,c,u){a=r.memoizedState,c=c(u,a),c=c==null?a:b({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var K0={enqueueSetState:function(r,a,c){r=r._reactInternals;var u=fs(),g=Ji(u);g.payload=a,c!=null&&(g.callback=c),a=Zi(r,g,u),a!==null&&(Yn(a,r,u),Zu(a,r,u))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var u=fs(),g=Ji(u);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=Zi(r,g,u),a!==null&&(Yn(a,r,u),Zu(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=fs(),u=Ji(c);u.tag=2,a!=null&&(u.callback=a),a=Zi(r,u,c),a!==null&&(Yn(a,r,c),Zu(a,r,c))}};function B1(r,a,c,u,g,x,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,x,w):a.prototype&&a.prototype.isPureReactComponent?!Hu(c,u)||!Hu(g,x):!0}function F1(r,a,c,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,u),a.state!==r&&K0.enqueueReplaceState(a,a.state,null)}function ko(r,a){var c=a;if("ref"in a){c={};for(var u in a)u!=="ref"&&(c[u]=a[u])}if(r=r.defaultProps){c===a&&(c=b({},c));for(var g in r)c[g]===void 0&&(c[g]=r[g])}return c}function q1(r){Rf(r)}function G1(r){console.error(r)}function H1(r){Rf(r)}function em(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function $1(r,a,c){try{var u=r.onCaughtError;u(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Q0(r,a,c){return c=Ji(c),c.tag=3,c.payload={element:null},c.callback=function(){em(r,a)},c}function K1(r){return r=Ji(r),r.tag=3,r}function Q1(r,a,c,u){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var x=u.value;r.payload=function(){return g(x)},r.callback=function(){$1(a,c,u)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){$1(a,c,u),typeof g!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var N=u.stack;this.componentDidCatch(u.value,{componentStack:N!==null?N:""})})}function B5(r,a,c,u,g){if(c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=c.alternate,a!==null&&Vl(a,c,g,!0),c=cs.current,c!==null){switch(c.tag){case 31:case 13:return Is===null?hm():c.alternate===null&&Mt===0&&(Mt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,u===Bf?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([u]):a.add(u),by(r,u,g)),!1;case 22:return c.flags|=65536,u===Bf?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([u]):c.add(u)),by(r,u,g)),!1}throw Error(s(435,c.tag))}return by(r,u,g),hm(),!1}if(Ze)return a=cs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,u!==f0&&(r=Error(s(422),{cause:u}),Qu(Ss(r,c)))):(u!==f0&&(a=Error(s(423),{cause:u}),Qu(Ss(a,c))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=Ss(u,c),g=Q0(r.stateNode,u,g),E0(r,g),Mt!==4&&(Mt=2)),!1;var x=Error(s(520),{cause:u});if(x=Ss(x,c),fd===null?fd=[x]:fd.push(x),Mt!==4&&(Mt=2),a===null)return!0;u=Ss(u,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=g&-g,c.lanes|=r,r=Q0(c.stateNode,u,r),E0(c,r),!1;case 1:if(a=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ia===null||!ia.has(x))))return c.flags|=65536,g&=-g,c.lanes|=g,g=K1(g),Q1(g,r,c,u),E0(c,g),!1}c=c.return}while(c!==null);return!1}var Y0=Error(s(461)),Zt=!1;function Sn(r,a,c,u){a.child=r===null?Jw(a,null,c,u):So(a,r.child,c,u)}function Y1(r,a,c,u,g){c=c.render;var x=a.ref;if("ref"in u){var w={};for(var N in u)N!=="ref"&&(w[N]=u[N])}else w=u;return _o(a),u=C0(r,a,c,w,x,g),N=R0(),r!==null&&!Zt?(j0(r,a,g),ri(r,a,g)):(Ze&&N&&d0(a),a.flags|=1,Sn(r,a,u,g),a.child)}function X1(r,a,c,u,g){if(r===null){var x=c.type;return typeof x=="function"&&!l0(x)&&x.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=x,W1(r,a,x,u,g)):(r=Vf(c.type,null,u,a,a.mode,g),r.ref=a.ref,r.return=a,a.child=r)}if(x=r.child,!sy(r,g)){var w=x.memoizedProps;if(c=c.compare,c=c!==null?c:Hu,c(w,u)&&r.ref===a.ref)return ri(r,a,g)}return a.flags|=1,r=Jr(x,u),r.ref=a.ref,r.return=a,a.child=r}function W1(r,a,c,u,g){if(r!==null){var x=r.memoizedProps;if(Hu(x,u)&&r.ref===a.ref)if(Zt=!1,a.pendingProps=u=x,sy(r,g))(r.flags&131072)!==0&&(Zt=!0);else return a.lanes=r.lanes,ri(r,a,g)}return X0(r,a,c,u,g)}function J1(r,a,c,u){var g=u.children,x=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|c:c,r!==null){for(u=a.child=r.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~x}else u=0,a.child=null;return Z1(r,a,x,c,u)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Uf(a,x!==null?x.cachePool:null),x!==null?t1(a,x):A0(),n1(a);else return u=a.lanes=536870912,Z1(r,a,x!==null?x.baseLanes|c:c,c,u)}else x!==null?(Uf(a,x.cachePool),t1(a,x),ta(),a.memoizedState=null):(r!==null&&Uf(a,null),A0(),ta());return Sn(r,a,g,c),a.child}function ad(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Z1(r,a,c,u,g){var x=v0();return x=x===null?null:{parent:Wt._currentValue,pool:x},a.memoizedState={baseLanes:c,cachePool:x},r!==null&&Uf(a,null),A0(),n1(a),r!==null&&Vl(r,a,u,!0),a.childLanes=g,null}function tm(r,a){return a=sm({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function eT(r,a,c){return So(a,r.child,null,c),r=tm(a,a.pendingProps),r.flags|=2,us(a),a.memoizedState=null,r}function F5(r,a,c){var u=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Ze){if(u.mode==="hidden")return r=tm(a,u),a.lanes=536870912,ad(null,r);if(N0(a),(r=wt)?(r=hE(r,Ns),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Ki!==null?{id:kr,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},c=Ow(r),c.return=a,a.child=c,Tn=a,wt=null)):r=null,r===null)throw Yi(a);return a.lanes=536870912,null}return tm(a,u)}var x=r.memoizedState;if(x!==null){var w=x.dehydrated;if(N0(a),g)if(a.flags&256)a.flags&=-257,a=eT(r,a,c);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(s(558));else if(Zt||Vl(r,a,c,!1),g=(c&r.childLanes)!==0,Zt||g){if(u=bt,u!==null&&(w=ku(u,c),w!==0&&w!==x.retryLane))throw x.retryLane=w,yo(r,w),Yn(u,r,w),Y0;hm(),a=eT(r,a,c)}else r=x.treeContext,wt=Cs(w.nextSibling),Tn=a,Ze=!0,Qi=null,Ns=!1,r!==null&&zw(a,r),a=tm(a,u),a.flags|=4096;return a}return r=Jr(r.child,{mode:u.mode,children:u.children}),r.ref=a.ref,a.child=r,r.return=a,r}function nm(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function X0(r,a,c,u,g){return _o(a),c=C0(r,a,c,u,void 0,g),u=R0(),r!==null&&!Zt?(j0(r,a,g),ri(r,a,g)):(Ze&&u&&d0(a),a.flags|=1,Sn(r,a,c,g),a.child)}function tT(r,a,c,u,g,x){return _o(a),a.updateQueue=null,c=r1(a,u,c,g),s1(r),u=R0(),r!==null&&!Zt?(j0(r,a,x),ri(r,a,x)):(Ze&&u&&d0(a),a.flags|=1,Sn(r,a,c,x),a.child)}function nT(r,a,c,u,g){if(_o(a),a.stateNode===null){var x=Rl,w=c.contextType;typeof w=="object"&&w!==null&&(x=En(w)),x=new c(u,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=K0,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=u,x.state=a.memoizedState,x.refs={},w0(a),w=c.contextType,x.context=typeof w=="object"&&w!==null?En(w):Rl,x.state=a.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&($0(a,c,w,u),x.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(w=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),w!==x.state&&K0.enqueueReplaceState(x,x.state,null),td(a,u,x,g),ed(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){x=a.stateNode;var N=a.memoizedProps,B=ko(c,N);x.props=B;var J=x.context,le=c.contextType;w=Rl,typeof le=="object"&&le!==null&&(w=En(le));var he=c.getDerivedStateFromProps;le=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,le||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N||J!==w)&&F1(a,x,u,w),Wi=!1;var ee=a.memoizedState;x.state=ee,td(a,u,x,g),ed(),J=a.memoizedState,N||ee!==J||Wi?(typeof he=="function"&&($0(a,c,he,u),J=a.memoizedState),(B=Wi||B1(a,c,B,u,ee,J,w))?(le||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=J),x.props=u,x.state=J,x.context=w,u=B):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{x=a.stateNode,T0(r,a),w=a.memoizedProps,le=ko(c,w),x.props=le,he=a.pendingProps,ee=x.context,J=c.contextType,B=Rl,typeof J=="object"&&J!==null&&(B=En(J)),N=c.getDerivedStateFromProps,(J=typeof N=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==he||ee!==B)&&F1(a,x,u,B),Wi=!1,ee=a.memoizedState,x.state=ee,td(a,u,x,g),ed();var ae=a.memoizedState;w!==he||ee!==ae||Wi||r!==null&&r.dependencies!==null&&Of(r.dependencies)?(typeof N=="function"&&($0(a,c,N,u),ae=a.memoizedState),(le=Wi||B1(a,c,le,u,ee,ae,B)||r!==null&&r.dependencies!==null&&Of(r.dependencies))?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,ae,B),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,ae,B)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||w===r.memoizedProps&&ee===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&ee===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ae),x.props=u,x.state=ae,x.context=B,u=le):(typeof x.componentDidUpdate!="function"||w===r.memoizedProps&&ee===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&ee===r.memoizedState||(a.flags|=1024),u=!1)}return x=u,nm(r,a),u=(a.flags&128)!==0,x||u?(x=a.stateNode,c=u&&typeof c.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,r!==null&&u?(a.child=So(a,r.child,null,g),a.child=So(a,null,c,g)):Sn(r,a,c,g),a.memoizedState=x.state,r=a.child):r=ri(r,a,g),r}function sT(r,a,c,u){return bo(),a.flags|=256,Sn(r,a,c,u),a.child}var W0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function J0(r){return{baseLanes:r,cachePool:$w()}}function Z0(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=hs),r}function rT(r,a,c){var u=a.pendingProps,g=!1,x=(a.flags&128)!==0,w;if((w=x)||(w=r!==null&&r.memoizedState===null?!1:(Bt.current&2)!==0),w&&(g=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,r===null){if(Ze){if(g?ea(a):ta(),(r=wt)?(r=hE(r,Ns),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Ki!==null?{id:kr,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},c=Ow(r),c.return=a,a.child=c,Tn=a,wt=null)):r=null,r===null)throw Yi(a);return Vy(r)?a.lanes=32:a.lanes=536870912,null}var N=u.children;return u=u.fallback,g?(ta(),g=a.mode,N=sm({mode:"hidden",children:N},g),u=xo(u,g,c,null),N.return=a,u.return=a,N.sibling=u,a.child=N,u=a.child,u.memoizedState=J0(c),u.childLanes=Z0(r,w,c),a.memoizedState=W0,ad(null,u)):(ea(a),ey(a,N))}var B=r.memoizedState;if(B!==null&&(N=B.dehydrated,N!==null)){if(x)a.flags&256?(ea(a),a.flags&=-257,a=ty(r,a,c)):a.memoizedState!==null?(ta(),a.child=r.child,a.flags|=128,a=null):(ta(),N=u.fallback,g=a.mode,u=sm({mode:"visible",children:u.children},g),N=xo(N,g,c,null),N.flags|=2,u.return=a,N.return=a,u.sibling=N,a.child=u,So(a,r.child,null,c),u=a.child,u.memoizedState=J0(c),u.childLanes=Z0(r,w,c),a.memoizedState=W0,a=ad(null,u));else if(ea(a),Vy(N)){if(w=N.nextSibling&&N.nextSibling.dataset,w)var J=w.dgst;w=J,u=Error(s(419)),u.stack="",u.digest=w,Qu({value:u,source:null,stack:null}),a=ty(r,a,c)}else if(Zt||Vl(r,a,c,!1),w=(c&r.childLanes)!==0,Zt||w){if(w=bt,w!==null&&(u=ku(w,c),u!==0&&u!==B.retryLane))throw B.retryLane=u,yo(r,u),Yn(w,r,u),Y0;Py(N)||hm(),a=ty(r,a,c)}else Py(N)?(a.flags|=192,a.child=r.child,a=null):(r=B.treeContext,wt=Cs(N.nextSibling),Tn=a,Ze=!0,Qi=null,Ns=!1,r!==null&&zw(a,r),a=ey(a,u.children),a.flags|=4096);return a}return g?(ta(),N=u.fallback,g=a.mode,B=r.child,J=B.sibling,u=Jr(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,J!==null?N=Jr(J,N):(N=xo(N,g,c,null),N.flags|=2),N.return=a,u.return=a,u.sibling=N,a.child=u,ad(null,u),u=a.child,N=r.child.memoizedState,N===null?N=J0(c):(g=N.cachePool,g!==null?(B=Wt._currentValue,g=g.parent!==B?{parent:B,pool:B}:g):g=$w(),N={baseLanes:N.baseLanes|c,cachePool:g}),u.memoizedState=N,u.childLanes=Z0(r,w,c),a.memoizedState=W0,ad(r.child,u)):(ea(a),c=r.child,r=c.sibling,c=Jr(c,{mode:"visible",children:u.children}),c.return=a,c.sibling=null,r!==null&&(w=a.deletions,w===null?(a.deletions=[r],a.flags|=16):w.push(r)),a.child=c,a.memoizedState=null,c)}function ey(r,a){return a=sm({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function sm(r,a){return r=ls(22,r,null,a),r.lanes=0,r}function ty(r,a,c){return So(a,r.child,null,c),r=ey(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function iT(r,a,c){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),g0(r.return,a,c)}function ny(r,a,c,u,g,x){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:c,tailMode:g,treeForkCount:x}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=c,w.tailMode=g,w.treeForkCount=x)}function aT(r,a,c){var u=a.pendingProps,g=u.revealOrder,x=u.tail;u=u.children;var w=Bt.current,N=(w&2)!==0;if(N?(w=w&1|2,a.flags|=128):w&=1,Q(Bt,w),Sn(r,a,u,c),u=Ze?Ku:0,!N&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&iT(r,c,a);else if(r.tag===19)iT(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)r=c.alternate,r!==null&&Hf(r)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),ny(a,!1,g,c,x,u);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(r=g.alternate,r!==null&&Hf(r)===null){a.child=g;break}r=g.sibling,g.sibling=c,c=g,g=r}ny(a,!0,c,null,x,u);break;case"together":ny(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function ri(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),ra|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(Vl(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(s(153));if(a.child!==null){for(r=a.child,c=Jr(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Jr(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function sy(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Of(r)))}function q5(r,a,c){switch(a.tag){case 3:pe(a,a.stateNode.containerInfo),Xi(a,Wt,r.memoizedState.cache),bo();break;case 27:case 5:tt(a);break;case 4:pe(a,a.stateNode.containerInfo);break;case 10:Xi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,N0(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(ea(a),a.flags|=128,null):(c&a.child.childLanes)!==0?rT(r,a,c):(ea(a),r=ri(r,a,c),r!==null?r.sibling:null);ea(a);break;case 19:var g=(r.flags&128)!==0;if(u=(c&a.childLanes)!==0,u||(Vl(r,a,c,!1),u=(c&a.childLanes)!==0),g){if(u)return aT(r,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Q(Bt,Bt.current),u)break;return null;case 22:return a.lanes=0,J1(r,a,c,a.pendingProps);case 24:Xi(a,Wt,r.memoizedState.cache)}return ri(r,a,c)}function oT(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)Zt=!0;else{if(!sy(r,c)&&(a.flags&128)===0)return Zt=!1,q5(r,a,c);Zt=(r.flags&131072)!==0}else Zt=!1,Ze&&(a.flags&1048576)!==0&&Uw(a,Ku,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(r=To(a.elementType),a.type=r,typeof r=="function")l0(r)?(u=ko(r,u),a.tag=1,a=nT(null,a,r,u,c)):(a.tag=0,a=X0(null,a,r,u,c));else{if(r!=null){var g=r.$$typeof;if(g===$){a.tag=11,a=Y1(null,a,r,u,c);break e}else if(g===D){a.tag=14,a=X1(null,a,r,u,c);break e}}throw a=Pe(r)||r,Error(s(306,a,""))}}return a;case 0:return X0(r,a,a.type,a.pendingProps,c);case 1:return u=a.type,g=ko(u,a.pendingProps),nT(r,a,u,g,c);case 3:e:{if(pe(a,a.stateNode.containerInfo),r===null)throw Error(s(387));u=a.pendingProps;var x=a.memoizedState;g=x.element,T0(r,a),td(a,u,null,c);var w=a.memoizedState;if(u=w.cache,Xi(a,Wt,u),u!==x.cache&&y0(a,[Wt],c,!0),ed(),u=w.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=sT(r,a,u,c);break e}else if(u!==g){g=Ss(Error(s(424)),a),Qu(g),a=sT(r,a,u,c);break e}else for(r=a.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,wt=Cs(r.firstChild),Tn=a,Ze=!0,Qi=null,Ns=!0,c=Jw(a,null,u,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(bo(),u===g){a=ri(r,a,c);break e}Sn(r,a,u,c)}a=a.child}return a;case 26:return nm(r,a),r===null?(c=xE(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ze||(c=a.type,r=a.pendingProps,u=bm(ye.current).createElement(c),u[Qt]=a,u[fn]=r,An(u,c,r),Yt(u),a.stateNode=u):a.memoizedState=xE(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return tt(a),r===null&&Ze&&(u=a.stateNode=pE(a.type,a.pendingProps,ye.current),Tn=a,Ns=!0,g=wt,ca(a.type)?(My=g,wt=Cs(u.firstChild)):wt=g),Sn(r,a,a.pendingProps.children,c),nm(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Ze&&((g=u=wt)&&(u=b4(u,a.type,a.pendingProps,Ns),u!==null?(a.stateNode=u,Tn=a,wt=Cs(u.firstChild),Ns=!1,g=!0):g=!1),g||Yi(a)),tt(a),g=a.type,x=a.pendingProps,w=r!==null?r.memoizedProps:null,u=x.children,Ry(g,x)?u=null:w!==null&&Ry(g,w)&&(a.flags|=32),a.memoizedState!==null&&(g=C0(r,a,P5,null,null,c),_d._currentValue=g),nm(r,a),Sn(r,a,u,c),a.child;case 6:return r===null&&Ze&&((r=c=wt)&&(c=v4(c,a.pendingProps,Ns),c!==null?(a.stateNode=c,Tn=a,wt=null,r=!0):r=!1),r||Yi(a)),null;case 13:return rT(r,a,c);case 4:return pe(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=So(a,null,u,c):Sn(r,a,u,c),a.child;case 11:return Y1(r,a,a.type,a.pendingProps,c);case 7:return Sn(r,a,a.pendingProps,c),a.child;case 8:return Sn(r,a,a.pendingProps.children,c),a.child;case 12:return Sn(r,a,a.pendingProps.children,c),a.child;case 10:return u=a.pendingProps,Xi(a,a.type,u.value),Sn(r,a,u.children,c),a.child;case 9:return g=a.type._context,u=a.pendingProps.children,_o(a),g=En(g),u=u(g),a.flags|=1,Sn(r,a,u,c),a.child;case 14:return X1(r,a,a.type,a.pendingProps,c);case 15:return W1(r,a,a.type,a.pendingProps,c);case 19:return aT(r,a,c);case 31:return F5(r,a,c);case 22:return J1(r,a,c,a.pendingProps);case 24:return _o(a),u=En(Wt),r===null?(g=v0(),g===null&&(g=bt,x=x0(),g.pooledCache=x,x.refCount++,x!==null&&(g.pooledCacheLanes|=c),g=x),a.memoizedState={parent:u,cache:g},w0(a),Xi(a,Wt,g)):((r.lanes&c)!==0&&(T0(r,a),td(a,null,null,c),ed()),g=r.memoizedState,x=a.memoizedState,g.parent!==u?(g={parent:u,cache:u},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Xi(a,Wt,u)):(u=x.cache,Xi(a,Wt,u),u!==g.cache&&y0(a,[Wt],c,!0))),Sn(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function ii(r){r.flags|=4}function ry(r,a,c,u,g){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(g&335544128)===g)if(r.stateNode.complete)r.flags|=8192;else if(PT())r.flags|=8192;else throw Eo=Bf,_0}else r.flags&=-16777217}function lT(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!TE(a))if(PT())r.flags|=8192;else throw Eo=Bf,_0}function rm(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?uf():536870912,r.lanes|=a,Kl|=a)}function od(r,a){if(!Ze)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var u=null;c!==null;)c.alternate!==null&&(u=c),c=c.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Tt(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,u=0;if(a)for(var g=r.child;g!==null;)c|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)c|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=c,a}function G5(r,a,c){var u=a.pendingProps;switch(h0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(a),null;case 1:return Tt(a),null;case 3:return c=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ti(Wt),Ce(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Pl(a)?ii(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,m0())),Tt(a),null;case 26:var g=a.type,x=a.memoizedState;return r===null?(ii(a),x!==null?(Tt(a),lT(a,x)):(Tt(a),ry(a,g,null,u,c))):x?x!==r.memoizedState?(ii(a),Tt(a),lT(a,x)):(Tt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==u&&ii(a),Tt(a),ry(a,g,r,u,c)),null;case 27:if(jt(a),c=ye.current,g=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&ii(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Tt(a),null}r=se.current,Pl(a)?Bw(a):(r=pE(g,u,c),a.stateNode=r,ii(a))}return Tt(a),null;case 5:if(jt(a),g=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&ii(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Tt(a),null}if(x=se.current,Pl(a))Bw(a);else{var w=bm(ye.current);switch(x){case 1:x=w.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:x=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":x=w.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":x=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":x=w.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?x.multiple=!0:u.size&&(x.size=u.size);break;default:x=typeof u.is=="string"?w.createElement(g,{is:u.is}):w.createElement(g)}}x[Qt]=a,x[fn]=u;e:for(w=a.child;w!==null;){if(w.tag===5||w.tag===6)x.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===a)break e;for(;w.sibling===null;){if(w.return===null||w.return===a)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}a.stateNode=x;e:switch(An(x,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ii(a)}}return Tt(a),ry(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,c),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&ii(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(r=ye.current,Pl(a)){if(r=a.stateNode,c=a.memoizedProps,u=null,g=Tn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[Qt]=a,r=!!(r.nodeValue===c||u!==null&&u.suppressHydrationWarning===!0||rE(r.nodeValue,c)),r||Yi(a,!0)}else r=bm(r).createTextNode(u),r[Qt]=a,a.stateNode=r}return Tt(a),null;case 31:if(c=a.memoizedState,r===null||r.memoizedState!==null){if(u=Pl(a),c!==null){if(r===null){if(!u)throw Error(s(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Qt]=a}else bo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Tt(a),r=!1}else c=m0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return a.flags&256?(us(a),a):(us(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Tt(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=Pl(a),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(s(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Qt]=a}else bo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Tt(a),g=!1}else g=m0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(us(a),a):(us(a),null)}return us(a),(a.flags&128)!==0?(a.lanes=c,a):(c=u!==null,r=r!==null&&r.memoizedState!==null,c&&(u=a.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==g&&(u.flags|=2048)),c!==r&&c&&(a.child.flags|=8192),rm(a,a.updateQueue),Tt(a),null);case 4:return Ce(),r===null&&Ay(a.stateNode.containerInfo),Tt(a),null;case 10:return ti(a.type),Tt(a),null;case 19:if(H(Bt),u=a.memoizedState,u===null)return Tt(a),null;if(g=(a.flags&128)!==0,x=u.rendering,x===null)if(g)od(u,!1);else{if(Mt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(x=Hf(r),x!==null){for(a.flags|=128,od(u,!1),r=x.updateQueue,a.updateQueue=r,rm(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)Mw(c,r),c=c.sibling;return Q(Bt,Bt.current&1|2),Ze&&Zr(a,u.treeForkCount),a.child}r=r.sibling}u.tail!==null&&On()>cm&&(a.flags|=128,g=!0,od(u,!1),a.lanes=4194304)}else{if(!g)if(r=Hf(x),r!==null){if(a.flags|=128,g=!0,r=r.updateQueue,a.updateQueue=r,rm(a,r),od(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!Ze)return Tt(a),null}else 2*On()-u.renderingStartTime>cm&&c!==536870912&&(a.flags|=128,g=!0,od(u,!1),a.lanes=4194304);u.isBackwards?(x.sibling=a.child,a.child=x):(r=u.last,r!==null?r.sibling=x:a.child=x,u.last=x)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=On(),r.sibling=null,c=Bt.current,Q(Bt,g?c&1|2:c&1),Ze&&Zr(a,u.treeForkCount),r):(Tt(a),null);case 22:case 23:return us(a),k0(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(c&536870912)!==0&&(a.flags&128)===0&&(Tt(a),a.subtreeFlags&6&&(a.flags|=8192)):Tt(a),c=a.updateQueue,c!==null&&rm(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==c&&(a.flags|=2048),r!==null&&H(wo),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ti(Wt),Tt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function H5(r,a){switch(h0(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return ti(Wt),Ce(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return jt(a),null;case 31:if(a.memoizedState!==null){if(us(a),a.alternate===null)throw Error(s(340));bo()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(us(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(s(340));bo()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return H(Bt),null;case 4:return Ce(),null;case 10:return ti(a.type),null;case 22:case 23:return us(a),k0(),r!==null&&H(wo),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return ti(Wt),null;case 25:return null;default:return null}}function cT(r,a){switch(h0(a),a.tag){case 3:ti(Wt),Ce();break;case 26:case 27:case 5:jt(a);break;case 4:Ce();break;case 31:a.memoizedState!==null&&us(a);break;case 13:us(a);break;case 19:H(Bt);break;case 10:ti(a.type);break;case 22:case 23:us(a),k0(),r!==null&&H(wo);break;case 24:ti(Wt)}}function ld(r,a){try{var c=a.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var g=u.next;c=g;do{if((c.tag&r)===r){u=void 0;var x=c.create,w=c.inst;u=x(),w.destroy=u}c=c.next}while(c!==g)}}catch(N){ct(a,a.return,N)}}function na(r,a,c){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var x=g.next;u=x;do{if((u.tag&r)===r){var w=u.inst,N=w.destroy;if(N!==void 0){w.destroy=void 0,g=a;var B=c,J=N;try{J()}catch(le){ct(g,B,le)}}}u=u.next}while(u!==x)}}catch(le){ct(a,a.return,le)}}function uT(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{e1(a,c)}catch(u){ct(r,r.return,u)}}}function dT(r,a,c){c.props=ko(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(u){ct(r,a,u)}}function cd(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof c=="function"?r.refCleanup=c(u):c.current=u}}catch(g){ct(r,a,g)}}function Ir(r,a){var c=r.ref,u=r.refCleanup;if(c!==null)if(typeof u=="function")try{u()}catch(g){ct(r,a,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){ct(r,a,g)}else c.current=null}function hT(r){var a=r.type,c=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&u.focus();break e;case"img":c.src?u.src=c.src:c.srcSet&&(u.srcset=c.srcSet)}}catch(g){ct(r,r.return,g)}}function iy(r,a,c){try{var u=r.stateNode;f4(u,r.type,c,a),u[fn]=a}catch(g){ct(r,r.return,g)}}function fT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ca(r.type)||r.tag===4}function ay(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||fT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ca(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function oy(r,a,c){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Bs));else if(u!==4&&(u===27&&ca(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(oy(r,a,c),r=r.sibling;r!==null;)oy(r,a,c),r=r.sibling}function im(r,a,c){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(u!==4&&(u===27&&ca(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(im(r,a,c),r=r.sibling;r!==null;)im(r,a,c),r=r.sibling}function mT(r){var a=r.stateNode,c=r.memoizedProps;try{for(var u=r.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);An(a,u,c),a[Qt]=r,a[fn]=c}catch(x){ct(r,r.return,x)}}var ai=!1,en=!1,ly=!1,pT=typeof WeakSet=="function"?WeakSet:Set,pn=null;function $5(r,a){if(r=r.containerInfo,Iy=Am,r=kw(r),t0(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var u=c.getSelection&&c.getSelection();if(u&&u.rangeCount!==0){c=u.anchorNode;var g=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var w=0,N=-1,B=-1,J=0,le=0,he=r,ee=null;t:for(;;){for(var ae;he!==c||g!==0&&he.nodeType!==3||(N=w+g),he!==x||u!==0&&he.nodeType!==3||(B=w+u),he.nodeType===3&&(w+=he.nodeValue.length),(ae=he.firstChild)!==null;)ee=he,he=ae;for(;;){if(he===r)break t;if(ee===c&&++J===g&&(N=w),ee===x&&++le===u&&(B=w),(ae=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=ae}c=N===-1||B===-1?null:{start:N,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Cy={focusedElem:r,selectionRange:c},Am=!1,pn=a;pn!==null;)if(a=pn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,pn=r;else for(;pn!==null;){switch(a=pn,x=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)g=r[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,c=a,g=x.memoizedProps,x=x.memoizedState,u=c.stateNode;try{var Se=ko(c.type,g);r=u.getSnapshotBeforeUpdate(Se,x),u.__reactInternalSnapshotBeforeUpdate=r}catch(Me){ct(c,c.return,Me)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)Dy(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Dy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=a.sibling,r!==null){r.return=a.return,pn=r;break}pn=a.return}}function gT(r,a,c){var u=c.flags;switch(c.tag){case 0:case 11:case 15:li(r,c),u&4&&ld(5,c);break;case 1:if(li(r,c),u&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(w){ct(c,c.return,w)}else{var g=ko(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(g,a,r.__reactInternalSnapshotBeforeUpdate)}catch(w){ct(c,c.return,w)}}u&64&&uT(c),u&512&&cd(c,c.return);break;case 3:if(li(r,c),u&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{e1(r,a)}catch(w){ct(c,c.return,w)}}break;case 27:a===null&&u&4&&mT(c);case 26:case 5:li(r,c),a===null&&u&4&&hT(c),u&512&&cd(c,c.return);break;case 12:li(r,c);break;case 31:li(r,c),u&4&&bT(r,c);break;case 13:li(r,c),u&4&&vT(r,c),u&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=t4.bind(null,c),_4(r,c))));break;case 22:if(u=c.memoizedState!==null||ai,!u){a=a!==null&&a.memoizedState!==null||en,g=ai;var x=en;ai=u,(en=a)&&!x?ci(r,c,(c.subtreeFlags&8772)!==0):li(r,c),ai=g,en=x}break;case 30:break;default:li(r,c)}}function yT(r){var a=r.alternate;a!==null&&(r.alternate=null,yT(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&yl(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var kt=null,Hn=!1;function oi(r,a,c){for(c=c.child;c!==null;)xT(r,a,c),c=c.sibling}function xT(r,a,c){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Os,c)}catch{}switch(c.tag){case 26:en||Ir(c,a),oi(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:en||Ir(c,a);var u=kt,g=Hn;ca(c.type)&&(kt=c.stateNode,Hn=!1),oi(r,a,c),xd(c.stateNode),kt=u,Hn=g;break;case 5:en||Ir(c,a);case 6:if(u=kt,g=Hn,kt=null,oi(r,a,c),kt=u,Hn=g,kt!==null)if(Hn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(c.stateNode)}catch(x){ct(c,a,x)}else try{kt.removeChild(c.stateNode)}catch(x){ct(c,a,x)}break;case 18:kt!==null&&(Hn?(r=kt,uE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),tc(r)):uE(kt,c.stateNode));break;case 4:u=kt,g=Hn,kt=c.stateNode.containerInfo,Hn=!0,oi(r,a,c),kt=u,Hn=g;break;case 0:case 11:case 14:case 15:na(2,c,a),en||na(4,c,a),oi(r,a,c);break;case 1:en||(Ir(c,a),u=c.stateNode,typeof u.componentWillUnmount=="function"&&dT(c,a,u)),oi(r,a,c);break;case 21:oi(r,a,c);break;case 22:en=(u=en)||c.memoizedState!==null,oi(r,a,c),en=u;break;default:oi(r,a,c)}}function bT(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{tc(r)}catch(c){ct(a,a.return,c)}}}function vT(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{tc(r)}catch(c){ct(a,a.return,c)}}function K5(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new pT),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new pT),a;default:throw Error(s(435,r.tag))}}function am(r,a){var c=K5(r);a.forEach(function(u){if(!c.has(u)){c.add(u);var g=n4.bind(null,r,u);u.then(g,g)}})}function $n(r,a){var c=a.deletions;if(c!==null)for(var u=0;u<c.length;u++){var g=c[u],x=r,w=a,N=w;e:for(;N!==null;){switch(N.tag){case 27:if(ca(N.type)){kt=N.stateNode,Hn=!1;break e}break;case 5:kt=N.stateNode,Hn=!1;break e;case 3:case 4:kt=N.stateNode.containerInfo,Hn=!0;break e}N=N.return}if(kt===null)throw Error(s(160));xT(x,w,g),kt=null,Hn=!1,x=g.alternate,x!==null&&(x.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)_T(a,r),a=a.sibling}var Ks=null;function _T(r,a){var c=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:$n(a,r),Kn(r),u&4&&(na(3,r,r.return),ld(3,r),na(5,r,r.return));break;case 1:$n(a,r),Kn(r),u&512&&(en||c===null||Ir(c,c.return)),u&64&&ai&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?u:c.concat(u))));break;case 26:var g=Ks;if($n(a,r),Kn(r),u&512&&(en||c===null||Ir(c,c.return)),u&4){var x=c!==null?c.memoizedState:null;if(u=r.memoizedState,c===null)if(u===null)if(r.stateNode===null){e:{u=r.type,c=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":x=g.getElementsByTagName("title")[0],(!x||x[pr]||x[Qt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=g.createElement(u),g.head.insertBefore(x,g.querySelector("head > title"))),An(x,u,c),x[Qt]=r,Yt(x),u=x;break e;case"link":var w=_E("link","href",g).get(u+(c.href||""));if(w){for(var N=0;N<w.length;N++)if(x=w[N],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(N,1);break t}}x=g.createElement(u),An(x,u,c),g.head.appendChild(x);break;case"meta":if(w=_E("meta","content",g).get(u+(c.content||""))){for(N=0;N<w.length;N++)if(x=w[N],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(N,1);break t}}x=g.createElement(u),An(x,u,c),g.head.appendChild(x);break;default:throw Error(s(468,u))}x[Qt]=r,Yt(x),u=x}r.stateNode=u}else wE(g,r.type,r.stateNode);else r.stateNode=vE(g,u,r.memoizedProps);else x!==u?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,u===null?wE(g,r.type,r.stateNode):vE(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&iy(r,r.memoizedProps,c.memoizedProps)}break;case 27:$n(a,r),Kn(r),u&512&&(en||c===null||Ir(c,c.return)),c!==null&&u&4&&iy(r,r.memoizedProps,c.memoizedProps);break;case 5:if($n(a,r),Kn(r),u&512&&(en||c===null||Ir(c,c.return)),r.flags&32){g=r.stateNode;try{Gn(g,"")}catch(Se){ct(r,r.return,Se)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,iy(r,g,c!==null?c.memoizedProps:g)),u&1024&&(ly=!0);break;case 6:if($n(a,r),Kn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,c=r.stateNode;try{c.nodeValue=u}catch(Se){ct(r,r.return,Se)}}break;case 3:if(wm=null,g=Ks,Ks=vm(a.containerInfo),$n(a,r),Ks=g,Kn(r),u&4&&c!==null&&c.memoizedState.isDehydrated)try{tc(a.containerInfo)}catch(Se){ct(r,r.return,Se)}ly&&(ly=!1,wT(r));break;case 4:u=Ks,Ks=vm(r.stateNode.containerInfo),$n(a,r),Kn(r),Ks=u;break;case 12:$n(a,r),Kn(r);break;case 31:$n(a,r),Kn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,am(r,u)));break;case 13:$n(a,r),Kn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(lm=On()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,am(r,u)));break;case 22:g=r.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,J=ai,le=en;if(ai=J||g,en=le||B,$n(a,r),en=le,ai=J,Kn(r),u&8192)e:for(a=r.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||B||ai||en||No(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){B=c=a;try{if(x=B.stateNode,g)w=x.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{N=B.stateNode;var he=B.memoizedProps.style,ee=he!=null&&he.hasOwnProperty("display")?he.display:null;N.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Se){ct(B,B.return,Se)}}}else if(a.tag===6){if(c===null){B=a;try{B.stateNode.nodeValue=g?"":B.memoizedProps}catch(Se){ct(B,B.return,Se)}}}else if(a.tag===18){if(c===null){B=a;try{var ae=B.stateNode;g?dE(ae,!0):dE(B.stateNode,!1)}catch(Se){ct(B,B.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(c=u.retryQueue,c!==null&&(u.retryQueue=null,am(r,c))));break;case 19:$n(a,r),Kn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,am(r,u)));break;case 30:break;case 21:break;default:$n(a,r),Kn(r)}}function Kn(r){var a=r.flags;if(a&2){try{for(var c,u=r.return;u!==null;){if(fT(u)){c=u;break}u=u.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var g=c.stateNode,x=ay(r);im(r,x,g);break;case 5:var w=c.stateNode;c.flags&32&&(Gn(w,""),c.flags&=-33);var N=ay(r);im(r,N,w);break;case 3:case 4:var B=c.stateNode.containerInfo,J=ay(r);oy(r,J,B);break;default:throw Error(s(161))}}catch(le){ct(r,r.return,le)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function wT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;wT(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function li(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)gT(r,a.alternate,a),a=a.sibling}function No(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:na(4,a,a.return),No(a);break;case 1:Ir(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&dT(a,a.return,c),No(a);break;case 27:xd(a.stateNode);case 26:case 5:Ir(a,a.return),No(a);break;case 22:a.memoizedState===null&&No(a);break;case 30:No(a);break;default:No(a)}r=r.sibling}}function ci(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,g=r,x=a,w=x.flags;switch(x.tag){case 0:case 11:case 15:ci(g,x,c),ld(4,x);break;case 1:if(ci(g,x,c),u=x,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){ct(u,u.return,J)}if(u=x,g=u.updateQueue,g!==null){var N=u.stateNode;try{var B=g.shared.hiddenCallbacks;if(B!==null)for(g.shared.hiddenCallbacks=null,g=0;g<B.length;g++)Zw(B[g],N)}catch(J){ct(u,u.return,J)}}c&&w&64&&uT(x),cd(x,x.return);break;case 27:mT(x);case 26:case 5:ci(g,x,c),c&&u===null&&w&4&&hT(x),cd(x,x.return);break;case 12:ci(g,x,c);break;case 31:ci(g,x,c),c&&w&4&&bT(g,x);break;case 13:ci(g,x,c),c&&w&4&&vT(g,x);break;case 22:x.memoizedState===null&&ci(g,x,c),cd(x,x.return);break;case 30:break;default:ci(g,x,c)}a=a.sibling}}function cy(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Yu(c))}function uy(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Yu(r))}function Qs(r,a,c,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)TT(r,a,c,u),a=a.sibling}function TT(r,a,c,u){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Qs(r,a,c,u),g&2048&&ld(9,a);break;case 1:Qs(r,a,c,u);break;case 3:Qs(r,a,c,u),g&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Yu(r)));break;case 12:if(g&2048){Qs(r,a,c,u),r=a.stateNode;try{var x=a.memoizedProps,w=x.id,N=x.onPostCommit;typeof N=="function"&&N(w,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){ct(a,a.return,B)}}else Qs(r,a,c,u);break;case 31:Qs(r,a,c,u);break;case 13:Qs(r,a,c,u);break;case 23:break;case 22:x=a.stateNode,w=a.alternate,a.memoizedState!==null?x._visibility&2?Qs(r,a,c,u):ud(r,a):x._visibility&2?Qs(r,a,c,u):(x._visibility|=2,Gl(r,a,c,u,(a.subtreeFlags&10256)!==0||!1)),g&2048&&cy(w,a);break;case 24:Qs(r,a,c,u),g&2048&&uy(a.alternate,a);break;default:Qs(r,a,c,u)}}function Gl(r,a,c,u,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=r,w=a,N=c,B=u,J=w.flags;switch(w.tag){case 0:case 11:case 15:Gl(x,w,N,B,g),ld(8,w);break;case 23:break;case 22:var le=w.stateNode;w.memoizedState!==null?le._visibility&2?Gl(x,w,N,B,g):ud(x,w):(le._visibility|=2,Gl(x,w,N,B,g)),g&&J&2048&&cy(w.alternate,w);break;case 24:Gl(x,w,N,B,g),g&&J&2048&&uy(w.alternate,w);break;default:Gl(x,w,N,B,g)}a=a.sibling}}function ud(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,u=a,g=u.flags;switch(u.tag){case 22:ud(c,u),g&2048&&cy(u.alternate,u);break;case 24:ud(c,u),g&2048&&uy(u.alternate,u);break;default:ud(c,u)}a=a.sibling}}var dd=8192;function Hl(r,a,c){if(r.subtreeFlags&dd)for(r=r.child;r!==null;)ET(r,a,c),r=r.sibling}function ET(r,a,c){switch(r.tag){case 26:Hl(r,a,c),r.flags&dd&&r.memoizedState!==null&&D4(c,Ks,r.memoizedState,r.memoizedProps);break;case 5:Hl(r,a,c);break;case 3:case 4:var u=Ks;Ks=vm(r.stateNode.containerInfo),Hl(r,a,c),Ks=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=dd,dd=16777216,Hl(r,a,c),dd=u):Hl(r,a,c));break;default:Hl(r,a,c)}}function ST(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function hd(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var u=a[c];pn=u,kT(u,r)}ST(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)AT(r),r=r.sibling}function AT(r){switch(r.tag){case 0:case 11:case 15:hd(r),r.flags&2048&&na(9,r,r.return);break;case 3:hd(r);break;case 12:hd(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,om(r)):hd(r);break;default:hd(r)}}function om(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var u=a[c];pn=u,kT(u,r)}ST(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:na(8,a,a.return),om(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,om(a));break;default:om(a)}r=r.sibling}}function kT(r,a){for(;pn!==null;){var c=pn;switch(c.tag){case 0:case 11:case 15:na(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var u=c.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Yu(c.memoizedState.cache)}if(u=c.child,u!==null)u.return=c,pn=u;else e:for(c=r;pn!==null;){u=pn;var g=u.sibling,x=u.return;if(yT(u),u===c){pn=null;break e}if(g!==null){g.return=x,pn=g;break e}pn=x}}}var Q5={getCacheForType:function(r){var a=En(Wt),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c},cacheSignal:function(){return En(Wt).controller.signal}},Y5=typeof WeakMap=="function"?WeakMap:Map,it=0,bt=null,Ke=null,Ye=0,lt=0,ds=null,sa=!1,$l=!1,dy=!1,ui=0,Mt=0,ra=0,Io=0,hy=0,hs=0,Kl=0,fd=null,Qn=null,fy=!1,lm=0,NT=0,cm=1/0,um=null,ia=null,on=0,aa=null,Ql=null,di=0,my=0,py=null,IT=null,md=0,gy=null;function fs(){return(it&2)!==0&&Ye!==0?Ye&-Ye:F.T!==null?wy():df()}function CT(){if(hs===0)if((Ye&536870912)===0||Ze){var r=to;to<<=1,(to&3932160)===0&&(to=262144),hs=r}else hs=536870912;return r=cs.current,r!==null&&(r.flags|=32),hs}function Yn(r,a,c){(r===bt&&(lt===2||lt===9)||r.cancelPendingCommit!==null)&&(Yl(r,0),oa(r,Ye,hs,!1)),no(r,c),((it&2)===0||r!==bt)&&(r===bt&&((it&2)===0&&(Io|=c),Mt===4&&oa(r,Ye,hs,!1)),Cr(r))}function RT(r,a,c){if((it&6)!==0)throw Error(s(327));var u=!c&&(a&127)===0&&(a&r.expiredLanes)===0||Ls(r,a),g=u?J5(r,a):xy(r,a,!0),x=u;do{if(g===0){$l&&!u&&oa(r,a,0,!1);break}else{if(c=r.current.alternate,x&&!X5(c)){g=xy(r,a,!1),x=!1;continue}if(g===2){if(x=a,r.errorRecoveryDisabledLanes&x)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var N=r;g=fd;var B=N.current.memoizedState.isDehydrated;if(B&&(Yl(N,w).flags|=256),w=xy(N,w,!1),w!==2){if(dy&&!B){N.errorRecoveryDisabledLanes|=x,Io|=x,g=4;break e}x=Qn,Qn=g,x!==null&&(Qn===null?Qn=x:Qn.push.apply(Qn,x))}g=w}if(x=!1,g!==2)continue}}if(g===1){Yl(r,0),oa(r,a,0,!0);break}e:{switch(u=r,x=g,x){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:oa(u,a,hs,!sa);break e;case 2:Qn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(g=lm+300-On(),10<g)){if(oa(u,a,hs,!sa),hr(u,0,!0)!==0)break e;di=a,u.timeoutHandle=lE(jT.bind(null,u,c,Qn,um,fy,a,hs,Io,Kl,sa,x,"Throttled",-0,0),g);break e}jT(u,c,Qn,um,fy,a,hs,Io,Kl,sa,x,null,-0,0)}}break}while(!0);Cr(r)}function jT(r,a,c,u,g,x,w,N,B,J,le,he,ee,ae){if(r.timeoutHandle=-1,he=a.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bs},ET(a,x,he);var Se=(x&62914560)===x?lm-On():(x&4194048)===x?NT-On():0;if(Se=P4(he,Se),Se!==null){di=x,r.cancelPendingCommit=Se(zT.bind(null,r,a,x,c,u,g,w,N,B,le,he,null,ee,ae)),oa(r,x,w,!J);return}}zT(r,a,x,c,u,g,w,N,B)}function X5(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var u=0;u<c.length;u++){var g=c[u],x=g.getSnapshot;g=g.value;try{if(!os(x(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function oa(r,a,c,u){a&=~hy,a&=~Io,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var g=a;0<g;){var x=31-Ut(g),w=1<<x;u[x]=-1,g&=~w}c!==0&&so(r,c,a)}function dm(){return(it&6)===0?(pd(0),!1):!0}function yy(){if(Ke!==null){if(lt===0)var r=Ke.return;else r=Ke,ei=vo=null,D0(r),Ul=null,Wu=0,r=Ke;for(;r!==null;)cT(r.alternate,r),r=r.return;Ke=null}}function Yl(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,g4(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),di=0,yy(),bt=r,Ke=c=Jr(r.current,null),Ye=a,lt=0,ds=null,sa=!1,$l=Ls(r,a),dy=!1,Kl=hs=hy=Io=ra=Mt=0,Qn=fd=null,fy=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var g=31-Ut(u),x=1<<g;a|=r[g],u&=~x}return ui=a,jf(),c}function DT(r,a){Fe=null,F.H=id,a===Ll||a===zf?(a=Yw(),lt=3):a===_0?(a=Yw(),lt=4):lt=a===Y0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ds=a,Ke===null&&(Mt=1,em(r,Ss(a,r.current)))}function PT(){var r=cs.current;return r===null?!0:(Ye&4194048)===Ye?Is===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?r===Is:!1}function VT(){var r=F.H;return F.H=id,r===null?id:r}function MT(){var r=F.A;return F.A=Q5,r}function hm(){Mt=4,sa||(Ye&4194048)!==Ye&&cs.current!==null||($l=!0),(ra&134217727)===0&&(Io&134217727)===0||bt===null||oa(bt,Ye,hs,!1)}function xy(r,a,c){var u=it;it|=2;var g=VT(),x=MT();(bt!==r||Ye!==a)&&(um=null,Yl(r,a)),a=!1;var w=Mt;e:do try{if(lt!==0&&Ke!==null){var N=Ke,B=ds;switch(lt){case 8:yy(),w=6;break e;case 3:case 2:case 9:case 6:cs.current===null&&(a=!0);var J=lt;if(lt=0,ds=null,Xl(r,N,B,J),c&&$l){w=0;break e}break;default:J=lt,lt=0,ds=null,Xl(r,N,B,J)}}W5(),w=Mt;break}catch(le){DT(r,le)}while(!0);return a&&r.shellSuspendCounter++,ei=vo=null,it=u,F.H=g,F.A=x,Ke===null&&(bt=null,Ye=0,jf()),w}function W5(){for(;Ke!==null;)OT(Ke)}function J5(r,a){var c=it;it|=2;var u=VT(),g=MT();bt!==r||Ye!==a?(um=null,cm=On()+500,Yl(r,a)):$l=Ls(r,a);e:do try{if(lt!==0&&Ke!==null){a=Ke;var x=ds;t:switch(lt){case 1:lt=0,ds=null,Xl(r,a,x,1);break;case 2:case 9:if(Kw(x)){lt=0,ds=null,LT(a);break}a=function(){lt!==2&&lt!==9||bt!==r||(lt=7),Cr(r)},x.then(a,a);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:Kw(x)?(lt=0,ds=null,LT(a)):(lt=0,ds=null,Xl(r,a,x,7));break;case 5:var w=null;switch(Ke.tag){case 26:w=Ke.memoizedState;case 5:case 27:var N=Ke;if(w?TE(w):N.stateNode.complete){lt=0,ds=null;var B=N.sibling;if(B!==null)Ke=B;else{var J=N.return;J!==null?(Ke=J,fm(J)):Ke=null}break t}}lt=0,ds=null,Xl(r,a,x,5);break;case 6:lt=0,ds=null,Xl(r,a,x,6);break;case 8:yy(),Mt=6;break e;default:throw Error(s(462))}}Z5();break}catch(le){DT(r,le)}while(!0);return ei=vo=null,F.H=u,F.A=g,it=c,Ke!==null?0:(bt=null,Ye=0,jf(),Mt)}function Z5(){for(;Ke!==null&&!Qg();)OT(Ke)}function OT(r){var a=oT(r.alternate,r,ui);r.memoizedProps=r.pendingProps,a===null?fm(r):Ke=a}function LT(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=tT(c,a,a.pendingProps,a.type,void 0,Ye);break;case 11:a=tT(c,a,a.pendingProps,a.type.render,a.ref,Ye);break;case 5:D0(a);default:cT(c,a),a=Ke=Mw(a,ui),a=oT(c,a,ui)}r.memoizedProps=r.pendingProps,a===null?fm(r):Ke=a}function Xl(r,a,c,u){ei=vo=null,D0(a),Ul=null,Wu=0;var g=a.return;try{if(B5(r,g,a,c,Ye)){Mt=1,em(r,Ss(c,r.current)),Ke=null;return}}catch(x){if(g!==null)throw Ke=g,x;Mt=1,em(r,Ss(c,r.current)),Ke=null;return}a.flags&32768?(Ze||u===1?r=!0:$l||(Ye&536870912)!==0?r=!1:(sa=r=!0,(u===2||u===9||u===3||u===6)&&(u=cs.current,u!==null&&u.tag===13&&(u.flags|=16384))),UT(a,r)):fm(a)}function fm(r){var a=r;do{if((a.flags&32768)!==0){UT(a,sa);return}r=a.return;var c=G5(a.alternate,a,ui);if(c!==null){Ke=c;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=r}while(a!==null);Mt===0&&(Mt=5)}function UT(r,a){do{var c=H5(r.alternate,r);if(c!==null){c.flags&=32767,Ke=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){Ke=r;return}Ke=r=c}while(r!==null);Mt=6,Ke=null}function zT(r,a,c,u,g,x,w,N,B){r.cancelPendingCommit=null;do mm();while(on!==0);if((it&6)!==0)throw Error(s(327));if(a!==null){if(a===r.current)throw Error(s(177));if(x=a.lanes|a.childLanes,x|=a0,Wg(r,c,x,w,N,B),r===bt&&(Ke=bt=null,Ye=0),Ql=a,aa=r,di=c,my=x,py=g,IT=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,s4(Oi,function(){return HT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,g=ie.p,ie.p=2,w=it,it|=4;try{$5(r,a,c)}finally{it=w,ie.p=g,F.T=u}}on=1,BT(),FT(),qT()}}function BT(){if(on===1){on=0;var r=aa,a=Ql,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=F.T,F.T=null;var u=ie.p;ie.p=2;var g=it;it|=4;try{_T(a,r);var x=Cy,w=kw(r.containerInfo),N=x.focusedElem,B=x.selectionRange;if(w!==N&&N&&N.ownerDocument&&Aw(N.ownerDocument.documentElement,N)){if(B!==null&&t0(N)){var J=B.start,le=B.end;if(le===void 0&&(le=J),"selectionStart"in N)N.selectionStart=J,N.selectionEnd=Math.min(le,N.value.length);else{var he=N.ownerDocument||document,ee=he&&he.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),Se=N.textContent.length,Me=Math.min(B.start,Se),gt=B.end===void 0?Me:Math.min(B.end,Se);!ae.extend&&Me>gt&&(w=gt,gt=Me,Me=w);var K=Sw(N,Me),G=Sw(N,gt);if(K&&G&&(ae.rangeCount!==1||ae.anchorNode!==K.node||ae.anchorOffset!==K.offset||ae.focusNode!==G.node||ae.focusOffset!==G.offset)){var W=he.createRange();W.setStart(K.node,K.offset),ae.removeAllRanges(),Me>gt?(ae.addRange(W),ae.extend(G.node,G.offset)):(W.setEnd(G.node,G.offset),ae.addRange(W))}}}}for(he=[],ae=N;ae=ae.parentNode;)ae.nodeType===1&&he.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<he.length;N++){var ue=he[N];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Am=!!Iy,Cy=Iy=null}finally{it=g,ie.p=u,F.T=c}}r.current=a,on=2}}function FT(){if(on===2){on=0;var r=aa,a=Ql,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=F.T,F.T=null;var u=ie.p;ie.p=2;var g=it;it|=4;try{gT(r,a.alternate,a)}finally{it=g,ie.p=u,F.T=c}}on=3}}function qT(){if(on===4||on===3){on=0,sf();var r=aa,a=Ql,c=di,u=IT;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?on=5:(on=0,Ql=aa=null,GT(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(ia=null),Qr(c),a=a.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Os,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=F.T,g=ie.p,ie.p=2,F.T=null;try{for(var x=r.onRecoverableError,w=0;w<u.length;w++){var N=u[w];x(N.value,{componentStack:N.stack})}}finally{F.T=a,ie.p=g}}(di&3)!==0&&mm(),Cr(r),g=r.pendingLanes,(c&261930)!==0&&(g&42)!==0?r===gy?md++:(md=0,gy=r):md=0,pd(0)}}function GT(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Yu(a)))}function mm(){return BT(),FT(),qT(),HT()}function HT(){if(on!==5)return!1;var r=aa,a=my;my=0;var c=Qr(di),u=F.T,g=ie.p;try{ie.p=32>c?32:c,F.T=null,c=py,py=null;var x=aa,w=di;if(on=0,Ql=aa=null,di=0,(it&6)!==0)throw Error(s(331));var N=it;if(it|=4,AT(x.current),TT(x,x.current,w,c),it=N,pd(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Os,x)}catch{}return!0}finally{ie.p=g,F.T=u,GT(r,a)}}function $T(r,a,c){a=Ss(c,a),a=Q0(r.stateNode,a,2),r=Zi(r,a,2),r!==null&&(no(r,2),Cr(r))}function ct(r,a,c){if(r.tag===3)$T(r,r,c);else for(;a!==null;){if(a.tag===3){$T(a,r,c);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ia===null||!ia.has(u))){r=Ss(c,r),c=K1(2),u=Zi(a,c,2),u!==null&&(Q1(c,u,a,r),no(u,2),Cr(u));break}}a=a.return}}function by(r,a,c){var u=r.pingCache;if(u===null){u=r.pingCache=new Y5;var g=new Set;u.set(a,g)}else g=u.get(a),g===void 0&&(g=new Set,u.set(a,g));g.has(c)||(dy=!0,g.add(c),r=e4.bind(null,r,a,c),a.then(r,r))}function e4(r,a,c){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,bt===r&&(Ye&c)===c&&(Mt===4||Mt===3&&(Ye&62914560)===Ye&&300>On()-lm?(it&2)===0&&Yl(r,0):hy|=c,Kl===Ye&&(Kl=0)),Cr(r)}function KT(r,a){a===0&&(a=uf()),r=yo(r,a),r!==null&&(no(r,a),Cr(r))}function t4(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),KT(r,c)}function n4(r,a){var c=0;switch(r.tag){case 31:case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(c=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),KT(r,c)}function s4(r,a){return an(r,a)}var pm=null,Wl=null,vy=!1,gm=!1,_y=!1,la=0;function Cr(r){r!==Wl&&r.next===null&&(Wl===null?pm=Wl=r:Wl=Wl.next=r),gm=!0,vy||(vy=!0,i4())}function pd(r,a){if(!_y&&gm){_y=!0;do for(var c=!1,u=pm;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var x=0;else{var w=u.suspendedLanes,N=u.pingedLanes;x=(1<<31-Ut(42|r)+1)-1,x&=g&~(w&~N),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,WT(u,x))}else x=Ye,x=hr(u,u===bt?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||Ls(u,x)||(c=!0,WT(u,x));u=u.next}while(c);_y=!1}}function r4(){QT()}function QT(){gm=vy=!1;var r=0;la!==0&&p4()&&(r=la);for(var a=On(),c=null,u=pm;u!==null;){var g=u.next,x=YT(u,a);x===0?(u.next=null,c===null?pm=g:c.next=g,g===null&&(Wl=c)):(c=u,(r!==0||(x&3)!==0)&&(gm=!0)),u=g}on!==0&&on!==5||pd(r),la!==0&&(la=0)}function YT(r,a){for(var c=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var w=31-Ut(x),N=1<<w,B=g[w];B===-1?((N&c)===0||(N&u)!==0)&&(g[w]=Xg(N,a)):B<=a&&(r.expiredLanes|=N),x&=~N}if(a=bt,c=Ye,c=hr(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,c===0||r===a&&(lt===2||lt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Mi(u),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Ls(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(u!==null&&Mi(u),Qr(c)){case 2:case 8:c=Su;break;case 32:c=Oi;break;case 268435456:c=rf;break;default:c=Oi}return u=XT.bind(null,r),c=an(c,u),r.callbackPriority=a,r.callbackNode=c,a}return u!==null&&u!==null&&Mi(u),r.callbackPriority=2,r.callbackNode=null,2}function XT(r,a){if(on!==0&&on!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(mm()&&r.callbackNode!==c)return null;var u=Ye;return u=hr(r,r===bt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(RT(r,u,a),YT(r,On()),r.callbackNode!=null&&r.callbackNode===c?XT.bind(null,r):null)}function WT(r,a){if(mm())return null;RT(r,a,!0)}function i4(){y4(function(){(it&6)!==0?an(Eu,r4):QT()})}function wy(){if(la===0){var r=Ml;r===0&&(r=ur,ur<<=1,(ur&261888)===0&&(ur=256)),la=r}return la}function JT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:_l(""+r)}function ZT(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function a4(r,a,c,u,g){if(a==="submit"&&c&&c.stateNode===g){var x=JT((g[fn]||null).action),w=u.submitter;w&&(a=(a=w[fn]||null)?JT(a.formAction):w.getAttribute("formAction"),a!==null&&(x=a,w=null));var N=new Tr("action","action",null,u,g);r.push({event:N,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(la!==0){var B=w?ZT(g,w):new FormData(g);F0(c,{pending:!0,data:B,method:g.method,action:x},null,B)}}else typeof x=="function"&&(N.preventDefault(),B=w?ZT(g,w):new FormData(g),F0(c,{pending:!0,data:B,method:g.method,action:x},x,B))},currentTarget:g}]})}}for(var Ty=0;Ty<i0.length;Ty++){var Ey=i0[Ty],o4=Ey.toLowerCase(),l4=Ey[0].toUpperCase()+Ey.slice(1);$s(o4,"on"+l4)}$s(Cw,"onAnimationEnd"),$s(Rw,"onAnimationIteration"),$s(jw,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(E5,"onTransitionRun"),$s(S5,"onTransitionStart"),$s(A5,"onTransitionCancel"),$s(Dw,"onTransitionEnd"),br("onMouseEnter",["mouseout","mouseover"]),br("onMouseLeave",["mouseout","mouseover"]),br("onPointerEnter",["pointerout","pointerover"]),br("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gd));function eE(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var u=r[c],g=u.event;u=u.listeners;e:{var x=void 0;if(a)for(var w=u.length-1;0<=w;w--){var N=u[w],B=N.instance,J=N.currentTarget;if(N=N.listener,B!==x&&g.isPropagationStopped())break e;x=N,g.currentTarget=J;try{x(g)}catch(le){Rf(le)}g.currentTarget=null,x=B}else for(w=0;w<u.length;w++){if(N=u[w],B=N.instance,J=N.currentTarget,N=N.listener,B!==x&&g.isPropagationStopped())break e;x=N,g.currentTarget=J;try{x(g)}catch(le){Rf(le)}g.currentTarget=null,x=B}}}}function Qe(r,a){var c=a[gl];c===void 0&&(c=a[gl]=new Set);var u=r+"__bubble";c.has(u)||(tE(a,r,2,!1),c.add(u))}function Sy(r,a,c){var u=0;a&&(u|=4),tE(c,r,u,a)}var ym="_reactListening"+Math.random().toString(36).slice(2);function Ay(r){if(!r[ym]){r[ym]=!0,Nu.forEach(function(c){c!=="selectionchange"&&(c4.has(c)||Sy(c,!1,r),Sy(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[ym]||(a[ym]=!0,Sy("selectionchange",!1,a))}}function tE(r,a,c,u){switch(CE(a)){case 2:var g=O4;break;case 8:g=L4;break;default:g=By}c=g.bind(null,a,c,r),g=void 0,!lo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(a,c,{capture:!0,passive:g}):r.addEventListener(a,c,!0):g!==void 0?r.addEventListener(a,c,{passive:g}):r.addEventListener(a,c,!1)}function ky(r,a,c,u,g){var x=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var N=u.stateNode.containerInfo;if(N===g)break;if(w===4)for(w=u.return;w!==null;){var B=w.tag;if((B===3||B===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;N!==null;){if(w=gr(N),w===null)return;if(B=w.tag,B===5||B===6||B===26||B===27){u=x=w;continue e}N=N.parentNode}}u=u.return}qi(function(){var J=x,le=_s(c),he=[];e:{var ee=Pw.get(r);if(ee!==void 0){var ae=Tr,Se=r;switch(r){case"keypress":if(uo(c)===0)break e;case"keydown":case"keyup":ae=Nf;break;case"focusin":Se="focus",ae=fo;break;case"focusout":Se="blur",ae=fo;break;case"beforeblur":case"afterblur":ae=fo;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=bf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=_;break;case Cw:case Rw:case jw:ae=_f;break;case Dw:ae=R;break;case"scroll":case"scrollend":ae=zu;break;case"wheel":ae=re;break;case"copy":case"cut":case"paste":ae=wf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Wr;break;case"toggle":case"beforetoggle":ae=Be}var Me=(a&4)!==0,gt=!Me&&(r==="scroll"||r==="scrollend"),K=Me?ee!==null?ee+"Capture":null:ee;Me=[];for(var G=J,W;G!==null;){var ue=G;if(W=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||W===null||K===null||(ue=Fs(G,K),ue!=null&&Me.push(yd(G,ue,W))),gt)break;G=G.return}0<Me.length&&(ee=new ae(ee,Se,null,c,le),he.push({event:ee,listeners:Me}))}}if((a&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",ee&&c!==Ou&&(Se=c.relatedTarget||c.fromElement)&&(gr(Se)||Se[mr]))break e;if((ae||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(Se=c.relatedTarget||c.toElement,ae=J,Se=Se?gr(Se):null,Se!==null&&(gt=o(Se),Me=Se.tag,Se!==gt||Me!==5&&Me!==27&&Me!==6)&&(Se=null)):(ae=null,Se=J),ae!==Se)){if(Me=Bu,ue="onMouseLeave",K="onMouseEnter",G="mouse",(r==="pointerout"||r==="pointerover")&&(Me=Wr,ue="onPointerLeave",K="onPointerEnter",G="pointer"),gt=ae==null?ee:is(ae),W=Se==null?ee:is(Se),ee=new Me(ue,G+"leave",ae,c,le),ee.target=gt,ee.relatedTarget=W,ue=null,gr(le)===J&&(Me=new Me(K,G+"enter",Se,c,le),Me.target=W,Me.relatedTarget=gt,ue=Me),gt=ue,ae&&Se)t:{for(Me=u4,K=ae,G=Se,W=0,ue=K;ue;ue=Me(ue))W++;ue=0;for(var De=G;De;De=Me(De))ue++;for(;0<W-ue;)K=Me(K),W--;for(;0<ue-W;)G=Me(G),ue--;for(;W--;){if(K===G||G!==null&&K===G.alternate){Me=K;break t}K=Me(K),G=Me(G)}Me=null}else Me=null;ae!==null&&nE(he,ee,ae,Me,!1),Se!==null&&gt!==null&&nE(he,gt,Se,Me,!0)}}e:{if(ee=J?is(J):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var nt=bw;else if(yw(ee))if(vw)nt=_5;else{nt=b5;var Re=x5}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&vl(J.elementType)&&(nt=bw):nt=v5;if(nt&&(nt=nt(r,J))){xw(he,nt,c,le);break e}Re&&Re(r,ee,J),r==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Pu(ee,"number",ee.value)}switch(Re=J?is(J):window,r){case"focusin":(yw(Re)||Re.contentEditable==="true")&&(Nl=Re,n0=J,$u=null);break;case"focusout":$u=n0=Nl=null;break;case"mousedown":s0=!0;break;case"contextmenu":case"mouseup":case"dragend":s0=!1,Nw(he,c,le);break;case"selectionchange":if(T5)break;case"keydown":case"keyup":Nw(he,c,le)}var qe;if(rt)e:{switch(r){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else kl?mo(r,c)&&(Xe="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Xe="onCompositionStart");Xe&&(Ar&&c.locale!=="ko"&&(kl||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&kl&&(qe=Uu()):(wr=le,Lu="value"in wr?wr.value:wr.textContent,kl=!0)),Re=xm(J,Xe),0<Re.length&&(Xe=new Sr(Xe,r,null,c,le),he.push({event:Xe,listeners:Re}),qe?Xe.data=qe:(qe=Al(c),qe!==null&&(Xe.data=qe)))),(qe=Ts?m5(r,c):p5(r,c))&&(Xe=xm(J,"onBeforeInput"),0<Xe.length&&(Re=new Sr("onBeforeInput","beforeinput",null,c,le),he.push({event:Re,listeners:Xe}),Re.data=qe)),a4(he,r,J,c,le)}eE(he,a)})}function yd(r,a,c){return{instance:r,listener:a,currentTarget:c}}function xm(r,a){for(var c=a+"Capture",u=[];r!==null;){var g=r,x=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||x===null||(g=Fs(r,c),g!=null&&u.unshift(yd(r,g,x)),g=Fs(r,a),g!=null&&u.push(yd(r,g,x))),r.tag===3)return u;r=r.return}return[]}function u4(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function nE(r,a,c,u,g){for(var x=a._reactName,w=[];c!==null&&c!==u;){var N=c,B=N.alternate,J=N.stateNode;if(N=N.tag,B!==null&&B===u)break;N!==5&&N!==26&&N!==27||J===null||(B=J,g?(J=Fs(c,x),J!=null&&w.unshift(yd(c,J,B))):g||(J=Fs(c,x),J!=null&&w.push(yd(c,J,B)))),c=c.return}w.length!==0&&r.push({event:a,listeners:w})}var d4=/\r\n?/g,h4=/\u0000|\uFFFD/g;function sE(r){return(typeof r=="string"?r:""+r).replace(d4,`
`).replace(h4,"")}function rE(r,a){return a=sE(a),sE(r)===a}function pt(r,a,c,u,g,x){switch(c){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Gn(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Gn(r,""+u);break;case"className":as(r,"class",u);break;case"tabIndex":as(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":as(r,c,u);break;case"style":Mu(r,u,x);break;case"data":if(a!=="object"){as(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(c);break}u=_l(""+u),r.setAttribute(c,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(a!=="input"&&pt(r,a,"name",g.name,g,null),pt(r,a,"formEncType",g.formEncType,g,null),pt(r,a,"formMethod",g.formMethod,g,null),pt(r,a,"formTarget",g.formTarget,g,null)):(pt(r,a,"encType",g.encType,g,null),pt(r,a,"method",g.method,g,null),pt(r,a,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(c);break}u=_l(""+u),r.setAttribute(c,u);break;case"onClick":u!=null&&(r.onclick=Bs);break;case"onScroll":u!=null&&Qe("scroll",r);break;case"onScrollEnd":u!=null&&Qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(c=u.__html,c!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}c=_l(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(c,""+u):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":u===!0?r.setAttribute(c,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(c,u):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(c,u):r.removeAttribute(c);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(c):r.setAttribute(c,u);break;case"popover":Qe("beforetoggle",r),Qe("toggle",r),xl(r,"popover",u);break;case"xlinkActuate":Xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":xl(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=xf.get(c)||c,xl(r,c,u))}}function Ny(r,a,c,u,g,x){switch(c){case"style":Mu(r,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(c=u.__html,c!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"children":typeof u=="string"?Gn(r,u):(typeof u=="number"||typeof u=="bigint")&&Gn(r,""+u);break;case"onScroll":u!=null&&Qe("scroll",r);break;case"onScrollEnd":u!=null&&Qe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Bs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Iu.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),x=r[fn]||null,x=x!=null?x[c]:null,typeof x=="function"&&r.removeEventListener(a,x,g),typeof u=="function")){typeof x!="function"&&x!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,u,g);break e}c in r?r[c]=u:u===!0?r.setAttribute(c,""):xl(r,c,u)}}}function An(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",r),Qe("load",r);var u=!1,g=!1,x;for(x in c)if(c.hasOwnProperty(x)){var w=c[x];if(w!=null)switch(x){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:pt(r,a,x,w,c,null)}}g&&pt(r,a,"srcSet",c.srcSet,c,null),u&&pt(r,a,"src",c.src,c,null);return;case"input":Qe("invalid",r);var N=x=w=g=null,B=null,J=null;for(u in c)if(c.hasOwnProperty(u)){var le=c[u];if(le!=null)switch(u){case"name":g=le;break;case"type":w=le;break;case"checked":B=le;break;case"defaultChecked":J=le;break;case"value":x=le;break;case"defaultValue":N=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,a));break;default:pt(r,a,u,le,c,null)}}pf(r,x,N,B,J,w,g,!1);return;case"select":Qe("invalid",r),u=w=x=null;for(g in c)if(c.hasOwnProperty(g)&&(N=c[g],N!=null))switch(g){case"value":x=N;break;case"defaultValue":w=N;break;case"multiple":u=N;default:pt(r,a,g,N,c,null)}a=x,c=w,r.multiple=!!u,a!=null?Ui(r,!!u,a,!1):c!=null&&Ui(r,!!u,c,!0);return;case"textarea":Qe("invalid",r),x=g=u=null;for(w in c)if(c.hasOwnProperty(w)&&(N=c[w],N!=null))switch(w){case"value":u=N;break;case"defaultValue":g=N;break;case"children":x=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:pt(r,a,w,N,c,null)}zi(r,u,g,x);return;case"option":for(B in c)c.hasOwnProperty(B)&&(u=c[B],u!=null)&&(B==="selected"?r.selected=u&&typeof u!="function"&&typeof u!="symbol":pt(r,a,B,u,c,null));return;case"dialog":Qe("beforetoggle",r),Qe("toggle",r),Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":Qe("load",r);break;case"video":case"audio":for(u=0;u<gd.length;u++)Qe(gd[u],r);break;case"image":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"embed":case"source":case"link":Qe("error",r),Qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(u=c[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:pt(r,a,J,u,c,null)}return;default:if(vl(a)){for(le in c)c.hasOwnProperty(le)&&(u=c[le],u!==void 0&&Ny(r,a,le,u,c,void 0));return}}for(N in c)c.hasOwnProperty(N)&&(u=c[N],u!=null&&pt(r,a,N,u,c,null))}function f4(r,a,c,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,x=null,w=null,N=null,B=null,J=null,le=null;for(ae in c){var he=c[ae];if(c.hasOwnProperty(ae)&&he!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":B=he;default:u.hasOwnProperty(ae)||pt(r,a,ae,null,u,he)}}for(var ee in u){var ae=u[ee];if(he=c[ee],u.hasOwnProperty(ee)&&(ae!=null||he!=null))switch(ee){case"type":x=ae;break;case"name":g=ae;break;case"checked":J=ae;break;case"defaultChecked":le=ae;break;case"value":w=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:ae!==he&&pt(r,a,ee,ae,u,he)}}bl(r,w,N,B,J,le,x,g);return;case"select":ae=w=N=ee=null;for(x in c)if(B=c[x],c.hasOwnProperty(x)&&B!=null)switch(x){case"value":break;case"multiple":ae=B;default:u.hasOwnProperty(x)||pt(r,a,x,null,u,B)}for(g in u)if(x=u[g],B=c[g],u.hasOwnProperty(g)&&(x!=null||B!=null))switch(g){case"value":ee=x;break;case"defaultValue":N=x;break;case"multiple":w=x;default:x!==B&&pt(r,a,g,x,u,B)}a=N,c=w,u=ae,ee!=null?Ui(r,!!c,ee,!1):!!u!=!!c&&(a!=null?Ui(r,!!c,a,!0):Ui(r,!!c,c?[]:"",!1));return;case"textarea":ae=ee=null;for(N in c)if(g=c[N],c.hasOwnProperty(N)&&g!=null&&!u.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:pt(r,a,N,null,u,g)}for(w in u)if(g=u[w],x=c[w],u.hasOwnProperty(w)&&(g!=null||x!=null))switch(w){case"value":ee=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==x&&pt(r,a,w,g,u,x)}gf(r,ee,ae);return;case"option":for(var Se in c)ee=c[Se],c.hasOwnProperty(Se)&&ee!=null&&!u.hasOwnProperty(Se)&&(Se==="selected"?r.selected=!1:pt(r,a,Se,null,u,ee));for(B in u)ee=u[B],ae=c[B],u.hasOwnProperty(B)&&ee!==ae&&(ee!=null||ae!=null)&&(B==="selected"?r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":pt(r,a,B,ee,u,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in c)ee=c[Me],c.hasOwnProperty(Me)&&ee!=null&&!u.hasOwnProperty(Me)&&pt(r,a,Me,null,u,ee);for(J in u)if(ee=u[J],ae=c[J],u.hasOwnProperty(J)&&ee!==ae&&(ee!=null||ae!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,a));break;default:pt(r,a,J,ee,u,ae)}return;default:if(vl(a)){for(var gt in c)ee=c[gt],c.hasOwnProperty(gt)&&ee!==void 0&&!u.hasOwnProperty(gt)&&Ny(r,a,gt,void 0,u,ee);for(le in u)ee=u[le],ae=c[le],!u.hasOwnProperty(le)||ee===ae||ee===void 0&&ae===void 0||Ny(r,a,le,ee,u,ae);return}}for(var K in c)ee=c[K],c.hasOwnProperty(K)&&ee!=null&&!u.hasOwnProperty(K)&&pt(r,a,K,null,u,ee);for(he in u)ee=u[he],ae=c[he],!u.hasOwnProperty(he)||ee===ae||ee==null&&ae==null||pt(r,a,he,ee,u,ae)}function iE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m4(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,c=performance.getEntriesByType("resource"),u=0;u<c.length;u++){var g=c[u],x=g.transferSize,w=g.initiatorType,N=g.duration;if(x&&N&&iE(w)){for(w=0,N=g.responseEnd,u+=1;u<c.length;u++){var B=c[u],J=B.startTime;if(J>N)break;var le=B.transferSize,he=B.initiatorType;le&&iE(he)&&(B=B.responseEnd,w+=le*(B<N?1:(N-J)/(B-J)))}if(--u,a+=8*(x+w)/(g.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Iy=null,Cy=null;function bm(r){return r.nodeType===9?r:r.ownerDocument}function aE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oE(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Ry(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jy=null;function p4(){var r=window.event;return r&&r.type==="popstate"?r===jy?!1:(jy=r,!0):(jy=null,!1)}var lE=typeof setTimeout=="function"?setTimeout:void 0,g4=typeof clearTimeout=="function"?clearTimeout:void 0,cE=typeof Promise=="function"?Promise:void 0,y4=typeof queueMicrotask=="function"?queueMicrotask:typeof cE<"u"?function(r){return cE.resolve(null).then(r).catch(x4)}:lE;function x4(r){setTimeout(function(){throw r})}function ca(r){return r==="head"}function uE(r,a){var c=a,u=0;do{var g=c.nextSibling;if(r.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(u===0){r.removeChild(g),tc(a);return}u--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")u++;else if(c==="html")xd(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,xd(c);for(var x=c.firstChild;x;){var w=x.nextSibling,N=x.nodeName;x[pr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=w}}else c==="body"&&xd(r.ownerDocument.body);c=g}while(c);tc(a)}function dE(r,a){var c=r;r=0;do{var u=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),u&&u.nodeType===8)if(c=u.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=u}while(c)}function Dy(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Dy(c),yl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function b4(r,a,c,u){for(;r.nodeType===1;){var g=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[pr])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var x=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=Cs(r.nextSibling),r===null)break}return null}function v4(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Cs(r.nextSibling),r===null))return null;return r}function hE(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Cs(r.nextSibling),r===null))return null;return r}function Py(r){return r.data==="$?"||r.data==="$~"}function Vy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function _4(r,a){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||c.readyState!=="loading")a();else{var u=function(){a(),c.removeEventListener("DOMContentLoaded",u)};c.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Cs(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var My=null;function fE(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(a===0)return Cs(r.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}r=r.nextSibling}return null}function mE(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return r;a--}else c!=="/$"&&c!=="/&"||a++}r=r.previousSibling}return null}function pE(r,a,c){switch(a=bm(c),r){case"html":if(r=a.documentElement,!r)throw Error(s(452));return r;case"head":if(r=a.head,!r)throw Error(s(453));return r;case"body":if(r=a.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function xd(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);yl(r)}var Rs=new Map,gE=new Set;function vm(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var hi=ie.d;ie.d={f:w4,r:T4,D:E4,C:S4,L:A4,m:k4,X:I4,S:N4,M:C4};function w4(){var r=hi.f(),a=dm();return r||a}function T4(r){var a=vs(r);a!==null&&a.tag===5&&a.type==="form"?D1(a):hi.r(r)}var Jl=typeof document>"u"?null:document;function yE(r,a,c){var u=Jl;if(u&&typeof a=="string"&&a){var g=qn(a);g='link[rel="'+r+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),gE.has(g)||(gE.add(g),r={rel:r,crossOrigin:c,href:a},u.querySelector(g)===null&&(a=u.createElement("link"),An(a,"link",r),Yt(a),u.head.appendChild(a)))}}function E4(r){hi.D(r),yE("dns-prefetch",r,null)}function S4(r,a){hi.C(r,a),yE("preconnect",r,a)}function A4(r,a,c){hi.L(r,a,c);var u=Jl;if(u&&r&&a){var g='link[rel="preload"][as="'+qn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+qn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+qn(c.imageSizes)+'"]')):g+='[href="'+qn(r)+'"]';var x=g;switch(a){case"style":x=Zl(r);break;case"script":x=ec(r)}Rs.has(x)||(r=b({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),Rs.set(x,r),u.querySelector(g)!==null||a==="style"&&u.querySelector(bd(x))||a==="script"&&u.querySelector(vd(x))||(a=u.createElement("link"),An(a,"link",r),Yt(a),u.head.appendChild(a)))}}function k4(r,a){hi.m(r,a);var c=Jl;if(c&&r){var u=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+qn(u)+'"][href="'+qn(r)+'"]',x=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=ec(r)}if(!Rs.has(x)&&(r=b({rel:"modulepreload",href:r},a),Rs.set(x,r),c.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(vd(x)))return}u=c.createElement("link"),An(u,"link",r),Yt(u),c.head.appendChild(u)}}}function N4(r,a,c){hi.S(r,a,c);var u=Jl;if(u&&r){var g=yr(u).hoistableStyles,x=Zl(r);a=a||"default";var w=g.get(x);if(!w){var N={loading:0,preload:null};if(w=u.querySelector(bd(x)))N.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":a},c),(c=Rs.get(x))&&Oy(r,c);var B=w=u.createElement("link");Yt(B),An(B,"link",r),B._p=new Promise(function(J,le){B.onload=J,B.onerror=le}),B.addEventListener("load",function(){N.loading|=1}),B.addEventListener("error",function(){N.loading|=2}),N.loading|=4,_m(w,a,u)}w={type:"stylesheet",instance:w,count:1,state:N},g.set(x,w)}}}function I4(r,a){hi.X(r,a);var c=Jl;if(c&&r){var u=yr(c).hoistableScripts,g=ec(r),x=u.get(g);x||(x=c.querySelector(vd(g)),x||(r=b({src:r,async:!0},a),(a=Rs.get(g))&&Ly(r,a),x=c.createElement("script"),Yt(x),An(x,"link",r),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(g,x))}}function C4(r,a){hi.M(r,a);var c=Jl;if(c&&r){var u=yr(c).hoistableScripts,g=ec(r),x=u.get(g);x||(x=c.querySelector(vd(g)),x||(r=b({src:r,async:!0,type:"module"},a),(a=Rs.get(g))&&Ly(r,a),x=c.createElement("script"),Yt(x),An(x,"link",r),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(g,x))}}function xE(r,a,c,u){var g=(g=ye.current)?vm(g):null;if(!g)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Zl(c.href),c=yr(g).hoistableStyles,u=c.get(a),u||(u={type:"style",instance:null,count:0,state:null},c.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Zl(c.href);var x=yr(g).hoistableStyles,w=x.get(r);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,w),(x=g.querySelector(bd(r)))&&!x._p&&(w.instance=x,w.state.loading=5),Rs.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Rs.set(r,c),x||R4(g,r,c,w.state))),a&&u===null)throw Error(s(528,""));return w}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ec(c),c=yr(g).hoistableScripts,u=c.get(a),u||(u={type:"script",instance:null,count:0,state:null},c.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Zl(r){return'href="'+qn(r)+'"'}function bd(r){return'link[rel="stylesheet"]['+r+"]"}function bE(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function R4(r,a,c,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),An(a,"link",c),Yt(a),r.head.appendChild(a))}function ec(r){return'[src="'+qn(r)+'"]'}function vd(r){return"script[async]"+r}function vE(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+qn(c.href)+'"]');if(u)return a.instance=u,Yt(u),u;var g=b({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Yt(u),An(u,"style",g),_m(u,c.precedence,r),a.instance=u;case"stylesheet":g=Zl(c.href);var x=r.querySelector(bd(g));if(x)return a.state.loading|=4,a.instance=x,Yt(x),x;u=bE(c),(g=Rs.get(g))&&Oy(u,g),x=(r.ownerDocument||r).createElement("link"),Yt(x);var w=x;return w._p=new Promise(function(N,B){w.onload=N,w.onerror=B}),An(x,"link",u),a.state.loading|=4,_m(x,c.precedence,r),a.instance=x;case"script":return x=ec(c.src),(g=r.querySelector(vd(x)))?(a.instance=g,Yt(g),g):(u=c,(g=Rs.get(x))&&(u=b({},c),Ly(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),Yt(g),An(g,"link",u),r.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,_m(u,c.precedence,r));return a.instance}function _m(r,a,c){for(var u=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,x=g,w=0;w<u.length;w++){var N=u[w];if(N.dataset.precedence===a)x=N;else if(x!==g)break}x?x.parentNode.insertBefore(r,x.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function Oy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Ly(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var wm=null;function _E(r,a,c){if(wm===null){var u=new Map,g=wm=new Map;g.set(c,u)}else g=wm,u=g.get(c),u||(u=new Map,g.set(c,u));if(u.has(r))return u;for(u.set(r,null),c=c.getElementsByTagName(r),g=0;g<c.length;g++){var x=c[g];if(!(x[pr]||x[Qt]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var w=x.getAttribute(a)||"";w=r+w;var N=u.get(w);N?N.push(x):u.set(w,[x])}}return u}function wE(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function j4(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(r=a.disabled,typeof a.precedence=="string"&&r==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function TE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function D4(r,a,c,u){if(c.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=Zl(u.href),x=a.querySelector(bd(g));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Tm.bind(r),a.then(r,r)),c.state.loading|=4,c.instance=x,Yt(x);return}x=a.ownerDocument||a,u=bE(u),(g=Rs.get(g))&&Oy(u,g),x=x.createElement("link"),Yt(x);var w=x;w._p=new Promise(function(N,B){w.onload=N,w.onerror=B}),An(x,"link",u),c.instance=x}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Tm.bind(r),a.addEventListener("load",c),a.addEventListener("error",c))}}var Uy=0;function P4(r,a){return r.stylesheets&&r.count===0&&Sm(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var u=setTimeout(function(){if(r.stylesheets&&Sm(r,r.stylesheets),r.unsuspend){var x=r.unsuspend;r.unsuspend=null,x()}},6e4+a);0<r.imgBytes&&Uy===0&&(Uy=62500*m4());var g=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Sm(r,r.stylesheets),r.unsuspend)){var x=r.unsuspend;r.unsuspend=null,x()}},(r.imgBytes>Uy?50:800)+a);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Tm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Em=null;function Sm(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Em=new Map,a.forEach(V4,r),Em=null,Tm.call(r))}function V4(r,a){if(!(a.state.loading&4)){var c=Em.get(r);if(c)var u=c.get(null);else{c=new Map,Em.set(r,c);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<g.length;x++){var w=g[x];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),u=w)}u&&c.set(null,u)}g=a.instance,w=g.getAttribute("data-precedence"),x=c.get(w)||u,x===u&&c.set(null,g),c.set(w,g),this.count++,u=Tm.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),x?x.parentNode.insertBefore(g,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),a.state.loading|=4}}var _d={$$typeof:z,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function M4(r,a,c,u,g,x,w,N,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.hiddenUpdates=fr(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=x,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function EE(r,a,c,u,g,x,w,N,B,J,le,he){return r=new M4(r,a,c,w,B,J,le,he,N),a=1,x===!0&&(a|=24),x=ls(3,null,null,a),r.current=x,x.stateNode=r,a=x0(),a.refCount++,r.pooledCache=a,a.refCount++,x.memoizedState={element:u,isDehydrated:c,cache:a},w0(x),r}function SE(r){return r?(r=Rl,r):Rl}function AE(r,a,c,u,g,x){g=SE(g),u.context===null?u.context=g:u.pendingContext=g,u=Ji(a),u.payload={element:c},x=x===void 0?null:x,x!==null&&(u.callback=x),c=Zi(r,u,a),c!==null&&(Yn(c,r,a),Zu(c,r,a))}function kE(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function zy(r,a){kE(r,a),(r=r.alternate)&&kE(r,a)}function NE(r){if(r.tag===13||r.tag===31){var a=yo(r,67108864);a!==null&&Yn(a,r,67108864),zy(r,67108864)}}function IE(r){if(r.tag===13||r.tag===31){var a=fs();a=ro(a);var c=yo(r,a);c!==null&&Yn(c,r,a),zy(r,a)}}var Am=!0;function O4(r,a,c,u){var g=F.T;F.T=null;var x=ie.p;try{ie.p=2,By(r,a,c,u)}finally{ie.p=x,F.T=g}}function L4(r,a,c,u){var g=F.T;F.T=null;var x=ie.p;try{ie.p=8,By(r,a,c,u)}finally{ie.p=x,F.T=g}}function By(r,a,c,u){if(Am){var g=Fy(u);if(g===null)ky(r,a,u,km,c),RE(r,u);else if(z4(g,r,a,c,u))u.stopPropagation();else if(RE(r,u),a&4&&-1<U4.indexOf(r)){for(;g!==null;){var x=vs(g);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var w=dr(x.pendingLanes);if(w!==0){var N=x;for(N.pendingLanes|=2,N.entangledLanes|=2;w;){var B=1<<31-Ut(w);N.entanglements[1]|=B,w&=~B}Cr(x),(it&6)===0&&(cm=On()+500,pd(0))}}break;case 31:case 13:N=yo(x,2),N!==null&&Yn(N,x,2),dm(),zy(x,2)}if(x=Fy(u),x===null&&ky(r,a,u,km,c),x===g)break;g=x}g!==null&&u.stopPropagation()}else ky(r,a,u,null,c)}}function Fy(r){return r=_s(r),qy(r)}var km=null;function qy(r){if(km=null,r=gr(r),r!==null){var a=o(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=l(a),r!==null)return r;r=null}else if(c===31){if(r=d(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return km=r,null}function CE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eo()){case Eu:return 2;case Su:return 8;case Oi:case Yg:return 32;case rf:return 268435456;default:return 32}default:return 32}}var Gy=!1,ua=null,da=null,ha=null,wd=new Map,Td=new Map,fa=[],U4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RE(r,a){switch(r){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":ha=null;break;case"pointerover":case"pointerout":wd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(a.pointerId)}}function Ed(r,a,c,u,g,x){return r===null||r.nativeEvent!==x?(r={blockedOn:a,domEventName:c,eventSystemFlags:u,nativeEvent:x,targetContainers:[g]},a!==null&&(a=vs(a),a!==null&&NE(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),r)}function z4(r,a,c,u,g){switch(a){case"focusin":return ua=Ed(ua,r,a,c,u,g),!0;case"dragenter":return da=Ed(da,r,a,c,u,g),!0;case"mouseover":return ha=Ed(ha,r,a,c,u,g),!0;case"pointerover":var x=g.pointerId;return wd.set(x,Ed(wd.get(x)||null,r,a,c,u,g)),!0;case"gotpointercapture":return x=g.pointerId,Td.set(x,Ed(Td.get(x)||null,r,a,c,u,g)),!0}return!1}function jE(r){var a=gr(r.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){r.blockedOn=a,Us(r.priority,function(){IE(c)});return}}else if(a===31){if(a=d(c),a!==null){r.blockedOn=a,Us(r.priority,function(){IE(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nm(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=Fy(r.nativeEvent);if(c===null){c=r.nativeEvent;var u=new c.constructor(c.type,c);Ou=u,c.target.dispatchEvent(u),Ou=null}else return a=vs(c),a!==null&&NE(a),r.blockedOn=c,!1;a.shift()}return!0}function DE(r,a,c){Nm(r)&&c.delete(a)}function B4(){Gy=!1,ua!==null&&Nm(ua)&&(ua=null),da!==null&&Nm(da)&&(da=null),ha!==null&&Nm(ha)&&(ha=null),wd.forEach(DE),Td.forEach(DE)}function Im(r,a){r.blockedOn===a&&(r.blockedOn=null,Gy||(Gy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,B4)))}var Cm=null;function PE(r){Cm!==r&&(Cm=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Cm===r&&(Cm=null);for(var a=0;a<r.length;a+=3){var c=r[a],u=r[a+1],g=r[a+2];if(typeof u!="function"){if(qy(u||c)===null)continue;break}var x=vs(c);x!==null&&(r.splice(a,3),a-=3,F0(x,{pending:!0,data:g,method:c.method,action:u},u,g))}}))}function tc(r){function a(B){return Im(B,r)}ua!==null&&Im(ua,r),da!==null&&Im(da,r),ha!==null&&Im(ha,r),wd.forEach(a),Td.forEach(a);for(var c=0;c<fa.length;c++){var u=fa[c];u.blockedOn===r&&(u.blockedOn=null)}for(;0<fa.length&&(c=fa[0],c.blockedOn===null);)jE(c),c.blockedOn===null&&fa.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(u=0;u<c.length;u+=3){var g=c[u],x=c[u+1],w=g[fn]||null;if(typeof x=="function")w||PE(c);else if(w){var N=null;if(x&&x.hasAttribute("formAction")){if(g=x,w=x[fn]||null)N=w.formAction;else if(qy(g)!==null)continue}else N=w.action;typeof N=="function"?c[u+1]=N:(c.splice(u,3),u-=3),PE(c)}}}function VE(){function r(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(w){return g=w})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),u||setTimeout(c,20)}function c(){if(!u&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Hy(r){this._internalRoot=r}Rm.prototype.render=Hy.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(s(409));var c=a.current,u=fs();AE(c,u,r,a,null,null)},Rm.prototype.unmount=Hy.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;AE(r.current,2,null,r,null,null),dm(),a[mr]=null}};function Rm(r){this._internalRoot=r}Rm.prototype.unstable_scheduleHydration=function(r){if(r){var a=df();r={blockedOn:null,target:r,priority:a};for(var c=0;c<fa.length&&a!==0&&a<fa[c].priority;c++);fa.splice(c,0,r),c===0&&jE(r)}};var ME=e.version;if(ME!=="19.2.4")throw Error(s(527,ME,"19.2.4"));ie.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=m(a),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var F4={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jm.isDisabled&&jm.supportsFiber)try{Os=jm.inject(F4),_n=jm}catch{}}return Ad.createRoot=function(r,a){if(!i(r))throw Error(s(299));var c=!1,u="",g=q1,x=G1,w=H1;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=EE(r,1,!1,null,null,c,u,null,g,x,w,VE),r[mr]=a.current,Ay(r),new Hy(a)},Ad.hydrateRoot=function(r,a,c){if(!i(r))throw Error(s(299));var u=!1,g="",x=q1,w=G1,N=H1,B=null;return c!=null&&(c.unstable_strictMode===!0&&(u=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(N=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),a=EE(r,1,!0,a,c??null,u,g,B,x,w,N,VE),a.context=SE(null),c=a.current,u=fs(),u=ro(u),g=Ji(u),g.callback=null,Zi(c,g,u),c=u,a.current.lanes=c,no(a,c),Cr(a),r[mr]=a.current,Ay(r),new Rm(a)},Ad.version="19.2.4",Ad}var $E;function W4(){if($E)return Qy.exports;$E=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qy.exports=X4(),Qy.exports}var J4=W4();const Z4=V2(J4);var KE="popstate";function eP(n={}){function e(s,i){let{pathname:o,search:l,hash:d}=s.location;return Fx("",{pathname:o,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:oh(i)}return nP(e,t,null,n)}function Ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ar(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tP(){return Math.random().toString(36).substring(2,10)}function QE(n,e){return{usr:n.state,key:n.key,idx:e}}function Fx(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Jc(e):e,state:t,key:e&&e.key||s||tP()}}function oh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Jc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function nP(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:o=!1}=s,l=i.history,d="POP",f=null,m=y();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function y(){return(l.state||{idx:null}).idx}function b(){d="POP";let j=y(),P=j==null?null:j-m;m=j,f&&f({action:d,location:I.location,delta:P})}function v(j,P){d="PUSH";let L=Fx(I.location,j,P);m=y()+1;let z=QE(L,m),$=I.createHref(L);try{l.pushState(z,"",$)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;i.location.assign($)}o&&f&&f({action:d,location:I.location,delta:1})}function T(j,P){d="REPLACE";let L=Fx(I.location,j,P);m=y();let z=QE(L,m),$=I.createHref(L);l.replaceState(z,"",$),o&&f&&f({action:d,location:I.location,delta:0})}function k(j){return sP(j)}let I={get action(){return d},get location(){return n(i,l)},listen(j){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(KE,b),f=j,()=>{i.removeEventListener(KE,b),f=null}},createHref(j){return e(i,j)},createURL:k,encodeLocation(j){let P=k(j);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:T,go(j){return l.go(j)}};return I}function sP(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:oh(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function L2(n,e,t="/"){return rP(n,e,t,!1)}function rP(n,e,t,s){let i=typeof e=="string"?Jc(e):e,o=wi(i.pathname||"/",t);if(o==null)return null;let l=U2(n);iP(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let m=gP(o);d=mP(l[f],m,s)}return d}function U2(n,e=[],t=[],s="",i=!1){let o=(l,d,f=i,m)=>{let y={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&f)return;Ct(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let b=vi([s,y.relativePath]),v=t.concat(y);l.children&&l.children.length>0&&(Ct(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),U2(l.children,e,v,b,f)),!(l.path==null&&!l.index)&&e.push({path:b,score:hP(b,l.index),routesMeta:v})};return n.forEach((l,d)=>{if(l.path===""||!l.path?.includes("?"))o(l,d);else for(let f of z2(l.path))o(l,d,!0,f)}),e}function z2(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(s.length===0)return i?[o,""]:[o];let l=z2(s.join("/")),d=[];return d.push(...l.map(f=>f===""?o:[o,f].join("/"))),i&&d.push(...l),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function iP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:fP(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var aP=/^:[\w-]+$/,oP=3,lP=2,cP=1,uP=10,dP=-2,YE=n=>n==="*";function hP(n,e){let t=n.split("/"),s=t.length;return t.some(YE)&&(s+=dP),e&&(s+=lP),t.filter(i=>!YE(i)).reduce((i,o)=>i+(aP.test(o)?oP:o===""?cP:uP),s)}function fP(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function mP(n,e,t=!1){let{routesMeta:s}=n,i={},o="/",l=[];for(let d=0;d<s.length;++d){let f=s[d],m=d===s.length-1,y=o==="/"?e:e.slice(o.length)||"/",b=wp({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),v=f.route;if(!b&&m&&t&&!s[s.length-1].route.index&&(b=wp({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!b)return null;Object.assign(i,b.params),l.push({params:i,pathname:vi([o,b.pathname]),pathnameBase:vP(vi([o,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(o=vi([o,b.pathnameBase]))}return l}function wp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=pP(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:s.reduce((m,{paramName:y,isOptional:b},v)=>{if(y==="*"){let k=d[v]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const T=d[v];return b&&!T?m[y]=void 0:m[y]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:n}}function pP(n,e=!1,t=!0){ar(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function gP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ar(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function wi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var yP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function xP(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?Jc(n):n,o;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?o=XE(t.substring(1),"/"):o=XE(t,e)):o=e,{pathname:o,search:_P(s),hash:wP(i)}}function XE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Jy(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sv(n){let e=bP(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function rv(n,e,t,s=!1){let i;typeof n=="string"?i=Jc(n):(i={...n},Ct(!i.pathname||!i.pathname.includes("?"),Jy("?","pathname","search",i)),Ct(!i.pathname||!i.pathname.includes("#"),Jy("#","pathname","hash",i)),Ct(!i.search||!i.search.includes("#"),Jy("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,d;if(l==null)d=t;else{let b=e.length-1;if(!s&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),b-=1;i.pathname=v.join("/")}d=b>=0?e[b]:"/"}let f=xP(i,d),m=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}var vi=n=>n.join("/").replace(/\/\/+/g,"/"),vP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),_P=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,TP=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function EP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function SP(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var B2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function F2(n,e){let t=n;if(typeof t!="string"||!yP.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,i=!1;if(B2)try{let o=new URL(window.location.href),l=t.startsWith("//")?new URL(o.protocol+t):new URL(t),d=wi(l.pathname,e);l.origin===o.origin&&d!=null?t=d+l.search+l.hash:i=!0}catch{ar(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var q2=["POST","PUT","PATCH","DELETE"];new Set(q2);var AP=["GET",...q2];new Set(AP);var Zc=C.createContext(null);Zc.displayName="DataRouter";var ug=C.createContext(null);ug.displayName="DataRouterState";var kP=C.createContext(!1),G2=C.createContext({isTransitioning:!1});G2.displayName="ViewTransition";var NP=C.createContext(new Map);NP.displayName="Fetchers";var IP=C.createContext(null);IP.displayName="Await";var xs=C.createContext(null);xs.displayName="Navigation";var Ih=C.createContext(null);Ih.displayName="Location";var Ms=C.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var iv=C.createContext(null);iv.displayName="RouteError";var H2="REACT_ROUTER_ERROR",CP="REDIRECT",RP="ROUTE_ERROR_RESPONSE";function jP(n){if(n.startsWith(`${H2}:${CP}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function DP(n){if(n.startsWith(`${H2}:${RP}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new TP(e.status,e.statusText,e.data)}catch{}}function PP(n,{relative:e}={}){Ct(eu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=C.useContext(xs),{hash:i,pathname:o,search:l}=Ch(n,{relative:e}),d=o;return t!=="/"&&(d=o==="/"?t:vi([t,o])),s.createHref({pathname:d,search:l,hash:i})}function eu(){return C.useContext(Ih)!=null}function Ii(){return Ct(eu(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Ih).location}var $2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function K2(n){C.useContext(xs).static||C.useLayoutEffect(n)}function tu(){let{isDataRoute:n}=C.useContext(Ms);return n?XP():VP()}function VP(){Ct(eu(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(Zc),{basename:e,navigator:t}=C.useContext(xs),{matches:s}=C.useContext(Ms),{pathname:i}=Ii(),o=JSON.stringify(sv(s)),l=C.useRef(!1);return K2(()=>{l.current=!0}),C.useCallback((f,m={})=>{if(ar(l.current,$2),!l.current)return;if(typeof f=="number"){t.go(f);return}let y=rv(f,JSON.parse(o),i,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:vi([e,y.pathname])),(m.replace?t.replace:t.push)(y,m.state,m)},[e,t,o,i,n])}var MP=C.createContext(null);function OP(n){let e=C.useContext(Ms).outlet;return C.useMemo(()=>e&&C.createElement(MP.Provider,{value:n},e),[e,n])}function LP(){let{matches:n}=C.useContext(Ms),e=n[n.length-1];return e?e.params:{}}function Ch(n,{relative:e}={}){let{matches:t}=C.useContext(Ms),{pathname:s}=Ii(),i=JSON.stringify(sv(t));return C.useMemo(()=>rv(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function UP(n,e){return Q2(n,e)}function Q2(n,e,t,s,i){Ct(eu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=C.useContext(xs),{matches:l}=C.useContext(Ms),d=l[l.length-1],f=d?d.params:{},m=d?d.pathname:"/",y=d?d.pathnameBase:"/",b=d&&d.route;{let L=b&&b.path||"";X2(m,!b||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let v=Ii(),T;if(e){let L=typeof e=="string"?Jc(e):e;Ct(y==="/"||L.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${L.pathname}" was given in the \`location\` prop.`),T=L}else T=v;let k=T.pathname||"/",I=k;if(y!=="/"){let L=y.replace(/^\//,"").split("/");I="/"+k.replace(/^\//,"").split("/").slice(L.length).join("/")}let j=L2(n,{pathname:I});ar(b||j!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),ar(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=GP(j&&j.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:vi([y,o.encodeLocation?o.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?y:vi([y,o.encodeLocation?o.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),l,t,s,i);return e&&P?C.createElement(Ih.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},P):P}function zP(){let n=YP(),e=EP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:o},"ErrorBoundary")," or"," ",C.createElement("code",{style:o},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:i},t):null,l)}var BP=C.createElement(zP,null),Y2=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=DP(n.digest);t&&(n=t)}let e=n!==void 0?C.createElement(Ms.Provider,{value:this.props.routeContext},C.createElement(iv.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?C.createElement(FP,{error:n},e):e}};Y2.contextType=kP;var Zy=new WeakMap;function FP({children:n,error:e}){let{basename:t}=C.useContext(xs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=jP(e.digest);if(s){let i=Zy.get(e);if(i)throw i;let o=F2(s.location,t);if(B2&&!Zy.get(e))if(o.isExternal||s.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:s.replace}));throw Zy.set(e,l),l}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function qP({routeContext:n,match:e,children:t}){let s=C.useContext(Zc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Ms.Provider,{value:n},t)}function GP(n,e=[],t=null,s=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let y=o.findIndex(b=>b.route.id&&l?.[b.route.id]!==void 0);Ct(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let d=!1,f=-1;if(t)for(let y=0;y<o.length;y++){let b=o[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(f=y),b.route.id){let{loaderData:v,errors:T}=t,k=b.route.loader&&!v.hasOwnProperty(b.route.id)&&(!T||T[b.route.id]===void 0);if(b.route.lazy||k){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let m=t&&s?(y,b)=>{s(y,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:SP(t.matches),errorInfo:b})}:void 0;return o.reduceRight((y,b,v)=>{let T,k=!1,I=null,j=null;t&&(T=l&&b.route.id?l[b.route.id]:void 0,I=b.route.errorElement||BP,d&&(f<0&&v===0?(X2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,j=null):f===v&&(k=!0,j=b.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,v+1)),L=()=>{let z;return T?z=I:k?z=j:b.route.Component?z=C.createElement(b.route.Component,null):b.route.element?z=b.route.element:z=y,C.createElement(qP,{match:b,routeContext:{outlet:y,matches:P,isDataRoute:t!=null},children:z})};return t&&(b.route.ErrorBoundary||b.route.errorElement||v===0)?C.createElement(Y2,{location:t.location,revalidation:t.revalidation,component:I,error:T,children:L(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:m}):L()},null)}function av(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HP(n){let e=C.useContext(Zc);return Ct(e,av(n)),e}function $P(n){let e=C.useContext(ug);return Ct(e,av(n)),e}function KP(n){let e=C.useContext(Ms);return Ct(e,av(n)),e}function ov(n){let e=KP(n),t=e.matches[e.matches.length-1];return Ct(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function QP(){return ov("useRouteId")}function YP(){let n=C.useContext(iv),e=$P("useRouteError"),t=ov("useRouteError");return n!==void 0?n:e.errors?.[t]}function XP(){let{router:n}=HP("useNavigate"),e=ov("useNavigate"),t=C.useRef(!1);return K2(()=>{t.current=!0}),C.useCallback(async(i,o={})=>{ar(t.current,$2),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var WE={};function X2(n,e,t){!e&&!WE[n]&&(WE[n]=!0,ar(!1,t))}C.memo(WP);function WP({routes:n,future:e,state:t,onError:s}){return Q2(n,void 0,t,s,e)}function W2({to:n,replace:e,state:t,relative:s}){Ct(eu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=C.useContext(xs);ar(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=C.useContext(Ms),{pathname:l}=Ii(),d=tu(),f=rv(n,sv(o),l,s==="path"),m=JSON.stringify(f);return C.useEffect(()=>{d(JSON.parse(m),{replace:e,state:t,relative:s})},[d,m,s,e,t]),null}function Xs(n){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JP({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:o=!1,unstable_useTransitions:l}){Ct(!eu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:d,navigator:i,static:o,unstable_useTransitions:l,future:{}}),[d,i,o,l]);typeof t=="string"&&(t=Jc(t));let{pathname:m="/",search:y="",hash:b="",state:v=null,key:T="default"}=t,k=C.useMemo(()=>{let I=wi(m,d);return I==null?null:{location:{pathname:I,search:y,hash:b,state:v,key:T},navigationType:s}},[d,m,y,b,v,T,s]);return ar(k!=null,`<Router basename="${d}"> is not able to match the URL "${m}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:C.createElement(xs.Provider,{value:f},C.createElement(Ih.Provider,{children:e,value:k}))}function ZP({children:n,location:e}){return UP(qx(n),e)}function qx(n,e=[]){let t=[];return C.Children.forEach(n,(s,i)=>{if(!C.isValidElement(s))return;let o=[...e,i];if(s.type===C.Fragment){t.push.apply(t,qx(s.props.children,o));return}Ct(s.type===Xs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=qx(s.props.children,o)),t.push(l)}),t}var Wm="get",Jm="application/x-www-form-urlencoded";function dg(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function eV(n){return dg(n)&&n.tagName.toLowerCase()==="button"}function tV(n){return dg(n)&&n.tagName.toLowerCase()==="form"}function nV(n){return dg(n)&&n.tagName.toLowerCase()==="input"}function sV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rV(n,e){return n.button===0&&(!e||e==="_self")&&!sV(n)}var Dm=null;function iV(){if(Dm===null)try{new FormData(document.createElement("form"),0),Dm=!1}catch{Dm=!0}return Dm}var aV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ex(n){return n!=null&&!aV.has(n)?(ar(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jm}"`),null):n}function oV(n,e){let t,s,i,o,l;if(tV(n)){let d=n.getAttribute("action");s=d?wi(d,e):null,t=n.getAttribute("method")||Wm,i=ex(n.getAttribute("enctype"))||Jm,o=new FormData(n)}else if(eV(n)||nV(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(s=f?wi(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Wm,i=ex(n.getAttribute("formenctype"))||ex(d.getAttribute("enctype"))||Jm,o=new FormData(d,n),!iV()){let{name:m,type:y,value:b}=n;if(y==="image"){let v=m?`${m}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else m&&o.append(m,b)}}else{if(dg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wm,s=null,i=Jm,l=n}return o&&i==="text/plain"&&(l=o,o=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lV(n,e,t,s){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${s}`:i.pathname=`${i.pathname}.${s}`:i.pathname==="/"?i.pathname=`_root.${s}`:e&&wi(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function cV(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uV(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dV(n,e,t){let s=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await cV(o,t);return l.links?l.links():[]}return[]}));return pV(s.flat(1).filter(uV).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function JE(n,e,t,s,i,o){let l=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>t[m].pathname!==f.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,m)=>l(f,m)||d(f,m)):o==="data"?e.filter((f,m)=>{let y=s.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(l(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function hV(n,e,{includeHydrateFallback:t}={}){return fV(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function fV(n){return[...new Set(n)]}function mV(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function pV(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let o=JSON.stringify(mV(i));return t.has(o)||(t.add(o),s.push({key:o,link:i})),s},[])}function J2(){let n=C.useContext(Zc);return lv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function gV(){let n=C.useContext(ug);return lv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var cv=C.createContext(void 0);cv.displayName="FrameworkContext";function Z2(){let n=C.useContext(cv);return lv(n,"You must render this element inside a <HydratedRouter> element"),n}function yV(n,e){let t=C.useContext(cv),[s,i]=C.useState(!1),[o,l]=C.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:y,onTouchStart:b}=e,v=C.useRef(null);C.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let I=P=>{P.forEach(L=>{l(L.isIntersecting)})},j=new IntersectionObserver(I,{threshold:.5});return v.current&&j.observe(v.current),()=>{j.disconnect()}}},[n]),C.useEffect(()=>{if(s){let I=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(I)}}},[s]);let T=()=>{i(!0)},k=()=>{i(!1),l(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:kd(d,T),onBlur:kd(f,k),onMouseEnter:kd(m,T),onMouseLeave:kd(y,k),onTouchStart:kd(b,T)}]:[!1,v,{}]}function kd(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function xV({page:n,...e}){let{router:t}=J2(),s=C.useMemo(()=>L2(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?C.createElement(vV,{page:n,matches:s,...e}):null}function bV(n){let{manifest:e,routeModules:t}=Z2(),[s,i]=C.useState([]);return C.useEffect(()=>{let o=!1;return dV(n,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[n,e,t]),s}function vV({page:n,matches:e,...t}){let s=Ii(),{future:i,manifest:o,routeModules:l}=Z2(),{basename:d}=J2(),{loaderData:f,matches:m}=gV(),y=C.useMemo(()=>JE(n,e,m,o,s,"data"),[n,e,m,o,s]),b=C.useMemo(()=>JE(n,e,m,o,s,"assets"),[n,e,m,o,s]),v=C.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let I=new Set,j=!1;if(e.forEach(L=>{let z=o.routes[L.route.id];!z||!z.hasLoader||(!y.some($=>$.route.id===L.route.id)&&L.route.id in f&&l[L.route.id]?.shouldRevalidate||z.hasClientLoader?j=!0:I.add(L.route.id))}),I.size===0)return[];let P=lV(n,d,i.unstable_trailingSlashAwareDataRequests,"data");return j&&I.size>0&&P.searchParams.set("_routes",e.filter(L=>I.has(L.route.id)).map(L=>L.route.id).join(",")),[P.pathname+P.search]},[d,i.unstable_trailingSlashAwareDataRequests,f,s,o,y,e,n,l]),T=C.useMemo(()=>hV(b,o),[b,o]),k=bV(b);return C.createElement(C.Fragment,null,v.map(I=>C.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),T.map(I=>C.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),k.map(({key:I,link:j})=>C.createElement("link",{key:I,nonce:t.nonce,...j,crossOrigin:j.crossOrigin??t.crossOrigin})))}function _V(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wV&&(window.__reactRouterVersion="7.13.0")}catch{}function TV({basename:n,children:e,unstable_useTransitions:t,window:s}){let i=C.useRef();i.current==null&&(i.current=eP({window:s,v5Compat:!0}));let o=i.current,[l,d]=C.useState({action:o.action,location:o.location}),f=C.useCallback(m=>{t===!1?d(m):C.startTransition(()=>d(m))},[t]);return C.useLayoutEffect(()=>o.listen(f),[o,f]),C.createElement(JP,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t})}var eN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gn=C.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:o,replace:l,state:d,target:f,to:m,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:v,...T},k){let{basename:I,unstable_useTransitions:j}=C.useContext(xs),P=typeof m=="string"&&eN.test(m),L=F2(m,I);m=L.to;let z=PP(m,{relative:i}),[$,te,ce]=yV(s,T),D=kV(m,{replace:l,state:d,target:f,preventScrollReset:y,relative:i,viewTransition:b,unstable_defaultShouldRevalidate:v,unstable_useTransitions:j});function S(O){e&&e(O),O.defaultPrevented||D(O)}let A=C.createElement("a",{...T,...ce,href:L.absoluteURL||z,onClick:L.isExternal||o?e:S,ref:_V(k,te),target:f,"data-discover":!P&&t==="render"?"true":void 0});return $&&!P?C.createElement(C.Fragment,null,A,C.createElement(xV,{page:z})):A});gn.displayName="Link";var EV=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:o,to:l,viewTransition:d,children:f,...m},y){let b=Ch(l,{relative:m.relative}),v=Ii(),T=C.useContext(ug),{navigator:k,basename:I}=C.useContext(xs),j=T!=null&&jV(b)&&d===!0,P=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,L=v.pathname,z=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(L=L.toLowerCase(),z=z?z.toLowerCase():null,P=P.toLowerCase()),z&&I&&(z=wi(z,I)||z);const $=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let te=L===P||!i&&L.startsWith(P)&&L.charAt($)==="/",ce=z!=null&&(z===P||!i&&z.startsWith(P)&&z.charAt(P.length)==="/"),D={isActive:te,isPending:ce,isTransitioning:j},S=te?e:void 0,A;typeof s=="function"?A=s(D):A=[s,te?"active":null,ce?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(D):o;return C.createElement(gn,{...m,"aria-current":S,className:A,ref:y,style:O,to:l,viewTransition:d},typeof f=="function"?f(D):f)});EV.displayName="NavLink";var SV=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:o,method:l=Wm,action:d,onSubmit:f,relative:m,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:v,...T},k)=>{let{unstable_useTransitions:I}=C.useContext(xs),j=CV(),P=RV(d,{relative:m}),L=l.toLowerCase()==="get"?"get":"post",z=typeof d=="string"&&eN.test(d),$=te=>{if(f&&f(te),te.defaultPrevented)return;te.preventDefault();let ce=te.nativeEvent.submitter,D=ce?.getAttribute("formmethod")||l,S=()=>j(ce||te.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:o,relative:m,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:v});I&&t!==!1?C.startTransition(()=>S()):S()};return C.createElement("form",{ref:k,method:L,action:P,onSubmit:s?f:$,...T,"data-discover":!z&&n==="render"?"true":void 0})});SV.displayName="Form";function AV(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tN(n){let e=C.useContext(Zc);return Ct(e,AV(n)),e}function kV(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let m=tu(),y=Ii(),b=Ch(n,{relative:o});return C.useCallback(v=>{if(rV(v,e)){v.preventDefault();let T=t!==void 0?t:oh(y)===oh(b),k=()=>m(n,{replace:T,state:s,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:d});f?C.startTransition(()=>k()):k()}},[y,m,b,t,s,e,n,i,o,l,d,f])}var NV=0,IV=()=>`__${String(++NV)}__`;function CV(){let{router:n}=tN("useSubmit"),{basename:e}=C.useContext(xs),t=QP(),s=n.fetch,i=n.navigate;return C.useCallback(async(o,l={})=>{let{action:d,method:f,encType:m,formData:y,body:b}=oV(o,e);if(l.navigate===!1){let v=l.fetcherKey||IV();await s(v,t,l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:b,formMethod:l.method||f,formEncType:l.encType||m,flushSync:l.flushSync})}else await i(l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:b,formMethod:l.method||f,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,i,e,t])}function RV(n,{relative:e}={}){let{basename:t}=C.useContext(xs),s=C.useContext(Ms);Ct(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),o={...Ch(n||".",{relative:e})},l=Ii();if(n==null){o.search=l.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(y=>y==="")){d.delete("index"),f.filter(b=>b).forEach(b=>d.append("index",b));let y=d.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:vi([t,o.pathname])),oh(o)}function jV(n,{relative:e}={}){let t=C.useContext(G2);Ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=tN("useViewTransitionState"),i=Ch(n,{relative:e});if(!t.isTransitioning)return!1;let o=wi(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=wi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return wp(i.pathname,l)!=null||wp(i.pathname,o)!=null}var DV=O2();const uv=C.createContext({});function dv(n){const e=C.useRef(null);return e.current===null&&(e.current=n()),e.current}const nN=typeof window<"u",sN=nN?C.useLayoutEffect:C.useEffect,hg=C.createContext(null);function hv(n,e){n.indexOf(e)===-1&&n.push(e)}function Tp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Fr=(n,e,t)=>t>e?e:t<n?n:t;let fv=()=>{};const Ti={},rN=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function iN(n){return typeof n=="object"&&n!==null}const aN=n=>/^0[^.\s]+$/u.test(n);function mv(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ps=n=>n,PV=(n,e)=>t=>e(n(t)),Rh=(...n)=>n.reduce(PV),lh=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s};class pv{constructor(){this.subscriptions=[]}add(e){return hv(this.subscriptions,e),()=>Tp(this.subscriptions,e)}notify(e,t,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,s);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nr=n=>n*1e3,Ds=n=>n/1e3;function oN(n,e){return e?n*(1e3/e):0}const lN=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,VV=1e-7,MV=12;function OV(n,e,t,s,i){let o,l,d=0;do l=e+(t-e)/2,o=lN(l,s,i)-n,o>0?t=l:e=l;while(Math.abs(o)>VV&&++d<MV);return l}function jh(n,e,t,s){if(n===e&&t===s)return Ps;const i=o=>OV(o,0,1,n,t);return o=>o===0||o===1?o:lN(i(o),e,s)}const cN=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,uN=n=>e=>1-n(1-e),dN=jh(.33,1.53,.69,.99),gv=uN(dN),hN=cN(gv),fN=n=>(n*=2)<1?.5*gv(n):.5*(2-Math.pow(2,-10*(n-1))),yv=n=>1-Math.sin(Math.acos(n)),mN=uN(yv),pN=cN(yv),LV=jh(.42,0,1,1),UV=jh(0,0,.58,1),gN=jh(.42,0,.58,1),zV=n=>Array.isArray(n)&&typeof n[0]!="number",yN=n=>Array.isArray(n)&&typeof n[0]=="number",BV={linear:Ps,easeIn:LV,easeInOut:gN,easeOut:UV,circIn:yv,circInOut:pN,circOut:mN,backIn:gv,backInOut:hN,backOut:dN,anticipate:fN},FV=n=>typeof n=="string",ZE=n=>{if(yN(n)){fv(n.length===4);const[e,t,s,i]=n;return jh(e,t,s,i)}else if(FV(n))return BV[n];return n},Pm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function qV(n,e){let t=new Set,s=new Set,i=!1,o=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function f(y){l.has(y)&&(m.schedule(y),n()),y(d)}const m={schedule:(y,b=!1,v=!1)=>{const k=v&&i?t:s;return b&&l.add(y),k.has(y)||k.add(y),y},cancel:y=>{s.delete(y),l.delete(y)},process:y=>{if(d=y,i){o=!0;return}i=!0,[t,s]=[s,t],t.forEach(f),t.clear(),i=!1,o&&(o=!1,m.process(y))}};return m}const GV=40;function xN(n,e){let t=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Pm.reduce((z,$)=>(z[$]=qV(o),z),{}),{setup:d,read:f,resolveKeyframes:m,preUpdate:y,update:b,preRender:v,render:T,postRender:k}=l,I=()=>{const z=Ti.useManualTiming?i.timestamp:performance.now();t=!1,Ti.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(z-i.timestamp,GV),1)),i.timestamp=z,i.isProcessing=!0,d.process(i),f.process(i),m.process(i),y.process(i),b.process(i),v.process(i),T.process(i),k.process(i),i.isProcessing=!1,t&&e&&(s=!1,n(I))},j=()=>{t=!0,s=!0,i.isProcessing||n(I)};return{schedule:Pm.reduce((z,$)=>{const te=l[$];return z[$]=(ce,D=!1,S=!1)=>(t||j(),te.schedule(ce,D,S)),z},{}),cancel:z=>{for(let $=0;$<Pm.length;$++)l[Pm[$]].cancel(z)},state:i,steps:l}}const{schedule:vt,cancel:Da,state:kn,steps:tx}=xN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ps,!0);let Zm;function HV(){Zm=void 0}const zn={now:()=>(Zm===void 0&&zn.set(kn.isProcessing||Ti.useManualTiming?kn.timestamp:performance.now()),Zm),set:n=>{Zm=n,queueMicrotask(HV)}},bN=n=>e=>typeof e=="string"&&e.startsWith(n),vN=bN("--"),$V=bN("var(--"),xv=n=>$V(n)?KV.test(n.split("/*")[0].trim()):!1,KV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function eS(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const nu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ch={...nu,transform:n=>Fr(0,1,n)},Vm={...nu,default:1},Gd=n=>Math.round(n*1e5)/1e5,bv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function QV(n){return n==null}const YV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vv=(n,e)=>t=>!!(typeof t=="string"&&YV.test(t)&&t.startsWith(n)||e&&!QV(t)&&Object.prototype.hasOwnProperty.call(t,e)),_N=(n,e,t)=>s=>{if(typeof s!="string")return s;const[i,o,l,d]=s.match(bv);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},XV=n=>Fr(0,255,n),nx={...nu,transform:n=>Math.round(XV(n))},Bo={test:vv("rgb","red"),parse:_N("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+nx.transform(n)+", "+nx.transform(e)+", "+nx.transform(t)+", "+Gd(ch.transform(s))+")"};function WV(n){let e="",t="",s="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Gx={test:vv("#"),parse:WV,transform:Bo.transform},Dh=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),va=Dh("deg"),Or=Dh("%"),Ne=Dh("px"),JV=Dh("vh"),ZV=Dh("vw"),tS={...Or,parse:n=>Or.parse(n)/100,transform:n=>Or.transform(n*100)},pc={test:vv("hsl","hue"),parse:_N("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+Or.transform(Gd(e))+", "+Or.transform(Gd(t))+", "+Gd(ch.transform(s))+")"},nn={test:n=>Bo.test(n)||Gx.test(n)||pc.test(n),parse:n=>Bo.test(n)?Bo.parse(n):pc.test(n)?pc.parse(n):Gx.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Bo.transform(n):pc.transform(n),getAnimatableNone:n=>{const e=nn.parse(n);return e.alpha=0,nn.transform(e)}},eM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tM(n){return isNaN(n)&&typeof n=="string"&&(n.match(bv)?.length||0)+(n.match(eM)?.length||0)>0}const wN="number",TN="color",nM="var",sM="var(",nS="${}",rM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uh(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},i=[];let o=0;const d=e.replace(rM,f=>(nn.test(f)?(s.color.push(o),i.push(TN),t.push(nn.parse(f))):f.startsWith(sM)?(s.var.push(o),i.push(nM),t.push(f)):(s.number.push(o),i.push(wN),t.push(parseFloat(f))),++o,nS)).split(nS);return{values:t,split:d,indexes:s,types:i}}function EN(n){return uh(n).values}function SN(n){const{split:e,types:t}=uh(n),s=e.length;return i=>{let o="";for(let l=0;l<s;l++)if(o+=e[l],i[l]!==void 0){const d=t[l];d===wN?o+=Gd(i[l]):d===TN?o+=nn.transform(i[l]):o+=i[l]}return o}}const iM=n=>typeof n=="number"?0:nn.test(n)?nn.getAnimatableNone(n):n;function aM(n){const e=EN(n);return SN(n)(e.map(iM))}const Pa={test:tM,parse:EN,createTransformer:SN,getAnimatableNone:aM};function sx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function oM({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let i=0,o=0,l=0;if(!e)i=o=l=t;else{const d=t<.5?t*(1+e):t+e-t*e,f=2*t-d;i=sx(f,d,n+1/3),o=sx(f,d,n),l=sx(f,d,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}function Ep(n,e){return t=>t>0?e:n}const Dt=(n,e,t)=>n+(e-n)*t,rx=(n,e,t)=>{const s=n*n,i=t*(e*e-s)+s;return i<0?0:Math.sqrt(i)},lM=[Gx,Bo,pc],cM=n=>lM.find(e=>e.test(n));function sS(n){const e=cM(n);if(!e)return!1;let t=e.parse(n);return e===pc&&(t=oM(t)),t}const rS=(n,e)=>{const t=sS(n),s=sS(e);if(!t||!s)return Ep(n,e);const i={...t};return o=>(i.red=rx(t.red,s.red,o),i.green=rx(t.green,s.green,o),i.blue=rx(t.blue,s.blue,o),i.alpha=Dt(t.alpha,s.alpha,o),Bo.transform(i))},Hx=new Set(["none","hidden"]);function uM(n,e){return Hx.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function dM(n,e){return t=>Dt(n,e,t)}function _v(n){return typeof n=="number"?dM:typeof n=="string"?xv(n)?Ep:nn.test(n)?rS:mM:Array.isArray(n)?AN:typeof n=="object"?nn.test(n)?rS:hM:Ep}function AN(n,e){const t=[...n],s=t.length,i=n.map((o,l)=>_v(o)(o,e[l]));return o=>{for(let l=0;l<s;l++)t[l]=i[l](o);return t}}function hM(n,e){const t={...n,...e},s={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(s[i]=_v(n[i])(n[i],e[i]));return i=>{for(const o in s)t[o]=s[o](i);return t}}function fM(n,e){const t=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=n.indexes[o][s[o]],d=n.values[l]??0;t[i]=d,s[o]++}return t}const mM=(n,e)=>{const t=Pa.createTransformer(e),s=uh(n),i=uh(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Hx.has(n)&&!i.values.length||Hx.has(e)&&!s.values.length?uM(n,e):Rh(AN(fM(s,i),i.values),t):Ep(n,e)};function kN(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Dt(n,e,t):_v(n)(n,e)}const pM=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>vt.update(e,t),stop:()=>Da(e),now:()=>kn.isProcessing?kn.timestamp:zn.now()}},NN=(n,e,t=10)=>{let s="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)s+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Sp=2e4;function wv(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<Sp;)e+=t,s=n.next(e);return e>=Sp?1/0:e}function gM(n,e=100,t){const s=t({...n,keyframes:[0,e]}),i=Math.min(wv(s),Sp);return{type:"keyframes",ease:o=>s.next(i*o).value/e,duration:Ds(i)}}const yM=5;function IN(n,e,t){const s=Math.max(e-yM,0);return oN(t-n(s),e-s)}const Ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ix=.001;function xM({duration:n=Ot.duration,bounce:e=Ot.bounce,velocity:t=Ot.velocity,mass:s=Ot.mass}){let i,o,l=1-e;l=Fr(Ot.minDamping,Ot.maxDamping,l),n=Fr(Ot.minDuration,Ot.maxDuration,Ds(n)),l<1?(i=m=>{const y=m*l,b=y*n,v=y-t,T=$x(m,l),k=Math.exp(-b);return ix-v/T*k},o=m=>{const b=m*l*n,v=b*t+t,T=Math.pow(l,2)*Math.pow(m,2)*n,k=Math.exp(-b),I=$x(Math.pow(m,2),l);return(-i(m)+ix>0?-1:1)*((v-T)*k)/I}):(i=m=>{const y=Math.exp(-m*n),b=(m-t)*n+1;return-ix+y*b},o=m=>{const y=Math.exp(-m*n),b=(t-m)*(n*n);return y*b});const d=5/n,f=vM(i,o,d);if(n=nr(n),isNaN(f))return{stiffness:Ot.stiffness,damping:Ot.damping,duration:n};{const m=Math.pow(f,2)*s;return{stiffness:m,damping:l*2*Math.sqrt(s*m),duration:n}}}const bM=12;function vM(n,e,t){let s=t;for(let i=1;i<bM;i++)s=s-n(s)/e(s);return s}function $x(n,e){return n*Math.sqrt(1-e*e)}const _M=["duration","bounce"],wM=["stiffness","damping","mass"];function iS(n,e){return e.some(t=>n[t]!==void 0)}function TM(n){let e={velocity:Ot.velocity,stiffness:Ot.stiffness,damping:Ot.damping,mass:Ot.mass,isResolvedFromDuration:!1,...n};if(!iS(n,wM)&&iS(n,_M))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),i=s*s,o=2*Fr(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Ot.mass,stiffness:i,damping:o}}else{const t=xM(n);e={...e,...t,mass:Ot.mass},e.isResolvedFromDuration=!0}return e}function Ap(n=Ot.visualDuration,e=Ot.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:i}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],d={done:!1,value:o},{stiffness:f,damping:m,mass:y,duration:b,velocity:v,isResolvedFromDuration:T}=TM({...t,velocity:-Ds(t.velocity||0)}),k=v||0,I=m/(2*Math.sqrt(f*y)),j=l-o,P=Ds(Math.sqrt(f/y)),L=Math.abs(j)<5;s||(s=L?Ot.restSpeed.granular:Ot.restSpeed.default),i||(i=L?Ot.restDelta.granular:Ot.restDelta.default);let z;if(I<1){const te=$x(P,I);z=ce=>{const D=Math.exp(-I*P*ce);return l-D*((k+I*P*j)/te*Math.sin(te*ce)+j*Math.cos(te*ce))}}else if(I===1)z=te=>l-Math.exp(-P*te)*(j+(k+P*j)*te);else{const te=P*Math.sqrt(I*I-1);z=ce=>{const D=Math.exp(-I*P*ce),S=Math.min(te*ce,300);return l-D*((k+I*P*j)*Math.sinh(S)+te*j*Math.cosh(S))/te}}const $={calculatedDuration:T&&b||null,next:te=>{const ce=z(te);if(T)d.done=te>=b;else{let D=te===0?k:0;I<1&&(D=te===0?nr(k):IN(z,te,ce));const S=Math.abs(D)<=s,A=Math.abs(l-ce)<=i;d.done=S&&A}return d.value=d.done?l:ce,d},toString:()=>{const te=Math.min(wv($),Sp),ce=NN(D=>$.next(te*D).value,te,30);return te+"ms "+ce},toTransition:()=>{}};return $}Ap.applyToOptions=n=>{const e=gM(n,100,Ap);return n.ease=e.ease,n.duration=nr(e.duration),n.type="keyframes",n};function Kx({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:d,max:f,restDelta:m=.5,restSpeed:y}){const b=n[0],v={done:!1,value:b},T=S=>d!==void 0&&S<d||f!==void 0&&S>f,k=S=>d===void 0?f:f===void 0||Math.abs(d-S)<Math.abs(f-S)?d:f;let I=t*e;const j=b+I,P=l===void 0?j:l(j);P!==j&&(I=P-b);const L=S=>-I*Math.exp(-S/s),z=S=>P+L(S),$=S=>{const A=L(S),O=z(S);v.done=Math.abs(A)<=m,v.value=v.done?P:O};let te,ce;const D=S=>{T(v.value)&&(te=S,ce=Ap({keyframes:[v.value,k(v.value)],velocity:IN(z,S,v.value),damping:i,stiffness:o,restDelta:m,restSpeed:y}))};return D(0),{calculatedDuration:null,next:S=>{let A=!1;return!ce&&te===void 0&&(A=!0,$(S),D(S)),te!==void 0&&S>=te?ce.next(S-te):(!A&&$(S),v)}}}function EM(n,e,t){const s=[],i=t||Ti.mix||kN,o=n.length-1;for(let l=0;l<o;l++){let d=i(n[l],n[l+1]);if(e){const f=Array.isArray(e)?e[l]||Ps:e;d=Rh(f,d)}s.push(d)}return s}function SM(n,e,{clamp:t=!0,ease:s,mixer:i}={}){const o=n.length;if(fv(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const d=EM(e,s,i),f=d.length,m=y=>{if(l&&y<n[0])return e[0];let b=0;if(f>1)for(;b<n.length-2&&!(y<n[b+1]);b++);const v=lh(n[b],n[b+1],y);return d[b](v)};return t?y=>m(Fr(n[0],n[o-1],y)):m}function AM(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const i=lh(0,e,s);n.push(Dt(t,1,i))}}function kM(n){const e=[0];return AM(e,n.length-1),e}function NM(n,e){return n.map(t=>t*e)}function IM(n,e){return n.map(()=>e||gN).splice(0,n.length-1)}function Hd({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const i=zV(s)?s.map(ZE):ZE(s),o={done:!1,value:e[0]},l=NM(t&&t.length===e.length?t:kM(e),n),d=SM(l,e,{ease:Array.isArray(i)?i:IM(e,i)});return{calculatedDuration:n,next:f=>(o.value=d(f),o.done=f>=n,o)}}const CM=n=>n!==null;function Tv(n,{repeat:e,repeatType:t="loop"},s,i=1){const o=n.filter(CM),d=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!d||s===void 0?o[d]:s}const RM={decay:Kx,inertia:Kx,tween:Hd,keyframes:Hd,spring:Ap};function CN(n){typeof n.type=="string"&&(n.type=RM[n.type])}class Ev{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const jM=n=>n/100;class Sv extends Ev{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==zn.now()&&this.tick(zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;CN(e);const{type:t=Hd,repeat:s=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=e;let{keyframes:d}=e;const f=t||Hd;f!==Hd&&typeof d[0]!="number"&&(this.mixKeyframes=Rh(jM,kN(d[0],d[1])),d=[0,100]);const m=f({...e,keyframes:d});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...d].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=wv(m));const{calculatedDuration:y}=m;this.calculatedDuration=y,this.resolvedDuration=y+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:i,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:f}=this;if(this.startTime===null)return s.next(0);const{delay:m=0,keyframes:y,repeat:b,repeatType:v,repeatDelay:T,type:k,onUpdate:I,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const P=this.currentTime-m*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?P<0:P>i;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let z=this.currentTime,$=s;if(b){const S=Math.min(this.currentTime,i)/d;let A=Math.floor(S),O=S%1;!O&&S>=1&&(O=1),O===1&&A--,A=Math.min(A,b+1),A%2&&(v==="reverse"?(O=1-O,T&&(O-=T/d)):v==="mirror"&&($=l)),z=Fr(0,1,O)*d}const te=L?{done:!1,value:y[0]}:$.next(z);o&&(te.value=o(te.value));let{done:ce}=te;!L&&f!==null&&(ce=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ce);return D&&k!==Kx&&(te.value=Tv(y,this.options,j,this.speed)),I&&I(te.value),D&&this.finish(),te}then(e,t){return this.finished.then(e,t)}get duration(){return Ds(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ds(e)}get time(){return Ds(this.currentTime)}set time(e){e=nr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=pM,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function DM(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Fo=n=>n*180/Math.PI,Qx=n=>{const e=Fo(Math.atan2(n[1],n[0]));return Yx(e)},PM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Qx,rotateZ:Qx,skewX:n=>Fo(Math.atan(n[1])),skewY:n=>Fo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Yx=n=>(n=n%360,n<0&&(n+=360),n),aS=Qx,oS=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),lS=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),VM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oS,scaleY:lS,scale:n=>(oS(n)+lS(n))/2,rotateX:n=>Yx(Fo(Math.atan2(n[6],n[5]))),rotateY:n=>Yx(Fo(Math.atan2(-n[2],n[0]))),rotateZ:aS,rotate:aS,skewX:n=>Fo(Math.atan(n[4])),skewY:n=>Fo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Xx(n){return n.includes("scale")?1:0}function Wx(n,e){if(!n||n==="none")return Xx(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(t)s=VM,i=t;else{const d=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=PM,i=d}if(!i)return Xx(e);const o=s[e],l=i[1].split(",").map(OM);return typeof o=="function"?o(l):l[o]}const MM=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Wx(t,e)};function OM(n){return parseFloat(n.trim())}const su=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ru=new Set(su),cS=n=>n===nu||n===Ne,LM=new Set(["x","y","z"]),UM=su.filter(n=>!LM.has(n));function zM(n){const e=[];return UM.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const Aa={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Wx(e,"x"),y:(n,{transform:e})=>Wx(e,"y")};Aa.translateX=Aa.x;Aa.translateY=Aa.y;const $o=new Set;let Jx=!1,Zx=!1,eb=!1;function RN(){if(Zx){const n=Array.from($o).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const i=zM(s);i.length&&(t.set(s,i),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=t.get(s);i&&i.forEach(([o,l])=>{s.getValue(o)?.set(l)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Zx=!1,Jx=!1,$o.forEach(n=>n.complete(eb)),$o.clear()}function jN(){$o.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Zx=!0)})}function BM(){eb=!0,jN(),RN(),eb=!1}class Av{constructor(e,t,s,i,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?($o.add(this),Jx||(Jx=!0,vt.read(jN),vt.resolveKeyframes(RN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:i}=this;if(e[0]===null){const o=i?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(s&&t){const d=s.readValue(t,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}DM(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),$o.delete(this)}cancel(){this.state==="scheduled"&&($o.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const FM=n=>n.startsWith("--");function qM(n,e,t){FM(e)?n.style.setProperty(e,t):n.style[e]=t}const GM=mv(()=>window.ScrollTimeline!==void 0),HM={};function $M(n,e){const t=mv(n);return()=>HM[e]??t()}const DN=$M(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Od=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,uS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Od([0,.65,.55,1]),circOut:Od([.55,0,1,.45]),backIn:Od([.31,.01,.66,-.59]),backOut:Od([.33,1.53,.69,.99])};function PN(n,e){if(n)return typeof n=="function"?DN()?NN(n,e):"ease-out":yN(n)?Od(n):Array.isArray(n)?n.map(t=>PN(t,e)||uS.easeOut):uS[n]}function KM(n,e,t,{delay:s=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:d="easeOut",times:f}={},m=void 0){const y={[e]:t};f&&(y.offset=f);const b=PN(d,i);Array.isArray(b)&&(y.easing=b);const v={delay:s,duration:i,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return m&&(v.pseudoElement=m),n.animate(y,v)}function VN(n){return typeof n=="function"&&"applyToOptions"in n}function QM({type:n,...e}){return VN(n)&&DN()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class MN extends Ev{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:s,keyframes:i,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:d,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,fv(typeof e.type!="string");const m=QM(e);this.animation=KM(t,s,i,m,o),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const y=Tv(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(y):qM(t,s,y),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ds(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ds(e)}get time(){return Ds(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=nr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&GM()?(this.animation.timeline=e,Ps):t(this)}}const ON={anticipate:fN,backInOut:hN,circInOut:pN};function YM(n){return n in ON}function XM(n){typeof n.ease=="string"&&YM(n.ease)&&(n.ease=ON[n.ease])}const ax=10;class WM extends MN{constructor(e){XM(e),CN(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:i,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const d=new Sv({...l,autoplay:!1}),f=Math.max(ax,zn.now()-this.startTime),m=Fr(0,ax,f-ax);t.setWithVelocity(d.sample(Math.max(0,f-m)).value,d.sample(f).value,m),d.stop()}}const dS=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Pa.test(n)||n==="0")&&!n.startsWith("url("));function JM(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function ZM(n,e,t,s){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=dS(i,e),d=dS(o,e);return!l||!d?!1:JM(n)||(t==="spring"||VN(t))&&s}function tb(n){n.duration=0,n.type="keyframes"}const e3=new Set(["opacity","clipPath","filter","transform"]),t3=mv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function n3(n){const{motionValue:e,name:t,repeatDelay:s,repeatType:i,damping:o,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:m}=e.owner.getProps();return t3()&&t&&e3.has(t)&&(t!=="transform"||!m)&&!f&&!s&&i!=="mirror"&&o!==0&&l!=="inertia"}const s3=40;class r3 extends Ev{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",keyframes:d,name:f,motionValue:m,element:y,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=zn.now();const v={autoplay:e,delay:t,type:s,repeat:i,repeatDelay:o,repeatType:l,name:f,motionValue:m,element:y,...b},T=y?.KeyframeResolver||Av;this.keyframeResolver=new T(d,(k,I,j)=>this.onKeyframesResolved(k,I,v,!j),f,m,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,i){this.keyframeResolver=void 0;const{name:o,type:l,velocity:d,delay:f,isHandoff:m,onUpdate:y}=s;this.resolvedAt=zn.now(),ZM(e,o,l,d)||((Ti.instantAnimations||!f)&&y?.(Tv(e,s,t)),e[0]=e[e.length-1],tb(s),s.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>s3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},T=!m&&n3(v),k=v.motionValue?.owner?.current,I=T?new WM({...v,element:k}):new Sv(v);I.finished.then(()=>{this.notifyFinished()}).catch(Ps),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),BM()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function LN(n,e,t,s=0,i=1){const o=Array.from(n).sort((m,y)=>m.sortNodePosition(y)).indexOf(e),l=n.size,d=(l-1)*s;return typeof t=="function"?t(o,l):i===1?o*s:d-o*s}const i3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function a3(n){const e=i3.exec(n);if(!e)return[,];const[,t,s,i]=e;return[`--${t??s}`,i]}function UN(n,e,t=1){const[s,i]=a3(n);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const l=o.trim();return rN(l)?parseFloat(l):l}return xv(i)?UN(i,e,t+1):i}const o3={type:"spring",stiffness:500,damping:25,restSpeed:10},l3=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),c3={type:"keyframes",duration:.8},u3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},d3=(n,{keyframes:e})=>e.length>2?c3:ru.has(n)?n.startsWith("scale")?l3(e[1]):o3:u3,h3=n=>n!==null;function f3(n,{repeat:e,repeatType:t="loop"},s){const i=n.filter(h3),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}function zN(n,e){if(n?.inherit&&e){const{inherit:t,...s}=n;return{...e,...s}}return n}function kv(n,e){const t=n?.[e]??n?.default??n;return t!==n?zN(t,n):t}function m3({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:d,from:f,elapsed:m,...y}){return!!Object.keys(y).length}const Nv=(n,e,t,s={},i,o)=>l=>{const d=kv(s,n)||{},f=d.delay||s.delay||0;let{elapsed:m=0}=s;m=m-nr(f);const y={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:v=>{e.set(v),d.onUpdate&&d.onUpdate(v)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:n,motionValue:e,element:o?void 0:i};m3(d)||Object.assign(y,d3(n,y)),y.duration&&(y.duration=nr(y.duration)),y.repeatDelay&&(y.repeatDelay=nr(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let b=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(tb(y),y.delay===0&&(b=!0)),(Ti.instantAnimations||Ti.skipAnimations||i?.shouldSkipAnimations)&&(b=!0,tb(y),y.delay=0),y.allowFlatten=!d.type&&!d.ease,b&&!o&&e.get()!==void 0){const v=f3(y.keyframes,d);if(v!==void 0){vt.update(()=>{y.onUpdate(v),y.onComplete()});return}}return d.isSync?new Sv(y):new r3(y)};function hS(n){const e=[{},{}];return n?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function Iv(n,e,t,s){if(typeof e=="function"){const[i,o]=hS(s);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=hS(s);e=e(t!==void 0?t:n.custom,i,o)}return e}function vc(n,e,t){const s=n.getProps();return Iv(s,e,t!==void 0?t:s.custom,n)}const BN=new Set(["width","height","top","left","right","bottom",...su]),fS=30,p3=n=>!isNaN(parseFloat(n));class g3{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=zn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=zn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=p3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new pv);const s=this.events[e].add(t);return e==="change"?()=>{s(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fS)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,fS);return oN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ic(n,e){return new g3(n,e)}const nb=n=>Array.isArray(n);function y3(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ic(t))}function x3(n){return nb(n)?n[n.length-1]||0:n}function b3(n,e){const t=vc(n,e);let{transitionEnd:s={},transition:i={},...o}=t||{};o={...o,...s};for(const l in o){const d=x3(o[l]);y3(n,l,d)}}const Dn=n=>!!(n&&n.getVelocity);function v3(n){return!!(Dn(n)&&n.add)}function sb(n,e){const t=n.getValue("willChange");if(v3(t))return t.add(e);if(!t&&Ti.WillChange){const s=new Ti.WillChange("auto");n.addValue("willChange",s),s.add(e)}}function Cv(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const _3="framerAppearId",FN="data-"+Cv(_3);function qN(n){return n.props[FN]}function w3({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function GN(n,e,{delay:t=0,transitionOverride:s,type:i}={}){let{transition:o,transitionEnd:l,...d}=e;const f=n.getDefaultTransition();o=o?zN(o,f):f;const m=o?.reduceMotion;s&&(o=s);const y=[],b=i&&n.animationState&&n.animationState.getState()[i];for(const v in d){const T=n.getValue(v,n.latestValues[v]??null),k=d[v];if(k===void 0||b&&w3(b,v))continue;const I={delay:t,...kv(o||{},v)},j=T.get();if(j!==void 0&&!T.isAnimating&&!Array.isArray(k)&&k===j&&!I.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const $=qN(n);if($){const te=window.MotionHandoffAnimation($,v,vt);te!==null&&(I.startTime=te,P=!0)}}sb(n,v);const L=m??n.shouldReduceMotion;T.start(Nv(v,T,k,L&&BN.has(v)?{type:!1}:I,n,P));const z=T.animation;z&&y.push(z)}if(l){const v=()=>vt.update(()=>{l&&b3(n,l)});y.length?Promise.all(y).then(v):v()}return y}function rb(n,e,t={}){const s=vc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(i=t.transitionOverride);const o=s?()=>Promise.all(GN(n,s,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:b}=i;return T3(n,e,f,m,y,b,t)}:()=>Promise.resolve(),{when:d}=i;if(d){const[f,m]=d==="beforeChildren"?[o,l]:[l,o];return f().then(()=>m())}else return Promise.all([o(),l(t.delay)])}function T3(n,e,t=0,s=0,i=0,o=1,l){const d=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),d.push(rb(f,e,{...l,delay:t+(typeof s=="function"?0:s)+LN(n.variantChildren,f,s,i,o)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(d)}function E3(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(o=>rb(n,o,t));s=Promise.all(i)}else if(typeof e=="string")s=rb(n,e,t);else{const i=typeof e=="function"?vc(n,e,t.custom):e;s=Promise.all(GN(n,i,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}const S3={test:n=>n==="auto",parse:n=>n},HN=n=>e=>e.test(n),$N=[nu,Ne,Or,va,ZV,JV,S3],mS=n=>$N.find(HN(n));function A3(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||aN(n):!0}const k3=new Set(["brightness","contrast","saturate","opacity"]);function N3(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(bv)||[];if(!s)return n;const i=t.replace(s,"");let o=k3.has(e)?1:0;return s!==t&&(o*=100),e+"("+o+i+")"}const I3=/\b([a-z-]*)\(.*?\)/gu,ib={...Pa,getAnimatableNone:n=>{const e=n.match(I3);return e?e.map(N3).join(" "):n}},pS={...nu,transform:Math.round},C3={rotate:va,rotateX:va,rotateY:va,rotateZ:va,scale:Vm,scaleX:Vm,scaleY:Vm,scaleZ:Vm,skew:va,skewX:va,skewY:va,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:ch,originX:tS,originY:tS,originZ:Ne},Rv={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,inset:Ne,insetBlock:Ne,insetBlockStart:Ne,insetBlockEnd:Ne,insetInline:Ne,insetInlineStart:Ne,insetInlineEnd:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,paddingBlock:Ne,paddingBlockStart:Ne,paddingBlockEnd:Ne,paddingInline:Ne,paddingInlineStart:Ne,paddingInlineEnd:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,marginBlock:Ne,marginBlockStart:Ne,marginBlockEnd:Ne,marginInline:Ne,marginInlineStart:Ne,marginInlineEnd:Ne,fontSize:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...C3,zIndex:pS,fillOpacity:ch,strokeOpacity:ch,numOctaves:pS},R3={...Rv,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:ib,WebkitFilter:ib},KN=n=>R3[n];function QN(n,e){let t=KN(n);return t!==ib&&(t=Pa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const j3=new Set(["auto","none","0"]);function D3(n,e,t){let s=0,i;for(;s<n.length&&!i;){const o=n[s];typeof o=="string"&&!j3.has(o)&&uh(o).values.length&&(i=n[s]),s++}if(i&&t)for(const o of e)n[o]=QN(t,i)}class P3 extends Av{constructor(e,t,s,i,o){super(e,t,s,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let y=0;y<e.length;y++){let b=e[y];if(typeof b=="string"&&(b=b.trim(),xv(b))){const v=UN(b,t.current);v!==void 0&&(e[y]=v),y===e.length-1&&(this.finalKeyframe=b)}}if(this.resolveNoneKeyframes(),!BN.has(s)||e.length!==2)return;const[i,o]=e,l=mS(i),d=mS(o),f=eS(i),m=eS(o);if(f!==m&&Aa[s]){this.needsMeasurement=!0;return}if(l!==d)if(cS(l)&&cS(d))for(let y=0;y<e.length;y++){const b=e[y];typeof b=="string"&&(e[y]=parseFloat(b))}else Aa[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||A3(e[i]))&&s.push(i);s.length&&D3(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Aa[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,l=s[o];s[o]=Aa[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const V3=new Set(["opacity","clipPath","filter","transform"]);function YN(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const i=t?.[n]??s.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n).filter(s=>s!=null)}const XN=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function ab(n){return iN(n)&&"offsetHeight"in n}const{schedule:jv}=xN(queueMicrotask,!1),Ws={x:!1,y:!1};function WN(){return Ws.x||Ws.y}function M3(n){return n==="x"||n==="y"?Ws[n]?null:(Ws[n]=!0,()=>{Ws[n]=!1}):Ws.x||Ws.y?null:(Ws.x=Ws.y=!0,()=>{Ws.x=Ws.y=!1})}function JN(n,e){const t=YN(n),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[t,i,()=>s.abort()]}function O3(n){return!(n.pointerType==="touch"||WN())}function L3(n,e,t={}){const[s,i,o]=JN(n,t);return s.forEach(l=>{let d=!1,f=!1,m;const y=()=>{l.removeEventListener("pointerleave",k)},b=j=>{m&&(m(j),m=void 0),y()},v=j=>{d=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f&&(f=!1,b(j))},T=()=>{d=!0,window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",v,i)},k=j=>{if(j.pointerType!=="touch"){if(d){f=!0;return}b(j)}},I=j=>{if(!O3(j))return;f=!1;const P=e(l,j);typeof P=="function"&&(m=P,l.addEventListener("pointerleave",k,i))};l.addEventListener("pointerenter",I,i),l.addEventListener("pointerdown",T,i)}),o}const ZN=(n,e)=>e?n===e?!0:ZN(n,e.parentElement):!1,Dv=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,U3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function z3(n){return U3.has(n.tagName)||n.isContentEditable===!0}const B3=new Set(["INPUT","SELECT","TEXTAREA"]);function F3(n){return B3.has(n.tagName)||n.isContentEditable===!0}const ep=new WeakSet;function gS(n){return e=>{e.key==="Enter"&&n(e)}}function ox(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const q3=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=gS(()=>{if(ep.has(t))return;ox(t,"down");const i=gS(()=>{ox(t,"up")}),o=()=>ox(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function yS(n){return Dv(n)&&!WN()}const xS=new WeakSet;function G3(n,e,t={}){const[s,i,o]=JN(n,t),l=d=>{const f=d.currentTarget;if(!yS(d)||xS.has(d))return;ep.add(f),t.stopPropagation&&xS.add(d);const m=e(f,d),y=(T,k)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",v),ep.has(f)&&ep.delete(f),yS(T)&&typeof m=="function"&&m(T,{success:k})},b=T=>{y(T,f===window||f===document||t.useGlobalTarget||ZN(f,T.target))},v=T=>{y(T,!1)};window.addEventListener("pointerup",b,i),window.addEventListener("pointercancel",v,i)};return s.forEach(d=>{(t.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),ab(d)&&(d.addEventListener("focus",m=>q3(m,i)),!z3(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),o}function Pv(n){return iN(n)&&"ownerSVGElement"in n}const tp=new WeakMap;let np;const eI=(n,e,t)=>(s,i)=>i&&i[0]?i[0][n+"Size"]:Pv(s)&&"getBBox"in s?s.getBBox()[e]:s[t],H3=eI("inline","width","offsetWidth"),$3=eI("block","height","offsetHeight");function K3({target:n,borderBoxSize:e}){tp.get(n)?.forEach(t=>{t(n,{get width(){return H3(n,e)},get height(){return $3(n,e)}})})}function Q3(n){n.forEach(K3)}function Y3(){typeof ResizeObserver>"u"||(np=new ResizeObserver(Q3))}function X3(n,e){np||Y3();const t=YN(n);return t.forEach(s=>{let i=tp.get(s);i||(i=new Set,tp.set(s,i)),i.add(e),np?.observe(s)}),()=>{t.forEach(s=>{const i=tp.get(s);i?.delete(e),i?.size||np?.unobserve(s)})}}const sp=new Set;let gc;function W3(){gc=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};sp.forEach(e=>e(n))},window.addEventListener("resize",gc)}function J3(n){return sp.add(n),gc||W3(),()=>{sp.delete(n),!sp.size&&typeof gc=="function"&&(window.removeEventListener("resize",gc),gc=void 0)}}function bS(n,e){return typeof n=="function"?J3(n):X3(n,e)}function Z3(n){return Pv(n)&&n.tagName==="svg"}const e6=[...$N,nn,Pa],t6=n=>e6.find(HN(n)),vS=()=>({translate:0,scale:1,origin:0,originPoint:0}),yc=()=>({x:vS(),y:vS()}),_S=()=>({min:0,max:0}),cn=()=>({x:_S(),y:_S()}),n6=new WeakMap;function fg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function dh(n){return typeof n=="string"||Array.isArray(n)}const Vv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Mv=["initial",...Vv];function mg(n){return fg(n.animate)||Mv.some(e=>dh(n[e]))}function tI(n){return!!(mg(n)||n.variants)}function s6(n,e,t){for(const s in e){const i=e[s],o=t[s];if(Dn(i))n.addValue(s,i);else if(Dn(o))n.addValue(s,Ic(i,{owner:n}));else if(o!==i)if(n.hasValue(s)){const l=n.getValue(s);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=n.getStaticValue(s);n.addValue(s,Ic(l!==void 0?l:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const ob={current:null},nI={current:!1},r6=typeof window<"u";function i6(){if(nI.current=!0,!!r6)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>ob.current=n.matches;n.addEventListener("change",e),e()}else ob.current=!1}const wS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let kp={};function sI(n){kp=n}function a6(){return kp}class o6{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:i,skipAnimations:o,blockInitialAnimation:l,visualState:d},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Av,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=zn.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,vt.render(this.render,!1,!0))};const{latestValues:m,renderState:y}=d;this.latestValues=m,this.baseTarget={...m},this.initialValues=t.initial?{...m}:{},this.renderState=y,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=o,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=mg(t),this.isVariantNode=tI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:b,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const T in v){const k=v[T];m[T]!==void 0&&Dn(k)&&k.set(m[T])}}mount(e){if(this.hasBeenMounted)for(const t in this.initialValues)this.values.get(t)?.jump(this.initialValues[t]),this.latestValues[t]=this.initialValues[t];this.current=e,n6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(nI.current||i6(),this.shouldReduceMotion=ob.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),Da(this.notifyUpdate),Da(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&V3.has(e)&&this.current instanceof HTMLElement){const{factory:l,keyframes:d,times:f,ease:m,duration:y}=t.accelerate,b=new MN({element:this.current,name:e,keyframes:d,times:f,ease:m,duration:nr(y)}),v=l(b);this.valueSubscriptions.set(e,()=>{v(),b.cancel()});return}const s=ru.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&vt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kp){const t=kp[e];if(!t)continue;const{isEnabled:s,Feature:i}=t;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<wS.length;s++){const i=wS[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=e[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=s6(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=Ic(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(rN(s)||aN(s))?s=parseFloat(s):!t6(s)&&Pa.test(t)&&(s=QN(e,t)),this.setBaseTarget(e,Dn(s)?s.get():s)),Dn(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const o=Iv(this.props,t,this.presenceContext?.custom);o&&(s=o[e])}if(t&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Dn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new pv),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){jv.render(this.render)}}class rI extends o6{constructor(){super(...arguments),this.KeyframeResolver=P3}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const s=e.style;return s?s[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Ha{constructor(e){this.isMounted=!1,this.node=e}update(){}}function iI({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function l6({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function c6(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function lx(n){return n===void 0||n===1}function lb({scale:n,scaleX:e,scaleY:t}){return!lx(n)||!lx(e)||!lx(t)}function Do(n){return lb(n)||aI(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function aI(n){return TS(n.x)||TS(n.y)}function TS(n){return n&&n!=="0%"}function Np(n,e,t){const s=n-t,i=e*s;return t+i}function ES(n,e,t,s,i){return i!==void 0&&(n=Np(n,i,s)),Np(n,t,s)+e}function cb(n,e=0,t=1,s,i){n.min=ES(n.min,e,t,s,i),n.max=ES(n.max,e,t,s,i)}function oI(n,{x:e,y:t}){cb(n.x,e.translate,e.scale,e.originPoint),cb(n.y,t.translate,t.scale,t.originPoint)}const SS=.999999999999,AS=1.0000000000001;function u6(n,e,t,s=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,l;for(let d=0;d<i;d++){o=t[d],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&bc(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,oI(n,l)),s&&Do(o.latestValues)&&bc(n,o.latestValues))}e.x<AS&&e.x>SS&&(e.x=1),e.y<AS&&e.y>SS&&(e.y=1)}function xc(n,e){n.min=n.min+e,n.max=n.max+e}function kS(n,e,t,s,i=.5){const o=Dt(n.min,n.max,i);cb(n,e,t,o,s)}function bc(n,e){kS(n.x,e.x,e.scaleX,e.scale,e.originX),kS(n.y,e.y,e.scaleY,e.scale,e.originY)}function lI(n,e){return iI(c6(n.getBoundingClientRect(),e))}function d6(n,e,t){const s=lI(n,t),{scroll:i}=e;return i&&(xc(s.x,i.offset.x),xc(s.y,i.offset.y)),s}const h6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},f6=su.length;function m6(n,e,t){let s="",i=!0;for(let o=0;o<f6;o++){const l=su[o],d=n[l];if(d===void 0)continue;let f=!0;if(typeof d=="number")f=d===(l.startsWith("scale")?1:0);else{const m=parseFloat(d);f=l.startsWith("scale")?m===1:m===0}if(!f||t){const m=XN(d,Rv[l]);if(!f){i=!1;const y=h6[l]||l;s+=`${y}(${m}) `}t&&(e[l]=m)}}return s=s.trim(),t?s=t(e,i?"":s):i&&(s="none"),s}function Ov(n,e,t){const{style:s,vars:i,transformOrigin:o}=n;let l=!1,d=!1;for(const f in e){const m=e[f];if(ru.has(f)){l=!0;continue}else if(vN(f)){i[f]=m;continue}else{const y=XN(m,Rv[f]);f.startsWith("origin")?(d=!0,o[f]=y):s[f]=y}}if(e.transform||(l||t?s.transform=m6(e,n.transform,t):s.transform&&(s.transform="none")),d){const{originX:f="50%",originY:m="50%",originZ:y=0}=o;s.transformOrigin=`${f} ${m} ${y}`}}function cI(n,{style:e,vars:t},s,i){const o=n.style;let l;for(l in e)o[l]=e[l];i?.applyProjectionStyles(o,s);for(l in t)o.setProperty(l,t[l])}function NS(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Nd={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ne.test(n))n=parseFloat(n);else return n;const t=NS(n,e.target.x),s=NS(n,e.target.y);return`${t}% ${s}%`}},p6={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,i=Pa.parse(n);if(i.length>5)return s;const o=Pa.createTransformer(n),l=typeof i[0]!="number"?1:0,d=t.x.scale*e.x,f=t.y.scale*e.y;i[0+l]/=d,i[1+l]/=f;const m=Dt(d,f,.5);return typeof i[2+l]=="number"&&(i[2+l]/=m),typeof i[3+l]=="number"&&(i[3+l]/=m),o(i)}},ub={borderRadius:{...Nd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nd,borderTopRightRadius:Nd,borderBottomLeftRadius:Nd,borderBottomRightRadius:Nd,boxShadow:p6};function uI(n,{layout:e,layoutId:t}){return ru.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!ub[n]||n==="opacity")}function Lv(n,e,t){const s=n.style,i=e?.style,o={};if(!s)return o;for(const l in s)(Dn(s[l])||i&&Dn(i[l])||uI(l,n)||t?.getValue(l)?.liveStyle!==void 0)&&(o[l]=s[l]);return o}function g6(n){return window.getComputedStyle(n)}class y6 extends rI{constructor(){super(...arguments),this.type="html",this.renderInstance=cI}readValueFromInstance(e,t){if(ru.has(t))return this.projection?.isProjecting?Xx(t):MM(e,t);{const s=g6(e),i=(vN(t)?s.getPropertyValue(t):s[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return lI(e,t)}build(e,t,s){Ov(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return Lv(e,t,s)}}const x6={offset:"stroke-dashoffset",array:"stroke-dasharray"},b6={offset:"strokeDashoffset",array:"strokeDasharray"};function v6(n,e,t=1,s=0,i=!0){n.pathLength=1;const o=i?x6:b6;n[o.offset]=`${-s}`,n[o.array]=`${e} ${t}`}const _6=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function dI(n,{attrX:e,attrY:t,attrScale:s,pathLength:i,pathSpacing:o=1,pathOffset:l=0,...d},f,m,y){if(Ov(n,d,m),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:b,style:v}=n;b.transform&&(v.transform=b.transform,delete b.transform),(v.transform||b.transformOrigin)&&(v.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),v.transform&&(v.transformBox=y?.transformBox??"fill-box",delete b.transformBox);for(const T of _6)b[T]!==void 0&&(v[T]=b[T],delete b[T]);e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),s!==void 0&&(b.scale=s),i!==void 0&&v6(b,i,o,l,!1)}const hI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),fI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function w6(n,e,t,s){cI(n,e,void 0,s);for(const i in e.attrs)n.setAttribute(hI.has(i)?i:Cv(i),e.attrs[i])}function mI(n,e,t){const s=Lv(n,e,t);for(const i in n)if(Dn(n[i])||Dn(e[i])){const o=su.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[o]=n[i]}return s}class T6 extends rI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=cn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ru.has(t)){const s=KN(t);return s&&s.default||0}return t=hI.has(t)?t:Cv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return mI(e,t,s)}build(e,t,s){dI(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,i){w6(e,t,s,i)}mount(e){this.isSVGTag=fI(e.tagName),super.mount(e)}}const E6=Mv.length;function pI(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?pI(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<E6;t++){const s=Mv[t],i=n.props[s];(dh(i)||i===!1)&&(e[s]=i)}return e}function gI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const S6=[...Vv].reverse(),A6=Vv.length;function k6(n){return e=>Promise.all(e.map(({animation:t,options:s})=>E3(n,t,s)))}function N6(n){let e=k6(n),t=IS(),s=!0;const i=f=>(m,y)=>{const b=vc(n,y,f==="exit"?n.presenceContext?.custom:void 0);if(b){const{transition:v,transitionEnd:T,...k}=b;m={...m,...k,...T}}return m};function o(f){e=f(n)}function l(f){const{props:m}=n,y=pI(n.parent)||{},b=[],v=new Set;let T={},k=1/0;for(let j=0;j<A6;j++){const P=S6[j],L=t[P],z=m[P]!==void 0?m[P]:y[P],$=dh(z),te=P===f?L.isActive:null;te===!1&&(k=j);let ce=z===y[P]&&z!==m[P]&&$;if(ce&&s&&n.manuallyAnimateOnMount&&(ce=!1),L.protectedKeys={...T},!L.isActive&&te===null||!z&&!L.prevProp||fg(z)||typeof z=="boolean")continue;if(P==="exit"&&L.isActive&&te!==!0){L.prevResolvedValues&&(T={...T,...L.prevResolvedValues});continue}const D=I6(L.prevProp,z);let S=D||P===f&&L.isActive&&!ce&&$||j>k&&$,A=!1;const O=Array.isArray(z)?z:[z];let U=O.reduce(i(P),{});te===!1&&(U={});const{prevResolvedValues:q={}}=L,V={...q,...U},Pe=ie=>{S=!0,v.has(ie)&&(A=!0,v.delete(ie)),L.needsAnimating[ie]=!0;const ne=n.getValue(ie);ne&&(ne.liveStyle=!1)};for(const ie in V){const ne=U[ie],Ee=q[ie];if(T.hasOwnProperty(ie))continue;let oe=!1;nb(ne)&&nb(Ee)?oe=!gI(ne,Ee):oe=ne!==Ee,oe?ne!=null?Pe(ie):v.add(ie):ne!==void 0&&v.has(ie)?Pe(ie):L.protectedKeys[ie]=!0}L.prevProp=z,L.prevResolvedValues=U,L.isActive&&(T={...T,...U}),s&&n.blockInitialAnimation&&(S=!1);const Ve=ce&&D;S&&(!Ve||A)&&b.push(...O.map(ie=>{const ne={type:P};if(typeof ie=="string"&&s&&!Ve&&n.manuallyAnimateOnMount&&n.parent){const{parent:Ee}=n,oe=vc(Ee,ie);if(Ee.enteringChildren&&oe){const{delayChildren:M}=oe.transition||{};ne.delay=LN(Ee.enteringChildren,n,M)}}return{animation:ie,options:ne}}))}if(v.size){const j={};if(typeof m.initial!="boolean"){const P=vc(n,Array.isArray(m.initial)?m.initial[0]:m.initial);P&&P.transition&&(j.transition=P.transition)}v.forEach(P=>{const L=n.getBaseTarget(P),z=n.getValue(P);z&&(z.liveStyle=!0),j[P]=L??null}),b.push({animation:j})}let I=!!b.length;return s&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(I=!1),s=!1,I?e(b):Promise.resolve()}function d(f,m){if(t[f].isActive===m)return Promise.resolve();n.variantChildren?.forEach(b=>b.animationState?.setActive(f,m)),t[f].isActive=m;const y=l(f);for(const b in t)t[b].protectedKeys={};return y}return{animateChanges:l,setActive:d,setAnimateFunction:o,getState:()=>t,reset:()=>{t=IS()}}}function I6(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!gI(e,n):!1}function Co(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function IS(){return{animate:Co(!0),whileInView:Co(),whileHover:Co(),whileTap:Co(),whileDrag:Co(),whileFocus:Co(),exit:Co()}}function CS(n,e){n.min=e.min,n.max=e.max}function Ys(n,e){CS(n.x,e.x),CS(n.y,e.y)}function RS(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const yI=1e-4,C6=1-yI,R6=1+yI,xI=.01,j6=0-xI,D6=0+xI;function Bn(n){return n.max-n.min}function P6(n,e,t){return Math.abs(n-e)<=t}function jS(n,e,t,s=.5){n.origin=s,n.originPoint=Dt(e.min,e.max,n.origin),n.scale=Bn(t)/Bn(e),n.translate=Dt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=C6&&n.scale<=R6||isNaN(n.scale))&&(n.scale=1),(n.translate>=j6&&n.translate<=D6||isNaN(n.translate))&&(n.translate=0)}function $d(n,e,t,s){jS(n.x,e.x,t.x,s?s.originX:void 0),jS(n.y,e.y,t.y,s?s.originY:void 0)}function DS(n,e,t){n.min=t.min+e.min,n.max=n.min+Bn(e)}function V6(n,e,t){DS(n.x,e.x,t.x),DS(n.y,e.y,t.y)}function PS(n,e,t){n.min=e.min-t.min,n.max=n.min+Bn(e)}function Ip(n,e,t){PS(n.x,e.x,t.x),PS(n.y,e.y,t.y)}function VS(n,e,t,s,i){return n-=e,n=Np(n,1/t,s),i!==void 0&&(n=Np(n,1/i,s)),n}function M6(n,e=0,t=1,s=.5,i,o=n,l=n){if(Or.test(e)&&(e=parseFloat(e),e=Dt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=Dt(o.min,o.max,s);n===o&&(d-=e),n.min=VS(n.min,e,t,d,i),n.max=VS(n.max,e,t,d,i)}function MS(n,e,[t,s,i],o,l){M6(n,e[t],e[s],e[i],e.scale,o,l)}const O6=["x","scaleX","originX"],L6=["y","scaleY","originY"];function OS(n,e,t,s){MS(n.x,e,O6,t?t.x:void 0,s?s.x:void 0),MS(n.y,e,L6,t?t.y:void 0,s?s.y:void 0)}function LS(n){return n.translate===0&&n.scale===1}function bI(n){return LS(n.x)&&LS(n.y)}function US(n,e){return n.min===e.min&&n.max===e.max}function U6(n,e){return US(n.x,e.x)&&US(n.y,e.y)}function zS(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function vI(n,e){return zS(n.x,e.x)&&zS(n.y,e.y)}function BS(n){return Bn(n.x)/Bn(n.y)}function FS(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function jr(n){return[n("x"),n("y")]}function z6(n,e,t){let s="";const i=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((i||o||l)&&(s=`translate3d(${i}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:y,rotateX:b,rotateY:v,skewX:T,skewY:k}=t;m&&(s=`perspective(${m}px) ${s}`),y&&(s+=`rotate(${y}deg) `),b&&(s+=`rotateX(${b}deg) `),v&&(s+=`rotateY(${v}deg) `),T&&(s+=`skewX(${T}deg) `),k&&(s+=`skewY(${k}deg) `)}const d=n.x.scale*e.x,f=n.y.scale*e.y;return(d!==1||f!==1)&&(s+=`scale(${d}, ${f})`),s||"none"}const _I=["TopLeft","TopRight","BottomLeft","BottomRight"],B6=_I.length,qS=n=>typeof n=="string"?parseFloat(n):n,GS=n=>typeof n=="number"||Ne.test(n);function F6(n,e,t,s,i,o){i?(n.opacity=Dt(0,t.opacity??1,q6(s)),n.opacityExit=Dt(e.opacity??1,0,G6(s))):o&&(n.opacity=Dt(e.opacity??1,t.opacity??1,s));for(let l=0;l<B6;l++){const d=`border${_I[l]}Radius`;let f=HS(e,d),m=HS(t,d);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||GS(f)===GS(m)?(n[d]=Math.max(Dt(qS(f),qS(m),s),0),(Or.test(m)||Or.test(f))&&(n[d]+="%")):n[d]=m}(e.rotate||t.rotate)&&(n.rotate=Dt(e.rotate||0,t.rotate||0,s))}function HS(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const q6=wI(0,.5,mN),G6=wI(.5,.95,Ps);function wI(n,e,t){return s=>s<n?0:s>e?1:t(lh(n,e,s))}function H6(n,e,t){const s=Dn(n)?n:Ic(n);return s.start(Nv("",s,e,t)),s.animation}function hh(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}const $6=(n,e)=>n.depth-e.depth;class K6{constructor(){this.children=[],this.isDirty=!1}add(e){hv(this.children,e),this.isDirty=!0}remove(e){Tp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($6),this.isDirty=!1,this.children.forEach(e)}}function Q6(n,e){const t=zn.now(),s=({timestamp:i})=>{const o=i-t;o>=e&&(Da(s),n(o-e))};return vt.setup(s,!0),()=>Da(s)}function rp(n){return Dn(n)?n.get():n}class Y6{constructor(){this.members=[]}add(e){hv(this.members,e);for(let t=this.members.length-1;t>=0;t--){const s=this.members[t];if(s===e||s===this.lead||s===this.prevLead)continue;const i=s.instance;i&&i.isConnected===!1&&s.isPresent!==!1&&!s.snapshot&&Tp(this.members,s)}e.scheduleRender()}remove(e){if(Tp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let s;for(let i=t;i>=0;i--){const o=this.members[i],l=o.instance;if(o.isPresent!==!1&&(!l||l.isConnected!==!1)){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender();const i=s.options.layoutDependency,o=e.options.layoutDependency;if(!(i!==void 0&&o!==void 0&&i===o)){const f=s.instance;f&&f.isConnected===!1&&!s.snapshot||(e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:d}=e.options;d===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const ip={hasAnimatedSinceResize:!0,hasEverUpdated:!1},cx=["","X","Y","Z"],X6=1e3;let W6=0;function ux(n,e,t,s){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),s&&(s[n]=0))}function TI(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=qN(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",vt,!(i||o))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&TI(s)}function EI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(l={},d=e?.()){this.id=W6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eO),this.nodes.forEach(rO),this.nodes.forEach(iO),this.nodes.forEach(tO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new K6)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new pv),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const f=this.eventHandlers.get(l);f&&f.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Pv(l)&&!Z3(l),this.instance=l;const{layoutId:d,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||d)&&(this.isLayoutDirty=!0),n){let y,b=0;const v=()=>this.root.updateBlockedByResize=!1;vt.read(()=>{b=window.innerWidth}),n(l,()=>{const T=window.innerWidth;T!==b&&(b=T,this.root.updateBlockedByResize=!0,y&&y(),y=Q6(v,250),ip.hasAnimatedSinceResize&&(ip.hasAnimatedSinceResize=!1,this.nodes.forEach(QS)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeLayoutChanged:v,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||uO,{onLayoutAnimationStart:I,onLayoutAnimationComplete:j}=m.getProps(),P=!this.targetLayout||!vI(this.targetLayout,T),L=!b&&v;if(this.options.layoutRoot||this.resumeFrom||L||b&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={...kv(k,"layout"),onPlay:I,onComplete:j};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(y,L)}else b||QS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aO),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&TI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const b=this.path[y];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($S);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(KS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(sO),this.nodes.forEach(J6),this.nodes.forEach(Z6)):this.nodes.forEach(KS),this.clearAllSnapshots();const d=zn.now();kn.delta=Fr(0,1e3/60,d-kn.timestamp),kn.timestamp=d,kn.isProcessing=!0,tx.update.process(kn),tx.preRender.process(kn),tx.render.process(kn),kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nO),this.sharedNodes.forEach(oO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bn(this.snapshot.measuredBox.x)&&!Bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!bI(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;l&&this.instance&&(d||Do(this.latestValues)||y)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return l&&(f=this.removeTransform(f)),dO(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return cn();const d=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hO))){const{scroll:m}=this.root;m&&(xc(d.x,m.offset.x),xc(d.y,m.offset.y))}return d}removeElementScroll(l){const d=cn();if(Ys(d,l),this.scroll?.wasRoot)return d;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:y,options:b}=m;m!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&Ys(d,l),xc(d.x,y.offset.x),xc(d.y,y.offset.y))}return d}applyTransform(l,d=!1){const f=cn();Ys(f,l);for(let m=0;m<this.path.length;m++){const y=this.path[m];!d&&y.options.layoutScroll&&y.scroll&&y!==y.root&&bc(f,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Do(y.latestValues)&&bc(f,y.latestValues)}return Do(this.latestValues)&&bc(f,this.latestValues),f}removeTransform(l){const d=cn();Ys(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!Do(m.latestValues))continue;lb(m.latestValues)&&m.updateSnapshot();const y=cn(),b=m.measurePageBox();Ys(y,b),OS(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return Do(this.latestValues)&&OS(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!this.layout||!(y||b))return;this.resolvedRelativeTargetAt=kn.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=cn(),this.targetWithTransforms=cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),V6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ys(this.target,this.layout.layoutBox),oI(this.target,this.targetDelta)):Ys(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||lb(this.parent.latestValues)||aI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,d,f){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),Ip(this.relativeTargetOrigin,d,f),Ys(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),d=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(f=!1),f)return;const{layout:m,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||y))return;Ys(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,v=this.treeScale.y;u6(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=cn());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RS(this.prevProjectionDelta.x,this.projectionDelta.x),RS(this.prevProjectionDelta.y,this.projectionDelta.y)),$d(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==v||!FS(this.projectionDelta.x,this.prevProjectionDelta.x)||!FS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yc(),this.projectionDelta=yc(),this.projectionDeltaWithTransform=yc()}setAnimationOrigin(l,d=!1){const f=this.snapshot,m=f?f.latestValues:{},y={...this.latestValues},b=yc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const v=cn(),T=f?f.source:void 0,k=this.layout?this.layout.source:void 0,I=T!==k,j=this.getStack(),P=!j||j.members.length<=1,L=!!(I&&!P&&this.options.crossfade===!0&&!this.path.some(cO));this.animationProgress=0;let z;this.mixTargetDelta=$=>{const te=$/1e3;YS(b.x,l.x,te),YS(b.y,l.y,te),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ip(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lO(this.relativeTarget,this.relativeTargetOrigin,v,te),z&&U6(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=cn()),Ys(z,this.relativeTarget)),I&&(this.animationValues=y,F6(y,m,this.latestValues,te,L,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vt.update(()=>{ip.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ic(0)),this.currentAnimation=H6(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(X6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:f,layout:m,latestValues:y}=l;if(!(!d||!f||!m)){if(this!==l&&this.layout&&m&&SI(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||cn();const b=Bn(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+b;const v=Bn(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+v}Ys(d,f),bc(d,y),$d(this.projectionDeltaWithTransform,this.layoutCorrected,d,y)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Y6),this.sharedNodes.get(l).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const m={};f.z&&ux("z",l,m,this.animationValues);for(let y=0;y<cx.length;y++)ux(`rotate${cx[y]}`,l,m,this.animationValues),ux(`skew${cx[y]}`,l,m,this.animationValues);l.render();for(const y in m)l.setStaticValue(y,m[y]),this.animationValues&&(this.animationValues[y]=m[y]);l.scheduleRender()}applyProjectionStyles(l,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=rp(d?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=rp(d?.pointerEvents)||""),this.hasProjected&&!Do(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const y=m.animationValues||m.latestValues;this.applyTransformsToTarget();let b=z6(this.projectionDeltaWithTransform,this.treeScale,y);f&&(b=f(y,b)),l.transform=b;const{x:v,y:T}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${T.origin*100}% 0`,m.animationValues?l.opacity=m===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:l.opacity=m===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const k in ub){if(y[k]===void 0)continue;const{correct:I,applyTo:j,isCSSVariable:P}=ub[k],L=b==="none"?y[k]:I(y[k],m);if(j){const z=j.length;for(let $=0;$<z;$++)l[j[$]]=L}else P?this.options.visualElement.renderState.vars[k]=L:l[k]=L}this.options.layoutId&&(l.pointerEvents=m===this?rp(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach($S),this.root.sharedNodes.clear()}}}function J6(n){n.updateLayout()}function Z6(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=n.layout,{animationType:i}=n.options,o=e.source!==n.layout.source;i==="size"?jr(y=>{const b=o?e.measuredBox[y]:e.layoutBox[y],v=Bn(b);b.min=t[y].min,b.max=b.min+v}):SI(i,e.layoutBox,t)&&jr(y=>{const b=o?e.measuredBox[y]:e.layoutBox[y],v=Bn(t[y]);b.max=b.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+v)});const l=yc();$d(l,t,e.layoutBox);const d=yc();o?$d(d,n.applyTransform(s,!0),e.measuredBox):$d(d,t,e.layoutBox);const f=!bI(l);let m=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:v}=y;if(b&&v){const T=cn();Ip(T,e.layoutBox,b.layoutBox);const k=cn();Ip(k,t,v.layoutBox),vI(T,k)||(m=!0),y.options.layoutRoot&&(n.relativeTarget=k,n.relativeTargetOrigin=T,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:d,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function eO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function tO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function nO(n){n.clearSnapshot()}function $S(n){n.clearMeasurements()}function KS(n){n.isLayoutDirty=!1}function sO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function QS(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function rO(n){n.resolveTargetDelta()}function iO(n){n.calcProjection()}function aO(n){n.resetSkewAndRotation()}function oO(n){n.removeLeadSnapshot()}function YS(n,e,t){n.translate=Dt(e.translate,0,t),n.scale=Dt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function XS(n,e,t,s){n.min=Dt(e.min,t.min,s),n.max=Dt(e.max,t.max,s)}function lO(n,e,t,s){XS(n.x,e.x,t.x,s),XS(n.y,e.y,t.y,s)}function cO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const uO={duration:.45,ease:[.4,0,.1,1]},WS=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),JS=WS("applewebkit/")&&!WS("chrome/")?Math.round:Ps;function ZS(n){n.min=JS(n.min),n.max=JS(n.max)}function dO(n){ZS(n.x),ZS(n.y)}function SI(n,e,t){return n==="position"||n==="preserve-aspect"&&!P6(BS(e),BS(t),.2)}function hO(n){return n!==n.root&&n.scroll?.wasRoot}const fO=EI({attachResizeListener:(n,e)=>hh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),dx={current:void 0},AI=EI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!dx.current){const n=new fO({});n.mount(window),n.setOptions({layoutScroll:!0}),dx.current=n}return dx.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Uv=C.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function eA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function mO(...n){return e=>{let t=!1;const s=n.map(i=>{const o=eA(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<s.length;i++){const o=s[i];typeof o=="function"?o():eA(n[i],null)}}}}function pO(...n){return C.useCallback(mO(...n),n)}class gO extends C.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const s=t.offsetParent,i=ab(s)&&s.offsetWidth||0,o=ab(s)&&s.offsetHeight||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=i-l.width-l.left,l.bottom=o-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function yO({children:n,isPresent:e,anchorX:t,anchorY:s,root:i,pop:o}){const l=C.useId(),d=C.useRef(null),f=C.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=C.useContext(Uv),y=n.props?.ref??n?.ref,b=pO(d,y);return C.useInsertionEffect(()=>{const{width:v,height:T,top:k,left:I,right:j,bottom:P}=f.current;if(e||o===!1||!d.current||!v||!T)return;const L=t==="left"?`left: ${I}`:`right: ${j}`,z=s==="bottom"?`bottom: ${P}`:`top: ${k}`;d.current.dataset.motionPopId=l;const $=document.createElement("style");m&&($.nonce=m);const te=i??document.head;return te.appendChild($),$.sheet&&$.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${T}px !important;
            ${L}px !important;
            ${z}px !important;
          }
        `),()=>{te.contains($)&&te.removeChild($)}},[e]),h.jsx(gO,{isPresent:e,childRef:d,sizeRef:f,pop:o,children:o===!1?n:C.cloneElement(n,{ref:b})})}const xO=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l,anchorX:d,anchorY:f,root:m})=>{const y=dv(bO),b=C.useId();let v=!0,T=C.useMemo(()=>(v=!1,{id:b,initial:e,isPresent:t,custom:i,onExitComplete:k=>{y.set(k,!0);for(const I of y.values())if(!I)return;s&&s()},register:k=>(y.set(k,!1),()=>y.delete(k))}),[t,y,s]);return o&&v&&(T={...T}),C.useMemo(()=>{y.forEach((k,I)=>y.set(I,!1))},[t]),C.useEffect(()=>{!t&&!y.size&&s&&s()},[t]),n=h.jsx(yO,{pop:l==="popLayout",isPresent:t,anchorX:d,anchorY:f,root:m,children:n}),h.jsx(hg.Provider,{value:T,children:n})};function bO(){return new Map}function kI(n=!0){const e=C.useContext(hg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:i}=e,o=C.useId();C.useEffect(()=>{if(n)return i(o)},[n]);const l=C.useCallback(()=>n&&s&&s(o),[o,s,n]);return!t&&s?[!1,l]:[!0]}const Mm=n=>n.key||"";function tA(n){const e=[];return C.Children.forEach(n,t=>{C.isValidElement(t)&&e.push(t)}),e}const ns=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1,anchorX:d="left",anchorY:f="top",root:m})=>{const[y,b]=kI(l),v=C.useMemo(()=>tA(n),[n]),T=l&&!y?[]:v.map(Mm),k=C.useRef(!0),I=C.useRef(v),j=dv(()=>new Map),P=C.useRef(new Set),[L,z]=C.useState(v),[$,te]=C.useState(v);sN(()=>{k.current=!1,I.current=v;for(let S=0;S<$.length;S++){const A=Mm($[S]);T.includes(A)?(j.delete(A),P.current.delete(A)):j.get(A)!==!0&&j.set(A,!1)}},[$,T.length,T.join("-")]);const ce=[];if(v!==L){let S=[...v];for(let A=0;A<$.length;A++){const O=$[A],U=Mm(O);T.includes(U)||(S.splice(A,0,O),ce.push(O))}return o==="wait"&&ce.length&&(S=ce),te(tA(S)),z(v),null}const{forceRender:D}=C.useContext(uv);return h.jsx(h.Fragment,{children:$.map(S=>{const A=Mm(S),O=l&&!y?!1:v===$||T.includes(A),U=()=>{if(P.current.has(A))return;if(P.current.add(A),j.has(A))j.set(A,!0);else return;let q=!0;j.forEach(V=>{V||(q=!1)}),q&&(D?.(),te(I.current),l&&b?.(),s&&s())};return h.jsx(xO,{isPresent:O,initial:!k.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:m,onExitComplete:O?void 0:U,anchorX:d,anchorY:f,children:S},A)})})},NI=C.createContext({strict:!1}),nA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let sA=!1;function vO(){if(sA)return;const n={};for(const e in nA)n[e]={isEnabled:t=>nA[e].some(s=>!!t[s])};sI(n),sA=!0}function II(){return vO(),a6()}function _O(n){const e=II();for(const t in n)e[t]={...e[t],...n[t]};sI(e)}const wO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Cp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||wO.has(n)}let CI=n=>!Cp(n);function TO(n){typeof n=="function"&&(CI=e=>e.startsWith("on")?!Cp(e):n(e))}try{TO(require("@emotion/is-prop-valid").default)}catch{}function EO(n,e,t){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(CI(i)||t===!0&&Cp(i)||!e&&!Cp(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}const pg=C.createContext({});function SO(n,e){if(mg(n)){const{initial:t,animate:s}=n;return{initial:t===!1||dh(t)?t:void 0,animate:dh(s)?s:void 0}}return n.inherit!==!1?e:{}}function AO(n){const{initial:e,animate:t}=SO(n,C.useContext(pg));return C.useMemo(()=>({initial:e,animate:t}),[rA(e),rA(t)])}function rA(n){return Array.isArray(n)?n.join(" "):n}const zv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RI(n,e,t){for(const s in e)!Dn(e[s])&&!uI(s,t)&&(n[s]=e[s])}function kO({transformTemplate:n},e){return C.useMemo(()=>{const t=zv();return Ov(t,e,n),Object.assign({},t.vars,t.style)},[e])}function NO(n,e){const t=n.style||{},s={};return RI(s,t,n),Object.assign(s,kO(n,e)),s}function IO(n,e){const t={},s=NO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const jI=()=>({...zv(),attrs:{}});function CO(n,e,t,s){const i=C.useMemo(()=>{const o=jI();return dI(o,e,fI(s),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};RI(o,n.style,n),i.style={...o,...i.style}}return i}const RO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bv(n){return typeof n!="string"||n.includes("-")?!1:!!(RO.indexOf(n)>-1||/[A-Z]/u.test(n))}function jO(n,e,t,{latestValues:s},i,o=!1,l){const f=(l??Bv(n)?CO:IO)(e,s,i,n),m=EO(e,typeof n=="string",o),y=n!==C.Fragment?{...m,...f,ref:t}:{},{children:b}=e,v=C.useMemo(()=>Dn(b)?b.get():b,[b]);return C.createElement(n,{...y,children:v})}function DO({scrapeMotionValuesFromProps:n,createRenderState:e},t,s,i){return{latestValues:PO(t,s,i,n),renderState:e()}}function PO(n,e,t,s){const i={},o=s(n,{});for(const v in o)i[v]=rp(o[v]);let{initial:l,animate:d}=n;const f=mg(n),m=tI(n);e&&m&&!f&&n.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let y=t?t.initial===!1:!1;y=y||l===!1;const b=y?d:l;if(b&&typeof b!="boolean"&&!fg(b)){const v=Array.isArray(b)?b:[b];for(let T=0;T<v.length;T++){const k=Iv(n,v[T]);if(k){const{transitionEnd:I,transition:j,...P}=k;for(const L in P){let z=P[L];if(Array.isArray(z)){const $=y?z.length-1:0;z=z[$]}z!==null&&(i[L]=z)}for(const L in I)i[L]=I[L]}}}return i}const DI=n=>(e,t)=>{const s=C.useContext(pg),i=C.useContext(hg),o=()=>DO(n,e,s,i);return t?o():dv(o)},VO=DI({scrapeMotionValuesFromProps:Lv,createRenderState:zv}),MO=DI({scrapeMotionValuesFromProps:mI,createRenderState:jI}),OO=Symbol.for("motionComponentSymbol");function LO(n,e,t){const s=C.useRef(t);C.useInsertionEffect(()=>{s.current=t});const i=C.useRef(null);return C.useCallback(o=>{o&&n.onMount?.(o),e&&(o?e.mount(o):e.unmount());const l=s.current;if(typeof l=="function")if(o){const d=l(o);typeof d=="function"&&(i.current=d)}else i.current?(i.current(),i.current=null):l(o);else l&&(l.current=o)},[e])}const PI=C.createContext({});function cc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function UO(n,e,t,s,i,o){const{visualElement:l}=C.useContext(pg),d=C.useContext(NI),f=C.useContext(hg),m=C.useContext(Uv),y=m.reducedMotion,b=m.skipAnimations,v=C.useRef(null),T=C.useRef(!1);s=s||d.renderer,!v.current&&s&&(v.current=s(n,{visualState:e,parent:l,props:t,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:y,skipAnimations:b,isSVG:o}),T.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const k=v.current,I=C.useContext(PI);k&&!k.projection&&i&&(k.type==="html"||k.type==="svg")&&zO(v.current,t,i,I);const j=C.useRef(!1);C.useInsertionEffect(()=>{k&&j.current&&k.update(t,f)});const P=t[FN],L=C.useRef(!!P&&!window.MotionHandoffIsComplete?.(P)&&window.MotionHasOptimisedAnimation?.(P));return sN(()=>{T.current=!0,k&&(j.current=!0,window.MotionIsMounted=!0,k.updateFeatures(),k.scheduleRenderMicrotask(),L.current&&k.animationState&&k.animationState.animateChanges())}),C.useEffect(()=>{k&&(!L.current&&k.animationState&&k.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(P)}),L.current=!1),k.enteringChildren=void 0)}),k}function zO(n,e,t,s){const{layoutId:i,layout:o,drag:l,dragConstraints:d,layoutScroll:f,layoutRoot:m,layoutCrossfade:y}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:VI(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||d&&cc(d),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,crossfade:y,layoutScroll:f,layoutRoot:m})}function VI(n){if(n)return n.options.allowProjection!==!1?n.projection:VI(n.parent)}function hx(n,{forwardMotionProps:e=!1,type:t}={},s,i){s&&_O(s);const o=t?t==="svg":Bv(n),l=o?MO:VO;function d(m,y){let b;const v={...C.useContext(Uv),...m,layoutId:BO(m)},{isStatic:T}=v,k=AO(m),I=l(m,T);if(!T&&nN){FO();const j=qO(v);b=j.MeasureLayout,k.visualElement=UO(n,I,v,i,j.ProjectionNode,o)}return h.jsxs(pg.Provider,{value:k,children:[b&&k.visualElement?h.jsx(b,{visualElement:k.visualElement,...v}):null,jO(n,m,LO(I,k.visualElement,y),I,T,e,o)]})}d.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const f=C.forwardRef(d);return f[OO]=n,f}function BO({layoutId:n}){const e=C.useContext(uv).id;return e&&n!==void 0?e+"-"+n:n}function FO(n,e){C.useContext(NI).strict}function qO(n){const e=II(),{drag:t,layout:s}=e;if(!t&&!s)return{};const i={...t,...s};return{MeasureLayout:t?.isEnabled(n)||s?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function GO(n,e){if(typeof Proxy>"u")return hx;const t=new Map,s=(o,l)=>hx(o,l,n,e),i=(o,l)=>s(o,l);return new Proxy(i,{get:(o,l)=>l==="create"?s:(t.has(l)||t.set(l,hx(l,void 0,n,e)),t.get(l))})}const HO=(n,e)=>e.isSVG??Bv(n)?new T6(e):new y6(e,{allowProjection:n!==C.Fragment});class $O extends Ha{constructor(e){super(e),e.animationState||(e.animationState=N6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();fg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let KO=0;class QO extends Ha{constructor(){super(...arguments),this.id=KO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const YO={animation:{Feature:$O},exit:{Feature:QO}};function Ph(n){return{point:{x:n.pageX,y:n.pageY}}}const XO=n=>e=>Dv(e)&&n(e,Ph(e));function Kd(n,e,t,s){return hh(n,e,XO(t),s)}const MI=({current:n})=>n?n.ownerDocument.defaultView:null,iA=(n,e)=>Math.abs(n-e);function WO(n,e){const t=iA(n.x,e.x),s=iA(n.y,e.y);return Math.sqrt(t**2+s**2)}const aA=new Set(["auto","scroll"]);class OI{constructor(e,t,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:d}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=T=>{this.handleScroll(T.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=mx(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,I=WO(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!I)return;const{point:j}=T,{timestamp:P}=kn;this.history.push({...j,timestamp:P});const{onStart:L,onMove:z}=this.handlers;k||(L&&L(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,T)},this.handlePointerMove=(T,k)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=fx(k,this.transformPagePoint),vt.update(this.updatePoint,!0)},this.handlePointerUp=(T,k)=>{this.end();const{onEnd:I,onSessionEnd:j,resumeAnimation:P}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=mx(T.type==="pointercancel"?this.lastMoveEventInfo:fx(k,this.transformPagePoint),this.history);this.startEvent&&I&&I(T,L),j&&j(T,L)},!Dv(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=i||window;const f=Ph(e),m=fx(f,this.transformPagePoint),{point:y}=m,{timestamp:b}=kn;this.history=[{...y,timestamp:b}];const{onSessionStart:v}=t;v&&v(e,mx(m,this.history)),this.removeListeners=Rh(Kd(this.contextWindow,"pointermove",this.handlePointerMove),Kd(this.contextWindow,"pointerup",this.handlePointerUp),Kd(this.contextWindow,"pointercancel",this.handlePointerUp)),d&&this.startScrollTracking(d)}startScrollTracking(e){let t=e.parentElement;for(;t;){const s=getComputedStyle(t);(aA.has(s.overflowX)||aA.has(s.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const s=e===window,i=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:i.x-t.x,y:i.y-t.y};o.x===0&&o.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,i),vt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Da(this.updatePoint)}}function fx(n,e){return e?{point:e(n.point)}:n}function oA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function mx({point:n},e){return{point:n,delta:oA(n,LI(e)),offset:oA(n,JO(e)),velocity:ZO(e,.1)}}function JO(n){return n[0]}function LI(n){return n[n.length-1]}function ZO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const i=LI(n);for(;t>=0&&(s=n[t],!(i.timestamp-s.timestamp>nr(e)));)t--;if(!s)return{x:0,y:0};s===n[0]&&n.length>2&&i.timestamp-s.timestamp>nr(e)*2&&(s=n[1]);const o=Ds(i.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-s.x)/o,y:(i.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function eL(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?Dt(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?Dt(t,n,s.max):Math.min(n,t)),n}function lA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function tL(n,{top:e,left:t,bottom:s,right:i}){return{x:lA(n.x,t,i),y:lA(n.y,e,s)}}function cA(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function nL(n,e){return{x:cA(n.x,e.x),y:cA(n.y,e.y)}}function sL(n,e){let t=.5;const s=Bn(n),i=Bn(e);return i>s?t=lh(e.min,e.max-s,n.min):s>i&&(t=lh(n.min,n.max-i,e.min)),Fr(0,1,t)}function rL(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const db=.35;function iL(n=db){return n===!1?n=0:n===!0&&(n=db),{x:uA(n,"left","right"),y:uA(n,"top","bottom")}}function uA(n,e,t){return{min:dA(n,e),max:dA(n,t)}}function dA(n,e){return typeof n=="number"?n:n[e]||0}const aL=new WeakMap;class oL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=b=>{t&&this.snapToCursor(Ph(b).point),this.stopAnimation()},l=(b,v)=>{const{drag:T,dragPropagation:k,onDragStart:I}=this.getProps();if(T&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=M3(T),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jr(P=>{let L=this.getAxisMotionValue(P).get()||0;if(Or.test(L)){const{projection:z}=this.visualElement;if(z&&z.layout){const $=z.layout.layoutBox[P];$&&(L=Bn($)*(parseFloat(L)/100))}}this.originPoint[P]=L}),I&&vt.update(()=>I(b,v),!1,!0),sb(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},d=(b,v)=>{this.latestPointerEvent=b,this.latestPanInfo=v;const{dragPropagation:T,dragDirectionLock:k,onDirectionLock:I,onDrag:j}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:P}=v;if(k&&this.currentDirection===null){this.currentDirection=cL(P),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",v.point,P),this.updateAxis("y",v.point,P),this.visualElement.render(),j&&vt.update(()=>j(b,v),!1,!0)},f=(b,v)=>{this.latestPointerEvent=b,this.latestPanInfo=v,this.stop(b,v),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>{const{dragSnapToOrigin:b}=this.getProps();(b||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:y}=this.getProps();this.panSession=new OI(e,{onSessionStart:o,onStart:l,onMove:d,onSessionEnd:f,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:s,contextWindow:MI(this.visualElement),element:this.visualElement.current})}stop(e,t){const s=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!s)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:d}=this.getProps();d&&vt.postRender(()=>d(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,s){const{drag:i}=this.getProps();if(!s||!Om(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=eL(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&cc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=tL(s.layoutBox,e):this.constraints=!1,this.elastic=iL(t),i!==this.constraints&&!cc(e)&&s&&this.constraints&&!this.hasMutatedConstraints&&jr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rL(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!cc(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=d6(s,i.root,this.visualElement.getTransformPagePoint());let l=nL(i.layout.layoutBox,o);if(t){const d=t(l6(l));this.hasMutatedConstraints=!!d,d&&(l=iI(d))}return l}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},m=jr(y=>{if(!Om(y,t,this.currentDirection))return;let b=f&&f[y]||{};l&&(b={min:0,max:0});const v=i?200:1e6,T=i?40:1e7,k={type:"inertia",velocity:s?e[y]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...b};return this.startAxisValueAnimation(y,k)});return Promise.all(m).then(d)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return sb(this.visualElement,e),s.start(Nv(e,s,0,t,this.visualElement,!1))}stopAnimation(){jr(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[t];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){jr(t=>{const{drag:s}=this.getProps();if(!Om(t,s,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[t],f=o.get()||0;o.set(e[t]-Dt(l,d,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!cc(t)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};jr(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const f=d.get();i[l]=sL({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.constraints=!1,this.resolveConstraints(),jr(l=>{if(!Om(l,e,null))return;const d=this.getAxisMotionValue(l),{min:f,max:m}=this.constraints[l];d.set(Dt(f,m,i[l]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;aL.set(this.visualElement,this);const e=this.visualElement.current,t=Kd(e,"pointerdown",m=>{const{drag:y,dragListener:b=!0}=this.getProps(),v=m.target,T=v!==e&&F3(v);y&&b&&!T&&this.start(m)});let s;const i=()=>{const{dragConstraints:m}=this.getProps();cc(m)&&m.current&&(this.constraints=this.resolveRefConstraints(),s||(s=lL(e,m.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),vt.read(i);const d=hh(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:y})=>{this.isDragging&&y&&(jr(b=>{const v=this.getAxisMotionValue(b);v&&(this.originPoint[b]+=m[b].translate,v.set(v.get()+m[b].translate))}),this.visualElement.render())}));return()=>{d(),t(),l(),f&&f(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=db,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:d}}}function hA(n){let e=!0;return()=>{if(e){e=!1;return}n()}}function lL(n,e,t){const s=bS(n,hA(t)),i=bS(e,hA(t));return()=>{s(),i()}}function Om(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function cL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class uL extends Ha{constructor(e){super(e),this.removeGroupControls=Ps,this.removeListeners=Ps,this.controls=new oL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ps}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const px=n=>(e,t)=>{n&&vt.update(()=>n(e,t),!1,!0)};class dL extends Ha{constructor(){super(...arguments),this.removePointerDownListener=Ps}onPointerDown(e){this.session=new OI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:px(e),onStart:px(t),onMove:px(s),onEnd:(o,l)=>{delete this.session,i&&vt.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=Kd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let gx=!1;class hL extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:i}=this.props,{projection:o}=e;o&&(t.group&&t.group.add(o),s&&s.register&&i&&s.register(o),gx&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),ip.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:i,isPresent:o}=this.props,{projection:l}=s;return l&&(l.isPresent=o,e.layoutDependency!==t&&l.setOptions({...l.options,layoutDependency:t}),gx=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||vt.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:i}=e;gx=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function UI(n){const[e,t]=kI(),s=C.useContext(uv);return h.jsx(hL,{...n,layoutGroup:s,switchLayoutGroup:C.useContext(PI),isPresent:e,safeToRemove:t})}const fL={pan:{Feature:dL},drag:{Feature:uL,ProjectionNode:AI,MeasureLayout:UI}};function fA(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=s[i];o&&vt.postRender(()=>o(e,Ph(e)))}class mL extends Ha{mount(){const{current:e}=this.node;e&&(this.unmount=L3(e,(t,s)=>(fA(this.node,s,"Start"),i=>fA(this.node,i,"End"))))}unmount(){}}class pL extends Ha{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rh(hh(this.node.current,"focus",()=>this.onFocus()),hh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mA(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=s[i];o&&vt.postRender(()=>o(e,Ph(e)))}class gL extends Ha{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:s}=this.node.props;this.unmount=G3(e,(i,o)=>(mA(this.node,o,"Start"),(l,{success:d})=>mA(this.node,l,d?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:s?.tap===!1})}unmount(){}}const hb=new WeakMap,yx=new WeakMap,yL=n=>{const e=hb.get(n.target);e&&e(n)},xL=n=>{n.forEach(yL)};function bL({root:n,...e}){const t=n||document;yx.has(t)||yx.set(t,{});const s=yx.get(t),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(xL,{root:n,...e})),s[i]}function vL(n,e,t){const s=bL(e);return hb.set(n,t),s.observe(n),()=>{hb.delete(n),s.unobserve(n)}}const _L={some:0,all:1};class wL extends Ha{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:i="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:_L[i]},d=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,o&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:b}=this.node.getProps(),v=m?y:b;v&&v(f)};return vL(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(TL(e,t))&&this.startObserver()}unmount(){}}function TL({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const EL={inView:{Feature:wL},tap:{Feature:gL},focus:{Feature:pL},hover:{Feature:mL}},SL={layout:{ProjectionNode:AI,MeasureLayout:UI}},AL={...YO,...EL,...fL,...SL},ve=GO(AL,HO),kL=()=>{};var pA={};const zI=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NL=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],d=n[t++],f=((i&7)<<18|(o&63)<<12|(l&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],l=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},BI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,d=l?n[i+1]:0,f=i+2<n.length,m=f?n[i+2]:0,y=o>>2,b=(o&3)<<4|d>>4;let v=(d&15)<<2|m>>6,T=m&63;f||(T=64,l||(v=64)),s.push(t[y],t[b],t[v],t[T])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const b=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||d==null||m==null||b==null)throw new IL;const v=o<<2|d>>4;if(s.push(v),m!==64){const T=d<<4&240|m>>2;if(s.push(T),b!==64){const k=m<<6&192|b;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class IL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CL=function(n){const e=zI(n);return BI.encodeByteArray(e,!0)},Rp=function(n){return CL(n).replace(/\./g,"")},FI=function(n){try{return BI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const RL=()=>qI().__FIREBASE_DEFAULTS__,jL=()=>{if(typeof process>"u"||typeof pA>"u")return;const n=pA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&FI(n[1]);return e&&JSON.parse(e)},gg=()=>{try{return kL()||RL()||jL()||DL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GI=n=>gg()?.emulatorHosts?.[n],HI=n=>{const e=GI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},$I=()=>gg()?.config,KI=n=>gg()?.[`_${n}`];class PL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function $a(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yg(n){return(await fetch(n,{credentials:"include"})).ok}function QI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Rp(JSON.stringify(t)),Rp(JSON.stringify(l)),""].join(".")}const Qd={};function VL(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qd))Qd[e]?n.emulator.push(e):n.prod.push(e);return n}function ML(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let gA=!1;function Fv(n,e){if(typeof window>"u"||typeof document>"u"||!$a(window.location.host)||Qd[n]===e||Qd[n]||gA)return;Qd[n]=e;function t(v){return`__firebase__banner__${v}`}const s="__firebase__banner",o=VL().prod.length>0;function l(){const v=document.getElementById(s);v&&v.remove()}function d(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{gA=!0,l()},v}function y(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function b(){const v=ML(s),T=t("text"),k=document.getElementById(T)||document.createElement("span"),I=t("learnmore"),j=document.getElementById(I)||document.createElement("a"),P=t("preprendIcon"),L=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const z=v.element;d(z),y(j,I);const $=m();f(L,P),z.append(L,k,j,$),document.body.appendChild(z)}o?(k.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function YI(){const n=gg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BL(){const n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function XI(){return!YI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WI(){return!YI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function JI(){try{return typeof indexedDB=="object"}catch{return!1}}function FL(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const qL="FirebaseError";class $r extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=qL,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vh.prototype.create)}}class Vh{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?GL(o,s):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new $r(i,d,s)}}function GL(n,e){return n.replace(HL,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const HL=/\{\$([^}]+)}/g;function $L(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function or(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const o=n[i],l=e[i];if(yA(o)&&yA(l)){if(!or(o,l))return!1}else if(o!==l)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function yA(n){return n!==null&&typeof n=="object"}function Mh(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function KL(n,e){const t=new QL(n,e);return t.subscribe.bind(t)}class QL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let i;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");YL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:s},i.next===void 0&&(i.next=xx),i.error===void 0&&(i.error=xx),i.complete===void 0&&(i.complete=xx);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xx(){}function yt(n){return n&&n._delegate?n._delegate:n}class Va{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Po="[DEFAULT]";class XL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new PL;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JL(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);s===d&&l.resolve(i)}return i}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:WL(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WL(n){return n===Po?void 0:n}function JL(n){return n.instantiationMode==="EAGER"}class ZL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const e9={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},t9=We.INFO,n9={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},s9=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=n9[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qv{constructor(e){this.name=e,this._logLevel=t9,this._logHandler=s9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const r9=(n,e)=>e.some(t=>n instanceof t);let xA,bA;function i9(){return xA||(xA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a9(){return bA||(bA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZI=new WeakMap,fb=new WeakMap,eC=new WeakMap,bx=new WeakMap,Gv=new WeakMap;function o9(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Ia(n.result)),i()},l=()=>{s(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&ZI.set(t,n)}).catch(()=>{}),Gv.set(e,n),e}function l9(n){if(fb.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});fb.set(n,e)}let mb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ia(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function c9(n){mb=n(mb)}function u9(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(vx(this),e,...t);return eC.set(s,e.sort?e.sort():[e]),Ia(s)}:a9().includes(n)?function(...e){return n.apply(vx(this),e),Ia(ZI.get(this))}:function(...e){return Ia(n.apply(vx(this),e))}}function d9(n){return typeof n=="function"?u9(n):(n instanceof IDBTransaction&&l9(n),r9(n,i9())?new Proxy(n,mb):n)}function Ia(n){if(n instanceof IDBRequest)return o9(n);if(bx.has(n))return bx.get(n);const e=d9(n);return e!==n&&(bx.set(n,e),Gv.set(e,n)),e}const vx=n=>Gv.get(n);function h9(n,e,{blocked:t,upgrade:s,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),d=Ia(l);return s&&l.addEventListener("upgradeneeded",f=>{s(Ia(l.result),f.oldVersion,f.newVersion,Ia(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const f9=["get","getKey","getAll","getAllKeys","count"],m9=["put","add","delete","clear"],_x=new Map;function vA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_x.get(e))return _x.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=m9.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||f9.includes(t)))return;const o=async function(l,...d){const f=this.transaction(l,i?"readwrite":"readonly");let m=f.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&f.done]))[0]};return _x.set(e,o),o}c9(n=>({...n,get:(e,t,s)=>vA(e,t)||n.get(e,t,s),has:(e,t)=>!!vA(e,t)||n.has(e,t)}));class p9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g9(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function g9(n){return n.getComponent()?.type==="VERSION"}const pb="@firebase/app",_A="0.14.8";const Ei=new qv("@firebase/app"),y9="@firebase/app-compat",x9="@firebase/analytics-compat",b9="@firebase/analytics",v9="@firebase/app-check-compat",_9="@firebase/app-check",w9="@firebase/auth",T9="@firebase/auth-compat",E9="@firebase/database",S9="@firebase/data-connect",A9="@firebase/database-compat",k9="@firebase/functions",N9="@firebase/functions-compat",I9="@firebase/installations",C9="@firebase/installations-compat",R9="@firebase/messaging",j9="@firebase/messaging-compat",D9="@firebase/performance",P9="@firebase/performance-compat",V9="@firebase/remote-config",M9="@firebase/remote-config-compat",O9="@firebase/storage",L9="@firebase/storage-compat",U9="@firebase/firestore",z9="@firebase/ai",B9="@firebase/firestore-compat",F9="firebase",q9="12.9.0";const jp="[DEFAULT]",G9={[pb]:"fire-core",[y9]:"fire-core-compat",[b9]:"fire-analytics",[x9]:"fire-analytics-compat",[_9]:"fire-app-check",[v9]:"fire-app-check-compat",[w9]:"fire-auth",[T9]:"fire-auth-compat",[E9]:"fire-rtdb",[S9]:"fire-data-connect",[A9]:"fire-rtdb-compat",[k9]:"fire-fn",[N9]:"fire-fn-compat",[I9]:"fire-iid",[C9]:"fire-iid-compat",[R9]:"fire-fcm",[j9]:"fire-fcm-compat",[D9]:"fire-perf",[P9]:"fire-perf-compat",[V9]:"fire-rc",[M9]:"fire-rc-compat",[O9]:"fire-gcs",[L9]:"fire-gcs-compat",[U9]:"fire-fst",[B9]:"fire-fst-compat",[z9]:"fire-vertex","fire-js":"fire-js",[F9]:"fire-js-all"};const Dp=new Map,H9=new Map,gb=new Map;function wA(n,e){try{n.container.addComponent(e)}catch(t){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wo(n){const e=n.name;if(gb.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;gb.set(e,n);for(const t of Dp.values())wA(t,n);for(const t of H9.values())wA(t,n);return!0}function iu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $9(n,e,t=jp){iu(n,e).clearInstance(t)}function js(n){return n==null?!1:n.settings!==void 0}const K9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ca=new Vh("app","Firebase",K9);class Q9{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ca.create("app-deleted",{appName:this._name})}}const ll=q9;function tC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:jp,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Ca.create("bad-app-name",{appName:String(i)});if(t||(t=$I()),!t)throw Ca.create("no-options");const o=Dp.get(i);if(o){if(or(t,o.options)&&or(s,o.config))return o;throw Ca.create("duplicate-app",{appName:i})}const l=new ZL(i);for(const f of gb.values())l.addComponent(f);const d=new Q9(t,s,l);return Dp.set(i,d),d}function Hv(n=jp){const e=Dp.get(n);if(!e&&n===jp&&$I())return tC();if(!e)throw Ca.create("no-app",{appName:n});return e}function Lr(n,e,t){let s=G9[n]??n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(l.join(" "));return}Wo(new Va(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const Y9="firebase-heartbeat-database",X9=1,fh="firebase-heartbeat-store";let wx=null;function nC(){return wx||(wx=h9(Y9,X9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ca.create("idb-open",{originalErrorMessage:n.message})})),wx}async function W9(n){try{const t=(await nC()).transaction(fh),s=await t.objectStore(fh).get(sC(n));return await t.done,s}catch(e){if(e instanceof $r)Ei.warn(e.message);else{const t=Ca.create("idb-get",{originalErrorMessage:e?.message});Ei.warn(t.message)}}}async function TA(n,e){try{const s=(await nC()).transaction(fh,"readwrite");await s.objectStore(fh).put(e,sC(n)),await s.done}catch(t){if(t instanceof $r)Ei.warn(t.message);else{const s=Ca.create("idb-set",{originalErrorMessage:t?.message});Ei.warn(s.message)}}}function sC(n){return`${n.name}!${n.options.appId}`}const J9=1024,Z9=30;class e8{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new n8(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=EA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>Z9){const i=s8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ei.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=EA(),{heartbeatsToSend:t,unsentEntries:s}=t8(this._heartbeatsCache.heartbeats),i=Rp(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ei.warn(e),""}}}function EA(){return new Date().toISOString().substring(0,10)}function t8(n,e=J9){const t=[];let s=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),SA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),SA(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class n8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JI()?FL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await W9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return TA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return TA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function SA(n){return Rp(JSON.stringify({version:2,heartbeats:n})).length}function s8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}function r8(n){Wo(new Va("platform-logger",e=>new p9(e),"PRIVATE")),Wo(new Va("heartbeat",e=>new e8(e),"PRIVATE")),Lr(pb,_A,n),Lr(pb,_A,"esm2020"),Lr("fire-js","")}r8("");function rC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const i8=rC,iC=new Vh("auth","Firebase",rC());const Pp=new qv("@firebase/auth");function a8(n,...e){Pp.logLevel<=We.WARN&&Pp.warn(`Auth (${ll}): ${n}`,...e)}function ap(n,...e){Pp.logLevel<=We.ERROR&&Pp.error(`Auth (${ll}): ${n}`,...e)}function qr(n,...e){throw Kv(n,...e)}function sr(n,...e){return Kv(n,...e)}function $v(n,e,t){const s={...i8(),[e]:t};return new Vh("auth","Firebase",s).create(e,{appName:n.name})}function Ko(n){return $v(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function o8(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&qr(n,"argument-error"),$v(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kv(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return iC.create(n,...e)}function Le(n,e,...t){if(!n)throw Kv(e,...t)}function pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ap(e),new Error(e)}function Si(n,e){n||pi(e)}function yb(){return typeof self<"u"&&self.location?.href||""}function l8(){return AA()==="http:"||AA()==="https:"}function AA(){return typeof self<"u"&&self.location?.protocol||null}function c8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l8()||UL()||"connection"in navigator)?navigator.onLine:!0}function u8(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Oh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Si(t>e,"Short delay should be less than long delay!"),this.isMobile=OL()||zL()}get(){return c8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qv(n,e){Si(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class aC{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const d8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const h8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f8=new Oh(3e4,6e4);function Yv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function au(n,e,t,s,i={}){return oC(n,i,async()=>{let o={},l={};s&&(e==="GET"?l=s:o={body:JSON.stringify(s)});const d=Mh({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...o};return LL()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&$a(n.emulatorConfig.host)&&(m.credentials="include"),aC.fetch()(await lC(n,n.config.apiHost,t,d),m)})}async function oC(n,e,t){n._canInitEmulator=!1;const s={...d8,...e};try{const i=new p8(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Lm(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const d=o.ok?l.errorMessage:l.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lm(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Lm(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Lm(n,"user-disabled",l);const y=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw $v(n,y,m);qr(n,y)}}catch(i){if(i instanceof $r)throw i;qr(n,"network-request-failed",{message:String(i)})}}async function m8(n,e,t,s,i={}){const o=await au(n,e,t,s,i);return"mfaPendingCredential"in o&&qr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function lC(n,e,t,s){const i=`${e}${t}?${s}`,o=n,l=o.config.emulator?Qv(n.config,i):`${n.config.apiScheme}://${i}`;return h8.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class p8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(sr(this.auth,"network-request-failed")),f8.get())})}}function Lm(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=sr(n,e,s);return i.customData._tokenResponse=t,i}async function g8(n,e){return au(n,"POST","/v1/accounts:delete",e)}async function Vp(n,e){return au(n,"POST","/v1/accounts:lookup",e)}function Yd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y8(n,e=!1){const t=yt(n),s=await t.getIdToken(e),i=Xv(s);Le(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:s,authTime:Yd(Tx(i.auth_time)),issuedAtTime:Yd(Tx(i.iat)),expirationTime:Yd(Tx(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Tx(n){return Number(n)*1e3}function Xv(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return ap("JWT malformed, contained fewer than 3 sections"),null;try{const i=FI(t);return i?JSON.parse(i):(ap("Failed to decode base64 JWT payload"),null)}catch(i){return ap("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kA(n){const e=Xv(n);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mh(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof $r&&x8(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function x8({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class b8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class xb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yd(this.lastLoginAt),this.creationTime=Yd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Mp(n){const e=n.auth,t=await n.getIdToken(),s=await mh(n,Vp(e,{idToken:t}));Le(s?.users.length,e,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?cC(i.providerUserInfo):[],l=_8(n.providerData,o),d=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!l?.length,m=d?f:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new xb(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function v8(n){const e=yt(n);await Mp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _8(n,e){return[...n.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function cC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function w8(n,e){const t=await oC(n,{},async()=>{const s=Mh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await lC(n,i,"/v1/token",`key=${o}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:s};return n.emulatorConfig&&$a(n.emulatorConfig.host)&&(f.credentials="include"),aC.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T8(n,e){return au(n,"POST","/v2/accounts:revokeToken",Yv(n,e))}class _c{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=kA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:o}=await w8(e,t);this.updateTokensAndExpiration(s,i,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:o}=t,l=new _c;return s&&(Le(typeof s=="string","internal-error",{appName:e}),l.refreshToken=s),i&&(Le(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Le(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _c,this.toJSON())}_performRefresh(){return pi("not implemented")}}function pa(n,e){Le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class er{constructor({uid:e,auth:t,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new b8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await mh(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return y8(this,e)}reload(){return v8(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Mp(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(js(this.auth.app))return Promise.reject(Ko(this.auth));const e=await this.getIdToken();return await mh(this,g8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:b,emailVerified:v,isAnonymous:T,providerData:k,stsTokenManager:I}=t;Le(b&&I,e,"internal-error");const j=_c.fromJSON(this.name,I);Le(typeof b=="string",e,"internal-error"),pa(s,e.name),pa(i,e.name),Le(typeof v=="boolean",e,"internal-error"),Le(typeof T=="boolean",e,"internal-error"),pa(o,e.name),pa(l,e.name),pa(d,e.name),pa(f,e.name),pa(m,e.name),pa(y,e.name);const P=new er({uid:b,auth:e,email:i,emailVerified:v,displayName:s,isAnonymous:T,photoURL:l,phoneNumber:o,tenantId:d,stsTokenManager:j,createdAt:m,lastLoginAt:y});return k&&Array.isArray(k)&&(P.providerData=k.map(L=>({...L}))),f&&(P._redirectEventId=f),P}static async _fromIdTokenResponse(e,t,s=!1){const i=new _c;i.updateFromServerResponse(t);const o=new er({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Mp(o),o}static async _fromGetAccountInfoResponse(e,t,s){const i=t.users[0];Le(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?cC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,d=new _c;d.updateFromIdToken(s);const f=new er({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(f,m),f}}const NA=new Map;function gi(n){Si(n instanceof Function,"Expected a class definition");let e=NA.get(n);return e?(Si(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,NA.set(n,e),e)}class uC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uC.type="NONE";const IA=uC;function op(n,e,t){return`firebase:${n}:${e}:${t}`}class wc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:o}=this.auth;this.fullUserKey=op(this.userKey,i.apiKey,o),this.fullPersistenceKey=op("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vp(this.auth,{idToken:e}).catch(()=>{});return t?er._fromGetAccountInfoResponse(this.auth,t,e):null}return er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wc(gi(IA),e,s);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=i[0]||gi(IA);const l=op(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const y=await m._get(l);if(y){let b;if(typeof y=="string"){const v=await Vp(e,{idToken:y}).catch(()=>{});if(!v)break;b=await er._fromGetAccountInfoResponse(e,v,y)}else b=er._fromJSON(e,y);m!==o&&(d=b),o=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new wc(o,e,s):(o=f[0],d&&await o._set(l,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new wc(o,e,s))}}function CA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gC(e))return"Blackberry";if(yC(e))return"Webos";if(hC(e))return"Safari";if((e.includes("chrome/")||fC(e))&&!e.includes("edge/"))return"Chrome";if(pC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function dC(n=un()){return/firefox\//i.test(n)}function hC(n=un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fC(n=un()){return/crios\//i.test(n)}function mC(n=un()){return/iemobile/i.test(n)}function pC(n=un()){return/android/i.test(n)}function gC(n=un()){return/blackberry/i.test(n)}function yC(n=un()){return/webos/i.test(n)}function Wv(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function E8(n=un()){return Wv(n)&&!!window.navigator?.standalone}function S8(){return BL()&&document.documentMode===10}function xC(n=un()){return Wv(n)||pC(n)||yC(n)||gC(n)||/windows phone/i.test(n)||mC(n)}function bC(n,e=[]){let t;switch(n){case"Browser":t=CA(un());break;case"Worker":t=`${CA(un())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ll}/${s}`}class A8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((l,d)=>{try{const f=e(o);l(f)}catch(f){d(f)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function k8(n,e={}){return au(n,"GET","/v2/passwordPolicy",Yv(n,e))}const N8=6;class I8{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??N8,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class C8{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RA(this),this.idTokenSubscription=new RA(this),this.beforeStateQueue=new A8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vp(this,{idToken:e}),s=await er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(js(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===l)&&d?.user&&(s=d.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(js(this.app))return Promise.reject(Ko(this));const t=e?yt(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return js(this.app)?Promise.reject(Ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return js(this.app)?Promise.reject(Ko(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k8(this),t=new I8(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vh("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await T8(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gi(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await wc.create(this,[gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(d,this,"internal-error"),d.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,i);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(js(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&a8(`Error while retrieving App Check token: ${e.error}`),e?.token}}function xg(n){return yt(n)}class RA{constructor(e){this.auth=e,this.observer=null,this.addObserver=KL(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R8(n){Jv=n}function j8(n){return Jv.loadJS(n)}function D8(){return Jv.gapiScript}function P8(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function V8(n,e){const t=iu(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(or(o,e??{}))return i;qr(i,"already-initialized")}return t.initialize({options:e})}function M8(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(gi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function O8(n,e,t){const s=xg(n);Le(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,o=vC(e),{host:l,port:d}=L8(e),f=d===null?"":`:${d}`,m={url:`${o}//${l}${f}/`},y=Object.freeze({host:l,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Le(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Le(or(m,s.config.emulator)&&or(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,$a(l)?(yg(`${o}//${l}${f}`),Fv("Auth",!0)):U8()}function vC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function L8(n){const e=vC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const o=i[1];return{host:o,port:jA(s.substr(o.length+1))}}else{const[o,l]=s.split(":");return{host:o,port:jA(l)}}}function jA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function U8(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class _C{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function Tc(n,e){return m8(n,"POST","/v1/accounts:signInWithIdp",Yv(n,e))}const z8="http://localhost";class Jo extends _C{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...o}=t;if(!s||!i)return null;const l=new Jo(s,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Tc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Tc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tc(e,t)}buildRequest(){const e={requestUri:z8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mh(t)}return e}}class Zv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Lh extends Zv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _a extends Lh{constructor(){super("facebook.com")}static credential(e){return Jo._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";class mi extends Lh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jo._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return mi.credential(t,s)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";class wa extends Lh{constructor(){super("github.com")}static credential(e){return Jo._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.GITHUB_SIGN_IN_METHOD="github.com";wa.PROVIDER_ID="github.com";class Ta extends Lh{constructor(){super("twitter.com")}static credential(e,t){return Jo._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ta.credential(t,s)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";class Cc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const o=await er._fromIdTokenResponse(e,s,i),l=DA(s);return new Cc({user:o,providerId:l,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=DA(s);return new Cc({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function DA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Op extends $r{constructor(e,t,s,i){super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Op.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new Op(e,t,s,i)}}function wC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Op._fromErrorAndOperation(n,o,e,s):o})}async function B8(n,e,t=!1){const s=await mh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Cc._forOperation(n,"link",s)}async function F8(n,e,t=!1){const{auth:s}=n;if(js(s.app))return Promise.reject(Ko(s));const i="reauthenticate";try{const o=await mh(n,wC(s,i,e,n),t);Le(o.idToken,s,"internal-error");const l=Xv(o.idToken);Le(l,s,"internal-error");const{sub:d}=l;return Le(n.uid===d,s,"user-mismatch"),Cc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&qr(s,"user-mismatch"),o}}async function q8(n,e,t=!1){if(js(n.app))return Promise.reject(Ko(n));const s="signIn",i=await wC(n,s,e),o=await Cc._fromIdTokenResponse(n,s,i);return t||await n._updateCurrentUser(o.user),o}function G8(n,e,t,s){return yt(n).onIdTokenChanged(e,t,s)}function H8(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function $8(n,e,t,s){return yt(n).onAuthStateChanged(e,t,s)}function K8(n){return yt(n).signOut()}const Lp="__sak";class TC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lp,"1"),this.storage.removeItem(Lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Q8=1e3,Y8=10;class EC extends TC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(s);!t&&this.localCache[s]===l||this.notifyListeners(s,l)},o=this.storage.getItem(s);S8()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Y8):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}EC.type="LOCAL";const X8=EC;class SC extends TC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}SC.type="SESSION";const AC=SC;function W8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class bg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new bg(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const d=Array.from(l).map(async m=>m(t.origin,o)),f=await W8(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bg.receivers=[];function e_(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}class J8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((d,f)=>{const m=e_("",20);i.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},s);l={messageChannel:i,onMessage(b){const v=b;if(v.data.eventId===m)switch(v.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(v.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Ur(){return window}function Z8(n){Ur().location.href=n}function kC(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function eU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tU(){return navigator?.serviceWorker?.controller||null}function nU(){return kC()?self:null}const NC="firebaseLocalStorageDb",sU=1,Up="firebaseLocalStorage",IC="fbase_key";class Uh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vg(n,e){return n.transaction([Up],e?"readwrite":"readonly").objectStore(Up)}function rU(){const n=indexedDB.deleteDatabase(NC);return new Uh(n).toPromise()}function bb(){const n=indexedDB.open(NC,sU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Up,{keyPath:IC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Up)?e(s):(s.close(),await rU(),e(await bb()))})})}async function PA(n,e,t){const s=vg(n,!0).put({[IC]:e,value:t});return new Uh(s).toPromise()}async function iU(n,e){const t=vg(n,!1).get(e),s=await new Uh(t).toPromise();return s===void 0?null:s.value}function VA(n,e){const t=vg(n,!0).delete(e);return new Uh(t).toPromise()}const aU=800,oU=3;class CC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>oU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bg._getInstance(nU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await eU(),!this.activeServiceWorker)return;this.sender=new J8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bb();return await PA(e,Lp,"1"),await VA(e,Lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>PA(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>iU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>VA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=vg(i,!1).getAll();return new Uh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CC.type="LOCAL";const lU=CC;new Oh(3e4,6e4);function RC(n,e){return e?gi(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class t_ extends _C{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cU(n){return q8(n.auth,new t_(n),n.bypassAuthState)}function uU(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),F8(t,new t_(n),n.bypassAuthState)}async function dU(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),B8(t,new t_(n),n.bypassAuthState)}class jC{constructor(e,t,s,i,o=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:o,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cU;case"linkViaPopup":case"linkViaRedirect":return dU;case"reauthViaPopup":case"reauthViaRedirect":return uU;default:qr(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hU=new Oh(2e3,1e4);async function fU(n,e,t){if(js(n.app))return Promise.reject(sr(n,"operation-not-supported-in-this-environment"));const s=xg(n);o8(n,e,Zv);const i=RC(s,t);return new qo(s,"signInViaPopup",e,i).executeNotNull()}class qo extends jC{constructor(e,t,s,i,o){super(e,t,i,o),this.provider=s,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=e_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hU.get())};e()}}qo.currentPopupAction=null;const mU="pendingRedirect",lp=new Map;class pU extends jC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lp.get(this.auth._key());if(!e){try{const s=await gU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}lp.set(this.auth._key(),e)}return this.bypassAuthState||lp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gU(n,e){const t=bU(e),s=xU(n);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}function yU(n,e){lp.set(n._key(),e)}function xU(n){return gi(n._redirectPersistence)}function bU(n){return op(mU,n.config.apiKey,n.name)}async function vU(n,e,t=!1){if(js(n.app))return Promise.reject(Ko(n));const s=xg(n),i=RC(s,e),l=await new pU(s,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}const _U=600*1e3;class wU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!DC(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(sr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_U&&this.cachedEventUids.clear(),this.cachedEventUids.has(MA(e))}saveEventToCache(e){this.cachedEventUids.add(MA(e)),this.lastProcessedEventTime=Date.now()}}function MA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function TU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DC(n);default:return!1}}async function EU(n,e={}){return au(n,"GET","/v1/projects",e)}const SU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AU=/^https?/;async function kU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await EU(n);for(const t of e)try{if(NU(t))return}catch{}qr(n,"unauthorized-domain")}function NU(n){const e=yb(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===s}if(!AU.test(t))return!1;if(SU.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}const IU=new Oh(3e4,6e4);function OA(){const n=Ur().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function CU(n){return new Promise((e,t)=>{function s(){OA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OA(),t(sr(n,"network-request-failed"))},timeout:IU.get()})}if(Ur().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ur().gapi?.load)s();else{const i=P8("iframefcb");return Ur()[i]=()=>{gapi.load?s():t(sr(n,"network-request-failed"))},j8(`${D8()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw cp=null,e})}let cp=null;function RU(n){return cp=cp||CU(n),cp}const jU=new Oh(5e3,15e3),DU="__/auth/iframe",PU="emulator/auth/iframe",VU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OU(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Qv(e,PU):`https://${n.config.authDomain}/${DU}`,s={apiKey:e.apiKey,appName:n.name,v:ll},i=MU.get(n.config.apiHost);i&&(s.eid=i);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${Mh(s).slice(1)}`}async function LU(n){const e=await RU(n),t=Ur().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:OU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VU,dontclear:!0},s=>new Promise(async(i,o)=>{await s.restyle({setHideOnLeave:!1});const l=sr(n,"network-request-failed"),d=Ur().setTimeout(()=>{o(l)},jU.get());function f(){Ur().clearTimeout(d),i(s)}s.ping(f).then(f,()=>{o(l)})}))}const UU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zU=500,BU=600,FU="_blank",qU="http://localhost";class LA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GU(n,e,t,s=zU,i=BU){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const f={...UU,width:s.toString(),height:i.toString(),top:o,left:l},m=un().toLowerCase();t&&(d=fC(m)?FU:t),dC(m)&&(e=e||qU,f.scrollbars="yes");const y=Object.entries(f).reduce((v,[T,k])=>`${v}${T}=${k},`,"");if(E8(m)&&d!=="_self")return HU(e||"",d),new LA(null);const b=window.open(e||"",d,y);Le(b,n,"popup-blocked");try{b.focus()}catch{}return new LA(b)}function HU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const $U="__/auth/handler",KU="emulator/auth/handler",QU=encodeURIComponent("fac");async function UA(n,e,t,s,i,o){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ll,eventId:i};if(e instanceof Zv){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",$L(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))l[y]=b}if(e instanceof Lh){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const d=l;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await n._getAppCheckToken(),m=f?`#${QU}=${encodeURIComponent(f)}`:"";return`${YU(n)}?${Mh(d).slice(1)}${m}`}function YU({config:n}){return n.emulator?Qv(n,KU):`https://${n.authDomain}/${$U}`}const Ex="webStorageSupport";class XU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AC,this._completeRedirectFn=vU,this._overrideRedirectResult=yU}async _openPopup(e,t,s,i){Si(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await UA(e,t,s,yb(),i);return GU(e,o,e_())}async _openRedirect(e,t,s,i){await this._originValidation(e);const o=await UA(e,t,s,yb(),i);return Z8(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Si(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await LU(e),s=new wU(e);return t.register("authEvent",i=>(Le(i?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ex,{type:Ex},i=>{const o=i?.[0]?.[Ex];o!==void 0&&t(!!o),qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xC()||hC()||Wv()}}const WU=XU;var zA="@firebase/auth",BA="1.12.0";class JU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ZU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e7(n){Wo(new Va("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=s.options;Le(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:l,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bC(n)},m=new C8(s,i,o,f);return M8(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Wo(new Va("auth-internal",e=>{const t=xg(e.getProvider("auth").getImmediate());return(s=>new JU(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(zA,BA,ZU(n)),Lr(zA,BA,"esm2020")}const t7=300,n7=KI("authIdTokenMaxAge")||t7;let FA=null;const s7=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>n7)return;const i=t?.token;FA!==i&&(FA=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function r7(n=Hv()){const e=iu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=V8(n,{popupRedirectResolver:WU,persistence:[lU,X8,AC]}),s=KI("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const l=s7(o.toString());H8(t,l,()=>l(t.currentUser)),G8(t,d=>l(d))}}const i=GI("auth");return i&&O8(t,`http://${i}`),t}function i7(){return document.getElementsByTagName("head")?.[0]??document}R8({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=i=>{const o=sr("internal-error");o.customData=i,t(o)},s.type="text/javascript",s.charset="UTF-8",i7().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e7("Browser");var a7="firebase",o7="12.9.0";Lr(a7,o7,"app");var qA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ra,PC;(function(){var n;function e(D,S){function A(){}A.prototype=S.prototype,D.F=S.prototype,D.prototype=new A,D.prototype.constructor=D,D.D=function(O,U,q){for(var V=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)V[Pe-2]=arguments[Pe];return S.prototype[U].apply(O,V)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,S,A){A||(A=0);const O=Array(16);if(typeof S=="string")for(var U=0;U<16;++U)O[U]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(U=0;U<16;++U)O[U]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=D.g[0],A=D.g[1],U=D.g[2];let q=D.g[3],V;V=S+(q^A&(U^q))+O[0]+3614090360&4294967295,S=A+(V<<7&4294967295|V>>>25),V=q+(U^S&(A^U))+O[1]+3905402710&4294967295,q=S+(V<<12&4294967295|V>>>20),V=U+(A^q&(S^A))+O[2]+606105819&4294967295,U=q+(V<<17&4294967295|V>>>15),V=A+(S^U&(q^S))+O[3]+3250441966&4294967295,A=U+(V<<22&4294967295|V>>>10),V=S+(q^A&(U^q))+O[4]+4118548399&4294967295,S=A+(V<<7&4294967295|V>>>25),V=q+(U^S&(A^U))+O[5]+1200080426&4294967295,q=S+(V<<12&4294967295|V>>>20),V=U+(A^q&(S^A))+O[6]+2821735955&4294967295,U=q+(V<<17&4294967295|V>>>15),V=A+(S^U&(q^S))+O[7]+4249261313&4294967295,A=U+(V<<22&4294967295|V>>>10),V=S+(q^A&(U^q))+O[8]+1770035416&4294967295,S=A+(V<<7&4294967295|V>>>25),V=q+(U^S&(A^U))+O[9]+2336552879&4294967295,q=S+(V<<12&4294967295|V>>>20),V=U+(A^q&(S^A))+O[10]+4294925233&4294967295,U=q+(V<<17&4294967295|V>>>15),V=A+(S^U&(q^S))+O[11]+2304563134&4294967295,A=U+(V<<22&4294967295|V>>>10),V=S+(q^A&(U^q))+O[12]+1804603682&4294967295,S=A+(V<<7&4294967295|V>>>25),V=q+(U^S&(A^U))+O[13]+4254626195&4294967295,q=S+(V<<12&4294967295|V>>>20),V=U+(A^q&(S^A))+O[14]+2792965006&4294967295,U=q+(V<<17&4294967295|V>>>15),V=A+(S^U&(q^S))+O[15]+1236535329&4294967295,A=U+(V<<22&4294967295|V>>>10),V=S+(U^q&(A^U))+O[1]+4129170786&4294967295,S=A+(V<<5&4294967295|V>>>27),V=q+(A^U&(S^A))+O[6]+3225465664&4294967295,q=S+(V<<9&4294967295|V>>>23),V=U+(S^A&(q^S))+O[11]+643717713&4294967295,U=q+(V<<14&4294967295|V>>>18),V=A+(q^S&(U^q))+O[0]+3921069994&4294967295,A=U+(V<<20&4294967295|V>>>12),V=S+(U^q&(A^U))+O[5]+3593408605&4294967295,S=A+(V<<5&4294967295|V>>>27),V=q+(A^U&(S^A))+O[10]+38016083&4294967295,q=S+(V<<9&4294967295|V>>>23),V=U+(S^A&(q^S))+O[15]+3634488961&4294967295,U=q+(V<<14&4294967295|V>>>18),V=A+(q^S&(U^q))+O[4]+3889429448&4294967295,A=U+(V<<20&4294967295|V>>>12),V=S+(U^q&(A^U))+O[9]+568446438&4294967295,S=A+(V<<5&4294967295|V>>>27),V=q+(A^U&(S^A))+O[14]+3275163606&4294967295,q=S+(V<<9&4294967295|V>>>23),V=U+(S^A&(q^S))+O[3]+4107603335&4294967295,U=q+(V<<14&4294967295|V>>>18),V=A+(q^S&(U^q))+O[8]+1163531501&4294967295,A=U+(V<<20&4294967295|V>>>12),V=S+(U^q&(A^U))+O[13]+2850285829&4294967295,S=A+(V<<5&4294967295|V>>>27),V=q+(A^U&(S^A))+O[2]+4243563512&4294967295,q=S+(V<<9&4294967295|V>>>23),V=U+(S^A&(q^S))+O[7]+1735328473&4294967295,U=q+(V<<14&4294967295|V>>>18),V=A+(q^S&(U^q))+O[12]+2368359562&4294967295,A=U+(V<<20&4294967295|V>>>12),V=S+(A^U^q)+O[5]+4294588738&4294967295,S=A+(V<<4&4294967295|V>>>28),V=q+(S^A^U)+O[8]+2272392833&4294967295,q=S+(V<<11&4294967295|V>>>21),V=U+(q^S^A)+O[11]+1839030562&4294967295,U=q+(V<<16&4294967295|V>>>16),V=A+(U^q^S)+O[14]+4259657740&4294967295,A=U+(V<<23&4294967295|V>>>9),V=S+(A^U^q)+O[1]+2763975236&4294967295,S=A+(V<<4&4294967295|V>>>28),V=q+(S^A^U)+O[4]+1272893353&4294967295,q=S+(V<<11&4294967295|V>>>21),V=U+(q^S^A)+O[7]+4139469664&4294967295,U=q+(V<<16&4294967295|V>>>16),V=A+(U^q^S)+O[10]+3200236656&4294967295,A=U+(V<<23&4294967295|V>>>9),V=S+(A^U^q)+O[13]+681279174&4294967295,S=A+(V<<4&4294967295|V>>>28),V=q+(S^A^U)+O[0]+3936430074&4294967295,q=S+(V<<11&4294967295|V>>>21),V=U+(q^S^A)+O[3]+3572445317&4294967295,U=q+(V<<16&4294967295|V>>>16),V=A+(U^q^S)+O[6]+76029189&4294967295,A=U+(V<<23&4294967295|V>>>9),V=S+(A^U^q)+O[9]+3654602809&4294967295,S=A+(V<<4&4294967295|V>>>28),V=q+(S^A^U)+O[12]+3873151461&4294967295,q=S+(V<<11&4294967295|V>>>21),V=U+(q^S^A)+O[15]+530742520&4294967295,U=q+(V<<16&4294967295|V>>>16),V=A+(U^q^S)+O[2]+3299628645&4294967295,A=U+(V<<23&4294967295|V>>>9),V=S+(U^(A|~q))+O[0]+4096336452&4294967295,S=A+(V<<6&4294967295|V>>>26),V=q+(A^(S|~U))+O[7]+1126891415&4294967295,q=S+(V<<10&4294967295|V>>>22),V=U+(S^(q|~A))+O[14]+2878612391&4294967295,U=q+(V<<15&4294967295|V>>>17),V=A+(q^(U|~S))+O[5]+4237533241&4294967295,A=U+(V<<21&4294967295|V>>>11),V=S+(U^(A|~q))+O[12]+1700485571&4294967295,S=A+(V<<6&4294967295|V>>>26),V=q+(A^(S|~U))+O[3]+2399980690&4294967295,q=S+(V<<10&4294967295|V>>>22),V=U+(S^(q|~A))+O[10]+4293915773&4294967295,U=q+(V<<15&4294967295|V>>>17),V=A+(q^(U|~S))+O[1]+2240044497&4294967295,A=U+(V<<21&4294967295|V>>>11),V=S+(U^(A|~q))+O[8]+1873313359&4294967295,S=A+(V<<6&4294967295|V>>>26),V=q+(A^(S|~U))+O[15]+4264355552&4294967295,q=S+(V<<10&4294967295|V>>>22),V=U+(S^(q|~A))+O[6]+2734768916&4294967295,U=q+(V<<15&4294967295|V>>>17),V=A+(q^(U|~S))+O[13]+1309151649&4294967295,A=U+(V<<21&4294967295|V>>>11),V=S+(U^(A|~q))+O[4]+4149444226&4294967295,S=A+(V<<6&4294967295|V>>>26),V=q+(A^(S|~U))+O[11]+3174756917&4294967295,q=S+(V<<10&4294967295|V>>>22),V=U+(S^(q|~A))+O[2]+718787259&4294967295,U=q+(V<<15&4294967295|V>>>17),V=A+(q^(U|~S))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(U+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+q&4294967295}s.prototype.v=function(D,S){S===void 0&&(S=D.length);const A=S-this.blockSize,O=this.C;let U=this.h,q=0;for(;q<S;){if(U==0)for(;q<=A;)i(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<S;)if(O[U++]=D.charCodeAt(q++),U==this.blockSize){i(this,O),U=0;break}}else for(;q<S;)if(O[U++]=D[q++],U==this.blockSize){i(this,O),U=0;break}}this.h=U,this.o+=S},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;S=this.o*8;for(var A=D.length-8;A<D.length;++A)D[A]=S&255,S/=256;for(this.v(D),D=Array(16),S=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)D[S++]=this.g[A]>>>O&255;return D};function o(D,S){var A=d;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=S(D)}function l(D,S){this.h=S;const A=[];let O=!0;for(let U=D.length-1;U>=0;U--){const q=D[U]|0;O&&q==S||(A[U]=q,O=!1)}this.g=A}var d={};function f(D){return-128<=D&&D<128?o(D,function(S){return new l([S|0],S<0?-1:0)}):new l([D|0],D<0?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return b;if(D<0)return j(m(-D));const S=[];let A=1;for(let O=0;D>=A;O++)S[O]=D/A|0,A*=4294967296;return new l(S,0)}function y(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return j(y(D.substring(1),S));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=m(Math.pow(S,8));let O=b;for(let q=0;q<D.length;q+=8){var U=Math.min(8,D.length-q);const V=parseInt(D.substring(q,q+U),S);U<8?(U=m(Math.pow(S,U)),O=O.j(U).add(m(V))):(O=O.j(A),O=O.add(m(V)))}return O}var b=f(0),v=f(1),T=f(16777216);n=l.prototype,n.m=function(){if(I(this))return-j(this).m();let D=0,S=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);D+=(O>=0?O:4294967296+O)*S,S*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(I(this))return"-"+j(this).toString(D);const S=m(Math.pow(D,6));var A=this;let O="";for(;;){const U=$(A,S).g;A=P(A,U.j(S));let q=((A.g.length>0?A.g[0]:A.h)>>>0).toString(D);if(A=U,k(A))return q+O;for(;q.length<6;)q="0"+q;O=q+O}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(let S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function I(D){return D.h==-1}n.l=function(D){return D=P(this,D),I(D)?-1:k(D)?0:1};function j(D){const S=D.g.length,A=[];for(let O=0;O<S;O++)A[O]=~D.g[O];return new l(A,~D.h).add(v)}n.abs=function(){return I(this)?j(this):this},n.add=function(D){const S=Math.max(this.g.length,D.g.length),A=[];let O=0;for(let U=0;U<=S;U++){let q=O+(this.i(U)&65535)+(D.i(U)&65535),V=(q>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);O=V>>>16,q&=65535,V&=65535,A[U]=V<<16|q}return new l(A,A[A.length-1]&-2147483648?-1:0)};function P(D,S){return D.add(j(S))}n.j=function(D){if(k(this)||k(D))return b;if(I(this))return I(D)?j(this).j(j(D)):j(j(this).j(D));if(I(D))return j(this.j(j(D)));if(this.l(T)<0&&D.l(T)<0)return m(this.m()*D.m());const S=this.g.length+D.g.length,A=[];for(var O=0;O<2*S;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let U=0;U<D.g.length;U++){const q=this.i(O)>>>16,V=this.i(O)&65535,Pe=D.i(U)>>>16,Ve=D.i(U)&65535;A[2*O+2*U]+=V*Ve,L(A,2*O+2*U),A[2*O+2*U+1]+=q*Ve,L(A,2*O+2*U+1),A[2*O+2*U+1]+=V*Pe,L(A,2*O+2*U+1),A[2*O+2*U+2]+=q*Pe,L(A,2*O+2*U+2)}for(D=0;D<S;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=S;D<2*S;D++)A[D]=0;return new l(A,0)};function L(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function z(D,S){this.g=D,this.h=S}function $(D,S){if(k(S))throw Error("division by zero");if(k(D))return new z(b,b);if(I(D))return S=$(j(D),S),new z(j(S.g),j(S.h));if(I(S))return S=$(D,j(S)),new z(j(S.g),S.h);if(D.g.length>30){if(I(D)||I(S))throw Error("slowDivide_ only works with positive integers.");for(var A=v,O=S;O.l(D)<=0;)A=te(A),O=te(O);var U=ce(A,1),q=ce(O,1);for(O=ce(O,2),A=ce(A,2);!k(O);){var V=q.add(O);V.l(D)<=0&&(U=U.add(A),q=V),O=ce(O,1),A=ce(A,1)}return S=P(D,U.j(S)),new z(U,S)}for(U=b;D.l(S)>=0;){for(A=Math.max(1,Math.floor(D.m()/S.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),q=m(A),V=q.j(S);I(V)||V.l(D)>0;)A-=O,q=m(A),V=q.j(S);k(q)&&(q=v),U=U.add(q),D=P(D,V)}return new z(U,D)}n.B=function(D){return $(this,D).h},n.and=function(D){const S=Math.max(this.g.length,D.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)&D.i(O);return new l(A,this.h&D.h)},n.or=function(D){const S=Math.max(this.g.length,D.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)|D.i(O);return new l(A,this.h|D.h)},n.xor=function(D){const S=Math.max(this.g.length,D.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)^D.i(O);return new l(A,this.h^D.h)};function te(D){const S=D.g.length+1,A=[];for(let O=0;O<S;O++)A[O]=D.i(O)<<1|D.i(O-1)>>>31;return new l(A,D.h)}function ce(D,S){const A=S>>5;S%=32;const O=D.g.length-A,U=[];for(let q=0;q<O;q++)U[q]=S>0?D.i(q+A)>>>S|D.i(q+A+1)<<32-S:D.i(q+A);return new l(U,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,PC=s,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,Ra=l}).apply(typeof qA<"u"?qA:typeof self<"u"?self:typeof window<"u"?window:{});var Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var VC,Ld,MC,up,vb,OC,LC,UC;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Um=="object"&&Um];for(var _=0;_<p.length;++_){var E=p[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function i(p,_){if(_)e:{var E=s;p=p.split(".");for(var R=0;R<p.length-1;R++){var X=p[R];if(!(X in E))break e;E=E[X]}p=p[p.length-1],R=E[p],_=_(R),_!=R&&_!=null&&e(E,p,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(_){var E=[],R;for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&E.push([R,_[R]]);return E}});var o=o||{},l=this||self;function d(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function f(p,_,E){return p.call.apply(p.bind,arguments)}function m(p,_,E){return m=f,m.apply(null,arguments)}function y(p,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),p.apply(this,R)}}function b(p,_){function E(){}E.prototype=_.prototype,p.Z=_.prototype,p.prototype=new E,p.prototype.constructor=p,p.Ob=function(R,X,re){for(var xe=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)xe[Be-2]=arguments[Be];return _.prototype[X].apply(R,xe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function T(p){const _=p.length;if(_>0){const E=Array(_);for(let R=0;R<_;R++)E[R]=p[R];return E}return[]}function k(p,_){for(let R=1;R<arguments.length;R++){const X=arguments[R];var E=typeof X;if(E=E!="object"?E:X?Array.isArray(X)?"array":E:"null",E=="array"||E=="object"&&typeof X.length=="number"){E=p.length||0;const re=X.length||0;p.length=E+re;for(let xe=0;xe<re;xe++)p[E+xe]=X[xe]}else p.push(X)}}class I{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(p){l.setTimeout(()=>{throw p},0)}function P(){var p=D;let _=null;return p.g&&(_=p.g,p.g=p.g.next,p.g||(p.h=null),_.next=null),_}class L{constructor(){this.h=this.g=null}add(_,E){const R=z.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var z=new I(()=>new $,p=>p.reset());class ${constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ce=!1,D=new L,S=()=>{const p=Promise.resolve(void 0);te=()=>{p.then(A)}};function A(){for(var p;p=P();){try{p.h.call(p.g)}catch(E){j(E)}var _=z;_.j(p),_.h<100&&(_.h++,p.next=_.g,_.g=p)}ce=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(p,_){this.type=p,this.g=this.target=_,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const E=()=>{};l.addEventListener("test",E,_),l.removeEventListener("test",E,_)}catch{}return p})();function V(p){return/^[\s\xa0]*$/.test(p)}function Pe(p,_){U.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,_)}b(Pe,U),Pe.prototype.init=function(p,_){const E=this.type=p.type,R=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget,_||(E=="mouseover"?_=p.fromElement:E=="mouseout"&&(_=p.toElement)),this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),F=0;function ie(p,_,E,R,X){this.listener=p,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=X,this.key=++F,this.da=this.fa=!1}function ne(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ee(p,_,E){for(const R in p)_.call(E,p[R],R,p)}function oe(p,_){for(const E in p)_.call(void 0,p[E],E,p)}function M(p){const _={};for(const E in p)_[E]=p[E];return _}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(p,_){let E,R;for(let X=1;X<arguments.length;X++){R=arguments[X];for(E in R)p[E]=R[E];for(let re=0;re<H.length;re++)E=H[re],Object.prototype.hasOwnProperty.call(R,E)&&(p[E]=R[E])}}function se(p){this.src=p,this.g={},this.h=0}se.prototype.add=function(p,_,E,R,X){const re=p.toString();p=this.g[re],p||(p=this.g[re]=[],this.h++);const xe=ye(p,_,R,X);return xe>-1?(_=p[xe],E||(_.fa=!1)):(_=new ie(_,this.src,re,!!R,X),_.fa=E,p.push(_)),_};function fe(p,_){const E=_.type;if(E in p.g){var R=p.g[E],X=Array.prototype.indexOf.call(R,_,void 0),re;(re=X>=0)&&Array.prototype.splice.call(R,X,1),re&&(ne(_),p.g[E].length==0&&(delete p.g[E],p.h--))}}function ye(p,_,E,R){for(let X=0;X<p.length;++X){const re=p[X];if(!re.da&&re.listener==_&&re.capture==!!E&&re.ha==R)return X}return-1}var we="closure_lm_"+(Math.random()*1e6|0),pe={};function Ce(p,_,E,R,X){if(Array.isArray(_)){for(let re=0;re<_.length;re++)Ce(p,_[re],E,R,X);return null}return E=Tu(E),p&&p[Ve]?p.J(_,E,d(R)?!!R.capture:!1,X):tt(p,_,E,!1,R,X)}function tt(p,_,E,R,X,re){if(!_)throw Error("Invalid event type");const xe=d(X)?!!X.capture:!!X;let Be=rs(p);if(Be||(p[we]=Be=new se(p)),E=Be.add(_,E,R,xe,re),E.proxy)return E;if(R=jt(),E.proxy=R,R.src=p,R.listener=E,p.addEventListener)q||(X=xe),X===void 0&&(X=!1),p.addEventListener(_.toString(),R,X);else if(p.attachEvent)p.attachEvent(rn(_.toString()),R);else if(p.addListener&&p.removeListener)p.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function jt(){function p(E){return _.call(p.src,p.listener,E)}const _=Mn;return p}function In(p,_,E,R,X){if(Array.isArray(_))for(var re=0;re<_.length;re++)In(p,_[re],E,R,X);else R=d(R)?!!R.capture:!!R,E=Tu(E),p&&p[Ve]?(p=p.i,re=String(_).toString(),re in p.g&&(_=p.g[re],E=ye(_,E,R,X),E>-1&&(ne(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete p.g[re],p.h--)))):p&&(p=rs(p))&&(_=p.g[_.toString()],p=-1,_&&(p=ye(_,E,R,X)),(E=p>-1?_[p]:null)&&cr(E))}function cr(p){if(typeof p!="number"&&p&&!p.da){var _=p.src;if(_&&_[Ve])fe(_.i,p);else{var E=p.type,R=p.proxy;_.removeEventListener?_.removeEventListener(E,R,p.capture):_.detachEvent?_.detachEvent(rn(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=rs(_))?(fe(E,p),E.h==0&&(E.src=null,_[we]=null)):ne(p)}}}function rn(p){return p in pe?pe[p]:pe[p]="on"+p}function Mn(p,_){if(p.da)p=!0;else{_=new Pe(_,this);const E=p.listener,R=p.ha||p.src;p.fa&&cr(p),p=E.call(R,_)}return p}function rs(p){return p=p[we],p instanceof se?p:null}var wu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tu(p){return typeof p=="function"?p:(p[wu]||(p[wu]=function(_){return p.handleEvent(_)}),p[wu])}function $t(){O.call(this),this.i=new se(this),this.M=this,this.G=null}b($t,O),$t.prototype[Ve]=!0,$t.prototype.removeEventListener=function(p,_,E,R){In(this,p,_,E,R)};function an(p,_){var E,R=p.G;if(R)for(E=[];R;R=R.G)E.push(R);if(p=p.M,R=_.type||_,typeof _=="string")_=new U(_,p);else if(_ instanceof U)_.target=_.target||p;else{var X=_;_=new U(R,p),Q(_,X)}X=!0;let re,xe;if(E)for(xe=E.length-1;xe>=0;xe--)re=_.g=E[xe],X=Mi(re,R,!0,_)&&X;if(re=_.g=p,X=Mi(re,R,!0,_)&&X,X=Mi(re,R,!1,_)&&X,E)for(xe=0;xe<E.length;xe++)re=_.g=E[xe],X=Mi(re,R,!1,_)&&X}$t.prototype.N=function(){if($t.Z.N.call(this),this.i){var p=this.i;for(const _ in p.g){const E=p.g[_];for(let R=0;R<E.length;R++)ne(E[R]);delete p.g[_],p.h--}}this.G=null},$t.prototype.J=function(p,_,E,R){return this.i.add(String(p),_,!1,E,R)},$t.prototype.K=function(p,_,E,R){return this.i.add(String(p),_,!0,E,R)};function Mi(p,_,E,R){if(_=p.i.g[String(_)],!_)return!0;_=_.concat();let X=!0;for(let re=0;re<_.length;++re){const xe=_[re];if(xe&&!xe.da&&xe.capture==E){const Be=xe.listener,zt=xe.ha||xe.src;xe.fa&&fe(p.i,xe),X=Be.call(zt,R)!==!1&&X}}return X&&!R.defaultPrevented}function Qg(p,_){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(p,_||0)}function sf(p){p.g=Qg(()=>{p.g=null,p.i&&(p.i=!1,sf(p))},p.l);const _=p.h;p.h=null,p.m.apply(null,_)}class On extends O{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:sf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(p){O.call(this),this.h=p,this.g={}}b(eo,O);var Eu=[];function Su(p){Ee(p.g,function(_,E){this.g.hasOwnProperty(E)&&cr(_)},p),p.g={}}eo.prototype.N=function(){eo.Z.N.call(this),Su(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oi=l.JSON.stringify,Yg=l.JSON.parse,rf=class{stringify(p){return l.JSON.stringify(p,void 0)}parse(p){return l.JSON.parse(p,void 0)}};function af(){}function of(){}var Os={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _n(){U.call(this,"d")}b(_n,U);function bs(){U.call(this,"c")}b(bs,U);var Ut={},lf=null;function pl(){return lf=lf||new $t}Ut.Ia="serverreachability";function cf(p){U.call(this,Ut.Ia,p)}b(cf,U);function ur(p){const _=pl();an(_,new cf(_))}Ut.STAT_EVENT="statevent";function to(p,_){U.call(this,Ut.STAT_EVENT,p),this.stat=_}b(to,U);function Kt(p){const _=pl();an(_,new to(_,p))}Ut.Ja="timingevent";function dr(p,_){U.call(this,Ut.Ja,p),this.size=_}b(dr,U);function hr(p,_){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){p()},_)}function Ls(){this.g=!0}Ls.prototype.ua=function(){this.g=!1};function Xg(p,_,E,R,X,re){p.info(function(){if(p.g)if(re){var xe="",Be=re.split("&");for(let rt=0;rt<Be.length;rt++){var zt=Be[rt].split("=");if(zt.length>1){const At=zt[0];zt=zt[1];const Ts=At.split("_");xe=Ts.length>=2&&Ts[1]=="type"?xe+(At+"="+zt+"&"):xe+(At+"=redacted&")}}}else xe=null;else xe=re;return"XMLHTTP REQ ("+R+") [attempt "+X+"]: "+_+`
`+E+`
`+xe})}function uf(p,_,E,R,X,re,xe){p.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+X+"]: "+_+`
`+E+`
`+re+" "+xe})}function fr(p,_,E,R){p.info(function(){return"XMLHTTP TEXT ("+_+"): "+Wg(p,E)+(R?" "+R:"")})}function no(p,_){p.info(function(){return"TIMEOUT: "+_})}Ls.prototype.info=function(){};function Wg(p,_){if(!p.g)return _;if(!_)return null;try{const re=JSON.parse(_);if(re){for(p=0;p<re.length;p++)if(Array.isArray(re[p])){var E=re[p];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var X=R[0];if(X!="noop"&&X!="stop"&&X!="close")for(let xe=1;xe<R.length;xe++)R[xe]=""}}}}return Oi(re)}catch{return _}}var so={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Au={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ku;function ro(){}b(ro,af),ro.prototype.g=function(){return new XMLHttpRequest},ku=new ro;function Qr(p){return encodeURIComponent(String(p))}function df(p){var _=1;p=p.split(":");const E=[];for(;_>0&&p.length;)E.push(p.shift()),_--;return p.length&&E.push(p.join(":")),E}function Us(p,_,E,R){this.j=p,this.i=_,this.l=E,this.S=R||1,this.V=new eo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zs}function zs(){this.i=null,this.g="",this.h=!1}var Qt={},fn={};function mr(p,_,E){p.M=1,p.A=io(Xt(_)),p.u=E,p.R=!0,gl(p,null)}function gl(p,_){p.F=Date.now(),pr(p),p.B=Xt(p.A);var E=p.B,R=p.S;Array.isArray(R)||(R=[String(R)]),vl(E.i,"t",R),p.C=0,E=p.j.L,p.h=new zs,p.g=Af(p.j,E?_:null,!p.u),p.P>0&&(p.O=new On(m(p.Y,p,p.g),p.P)),_=p.V,E=p.g,R=p.ba;var X="readystatechange";Array.isArray(X)||(X&&(Eu[0]=X.toString()),X=Eu);for(let re=0;re<X.length;re++){const xe=Ce(E,X[re],R||_.handleEvent,!1,_.h||_);if(!xe)break;_.g[xe.key]=xe}_=p.J?M(p.J):{},p.u?(p.v||(p.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,_)):(p.v="GET",p.g.ea(p.B,p.v,null,_)),ur(),Xg(p.i,p.v,p.B,p.l,p.S,p.u)}Us.prototype.ba=function(p){p=p.target;const _=this.O;_&&qs(p)==3?_.j():this.Y(p)},Us.prototype.Y=function(p){try{if(p==this.g)e:{const Be=qs(this.g),zt=this.g.ya(),rt=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||wn(this.g)))){this.K||Be!=4||zt==7||(zt==8||rt<=0?ur(3):ur(2)),gr(this);var _=this.g.ca();this.X=_;var E=Jg(this);if(this.o=_==200,uf(this.i,this.v,this.B,this.l,this.S,Be,_),this.o){if(this.U&&!this.L){t:{if(this.g){var R,X=this.g;if((R=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var re=R;break t}}re=null}if(p=re)fr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yr(this,p);else{this.o=!1,this.m=3,Kt(12),is(this),vs(this);break e}}if(this.R){p=!0;let At;for(;!this.K&&this.C<E.length;)if(At=ff(this,E),At==fn){Be==4&&(this.m=4,Kt(14),p=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Qt){this.m=4,Kt(15),fr(this.i,this.l,E,"[Invalid Chunk]"),p=!1;break}else fr(this.i,this.l,At,null),yr(this,At);if(hf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||E.length!=0||this.h.h||(this.m=1,Kt(16),p=!1),this.o=this.o&&p,!p)fr(this.i,this.l,E,"[Invalid Chunked Response]"),is(this),vs(this);else if(E.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Fu(xe),xe.P=!0,Kt(11))}}else fr(this.i,this.l,E,null),yr(this,E);Be==4&&is(this),this.o&&!this.K&&(Be==4?wf(this.j,this):(this.o=!1,pr(this)))}else Xr(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),is(this),vs(this)}}}catch{}};function Jg(p){if(!hf(p))return p.g.la();const _=wn(p.g);if(_==="")return"";let E="";const R=_.length,X=qs(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return is(p),vs(p),"";p.h.i=new l.TextDecoder}for(let re=0;re<R;re++)p.h.h=!0,E+=p.h.i.decode(_[re],{stream:!(X&&re==R-1)});return _.length=0,p.h.g+=E,p.C=0,p.h.g}function hf(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function ff(p,_){var E=p.C,R=_.indexOf(`
`,E);return R==-1?fn:(E=Number(_.substring(E,R)),isNaN(E)?Qt:(R+=1,R+E>_.length?fn:(_=_.slice(R,R+E),p.C=R+E,_)))}Us.prototype.cancel=function(){this.K=!0,is(this)};function pr(p){p.T=Date.now()+p.H,yl(p,p.H)}function yl(p,_){if(p.D!=null)throw Error("WatchDog timer not null");p.D=hr(m(p.aa,p),_)}function gr(p){p.D&&(l.clearTimeout(p.D),p.D=null)}Us.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(no(this.i,this.B),this.M!=2&&(ur(),Kt(17)),is(this),this.m=2,vs(this)):yl(this,this.T-p)};function vs(p){p.j.I==0||p.K||wf(p.j,p)}function is(p){gr(p);var _=p.O;_&&typeof _.dispose=="function"&&_.dispose(),p.O=null,Su(p.V),p.g&&(_=p.g,p.g=null,_.abort(),_.dispose())}function yr(p,_){try{var E=p.j;if(E.I!=0&&(E.g==p||br(E.h,p))){if(!p.L&&br(E.h,p)&&E.I==3){try{var R=E.Ba.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var X=R;if(X[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<p.F)Sl(E),Hi(E);else break e;fo(E),Kt(18)}}else E.xa=X[1],0<E.xa-E.K&&X[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=hr(m(E.Va,E),6e3));xr(E.h)<=1&&E.ta&&(E.ta=void 0)}else Sr(E,11)}else if((p.L||E.g==p)&&Sl(E),!V(_))for(X=E.Ba.g.parse(_),_=0;_<X.length;_++){let rt=X[_];const At=rt[0];if(!(At<=E.K))if(E.K=At,rt=rt[1],E.I==2)if(rt[0]=="c"){E.M=rt[1],E.ba=rt[2];const Ts=rt[3];Ts!=null&&(E.ka=Ts,E.j.info("VER="+E.ka));const Ar=rt[4];Ar!=null&&(E.za=Ar,E.j.info("SVER="+E.za));const Gs=rt[5];Gs!=null&&typeof Gs=="number"&&Gs>0&&(R=1.5*Gs,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Hs=p.g;if(Hs){const mo=Hs.g?Hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mo){var re=R.h;re.g||mo.indexOf("spdy")==-1&&mo.indexOf("quic")==-1&&mo.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Cu(re,re.h),re.h=null))}if(R.G){const Al=Hs.g?Hs.g.getResponseHeader("X-HTTP-Session-Id"):null;Al&&(R.wa=Al,ot(R.J,R.G,Al))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-p.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var xe=p;if(R.na=Sf(R,R.L?R.ba:null,R.W),xe.L){Ru(R.h,xe);var Be=xe,zt=R.O;zt&&(Be.H=zt),Be.D&&(gr(Be),pr(Be)),R.g=xe}else vf(R);E.i.length>0&&Er(E)}else rt[0]!="stop"&&rt[0]!="close"||Sr(E,7);else E.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Sr(E,7):zu(E):rt[0]!="noop"&&E.l&&E.l.qa(rt),E.A=0)}}ur(4)}catch{}}var Yt=class{constructor(p,_){this.g=p,this.map=_}};function Nu(p){this.l=p||10,l.PerformanceNavigationTiming?(p=l.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Iu(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function xr(p){return p.h?1:p.g?p.g.size:0}function br(p,_){return p.h?p.h==_:p.g?p.g.has(_):!1}function Cu(p,_){p.g?p.g.add(_):p.h=_}function Ru(p,_){p.h&&p.h==_?p.h=null:p.g&&p.g.has(_)&&p.g.delete(_)}Nu.prototype.cancel=function(){if(this.i=ju(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ju(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let _=p.i;for(const E of p.g.values())_=_.concat(E.G);return _}return T(p.i)}var mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xl(p,_){if(p){p=p.split("&");for(let E=0;E<p.length;E++){const R=p[E].indexOf("=");let X,re=null;R>=0?(X=p[E].substring(0,R),re=p[E].substring(R+1)):X=p[E],_(X,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function as(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;p instanceof as?(this.l=p.l,mn(this,p.j),this.o=p.o,this.g=p.g,Li(this,p.u),this.h=p.h,Du(this,xf(p.i)),this.m=p.m):p&&(_=String(p).match(mf))?(this.l=!1,mn(this,_[1]||"",!0),this.o=vr(_[2]||""),this.g=vr(_[3]||"",!0),Li(this,_[4]),this.h=vr(_[5]||"",!0),Du(this,_[6]||"",!0),this.m=vr(_[7]||"")):(this.l=!1,this.i=new zi(null,this.l))}as.prototype.toString=function(){const p=[];var _=this.j;_&&p.push(ao(_,bl,!0),":");var E=this.g;return(E||_=="file")&&(p.push("//"),(_=this.o)&&p.push(ao(_,bl,!0),"@"),p.push(Qr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&p.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&p.push("/"),p.push(ao(E,E.charAt(0)=="/"?Pu:pf,!0))),(E=this.i.toString())&&p.push("?",E),(E=this.m)&&p.push("#",ao(E,gf)),p.join("")},as.prototype.resolve=function(p){const _=Xt(this);let E=!!p.j;E?mn(_,p.j):E=!!p.o,E?_.o=p.o:E=!!p.g,E?_.g=p.g:E=p.u!=null;var R=p.h;if(E)Li(_,p.u);else if(E=!!p.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var X=_.h.lastIndexOf("/");X!=-1&&(R=_.h.slice(0,X+1)+R)}if(X=R,X==".."||X==".")R="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){R=X.lastIndexOf("/",0)==0,X=X.split("/");const re=[];for(let xe=0;xe<X.length;){const Be=X[xe++];Be=="."?R&&xe==X.length&&re.push(""):Be==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),R&&xe==X.length&&re.push("")):(re.push(Be),R=!0)}R=re.join("/")}else R=X}return E?_.h=R:E=p.i.toString()!=="",E?Du(_,xf(p.i)):E=!!p.m,E&&(_.m=p.m),_};function Xt(p){return new as(p)}function mn(p,_,E){p.j=E?vr(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function Li(p,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);p.u=_}else p.u=null}function Du(p,_,E){_ instanceof zi?(p.i=_,_l(p.i,p.l)):(E||(_=ao(_,Ui)),p.i=new zi(_,p.l))}function ot(p,_,E){p.i.set(_,E)}function io(p){return ot(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vr(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ao(p,_,E){return typeof p=="string"?(p=encodeURI(p).replace(_,qn),E&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function qn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var bl=/[#\/\?@]/g,pf=/[#\?:]/g,Pu=/[#\?]/g,Ui=/[#\?@]/g,gf=/#/g;function zi(p,_){this.h=this.g=null,this.i=p||null,this.j=!!_}function Gn(p){p.g||(p.g=new Map,p.h=0,p.i&&xl(p.i,function(_,E){p.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=zi.prototype,n.add=function(p,_){Gn(this),this.i=null,p=Bi(this,p);let E=this.g.get(p);return E||this.g.set(p,E=[]),E.push(_),this.h+=1,this};function yf(p,_){Gn(p),_=Bi(p,_),p.g.has(_)&&(p.i=null,p.h-=p.g.get(_).length,p.g.delete(_))}function Vu(p,_){return Gn(p),_=Bi(p,_),p.g.has(_)}n.forEach=function(p,_){Gn(this),this.g.forEach(function(E,R){E.forEach(function(X){p.call(_,X,R,this)},this)},this)};function Mu(p,_){Gn(p);let E=[];if(typeof _=="string")Vu(p,_)&&(E=E.concat(p.g.get(Bi(p,_))));else for(p=Array.from(p.g.values()),_=0;_<p.length;_++)E=E.concat(p[_]);return E}n.set=function(p,_){return Gn(this),this.i=null,p=Bi(this,p),Vu(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[_]),this.h+=1,this},n.get=function(p,_){return p?(p=Mu(this,p),p.length>0?String(p[0]):_):_};function vl(p,_,E){yf(p,_),E.length>0&&(p.i=null,p.g.set(Bi(p,_),T(E)),p.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],_=Array.from(this.g.keys());for(let R=0;R<_.length;R++){var E=_[R];const X=Qr(E);E=Mu(this,E);for(let re=0;re<E.length;re++){let xe=X;E[re]!==""&&(xe+="="+Qr(E[re])),p.push(xe)}}return this.i=p.join("&")};function xf(p){const _=new zi;return _.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),_}function Bi(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function _l(p,_){_&&!p.j&&(Gn(p),p.i=null,p.g.forEach(function(E,R){const X=R.toLowerCase();R!=X&&(yf(this,R),vl(this,X,E))},p)),p.j=_}function Bs(p,_){const E=new Ls;if(l.Image){const R=new Image;R.onload=y(_s,E,"TestLoadImage: loaded",!0,_,R),R.onerror=y(_s,E,"TestLoadImage: error",!1,_,R),R.onabort=y(_s,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=y(_s,E,"TestLoadImage: timeout",!1,_,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=p}else _(!1)}function Ou(p,_){const E=new Ls,R=new AbortController,X=setTimeout(()=>{R.abort(),_s(E,"TestPingServer: timeout",!1,_)},1e4);fetch(p,{signal:R.signal}).then(re=>{clearTimeout(X),re.ok?_s(E,"TestPingServer: ok",!0,_):_s(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(X),_s(E,"TestPingServer: error",!1,_)})}function _s(p,_,E,R,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),R(E)}catch{}}function Fi(){this.g=new rf}function _r(p){this.i=p.Sb||null,this.h=p.ab||!1}b(_r,af),_r.prototype.g=function(){return new oo(this.i,this.h)};function oo(p,_){$t.call(this),this.H=p,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(oo,$t),n=oo.prototype,n.open=function(p,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=_,this.readyState=1,Fs(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(_.body=p),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wl(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function wl(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var _=p.value?p.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!p.done}))&&(this.response=this.responseText+=_)}p.done?qi(this):Fs(this),this.readyState==3&&wl(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,qi(this))},n.Na=function(p){this.g&&(this.response=p,qi(this))},n.ga=function(){this.g&&qi(this)};function qi(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Fs(p)}n.setRequestHeader=function(p,_){this.A.append(p,_)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,p.push(E[0]+": "+E[1]),E=_.next();return p.join(`\r
`)};function Fs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ws(p){let _="";return Ee(p,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function lo(p,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=ws(E),typeof p=="string"?E!=null&&Qr(E):ot(p,_,E))}function ft(p){$t.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(ft,$t);var wr=/^https?$/i,Lu=["POST","PUT"];n=ft.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);_=_?_.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ku.g(),this.g.onreadystatechange=v(m(this.Ca,this));try{this.B=!0,this.g.open(_,String(p),!0),this.B=!1}catch(re){co(this,re);return}if(p=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var X in R)E.set(X,R[X]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const re of R.keys())E.set(re,R.get(re));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(re=>re.toLowerCase()=="content-type"),X=l.FormData&&p instanceof l.FormData,!(Array.prototype.indexOf.call(Lu,_,void 0)>=0)||R||X||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,xe]of E)this.g.setRequestHeader(re,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(re){co(this,re)}};function co(p,_){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=_,p.o=5,Uu(p),Yr(p)}function Uu(p){p.A||(p.A=!0,an(p,"complete"),an(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,an(this,"complete"),an(this,"abort"),Yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),ft.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?uo(this):this.Xa())},n.Xa=function(){uo(this)};function uo(p){if(p.h&&typeof o<"u"){if(p.v&&qs(p)==4)setTimeout(p.Ca.bind(p),0);else if(an(p,"readystatechange"),qs(p)==4){p.h=!1;try{const re=p.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=re===0){let xe=String(p.D).match(mf)[1]||null;!xe&&l.self&&l.self.location&&(xe=l.self.location.protocol.slice(0,-1)),R=!wr.test(xe?xe.toLowerCase():"")}E=R}if(E)an(p,"complete"),an(p,"success");else{p.o=6;try{var X=qs(p)>2?p.g.statusText:""}catch{X=""}p.l=X+" ["+p.ca()+"]",Uu(p)}}finally{Yr(p)}}}}function Yr(p,_){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const E=p.g;p.g=null,_||an(p,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function qs(p){return p.g?p.g.readyState:0}n.ca=function(){try{return qs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var _=this.g.responseText;return p&&_.indexOf(p)==0&&(_=_.substring(p.length)),Yg(_)}};function wn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Xr(p){const _={};p=(p.g&&qs(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<p.length;R++){if(V(p[R]))continue;var E=df(p[R]);const X=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const re=_[X]||[];_[X]=re,re.push(E)}oe(_,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(p,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[p]||_}function Gi(p){this.za=0,this.i=[],this.j=new Ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tr("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tr("baseRetryDelayMs",5e3,p),this.Za=Tr("retryDelaySeedMs",1e4,p),this.Ta=Tr("forwardChannelMaxRetries",2,p),this.va=Tr("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Nu(p&&p.concurrentRequestLimit),this.Ba=new Fi,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Gi.prototype,n.ka=8,n.I=1,n.connect=function(p,_,E,R){Kt(0),this.W=p,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Sf(this,null,this.W),Er(this)};function zu(p){if(Tl(p),p.I==3){var _=p.V++,E=Xt(p.J);if(ot(E,"SID",p.M),ot(E,"RID",_),ot(E,"TYPE","terminate"),ho(p,E),_=new Us(p,p.j,_),_.M=2,_.A=io(Xt(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=_.A,E=!0),E||(_.g=Af(_.j,null),_.g.ea(_.A)),_.F=Date.now(),pr(_)}Ef(p)}function Hi(p){p.g&&(Fu(p),p.g.cancel(),p.g=null)}function Tl(p){Hi(p),p.v&&(l.clearTimeout(p.v),p.v=null),Sl(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&l.clearTimeout(p.m),p.m=null)}function Er(p){if(!Iu(p.h)&&!p.m){p.m=!0;var _=p.Ea;te||S(),ce||(te(),ce=!0),D.add(_,p),p.D=0}}function El(p,_){return xr(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=_.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=hr(m(p.Ea,p,_),Tf(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const X=new Us(this,this.j,p);let re=this.o;if(this.U&&(re?(re=M(re),Q(re,this.U)):re=this.U),this.u!==null||this.R||(X.J=re,re=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=bf(this,X,_),E=Xt(this.J),ot(E,"RID",p),ot(E,"CVER",22),this.G&&ot(E,"X-HTTP-Session-Id",this.G),ho(this,E),re&&(this.R?_="headers="+Qr(ws(re))+"&"+_:this.u&&lo(E,this.u,re)),Cu(this.h,X),this.Ra&&ot(E,"TYPE","init"),this.S?(ot(E,"$req",_),ot(E,"SID","null"),X.U=!0,mr(X,E,null)):mr(X,E,_),this.I=2}}else this.I==3&&(p?Bu(this,p):this.i.length==0||Iu(this.h)||Bu(this))};function Bu(p,_){var E;_?E=_.l:E=p.V++;const R=Xt(p.J);ot(R,"SID",p.M),ot(R,"RID",E),ot(R,"AID",p.K),ho(p,R),p.u&&p.o&&lo(R,p.u,p.o),E=new Us(p,p.j,E,p.D+1),p.u===null&&(E.J=p.o),_&&(p.i=_.G.concat(p.i)),_=bf(p,E,1e3),E.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Cu(p.h,E),mr(E,R,_)}function ho(p,_){p.H&&Ee(p.H,function(E,R){ot(_,R,E)}),p.l&&Ee({},function(E,R){ot(_,R,E)})}function bf(p,_,E){E=Math.min(p.i.length,E);const R=p.l?m(p.l.Ka,p.l,p):null;e:{var X=p.i;let Be=-1;for(;;){const zt=["count="+E];Be==-1?E>0?(Be=X[0].g,zt.push("ofs="+Be)):Be=0:zt.push("ofs="+Be);let rt=!0;for(let At=0;At<E;At++){var re=X[At].g;const Ts=X[At].map;if(re-=Be,re<0)Be=Math.max(0,X[At].g-100),rt=!1;else try{re="req"+re+"_"||"";try{var xe=Ts instanceof Map?Ts:Object.entries(Ts);for(const[Ar,Gs]of xe){let Hs=Gs;d(Gs)&&(Hs=Oi(Gs)),zt.push(re+Ar+"="+encodeURIComponent(Hs))}}catch(Ar){throw zt.push(re+"type="+encodeURIComponent("_badmap")),Ar}}catch{R&&R(Ts)}}if(rt){xe=zt.join("&");break e}}xe=void 0}return p=p.i.splice(0,E),_.G=p,xe}function vf(p){if(!p.g&&!p.v){p.Y=1;var _=p.Da;te||S(),ce||(te(),ce=!0),D.add(_,p),p.A=0}}function fo(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=hr(m(p.Da,p),Tf(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,_f(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=hr(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Hi(this),_f(this))};function Fu(p){p.B!=null&&(l.clearTimeout(p.B),p.B=null)}function _f(p){p.g=new Us(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var _=Xt(p.na);ot(_,"RID","rpc"),ot(_,"SID",p.M),ot(_,"AID",p.K),ot(_,"CI",p.F?"0":"1"),!p.F&&p.ia&&ot(_,"TO",p.ia),ot(_,"TYPE","xmlhttp"),ho(p,_),p.u&&p.o&&lo(_,p.u,p.o),p.O&&(p.g.H=p.O);var E=p.g;p=p.ba,E.M=1,E.A=io(Xt(_)),E.u=null,E.R=!0,gl(E,p)}n.Va=function(){this.C!=null&&(this.C=null,Hi(this),fo(this),Kt(19))};function Sl(p){p.C!=null&&(l.clearTimeout(p.C),p.C=null)}function wf(p,_){var E=null;if(p.g==_){Sl(p),Fu(p),p.g=null;var R=2}else if(br(p.h,_))E=_.G,Ru(p.h,_),R=1;else return;if(p.I!=0){if(_.o)if(R==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var X=p.D;R=pl(),an(R,new dr(R,E)),Er(p)}else vf(p);else if(X=_.m,X==3||X==0&&_.X>0||!(R==1&&El(p,_)||R==2&&fo(p)))switch(E&&E.length>0&&(_=p.h,_.i=_.i.concat(E)),X){case 1:Sr(p,5);break;case 4:Sr(p,10);break;case 3:Sr(p,6);break;default:Sr(p,2)}}}function Tf(p,_){let E=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(E*=2),E*_}function Sr(p,_){if(p.j.info("Error code "+_),_==2){var E=m(p.bb,p),R=p.Ua;const X=!R;R=new as(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||mn(R,"https"),io(R),X?Bs(R.toString(),E):Ou(R.toString(),E)}else Kt(2);p.I=0,p.l&&p.l.pa(_),Ef(p),Tl(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Ef(p){if(p.I=0,p.ja=[],p.l){const _=ju(p.h);(_.length!=0||p.i.length!=0)&&(k(p.ja,_),k(p.ja,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.oa()}}function Sf(p,_,E){var R=E instanceof as?Xt(E):new as(E);if(R.g!="")_&&(R.g=_+"."+R.g),Li(R,R.u);else{var X=l.location;R=X.protocol,_=_?_+"."+X.hostname:X.hostname,X=+X.port;const re=new as(null);R&&mn(re,R),_&&(re.g=_),X&&Li(re,X),E&&(re.h=E),R=re}return E=p.G,_=p.wa,E&&_&&ot(R,E,_),ot(R,"VER",p.ka),ho(p,R),R}function Af(p,_,E){if(_&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=p.Aa&&!p.ma?new ft(new _r({ab:E})):new ft(p.ma),_.Fa(p.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kf(){}n=kf.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $i(){}$i.prototype.g=function(p,_){return new Ln(p,_)};function Ln(p,_){$t.call(this),this.g=new Gi(_),this.l=p,this.h=_&&_.messageUrlParams||null,p=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(p?p["X-WebChannel-Content-Type"]=_.messageContentType:p={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(p?p["X-WebChannel-Client-Profile"]=_.sa:p={"X-WebChannel-Client-Profile":_.sa}),this.g.U=p,(p=_&&_.Qb)&&!V(p)&&(this.g.u=p),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.G=_,p=this.h,p!==null&&_ in p&&(p=this.h,_ in p&&delete p[_])),this.j=new Wr(this)}b(Ln,$t),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){zu(this.g)},Ln.prototype.o=function(p){var _=this.g;if(typeof p=="string"){var E={};E.__data__=p,p=E}else this.v&&(E={},E.__data__=Oi(p),p=E);_.i.push(new Yt(_.Ya++,p)),_.I==3&&Er(_)},Ln.prototype.N=function(){this.g.l=null,delete this.j,zu(this.g),delete this.g,Ln.Z.N.call(this)};function Nf(p){_n.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var _=p.__sm__;if(_){e:{for(const E in _){p=E;break e}p=void 0}(this.i=p)&&(p=this.i,_=_!==null&&p in _?_[p]:void 0),this.data=_}else this.data=p}b(Nf,_n);function If(){bs.call(this),this.status=1}b(If,bs);function Wr(p){this.g=p}b(Wr,kf),Wr.prototype.ra=function(){an(this.g,"a")},Wr.prototype.qa=function(p){an(this.g,new Nf(p))},Wr.prototype.pa=function(p){an(this.g,new If)},Wr.prototype.oa=function(){an(this.g,"b")},$i.prototype.createWebChannel=$i.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,UC=function(){return new $i},LC=function(){return pl()},OC=Ut,vb={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},so.NO_ERROR=0,so.TIMEOUT=8,so.HTTP_ERROR=6,up=so,Au.COMPLETE="complete",MC=Au,of.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",$t.prototype.listen=$t.prototype.J,Ld=of,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,VC=ft}).apply(typeof Um<"u"?Um:typeof self<"u"?self:typeof window<"u"?window:{});class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");let ou="12.9.0";function l7(n){ou=n}const Ma=new qv("@firebase/firestore");function uc(){return Ma.logLevel}function c7(n){Ma.setLogLevel(n)}function me(n,...e){if(Ma.logLevel<=We.DEBUG){const t=e.map(n_);Ma.debug(`Firestore (${ou}): ${n}`,...t)}}function Gt(n,...e){if(Ma.logLevel<=We.ERROR){const t=e.map(n_);Ma.error(`Firestore (${ou}): ${n}`,...t)}}function ss(n,...e){if(Ma.logLevel<=We.WARN){const t=e.map(n_);Ma.warn(`Firestore (${ou}): ${n}`,...t)}}function n_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Te(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,zC(n,s,t)}function zC(n,e,t){let s=`FIRESTORE (${ou}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Gt(s),new Error(s)}function Ie(n,e,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,n||zC(e,i,s)}function u7(n,e){n||Te(57014,e)}function be(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends $r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class BC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(xn.UNAUTHENTICATED)))}shutdown(){}}class d7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class h7{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let s=this.i;const i=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let o=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vn,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},d=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vn)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ie(typeof s.accessToken=="string",31837,{l:s}),new BC(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class f7{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class m7{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new f7(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _b{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p7{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,js(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);const s=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const i=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _b(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _b(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class g7{getToken(){return Promise.resolve(new _b(""))}invalidateToken(){}start(e,t){}shutdown(){}}function y7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class _g{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=y7(40);for(let o=0;o<i.length;++o)s.length<20&&i[o]<t&&(s+=e.charAt(i[o]%62))}return s}}function Oe(n,e){return n<e?-1:n>e?1:0}function wb(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const i=n.charAt(s),o=e.charAt(s);if(i!==o)return Sx(i)===Sx(o)?Oe(i,o):Sx(i)?1:-1}return Oe(n.length,e.length)}const x7=55296,b7=57343;function Sx(n){const e=n.charCodeAt(0);return e>=x7&&e<=b7}function Rc(n,e,t){return n.length===e.length&&n.every(((s,i)=>t(s,e[i])))}function qC(n){return n+"\0"}const Tb="__name__";class Dr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const o=Dr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Oe(e.length,t.length)}static compareSegments(e,t){const s=Dr.isNumericId(e),i=Dr.isNumericId(t);return s&&!i?-1:!s&&i?1:s&&i?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):wb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ra.fromString(e.substring(4,e.length-2))}}class He extends Dr{construct(e,t,s){return new He(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((i=>i.length>0)))}return new He(t)}static emptyPath(){return new He([])}}const v7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Dr{construct(e,t,s){return new St(e,t,s)}static isValidIdentifier(e){return v7.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tb}static keyField(){return new St([Tb])}static fromServerFormat(e){const t=[];let s="",i=0;const o=()=>{if(s.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(s+=d,i++):(o(),i++)}if(o(),l)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(t)}static emptyPath(){return new St([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(He.fromString(e))}static fromName(e){return new ge(He.fromString(e).popFirst(5))}static empty(){return new ge(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new He(e.slice()))}}function s_(n,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GC(n,e,t,s){if(e===!0&&s===!0)throw new de(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GA(n){if(!ge.isDocumentKey(n))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HA(n){if(ge.isDocumentKey(n))throw new de(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function wg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function $e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wg(n);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $C(n,e){if(e<=0)throw new de(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function sn(n,e){const t={typeString:n};return e&&(t.value=e),t}function cl(n,e){if(!HC(n))throw new de(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const i=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const l=n[s];if(i&&typeof l!==i){t=`JSON field '${s}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new de(Z.INVALID_ARGUMENT,t);return!0}const $A=-62135596800,KA=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*KA);return new at(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$A)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KA}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cl(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$A;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:sn("string",at._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new at(0,0))}static max(){return new je(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const jc=-1;class Dc{constructor(e,t,s,i){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=i}}function Eb(n){return n.fields.find((e=>e.kind===2))}function Vo(n){return n.fields.filter((e=>e.kind!==2))}function _7(n,e){let t=Oe(n.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let s=0;s<Math.min(n.fields.length,e.fields.length);++s)if(t=w7(n.fields[s],e.fields[s]),t!==0)return t;return Oe(n.fields.length,e.fields.length)}Dc.UNKNOWN_ID=-1;class Qo{constructor(e,t){this.fieldPath=e,this.kind=t}}function w7(n,e){const t=St.comparator(n.fieldPath,e.fieldPath);return t!==0?t:Oe(n.kind,e.kind)}class Pc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pc(0,ys.min())}}function KC(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=je.fromTimestamp(s===1e9?new at(t+1,0):new at(t,s));return new ys(i,ge.empty(),e)}function QC(n){return new ys(n.readTime,n.key,jc)}class ys{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ys(je.min(),ge.empty(),jc)}static max(){return new ys(je.max(),ge.empty(),jc)}}function r_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}const YC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ka(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==YC)throw n;me("LocalStore","Unexpectedly lost primary lease")}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y(((s,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.reject(t)}static resolve(e){return new Y(((t,s)=>{t(e)}))}static reject(e){return new Y(((t,s)=>{s(e)}))}static waitFor(e){return new Y(((t,s)=>{let i=0,o=0,l=!1;e.forEach((d=>{++i,d.next((()=>{++o,l&&o===i&&t()}),(f=>s(f)))})),l=!0,o===i&&t()}))}static or(e){let t=Y.resolve(!1);for(const s of e)t=t.next((i=>i?Y.resolve(i):s()));return t}static forEach(e,t){const s=[];return e.forEach(((i,o)=>{s.push(t.call(this,i,o))})),this.waitFor(s)}static mapArray(e,t){return new Y(((s,i)=>{const o=e.length,l=new Array(o);let d=0;for(let f=0;f<o;f++){const m=f;t(e[m]).next((y=>{l[m]=y,++d,d===o&&s(l)}),(y=>i(y)))}}))}static doWhile(e,t){return new Y(((s,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):s()};o()}))}}const ms="SimpleDb";class Tg{static open(e,t,s,i){try{return new Tg(t,e.transaction(i,s))}catch(o){throw new Xd(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new vn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Xd(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const i=i_(s.target.error);this.S.reject(new Xd(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(me(ms,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new E7(t)}}class zr{static delete(e){return me(ms,"Removing database:",e),Oo(qI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!JI())return!1;if(zr.F())return!0;const e=un(),t=zr.M(e),s=0<t&&t<10,i=WC(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,zr.M(un())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(me(ms,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{s(new Xd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?s(new de(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?s(new de(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):s(new Xd(e,l))},i.onupgradeneeded=o=>{me(ms,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,i.transaction,o.oldVersion,this.version).next((()=>{me(ms,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const d=Tg.open(this.db,e,o?"readonly":"readwrite",s),f=i(d).next((m=>(d.C(),m))).catch((m=>(d.abort(m),Y.reject(m)))).toPromise();return f.catch((()=>{})),await d.D,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&l<3;if(me(ms,"Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function WC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class T7{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Oo(this.U.delete())}}class Xd extends de{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qa(n){return n.name==="IndexedDbTransactionError"}class E7{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(me(ms,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(me(ms,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Oo(s)}add(e){return me(ms,"ADD",this.store.name,e,e),Oo(this.store.add(e))}get(e){return Oo(this.store.get(e)).next((t=>(t===void 0&&(t=null),me(ms,"GET",this.store.name,e,t),t)))}delete(e){return me(ms,"DELETE",this.store.name,e),Oo(this.store.delete(e))}count(){return me(ms,"COUNT",this.store.name),Oo(this.store.count())}H(e,t){const s=this.options(e,t),i=s.index?this.store.index(s.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(s.range);return new Y(((l,d)=>{o.onerror=f=>{d(f.target.error)},o.onsuccess=f=>{l(f.target.result)}}))}{const o=this.cursor(s),l=[];return this.J(o,((d,f)=>{l.push(f)})).next((()=>l))}}Z(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new Y(((i,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{i(l.target.result)}}))}X(e,t){me(ms,"DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const i=this.cursor(s);return this.J(i,((o,l,d)=>d.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const i=this.cursor(s);return this.J(i,t)}te(e){const t=this.cursor({});return new Y(((s,i)=>{t.onerror=o=>{const l=i_(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((d=>{d?l.continue():s()})):s()}}))}J(e,t){const s=[];return new Y(((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const f=new T7(d),m=t(d.primaryKey,d.value,f);if(m instanceof Y){const y=m.catch((b=>(f.done(),Y.reject(b))));s.push(y)}f.isDone?i():f.G===null?d.continue():d.continue(f.G)}})).next((()=>Y.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Oo(n){return new Y(((e,t)=>{n.onsuccess=s=>{const i=s.target.result;e(i)},n.onerror=s=>{const i=i_(s.target.error);t(i)}}))}let QA=!1;function i_(n){const e=zr.M(un());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QA||(QA=!0,setTimeout((()=>{throw s}),0)),s}}return n}const Wd="IndexBackfiller";class S7{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){me(Wd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();me(Wd,`Documents written: ${t}`)}catch(t){Qa(t)?me(Wd,"Ignoring IndexedDB error during index backfill: ",t):await Ka(t)}await this.re(6e4)}))}}class A7{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let i=t,o=!0;return Y.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!s.has(l))return me(Wd,`Processing collection: ${l}`),this.oe(e,l,i).next((d=>{i-=d,s.add(l)}));o=!1})))).next((()=>t-i))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,s).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,o))).next((d=>(me(Wd,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>l.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((i,o)=>{const l=QC(o);r_(l,s)>0&&(s=l)})),new ys(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Wn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wn.ce=-1;const ja=-1;function zh(n){return n==null}function ph(n){return n===0&&1/n==-1/0}function JC(n){return typeof n=="number"&&Number.isInteger(n)&&!ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const zp="";function Pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YA(e)),e=k7(n.get(t),e);return YA(e)}function k7(n,e){let t=e;const s=n.length;for(let i=0;i<s;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case zp:t+="";break;default:t+=o}}return t}function YA(n){return n+zp+""}function Vr(n){const e=n.length;if(Ie(e>=2,64408,{path:n}),e===2)return Ie(n.charAt(0)===zp&&n.charAt(1)==="",56145,{path:n}),He.emptyPath();const t=e-2,s=[];let i="";for(let o=0;o<e;){const l=n.indexOf(zp,o);switch((l<0||l>t)&&Te(50515,{path:n}),n.charAt(l+1)){case"":const d=n.substring(o,l);let f;i.length===0?f=d:(i+=d,f=i,i=""),s.push(f);break;case"":i+=n.substring(o,l),i+="\0";break;case"":i+=n.substring(o,l+1);break;default:Te(61167,{path:n})}o=l+2}return new He(s)}const Mo="remoteDocuments",Bh="owner",nc="owner",gh="mutationQueues",N7="userId",Js="mutations",XA="batchId",Go="userMutationsIndex",WA=["userId","batchId"];function dp(n,e){return[n,Pn(e)]}function ZC(n,e,t){return[n,Pn(e),t]}const I7={},Vc="documentMutations",Bp="remoteDocumentsV14",C7=["prefixPath","collectionGroup","readTime","documentId"],hp="documentKeyIndex",R7=["prefixPath","collectionGroup","documentId"],eR="collectionGroupIndex",j7=["collectionGroup","readTime","prefixPath","documentId"],yh="remoteDocumentGlobal",Sb="remoteDocumentGlobalKey",Mc="targets",tR="queryTargetsIndex",D7=["canonicalId","targetId"],Oc="targetDocuments",P7=["targetId","path"],a_="documentTargetsIndex",V7=["path","targetId"],Fp="targetGlobalKey",Yo="targetGlobal",xh="collectionParents",M7=["collectionId","parent"],Lc="clientMetadata",O7="clientId",Eg="bundles",L7="bundleId",Sg="namedQueries",U7="name",o_="indexConfiguration",z7="indexId",Ab="collectionGroupIndex",B7="collectionGroup",Jd="indexState",F7=["indexId","uid"],nR="sequenceNumberIndex",q7=["uid","sequenceNumber"],Zd="indexEntries",G7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sR="documentKeyIndex",H7=["indexId","uid","orderedDocumentKey"],Ag="documentOverlays",$7=["userId","collectionPath","documentId"],kb="collectionPathOverlayIndex",K7=["userId","collectionPath","largestBatchId"],rR="collectionGroupOverlayIndex",Q7=["userId","collectionGroup","largestBatchId"],l_="globals",Y7="name",iR=[gh,Js,Vc,Mo,Mc,Bh,Yo,Oc,Lc,yh,xh,Eg,Sg],X7=[...iR,Ag],aR=[gh,Js,Vc,Bp,Mc,Bh,Yo,Oc,Lc,yh,xh,Eg,Sg,Ag],oR=aR,c_=[...oR,o_,Jd,Zd],W7=c_,lR=[...c_,l_],J7=lR;class Nb extends XC{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function hn(n,e){const t=be(n);return zr.O(t.le,e)}function JA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ya(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cR(n,e){const t=[];for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.push(e(n[s],s,n));return t}function uR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _t{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zm(this.root,e,this.comparator,!1)}getReverseIterator(){return new zm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zm(this.root,e,this.comparator,!0)}}class zm{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,s,i,o){this.key=e,this.value=t,this.color=s??Nn.RED,this.left=i??Nn.EMPTY,this.right=o??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,o){return new Nn(e??this.key,t??this.value,s??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const o=s(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,s),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Nn.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,i,o){return this}insert(e,t,s){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ht{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZA(this.data.getIterator())}getIteratorFrom(e){return new ZA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=s.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ht(this.comparator);return t.data=e,t}}class ZA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sc(n){return n.hasNext()?n.getNext():void 0}class Jn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new ht(St.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rc(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class dR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Z7(){return typeof atob<"u"}class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dR("Invalid base64 string: "+o):o}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const ez=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(n){if(Ie(!!n,39018),typeof n=="string"){let e=0;const t=ez.exec(n);if(Ie(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Nt(n.seconds),nanos:Nt(n.nanos)}}function Nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ki(n){return typeof n=="string"?Pt.fromBase64String(n):Pt.fromUint8Array(n)}const hR="server_timestamp",fR="__type__",mR="__previous_value__",pR="__local_write_time__";function kg(n){return(n?.mapValue?.fields||{})[fR]?.stringValue===hR}function Ng(n){const e=n.mapValue.fields[mR];return kg(e)?Ng(e):e}function bh(n){const e=Ai(n.mapValue.fields[pR].timestampValue);return new at(e.seconds,e.nanos)}class tz{constructor(e,t,s,i,o,l,d,f,m,y,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y,this.apiKey=b}}const vh="(default)";class Oa{constructor(e,t){this.projectId=e,this.database=t||vh}static empty(){return new Oa("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}function nz(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(n.options.projectId,e)}const u_="__type__",gR="__max__",ka={mapValue:{fields:{__type__:{stringValue:gR}}}},d_="__vector__",Uc="value",fp={nullValue:"NULL_VALUE"};function La(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kg(n)?4:yR(n)?9007199254740991:Ig(n)?10:11:Te(28295,{value:n})}function Gr(n,e){if(n===e)return!0;const t=La(n);if(t!==La(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bh(n).isEqual(bh(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Ai(i.timestampValue),d=Ai(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return ki(i.bytesValue).isEqual(ki(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Nt(i.geoPointValue.latitude)===Nt(o.geoPointValue.latitude)&&Nt(i.geoPointValue.longitude)===Nt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Nt(i.integerValue)===Nt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Nt(i.doubleValue),d=Nt(o.doubleValue);return l===d?ph(l)===ph(d):isNaN(l)&&isNaN(d)}return!1})(n,e);case 9:return Rc(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return(function(i,o){const l=i.mapValue.fields||{},d=o.mapValue.fields||{};if(JA(l)!==JA(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(d[f]===void 0||!Gr(l[f],d[f])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function _h(n,e){return(n.values||[]).find((t=>Gr(t,e)))!==void 0}function Ua(n,e){if(n===e)return 0;const t=La(n),s=La(e);if(t!==s)return Oe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const d=Nt(o.integerValue||o.doubleValue),f=Nt(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return ek(n.timestampValue,e.timestampValue);case 4:return ek(bh(n),bh(e));case 5:return wb(n.stringValue,e.stringValue);case 6:return(function(o,l){const d=ki(o),f=ki(l);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const d=o.split("/"),f=l.split("/");for(let m=0;m<d.length&&m<f.length;m++){const y=Oe(d[m],f[m]);if(y!==0)return y}return Oe(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const d=Oe(Nt(o.latitude),Nt(l.latitude));return d!==0?d:Oe(Nt(o.longitude),Nt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return tk(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const d=o.fields||{},f=l.fields||{},m=d[Uc]?.arrayValue,y=f[Uc]?.arrayValue,b=Oe(m?.values?.length||0,y?.values?.length||0);return b!==0?b:tk(m,y)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ka.mapValue&&l===ka.mapValue)return 0;if(o===ka.mapValue)return 1;if(l===ka.mapValue)return-1;const d=o.fields||{},f=Object.keys(d),m=l.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let b=0;b<f.length&&b<y.length;++b){const v=wb(f[b],y[b]);if(v!==0)return v;const T=Ua(d[f[b]],m[y[b]]);if(T!==0)return T}return Oe(f.length,y.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function ek(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Ai(n),s=Ai(e),i=Oe(t.seconds,s.seconds);return i!==0?i:Oe(t.nanos,s.nanos)}function tk(n,e){const t=n.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const o=Ua(t[i],s[i]);if(o)return o}return Oe(t.length,s.length)}function zc(n){return Ib(n)}function Ib(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ai(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ki(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",i=!0;for(const o of t.values||[])i?i=!1:s+=",",s+=Ib(o);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of s)o?o=!1:i+=",",i+=`${l}:${Ib(t.fields[l])}`;return i+"}"})(n.mapValue):Te(61005,{value:n})}function mp(n){switch(La(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ng(n);return e?16+mp(e):16;case 5:return 2*n.stringValue.length;case 6:return ki(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,o)=>i+mp(o)),0)})(n.arrayValue);case 10:case 11:return(function(s){let i=0;return Ya(s.fields,((o,l)=>{i+=o.length+mp(l)})),i})(n.mapValue);default:throw Te(13486,{value:n})}}function Zo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cb(n){return!!n&&"integerValue"in n}function wh(n){return!!n&&"arrayValue"in n}function nk(n){return!!n&&"nullValue"in n}function sk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pp(n){return!!n&&"mapValue"in n}function Ig(n){return(n?.mapValue?.fields||{})[u_]?.stringValue===d_}function eh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ya(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=eh(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eh(n.arrayValue.values[t]);return e}return{...n}}function yR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gR}const xR={mapValue:{fields:{[u_]:{stringValue:d_},[Uc]:{arrayValue:{}}}}};function sz(n){return"nullValue"in n?fp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zo(Oa.empty(),ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ig(n)?xR:{mapValue:{}}:Te(35942,{value:n})}function rz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zo(Oa.empty(),ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?xR:"mapValue"in n?Ig(n)?{mapValue:{}}:ka:Te(61959,{value:n})}function rk(n,e){const t=Ua(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ik(n,e){const t=Ua(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!pp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eh(t)}setAll(e){let t=St.emptyPath(),s={},i=[];e.forEach(((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,s,i),s={},i=[],t=d.popLast()}l?s[d.lastSegment()]=eh(l):i.push(d.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,s,i)}delete(e){const t=this.field(e.popLast());pp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];pp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){Ya(t,((i,o)=>e[i]=o));for(const i of s)delete e[i]}clone(){return new bn(eh(this.value))}}function bR(n){const e=[];return Ya(n.fields,((t,s)=>{const i=new St([t]);if(pp(s)){const o=bR(s.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)})),new Jn(e)}class Et{constructor(e,t,s,i,o,l,d){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Et(e,0,je.min(),je.min(),je.min(),bn.empty(),0)}static newFoundDocument(e,t,s,i){return new Et(e,1,t,je.min(),s,i,0)}static newNoDocument(e,t){return new Et(e,2,t,je.min(),je.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new Et(e,3,t,je.min(),je.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class za{constructor(e,t){this.position=e,this.inclusive=t}}function ak(n,e,t){let s=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?s=ge.comparator(ge.fromName(l.referenceValue),t.key):s=Ua(l,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function ok(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}class Th{constructor(e,t="asc"){this.field=e,this.dir=t}}function iz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class vR{}class Je extends vR{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new az(e,t,s):t==="array-contains"?new cz(e,s):t==="in"?new AR(e,s):t==="not-in"?new uz(e,s):t==="array-contains-any"?new dz(e,s):new Je(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new oz(e,s):new lz(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ua(t,this.value)):t!==null&&La(this.value)===La(t)&&this.matchesComparison(Ua(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ut extends vR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ut(e,t)}matches(e){return Bc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bc(n){return n.op==="and"}function Rb(n){return n.op==="or"}function h_(n){return _R(n)&&Bc(n)}function _R(n){for(const e of n.filters)if(e instanceof ut)return!1;return!0}function jb(n){if(n instanceof Je)return n.field.canonicalString()+n.op.toString()+zc(n.value);if(h_(n))return n.filters.map((e=>jb(e))).join(",");{const e=n.filters.map((t=>jb(t))).join(",");return`${n.op}(${e})`}}function wR(n,e){return n instanceof Je?(function(s,i){return i instanceof Je&&s.op===i.op&&s.field.isEqual(i.field)&&Gr(s.value,i.value)})(n,e):n instanceof ut?(function(s,i){return i instanceof ut&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((o,l,d)=>o&&wR(l,i.filters[d])),!0):!1})(n,e):void Te(19439)}function TR(n,e){const t=n.filters.concat(e);return ut.create(t,n.op)}function ER(n){return n instanceof Je?(function(t){return`${t.field.canonicalString()} ${t.op} ${zc(t.value)}`})(n):n instanceof ut?(function(t){return t.op.toString()+" {"+t.getFilters().map(ER).join(" ,")+"}"})(n):"Filter"}class az extends Je{constructor(e,t,s){super(e,t,s),this.key=ge.fromName(s.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class oz extends Je{constructor(e,t){super(e,"in",t),this.keys=SR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lz extends Je{constructor(e,t){super(e,"not-in",t),this.keys=SR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function SR(n,e){return(e.arrayValue?.values||[]).map((t=>ge.fromName(t.referenceValue)))}class cz extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wh(t)&&_h(t.arrayValue,this.value)}}class AR extends Je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_h(this.value.arrayValue,t)}}class uz extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(_h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_h(this.value.arrayValue,t)}}class dz extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>_h(this.value.arrayValue,s)))}}class hz{constructor(e,t=null,s=[],i=[],o=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=o,this.startAt=l,this.endAt=d,this.Te=null}}function Db(n,e=null,t=[],s=[],i=null,o=null,l=null){return new hz(n,e,t,s,i,o,l)}function el(n){const e=be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>jb(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>zc(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>zc(s))).join(",")),e.Te=t}return e.Te}function Fh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ok(n.startAt,e.startAt)&&ok(n.endAt,e.endAt)}function qp(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Gp(n,e){return n.filters.filter((t=>t instanceof Je&&t.field.isEqual(e)))}function lk(n,e,t){let s=fp,i=!0;for(const o of Gp(n,e)){let l=fp,d=!0;switch(o.op){case"<":case"<=":l=sz(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,d=!1;break;case"!=":case"not-in":l=fp}rk({value:s,inclusive:i},{value:l,inclusive:d})<0&&(s=l,i=d)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];rk({value:s,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(s=l,i=t.inclusive);break}}return{value:s,inclusive:i}}function ck(n,e,t){let s=ka,i=!0;for(const o of Gp(n,e)){let l=ka,d=!0;switch(o.op){case">=":case">":l=rz(o.value),d=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,d=!1;break;case"!=":case"not-in":l=ka}ik({value:s,inclusive:i},{value:l,inclusive:d})>0&&(s=l,i=d)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];ik({value:s,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(s=l,i=t.inclusive);break}}return{value:s,inclusive:i}}class Ci{constructor(e,t=null,s=[],i=[],o=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=o,this.limitType=l,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kR(n,e,t,s,i,o,l,d){return new Ci(n,e,t,s,i,o,l,d)}function lu(n){return new Ci(n)}function uk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fz(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function f_(n){return n.collectionGroup!==null}function Ec(n){const e=be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new ht(St.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Th(o,s))})),t.has(St.keyField().canonicalString())||e.Ie.push(new Th(St.keyField(),s))}return e.Ie}function Vn(n){const e=be(n);return e.Ee||(e.Ee=IR(e,Ec(n))),e.Ee}function NR(n){const e=be(n);return e.Re||(e.Re=IR(e,n.explicitOrderBy)),e.Re}function IR(n,e){if(n.limitType==="F")return Db(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Th(i.field,o)}));const t=n.endAt?new za(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new za(n.startAt.position,n.startAt.inclusive):null;return Db(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Pb(n,e){const t=n.filters.concat([e]);return new Ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mz(n,e){const t=n.explicitOrderBy.concat([e]);return new Ci(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Hp(n,e,t){return new Ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pz(n,e){return new Ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,e,n.endAt)}function gz(n,e){return new Ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,e)}function qh(n,e){return Fh(Vn(n),Vn(e))&&n.limitType===e.limitType}function CR(n){return`${el(Vn(n))}|lt:${n.limitType}`}function dc(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((i=>ER(i))).join(", ")}]`),zh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((i=>zc(i))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((i=>zc(i))).join(",")),`Target(${s})`})(Vn(n))}; limitType=${n.limitType})`}function Gh(n,e){return e.isFoundDocument()&&(function(s,i){const o=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):ge.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(n,e)&&(function(s,i){for(const o of Ec(s))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(s,i){for(const o of s.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(s,i){return!(s.startAt&&!(function(l,d,f){const m=ak(l,d,f);return l.inclusive?m<=0:m<0})(s.startAt,Ec(s),i)||s.endAt&&!(function(l,d,f){const m=ak(l,d,f);return l.inclusive?m>=0:m>0})(s.endAt,Ec(s),i))})(n,e)}function RR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jR(n){return(e,t)=>{let s=!1;for(const i of Ec(n)){const o=yz(i,e,t);if(o!==0)return o;s=s||i.field.isKeyField()}return 0}}function yz(n,e,t){const s=n.field.isKeyField()?ge.comparator(e.key,t.key):(function(o,l,d){const f=l.data.field(o),m=d.data.field(o);return f!==null&&m!==null?Ua(f,m):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:n.dir})}}class Ri{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,o]of s)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ya(this.inner,((t,s)=>{for(const[i,o]of s)e(i,o)}))}isEmpty(){return uR(this.inner)}size(){return this.innerSize}}const xz=new _t(ge.comparator);function Zn(){return xz}const DR=new _t(ge.comparator);function Ud(...n){let e=DR;for(const t of n)e=e.insert(t.key,t);return e}function PR(n){let e=DR;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Mr(){return th()}function VR(){return th()}function th(){return new Ri((n=>n.toString()),((n,e)=>n.isEqual(e)))}const bz=new _t(ge.comparator),vz=new ht(ge.comparator);function ze(...n){let e=vz;for(const t of n)e=e.add(t);return e}const _z=new ht(Oe);function m_(){return _z}function p_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function MR(n){return{integerValue:""+n}}function OR(n,e){return JC(e)?MR(e):p_(n,e)}class Cg{constructor(){this._=void 0}}function wz(n,e,t){return n instanceof Fc?(function(i,o){const l={fields:{[fR]:{stringValue:hR},[pR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kg(o)&&(o=Ng(o)),o&&(l.fields[mR]=o),{mapValue:l}})(t,e):n instanceof tl?UR(n,e):n instanceof nl?zR(n,e):(function(i,o){const l=LR(i,o),d=dk(l)+dk(i.Ae);return Cb(l)&&Cb(i.Ae)?MR(d):p_(i.serializer,d)})(n,e)}function Tz(n,e,t){return n instanceof tl?UR(n,e):n instanceof nl?zR(n,e):t}function LR(n,e){return n instanceof qc?(function(s){return Cb(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class Fc extends Cg{}class tl extends Cg{constructor(e){super(),this.elements=e}}function UR(n,e){const t=BR(e);for(const s of n.elements)t.some((i=>Gr(i,s)))||t.push(s);return{arrayValue:{values:t}}}class nl extends Cg{constructor(e){super(),this.elements=e}}function zR(n,e){let t=BR(e);for(const s of n.elements)t=t.filter((i=>!Gr(i,s)));return{arrayValue:{values:t}}}class qc extends Cg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function dk(n){return Nt(n.integerValue||n.doubleValue)}function BR(n){return wh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hh{constructor(e,t){this.field=e,this.transform=t}}function Ez(n,e){return n.field.isEqual(e.field)&&(function(s,i){return s instanceof tl&&i instanceof tl||s instanceof nl&&i instanceof nl?Rc(s.elements,i.elements,Gr):s instanceof qc&&i instanceof qc?Gr(s.Ae,i.Ae):s instanceof Fc&&i instanceof Fc})(n.transform,e.transform)}class Sz{constructor(e,t){this.version=e,this.transformResults=t}}class It{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new It}static exists(e){return new It(void 0,e)}static updateTime(e){return new It(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rg{}function FR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uu(n.key,It.none()):new cu(n.key,n.data,It.none());{const t=n.data,s=bn.empty();let i=new ht(St.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?s.delete(o):s.set(o,l),i=i.add(o)}return new ji(n.key,s,new Jn(i.toArray()),It.none())}}function Az(n,e,t){n instanceof cu?(function(i,o,l){const d=i.value.clone(),f=fk(i.fieldTransforms,o,l.transformResults);d.setAll(f),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ji?(function(i,o,l){if(!gp(i.precondition,o))return void o.convertToUnknownDocument(l.version);const d=fk(i.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(qR(i)),f.setAll(d),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function nh(n,e,t,s){return n instanceof cu?(function(o,l,d,f){if(!gp(o.precondition,l))return d;const m=o.value.clone(),y=mk(o.fieldTransforms,f,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof ji?(function(o,l,d,f){if(!gp(o.precondition,l))return d;const m=mk(o.fieldTransforms,f,l),y=l.data;return y.setAll(qR(o)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(n,e,t,s):(function(o,l,d){return gp(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(n,e,t)}function kz(n,e){let t=null;for(const s of n.fieldTransforms){const i=e.data.field(s.field),o=LR(s.transform,i||null);o!=null&&(t===null&&(t=bn.empty()),t.set(s.field,o))}return t||null}function hk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Rc(s,i,((o,l)=>Ez(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cu extends Rg{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ji extends Rg{constructor(e,t,s,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function qR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function fk(n,e,t){const s=new Map;Ie(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,d=e.data.field(o.field);s.set(o.field,Tz(l,d,t[i]))}return s}function mk(n,e,t){const s=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);s.set(i.field,wz(o,l,e))}return s}class uu extends Rg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g_ extends Rg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class y_{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Az(o,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=nh(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=nh(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=VR();return this.mutations.forEach((i=>{const o=e.get(i.key),l=o.overlayedDocument;let d=this.applyToLocalView(l,o.mutatedFields);d=t.has(i.key)?null:d;const f=FR(l,d);f!==null&&s.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(je.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Rc(this.mutations,e.mutations,((t,s)=>hk(t,s)))&&Rc(this.baseMutations,e.baseMutations,((t,s)=>hk(t,s)))}}class x_{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){Ie(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return bz})();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,s[l].version);return new x_(e,t,s,i)}}class b_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class GR{constructor(e,t,s){this.alias=e,this.aggregateType=t,this.fieldPath=s}}class Nz{constructor(e,t){this.count=e,this.unchangedNames=t}}var tn,et;function HR(n){switch(n){case Z.OK:return Te(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function $R(n){if(n===void 0)return Gt("GRPC error has no .code"),Z.UNKNOWN;switch(n){case tn.OK:return Z.OK;case tn.CANCELLED:return Z.CANCELLED;case tn.UNKNOWN:return Z.UNKNOWN;case tn.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case tn.INTERNAL:return Z.INTERNAL;case tn.UNAVAILABLE:return Z.UNAVAILABLE;case tn.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case tn.NOT_FOUND:return Z.NOT_FOUND;case tn.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case tn.ABORTED:return Z.ABORTED;case tn.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case tn.DATA_LOSS:return Z.DATA_LOSS;default:return Te(39323,{code:n})}}(et=tn||(tn={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";let Vb=null;function Iz(n){if(Vb)throw new Error("a TestingHooksSpi instance is already set");Vb=n}function KR(){return new TextEncoder}const Cz=new Ra([4294967295,4294967295],0);function pk(n){const e=KR().encode(n),t=new PC;return t.update(e),new Uint8Array(t.digest())}function gk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ra([t,s],0),new Ra([i,o],0)]}class v_{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new zd(`Invalid padding: ${t}`);if(s<0)throw new zd(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new zd(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new zd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ra.fromNumber(this.ge)}ye(e,t,s){let i=e.add(t.multiply(Ra.fromNumber(s)));return i.compare(Cz)===1&&(i=new Ra([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pk(e),[s,i]=gk(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(s,i,o);if(!this.we(l))return!1}return!0}static create(e,t,s){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new v_(o,i,t);return s.forEach((d=>l.insert(d))),l}insert(e){if(this.ge===0)return;const t=pk(e),[s,i]=gk(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(s,i,o);this.be(l)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class zd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $h{constructor(e,t,s,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const i=new Map;return i.set(e,Kh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new $h(je.min(),i,new _t(Oe),Zn(),ze())}}class Kh{constructor(e,t,s,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Kh(s,t,ze(),ze(),ze())}}class yp{constructor(e,t,s,i){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=i}}class QR{constructor(e,t){this.targetId=e,this.Ce=t}}class YR{constructor(e,t,s=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=i}}class yk{constructor(){this.ve=0,this.Fe=xk(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),s=ze();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:s=s.add(i);break;default:Te(38017,{changeType:o})}})),new Kh(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=xk()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Rz{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zn(),this.He=Bm(),this.Je=Bm(),this.Ze=new _t(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,s=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(qp(o))if(s===0){const l=new ge(o.path);this.et(t,l,Et.newNoDocument(l,je.min()))}else Ie(s===1,20013,{expectedCount:s});else{const l=this._t(t);if(l!==s){const d=this.ut(e),f=d?this.ct(d,e,l):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}Vb?.lt((function(y,b,v,T,k){const I={localCacheCount:y,existenceFilterCount:b.count,databaseId:v.database,projectId:v.projectId},j=b.unchangedNames;return j&&(I.bloomFilter={applied:k===0,hashCount:j?.hashCount??0,bitmapLength:j?.bits?.bitmap?.length??0,padding:j?.bits?.padding??0,mightContain:P=>T?.mightContain(P)??!1}),I})(l,e.Ce,this.Ge.ht(),d,f))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=t;let l,d;try{l=ki(s).toUint8Array()}catch(f){if(f instanceof dR)return ss("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new v_(l,i,o)}catch(f){return ss(f instanceof zd?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let i=0;return s.forEach((o=>{const l=this.Ge.ht(),d=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const d=this.ot(l);if(d){if(o.current&&qp(d.target)){const f=new ge(d.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Et.newNoDocument(f,e))}o.Be&&(t.set(l,o.ke()),o.Ke())}}));let s=ze();this.Je.forEach(((o,l)=>{let d=!0;l.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const i=new $h(e,t,this.Ze,this.je,s);return this.je=Zn(),this.He=Bm(),this.Je=Bm(),this.Ze=new _t(Oe),i}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new yk,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ht(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ht(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yk),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bm(){return new _t(ge.comparator)}function xk(){return new _t(ge.comparator)}const jz={asc:"ASCENDING",desc:"DESCENDING"},Dz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pz={and:"AND",or:"OR"};class Vz{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mb(n,e){return n.useProto3Json||zh(e)?e:{value:e}}function Gc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Mz(n,e){return Gc(n,e.toTimestamp())}function Ht(n){return Ie(!!n,49232),je.fromTimestamp((function(t){const s=Ai(t);return new at(s.seconds,s.nanos)})(n))}function __(n,e){return Ob(n,e).canonicalString()}function Ob(n,e){const t=(function(i){return new He(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function WR(n){const e=He.fromString(n);return Ie(aj(e),10190,{key:e.toString()}),e}function Eh(n,e){return __(n.databaseId,e.path)}function Br(n,e){const t=WR(e);if(t.get(1)!==n.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(ej(t))}function JR(n,e){return __(n.databaseId,e)}function ZR(n){const e=WR(n);return e.length===4?He.emptyPath():ej(e)}function Lb(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ej(n){return Ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bk(n,e,t){return{name:Eh(n,e),fields:t.value.mapValue.fields}}function jg(n,e,t){const s=Br(n,e.name),i=Ht(e.updateTime),o=e.createTime?Ht(e.createTime):je.min(),l=new bn({mapValue:{fields:e.fields}}),d=Et.newFoundDocument(s,i,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Oz(n,e){return"found"in e?(function(s,i){Ie(!!i.found,43571),i.found.name,i.found.updateTime;const o=Br(s,i.found.name),l=Ht(i.found.updateTime),d=i.found.createTime?Ht(i.found.createTime):je.min(),f=new bn({mapValue:{fields:i.found.fields}});return Et.newFoundDocument(o,l,d,f)})(n,e):"missing"in e?(function(s,i){Ie(!!i.missing,3894),Ie(!!i.readTime,22933);const o=Br(s,i.missing),l=Ht(i.readTime);return Et.newNoDocument(o,l)})(n,e):Te(7234,{result:e})}function Lz(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Te(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(m,y){return m.useProto3Json?(Ie(y===void 0||typeof y=="string",58123),Pt.fromBase64String(y||"")):(Ie(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Pt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(m){const y=m.code===void 0?Z.UNKNOWN:$R(m.code);return new de(y,m.message||"")})(l);t=new YR(s,i,o,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Br(n,s.document.name),o=Ht(s.document.updateTime),l=s.document.createTime?Ht(s.document.createTime):je.min(),d=new bn({mapValue:{fields:s.document.fields}}),f=Et.newFoundDocument(i,o,l,d),m=s.targetIds||[],y=s.removedTargetIds||[];t=new yp(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Br(n,s.document),o=s.readTime?Ht(s.readTime):je.min(),l=Et.newNoDocument(i,o),d=s.removedTargetIds||[];t=new yp([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Br(n,s.document),o=s.removedTargetIds||[];t=new yp([],o,i,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:o}=s,l=new Nz(i,o),d=s.targetId;t=new QR(d,l)}}return t}function Sh(n,e){let t;if(e instanceof cu)t={update:bk(n,e.key,e.value)};else if(e instanceof uu)t={delete:Eh(n,e.key)};else if(e instanceof ji)t={update:bk(n,e.key,e.data),updateMask:Gz(e.fieldMask)};else{if(!(e instanceof g_))return Te(16599,{dt:e.type});t={verify:Eh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,l){const d=l.transform;if(d instanceof Fc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof qc)return{fieldPath:l.field.canonicalString(),increment:d.Ae};throw Te(20930,{transform:l.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Mz(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te(27497)})(n,e.precondition)),t}function Ub(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?It.updateTime(Ht(o.updateTime)):o.exists!==void 0?It.exists(o.exists):It.none()})(e.currentDocument):It.none(),s=e.updateTransforms?e.updateTransforms.map((i=>(function(l,d){let f=null;if("setToServerValue"in d)Ie(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),f=new Fc;else if("appendMissingElements"in d){const y=d.appendMissingElements.values||[];f=new tl(y)}else if("removeAllFromArray"in d){const y=d.removeAllFromArray.values||[];f=new nl(y)}else"increment"in d?f=new qc(l,d.increment):Te(16584,{proto:d});const m=St.fromServerFormat(d.fieldPath);return new Hh(m,f)})(n,i))):[];if(e.update){e.update.name;const i=Br(n,e.update.name),o=new bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const m=f.fieldPaths||[];return new Jn(m.map((y=>St.fromServerFormat(y))))})(e.updateMask);return new ji(i,o,l,t,s)}return new cu(i,o,t,s)}if(e.delete){const i=Br(n,e.delete);return new uu(i,t)}if(e.verify){const i=Br(n,e.verify);return new g_(i,t)}return Te(1463,{proto:e})}function Uz(n,e){return n&&n.length>0?(Ie(e!==void 0,14353),n.map((t=>(function(i,o){let l=i.updateTime?Ht(i.updateTime):Ht(o);return l.isEqual(je.min())&&(l=Ht(o)),new Sz(l,i.transformResults||[])})(t,e)))):[]}function tj(n,e){return{documents:[JR(n,e.path)]}}function Dg(n,e){const t={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=JR(n,i);const o=(function(m){if(m.length!==0)return ij(ut.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(m){if(m.length!==0)return m.map((y=>(function(v){return{field:Ea(v.field),direction:Bz(v.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=Mb(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function nj(n,e,t,s){const{ft:i,parent:o}=Dg(n,e),l={},d=[];let f=0;return t.forEach((m=>{const y=s?m.alias:"aggregate_"+f++;l[y]=m.alias,m.aggregateType==="count"?d.push({alias:y,count:{}}):m.aggregateType==="avg"?d.push({alias:y,avg:{field:Ea(m.fieldPath)}}):m.aggregateType==="sum"&&d.push({alias:y,sum:{field:Ea(m.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:i.structuredQuery},parent:i.parent},gt:l,parent:o}}function sj(n){let e=ZR(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){Ie(s===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=(function(b){const v=rj(b);return v instanceof ut&&h_(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(b){return b.map((v=>(function(k){return new Th(hc(k.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(v)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let v;return v=typeof b=="object"?b.value:b,zh(v)?null:v})(t.limit));let f=null;t.startAt&&(f=(function(b){const v=!!b.before,T=b.values||[];return new za(T,v)})(t.startAt));let m=null;return t.endAt&&(m=(function(b){const v=!b.before,T=b.values||[];return new za(T,v)})(t.endAt)),kR(e,i,l,o,d,"F",f,m)}function zz(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rj(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=hc(t.unaryFilter.field);return Je.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=hc(t.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hc(t.unaryFilter.field);return Je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=hc(t.unaryFilter.field);return Je.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Je.create(hc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ut.create(t.compositeFilter.filters.map((s=>rj(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function Bz(n){return jz[n]}function Fz(n){return Dz[n]}function qz(n){return Pz[n]}function Ea(n){return{fieldPath:n.canonicalString()}}function hc(n){return St.fromServerFormat(n.fieldPath)}function ij(n){return n instanceof Je?(function(t){if(t.op==="=="){if(sk(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NAN"}};if(nk(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sk(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NAN"}};if(nk(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(t.field),op:Fz(t.op),value:t.value}}})(n):n instanceof ut?(function(t){const s=t.getFilters().map((i=>ij(i)));return s.length===1?s[0]:{compositeFilter:{op:qz(t.op),filters:s}}})(n):Te(54877,{filter:n})}function Gz(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aj(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function oj(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class yi{constructor(e,t,s,i,o=je.min(),l=je.min(),d=Pt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lj{constructor(e){this.yt=e}}function Hz(n,e){let t;if(e.document)t=jg(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ge.fromSegments(e.noDocument.path),i=rl(e.noDocument.readTime);t=Et.newNoDocument(s,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const s=ge.fromSegments(e.unknownDocument.path),i=rl(e.unknownDocument.version);t=Et.newUnknownDocument(s,i)}}return e.readTime&&t.setReadTime((function(i){const o=new at(i[0],i[1]);return je.fromTimestamp(o)})(e.readTime)),t}function vk(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$p(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(o,l){return{name:Eh(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Gc(o,l.version.toTimestamp()),createTime:Gc(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:sl(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:sl(e.version)}}return s}function $p(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function sl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(n){const e=new at(n.seconds,n.nanoseconds);return je.fromTimestamp(e)}function Lo(n,e){const t=(e.baseMutations||[]).map((o=>Ub(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const d=e.mutations[o+1];l.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const s=e.mutations.map((o=>Ub(n.yt,o))),i=at.fromMillis(e.localWriteTimeMs);return new y_(e.batchId,i,t,s)}function Bd(n){const e=rl(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?rl(n.lastLimboFreeSnapshotVersion):je.min();let s;return s=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Ie(l===1,1966,{count:l}),Vn(lu(ZR(o.documents[0])))})(n.query):(function(o){return Vn(sj(o))})(n.query),new yi(s,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Pt.fromBase64String(n.resumeToken))}function cj(n,e){const t=sl(e.snapshotVersion),s=sl(e.lastLimboFreeSnapshotVersion);let i;i=qp(e.target)?tj(n.yt,e.target):Dg(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:i}}function Pg(n){const e=sj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hp(e,e.limit,"L"):e}function Ax(n,e){return new b_(e.largestBatchId,Ub(n.yt,e.overlayMutation))}function _k(n,e){const t=e.path.lastSegment();return[n,Pn(e.path.popLast()),t]}function wk(n,e,t,s){return{indexId:n,uid:e,sequenceNumber:t,readTime:sl(s.readTime),documentKey:Pn(s.documentKey.path),largestBatchId:s.largestBatchId}}class $z{getBundleMetadata(e,t){return Tk(e).get(t).next((s=>{if(s)return(function(o){return{id:o.bundleId,createTime:rl(o.createTime),version:o.version}})(s)}))}saveBundleMetadata(e,t){return Tk(e).put((function(i){return{bundleId:i.id,createTime:sl(Ht(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return Ek(e).get(t).next((s=>{if(s)return(function(o){return{name:o.name,query:Pg(o.bundledQuery),readTime:rl(o.readTime)}})(s)}))}saveNamedQuery(e,t){return Ek(e).put((function(i){return{name:i.name,readTime:sl(Ht(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function Tk(n){return hn(n,Eg)}function Ek(n){return hn(n,Sg)}class Vg{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new Vg(e,s)}getOverlay(e,t){return Id(e).get(_k(this.userId,t)).next((s=>s?Ax(this.serializer,s):null))}getOverlays(e,t){const s=Mr();return Y.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&s.set(i,o)})))).next((()=>s))}saveOverlays(e,t,s){const i=[];return s.forEach(((o,l)=>{const d=new b_(t,l);i.push(this.bt(e,d))})),Y.waitFor(i)}removeOverlaysForBatchId(e,t,s){const i=new Set;t.forEach((l=>i.add(Pn(l.getCollectionPath()))));const o=[];return i.forEach((l=>{const d=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,s+1],!1,!0);o.push(Id(e).X(kb,d))})),Y.waitFor(o)}getOverlaysForCollection(e,t,s){const i=Mr(),o=Pn(t),l=IDBKeyRange.bound([this.userId,o,s],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Id(e).H(kb,l).next((d=>{for(const f of d){const m=Ax(this.serializer,f);i.set(m.getKey(),m)}return i}))}getOverlaysForCollectionGroup(e,t,s,i){const o=Mr();let l;const d=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Id(e).ee({index:rR,range:d},((f,m,y)=>{const b=Ax(this.serializer,m);o.size()<i||b.largestBatchId===l?(o.set(b.getKey(),b),l=b.largestBatchId):y.done()})).next((()=>o))}bt(e,t){return Id(e).put((function(i,o,l){const[d,f,m]=_k(o,l.mutation.key);return{userId:o,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Sh(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Id(n){return hn(n,Ag)}class Kz{St(e){return hn(e,l_)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const s=t?.value;return s?Pt.fromUint8Array(s):Pt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Uo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Nt(e.integerValue));else if("doubleValue"in e){const s=Nt(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),ph(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=Ai(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ki(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?yR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ig(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Te(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const s=e.fields||{};this.Ft(t,55);for(const i of Object.keys(s))this.Ot(i,t),this.Ct(s[i],t)}kt(e,t){const s=e.fields||{};this.Ft(t,53);const i=Uc,o=s[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Nt(o)),this.Ot(i,t),this.Ct(s[i],t)}qt(e,t){const s=e.values||[];this.Ft(t,50);for(const i of s)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ge.fromName(e).path.forEach((s=>{this.Ft(t,60),this.$t(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Uo.Wt=new Uo;const rc=255;function Qz(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Sk(n){const e=64-(function(s){let i=0;for(let o=0;o<8;++o){const l=Qz(255&s[o]);if(i+=l,l!==8)break}return i})(n);return Math.ceil(e/8)}class Yz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ht(s.value),s=t.next();this.Jt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ht(s);else if(s<2048)this.Ht(960|s>>>6),this.Ht(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s);else{const i=t.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const t=this.en(e),s=Sk(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let i=t.length-s;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),s=Sk(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let i=t.length-s;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(rc),this.sn(255)}_n(){this.an(rc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let i=1;i<t.length;++i)t[i]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===rc?(this.sn(rc),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===rc?(this.an(rc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const i=new Uint8Array(s);i.set(this.buffer),this.buffer=i}}class Xz{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class Wz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cd{constructor(){this.cn=new Yz,this.ascending=new Xz(this.cn),this.descending=new Wz(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class zo{constructor(e,t,s,i){this.hn=e,this.Pn=t,this.Tn=s,this.In=i}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.In,0),t!==e?s.set([0],this.In.length):++s[s.length-1],new zo(this.hn,this.Pn,this.Tn,s)}Rn(e,t,s){return{indexId:this.hn,uid:e,arrayValue:xp(this.Tn),directionalValue:xp(this.In),orderedDocumentKey:xp(t),documentKey:s.path.toArray()}}An(e,t,s){const i=this.Rn(e,t,s);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ga(n,e){let t=n.hn-e.hn;return t!==0?t:(t=Ak(n.Tn,e.Tn),t!==0?t:(t=Ak(n.In,e.In),t!==0?t:ge.comparator(n.Pn,e.Pn)))}function Ak(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(s!==0)return s}return n.length-e.length}function xp(n){return WI()?(function(t){let s="";for(let i=0;i<t.length;i++)s+=String.fromCharCode(t[i]);return s})(n):n}function kk(n){return typeof n!="string"?n:(function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s})(n)}class Nk{constructor(e){this.Vn=new ht(((t,s)=>St.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const s=t;s.isInequality()?this.Vn=this.Vn.add(s):this.mn.push(s)}}get fn(){return this.Vn.size>1}gn(e){if(Ie(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Eb(e);if(t!==void 0&&!this.pn(t))return!1;const s=Vo(e);let i=new Set,o=0,l=0;for(;o<s.length&&this.pn(s[o]);++o)i=i.add(s[o].fieldPath.canonicalString());if(o===s.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!i.has(d.field.canonicalString())){const f=s[o];if(!this.yn(d,f)||!this.wn(this.dn[l++],f))return!1}++o}for(;o<s.length;++o){const d=s[o];if(l>=this.dn.length||!this.wn(this.dn[l++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new ht(St.comparator);const t=[];for(const s of this.mn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new Qo(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new Qo(s.field,0))}for(const s of this.dn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new Qo(s.field,s.dir==="asc"?0:1)));return new Dc(Dc.UNKNOWN_ID,this.collectionId,t,Pc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function uj(n){if(Ie(n instanceof Je||n instanceof ut,20012),n instanceof Je){if(n instanceof AR){const t=n.value.arrayValue?.values?.map((s=>Je.create(n.field,"==",s)))||[];return ut.create(t,"or")}return n}const e=n.filters.map((t=>uj(t)));return ut.create(e,n.op)}function Jz(n){if(n.getFilters().length===0)return[];const e=Fb(uj(n));return Ie(dj(e),7391),zb(e)||Bb(e)?[e]:e.getFilters()}function zb(n){return n instanceof Je}function Bb(n){return n instanceof ut&&h_(n)}function dj(n){return zb(n)||Bb(n)||(function(t){if(t instanceof ut&&Rb(t)){for(const s of t.getFilters())if(!zb(s)&&!Bb(s))return!1;return!0}return!1})(n)}function Fb(n){if(Ie(n instanceof Je||n instanceof ut,34018),n instanceof Je)return n;if(n.filters.length===1)return Fb(n.filters[0]);const e=n.filters.map((s=>Fb(s)));let t=ut.create(e,n.op);return t=Kp(t),dj(t)?t:(Ie(t instanceof ut,64498),Ie(Bc(t),40251),Ie(t.filters.length>1,57927),t.filters.reduce(((s,i)=>w_(s,i))))}function w_(n,e){let t;return Ie(n instanceof Je||n instanceof ut,38388),Ie(e instanceof Je||e instanceof ut,25473),t=n instanceof Je?e instanceof Je?(function(i,o){return ut.create([i,o],"and")})(n,e):Ik(n,e):e instanceof Je?Ik(e,n):(function(i,o){if(Ie(i.filters.length>0&&o.filters.length>0,48005),Bc(i)&&Bc(o))return TR(i,o.getFilters());const l=Rb(i)?i:o,d=Rb(i)?o:i,f=l.filters.map((m=>w_(m,d)));return ut.create(f,"or")})(n,e),Kp(t)}function Ik(n,e){if(Bc(e))return TR(e,n.getFilters());{const t=e.filters.map((s=>w_(n,s)));return ut.create(t,"or")}}function Kp(n){if(Ie(n instanceof Je||n instanceof ut,11850),n instanceof Je)return n;const e=n.getFilters();if(e.length===1)return Kp(e[0]);if(_R(n))return n;const t=e.map((i=>Kp(i))),s=[];return t.forEach((i=>{i instanceof Je?s.push(i):i instanceof ut&&(i.op===n.op?s.push(...i.filters):s.push(i))})),s.length===1?s[0]:ut.create(s,n.op)}class Zz{constructor(){this.Sn=new T_}addToCollectionParentIndex(e,t){return this.Sn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(ys.min())}updateCollectionGroup(e,t,s){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class T_{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new ht(He.comparator),o=!i.has(s);return this.index[t]=i.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new ht(He.comparator)).toArray()}}const Ck="IndexedDbIndexManager",Fm=new Uint8Array(0);class eB{constructor(e,t){this.databaseId=t,this.Dn=new T_,this.Cn=new Ri((s=>el(s)),((s,i)=>Fh(s,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const s=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const o={collectionId:s,parent:Pn(i)};return Rk(e).put(o)}return Y.resolve()}getCollectionParents(e,t){const s=[],i=IDBKeyRange.bound([t,""],[qC(t),""],!1,!0);return Rk(e).H(i).next((o=>{for(const l of o){if(l.collectionId!==t)break;s.push(Vr(l.parent))}return s}))}addFieldIndex(e,t){const s=Rd(e),i=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete i.indexId;const o=s.add(i);if(t.indexState){const l=ac(e);return o.next((d=>{l.put(wk(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const s=Rd(e),i=ac(e),o=ic(e);return s.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Rd(e),s=ic(e),i=ac(e);return t.X().next((()=>s.X())).next((()=>i.X()))}createTargetIndexes(e,t){return Y.forEach(this.vn(t),(s=>this.getIndexType(e,s).next((i=>{if(i===0||i===1){const o=new Nk(s).bn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const s=ic(e);let i=!0;const o=new Map;return Y.forEach(this.vn(t),(l=>this.Fn(e,l).next((d=>{i&&(i=!!d),o.set(l,d)})))).next((()=>{if(i){let l=ze();const d=[];return Y.forEach(o,((f,m)=>{me(Ck,`Using index ${(function(z){return`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(($=>`${$.fieldPath}:${$.kind}`)).join(",")}`})(f)} to execute ${el(t)}`);const y=(function(z,$){const te=Eb($);if(te===void 0)return null;for(const ce of Gp(z,te.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null})(m,f),b=(function(z,$){const te=new Map;for(const ce of Vo($))for(const D of Gp(z,ce.fieldPath))switch(D.op){case"==":case"in":te.set(ce.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return te.set(ce.fieldPath.canonicalString(),D.value),Array.from(te.values())}return null})(m,f),v=(function(z,$){const te=[];let ce=!0;for(const D of Vo($)){const S=D.kind===0?lk(z,D.fieldPath,z.startAt):ck(z,D.fieldPath,z.startAt);te.push(S.value),ce&&(ce=S.inclusive)}return new za(te,ce)})(m,f),T=(function(z,$){const te=[];let ce=!0;for(const D of Vo($)){const S=D.kind===0?ck(z,D.fieldPath,z.endAt):lk(z,D.fieldPath,z.endAt);te.push(S.value),ce&&(ce=S.inclusive)}return new za(te,ce)})(m,f),k=this.Mn(f,m,v),I=this.Mn(f,m,T),j=this.xn(f,m,b),P=this.On(f.indexId,y,k,v.inclusive,I,T.inclusive,j);return Y.forEach(P,(L=>s.Z(L,t.limit).next((z=>{z.forEach(($=>{const te=ge.fromSegments($.documentKey);l.has(te)||(l=l.add(te),d.push(te))}))}))))})).next((()=>d))}return Y.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=Jz(ut.create(e.filters,"and")).map((s=>Db(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,s,i,o,l,d){const f=(t!=null?t.length:1)*Math.max(s.length,o.length),m=f/(t!=null?t.length:1),y=[];for(let b=0;b<f;++b){const v=t?this.Nn(t[b/m]):Fm,T=this.Bn(e,v,s[b%m],i),k=this.Ln(e,v,o[b%m],l),I=d.map((j=>this.Bn(e,v,j,!0)));y.push(...this.createRange(T,k,I))}return y}Bn(e,t,s,i){const o=new zo(e,ge.empty(),t,s);return i?o:o.En()}Ln(e,t,s,i){const o=new zo(e,ge.empty(),t,s);return i?o.En():o}Fn(e,t){const s=new Nk(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let l=null;for(const d of o)s.gn(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l}))}getIndexType(e,t){let s=2;const i=this.vn(t);return Y.forEach(i,(o=>this.Fn(e,o).next((l=>{l?s!==0&&l.fields.length<(function(f){let m=new ht(St.comparator),y=!1;for(const b of f.filters)for(const v of b.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?y=!0:m=m.add(v.field));for(const b of f.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(y?1:0)})(o)&&(s=1):s=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&s===2?1:s))}kn(e,t){const s=new Cd;for(const i of Vo(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=s.ln(i.kind);Uo.Wt.Dt(o,l)}return s.un()}Nn(e){const t=new Cd;return Uo.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const s=new Cd;return Uo.Wt.Dt(Zo(this.databaseId,t),s.ln((function(o){const l=Vo(o);return l.length===0?0:l[l.length-1].kind})(e))),s.un()}xn(e,t,s){if(s===null)return[];let i=[];i.push(new Cd);let o=0;for(const l of Vo(e)){const d=s[o++];for(const f of i)if(this.qn(t,l.fieldPath)&&wh(d))i=this.Un(i,l,d);else{const m=f.ln(l.kind);Uo.Wt.Dt(d,m)}}return this.$n(i)}Mn(e,t,s){return this.xn(e,t,s.position)}$n(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Un(e,t,s){const i=[...e],o=[];for(const l of s.arrayValue.values||[])for(const d of i){const f=new Cd;f.seed(d.un()),Uo.Wt.Dt(l,f.ln(t.kind)),o.push(f)}return o}qn(e,t){return!!e.filters.find((s=>s instanceof Je&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=Rd(e),i=ac(e);return(t?s.H(Ab,IDBKeyRange.bound(t,t)):s.H()).next((o=>{const l=[];return Y.forEach(o,(d=>i.get([d.indexId,this.uid]).next((f=>{l.push((function(y,b){const v=b?new Pc(b.sequenceNumber,new ys(rl(b.readTime),new ge(Vr(b.documentKey)),b.largestBatchId)):Pc.empty(),T=y.fields.map((([k,I])=>new Qo(St.fromServerFormat(k),I)));return new Dc(y.indexId,y.collectionGroup,T,v)})(d,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,i)=>{const o=s.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Oe(s.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const i=Rd(e),o=ac(e);return this.Wn(e).next((l=>i.H(Ab,IDBKeyRange.bound(t,t)).next((d=>Y.forEach(d,(f=>o.put(wk(f.indexId,this.uid,l,s))))))))}updateIndexEntries(e,t){const s=new Map;return Y.forEach(t,((i,o)=>{const l=s.get(i.collectionGroup);return(l?Y.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((d=>(s.set(i.collectionGroup,d),Y.forEach(d,(f=>this.Qn(e,i,f).next((m=>{const y=this.Gn(o,f);return m.isEqual(y)?Y.resolve():this.zn(e,o,f,m,y)})))))))}))}jn(e,t,s,i){return ic(e).put(i.Rn(this.uid,this.Kn(s,t.key),t.key))}Hn(e,t,s,i){return ic(e).delete(i.An(this.uid,this.Kn(s,t.key),t.key))}Qn(e,t,s){const i=ic(e);let o=new ht(ga);return i.ee({index:sR,range:IDBKeyRange.only([s.indexId,this.uid,xp(this.Kn(s,t))])},((l,d)=>{o=o.add(new zo(s.indexId,t,kk(d.arrayValue),kk(d.directionalValue)))})).next((()=>o))}Gn(e,t){let s=new ht(ga);const i=this.kn(t,e);if(i==null)return s;const o=Eb(t);if(o!=null){const l=e.data.field(o.fieldPath);if(wh(l))for(const d of l.arrayValue.values||[])s=s.add(new zo(t.indexId,e.key,this.Nn(d),i))}else s=s.add(new zo(t.indexId,e.key,Fm,i));return s}zn(e,t,s,i,o){me(Ck,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,m,y,b,v){const T=f.getIterator(),k=m.getIterator();let I=sc(T),j=sc(k);for(;I||j;){let P=!1,L=!1;if(I&&j){const z=y(I,j);z<0?L=!0:z>0&&(P=!0)}else I!=null?L=!0:P=!0;P?(b(j),j=sc(k)):L?(v(I),I=sc(T)):(I=sc(T),j=sc(k))}})(i,o,ga,(d=>{l.push(this.jn(e,t,s,d))}),(d=>{l.push(this.Hn(e,t,s,d))})),Y.waitFor(l)}Wn(e){let t=1;return ac(e).ee({index:nR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,i,o)=>{o.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((l,d)=>ga(l,d))).filter(((l,d,f)=>!d||ga(l,f[d-1])!==0));const i=[];i.push(e);for(const l of s){const d=ga(l,e),f=ga(l,t);if(d===0)i[0]=e.En();else if(d>0&&f<0)i.push(l),i.push(l.En());else if(f>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Jn(i[l],i[l+1]))return[];const d=i[l].An(this.uid,Fm,ge.empty()),f=i[l+1].An(this.uid,Fm,ge.empty());o.push(IDBKeyRange.bound(d,f))}return o}Jn(e,t){return ga(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jk)}getMinOffset(e,t){return Y.mapArray(this.vn(t),(s=>this.Fn(e,s).next((i=>i||Te(44426))))).next(jk)}}function Rk(n){return hn(n,xh)}function ic(n){return hn(n,Zd)}function Rd(n){return hn(n,o_)}function ac(n){return hn(n,Jd)}function jk(n){Ie(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const i=n[s].indexState.offset;r_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ys(e.readTime,e.documentKey,t)}const Dk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hj=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}function fj(n,e,t){const s=n.store(Js),i=n.store(Vc),o=[],l=IDBKeyRange.only(t.batchId);let d=0;const f=s.ee({range:l},((y,b,v)=>(d++,v.delete())));o.push(f.next((()=>{Ie(d===1,47070,{batchId:t.batchId})})));const m=[];for(const y of t.mutations){const b=ZC(e,y.key.path,t.batchId);o.push(i.delete(b)),m.push(y.key)}return Y.waitFor(o).next((()=>m))}function Qp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Te(14731);e=n.noDocument}return JSON.stringify(e).length}jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(hj,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);class Mg{constructor(e,t,s,i){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=i,this.Zn={}}static wt(e,t,s,i){Ie(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Mg(o,t,s,i)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ya(e).ee({index:Go,range:s},((i,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,s,i){const o=fc(e),l=ya(e);return l.add({}).next((d=>{Ie(typeof d=="number",49019);const f=new y_(d,t,s,i),m=(function(T,k,I){const j=I.baseMutations.map((L=>Sh(T.yt,L))),P=I.mutations.map((L=>Sh(T.yt,L)));return{userId:k,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:j,mutations:P}})(this.serializer,this.userId,f),y=[];let b=new ht(((v,T)=>Oe(v.canonicalString(),T.canonicalString())));for(const v of i){const T=ZC(this.userId,v.key.path,d);b=b.add(v.key.path.popLast()),y.push(l.put(m)),y.push(o.put(T,I7))}return b.forEach((v=>{y.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Zn[d]=f.keys()})),Y.waitFor(y).next((()=>f))}))}lookupMutationBatch(e,t){return ya(e).get(t).next((s=>s?(Ie(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),Lo(this.serializer,s)):null))}Xn(e,t){return this.Zn[t]?Y.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const i=s.keys();return this.Zn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=IDBKeyRange.lowerBound([this.userId,s]);let o=null;return ya(e).ee({index:Go,range:i},((l,d,f)=>{d.userId===this.userId&&(Ie(d.batchId>=s,47524,{Yn:s}),o=Lo(this.serializer,d)),f.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=ja;return ya(e).ee({index:Go,range:t,reverse:!0},((i,o,l)=>{s=o.batchId,l.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ja],[this.userId,Number.POSITIVE_INFINITY]);return ya(e).H(Go,t).next((s=>s.map((i=>Lo(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=dp(this.userId,t.path),i=IDBKeyRange.lowerBound(s),o=[];return fc(e).ee({range:i},((l,d,f)=>{const[m,y,b]=l,v=Vr(y);if(m===this.userId&&t.path.isEqual(v))return ya(e).get(b).next((T=>{if(!T)throw Te(61480,{er:l,batchId:b});Ie(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:b}),o.push(Lo(this.serializer,T))}));f.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ht(Oe);const i=[];return t.forEach((o=>{const l=dp(this.userId,o.path),d=IDBKeyRange.lowerBound(l),f=fc(e).ee({range:d},((m,y,b)=>{const[v,T,k]=m,I=Vr(T);v===this.userId&&o.path.isEqual(I)?s=s.add(k):b.done()}));i.push(f)})),Y.waitFor(i).next((()=>this.tr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1,o=dp(this.userId,s),l=IDBKeyRange.lowerBound(o);let d=new ht(Oe);return fc(e).ee({range:l},((f,m,y)=>{const[b,v,T]=f,k=Vr(v);b===this.userId&&s.isPrefixOf(k)?k.length===i&&(d=d.add(T)):y.done()})).next((()=>this.tr(e,d)))}tr(e,t){const s=[],i=[];return t.forEach((o=>{i.push(ya(e).get(o).next((l=>{if(l===null)throw Te(35274,{batchId:o});Ie(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),s.push(Lo(this.serializer,l))})))})),Y.waitFor(i).next((()=>s))}removeMutationBatch(e,t){return fj(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),Y.forEach(s,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Y.resolve();const s=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return fc(e).ee({range:s},((o,l,d)=>{if(o[0]===this.userId){const f=Vr(o[1]);i.push(f)}else d.done()})).next((()=>{Ie(i.length===0,56720,{rr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return mj(e,this.userId,t)}ir(e){return pj(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ja,lastStreamToken:""}))}}function mj(n,e,t){const s=dp(e,t.path),i=s[1],o=IDBKeyRange.lowerBound(s);let l=!1;return fc(n).ee({range:o,Y:!0},((d,f,m)=>{const[y,b,v]=d;y===e&&b===i&&(l=!0),m.done()})).next((()=>l))}function ya(n){return hn(n,Js)}function fc(n){return hn(n,Vc)}function pj(n){return hn(n,gh)}class il{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new il(0)}static ar(){return new il(-1)}}class tB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const s=new il(t.highestTargetId);return t.highestTargetId=s.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>je.fromTimestamp(new at(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.ur(e).next((i=>(i.highestListenSequenceNumber=t,s&&(i.lastRemoteSnapshotVersion=s.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.cr(e,i))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((s=>(s.targetCount+=1,this.hr(t,s),this.cr(e,s))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>oc(e).delete(t.targetId))).next((()=>this.ur(e))).next((s=>(Ie(s.targetCount>0,8065),s.targetCount-=1,this.cr(e,s))))}removeTargets(e,t,s){let i=0;const o=[];return oc(e).ee(((l,d)=>{const f=Bd(d);f.sequenceNumber<=t&&s.get(f.targetId)===null&&(i++,o.push(this.removeTargetData(e,f)))})).next((()=>Y.waitFor(o))).next((()=>i))}forEachTarget(e,t){return oc(e).ee(((s,i)=>{const o=Bd(i);t(o)}))}ur(e){return Pk(e).get(Fp).next((t=>(Ie(t!==null,2888),t)))}cr(e,t){return Pk(e).put(Fp,t)}lr(e,t){return oc(e).put(cj(this.serializer,t))}hr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const s=el(t),i=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let o=null;return oc(e).ee({range:i,index:tR},((l,d,f)=>{const m=Bd(d);Fh(t,m.target)&&(o=m,f.done())})).next((()=>o))}addMatchingKeys(e,t,s){const i=[],o=Sa(e);return t.forEach((l=>{const d=Pn(l.path);i.push(o.put({targetId:s,path:d})),i.push(this.referenceDelegate.addReference(e,s,l))})),Y.waitFor(i)}removeMatchingKeys(e,t,s){const i=Sa(e);return Y.forEach(t,(o=>{const l=Pn(o.path);return Y.waitFor([i.delete([s,l]),this.referenceDelegate.removeReference(e,s,o)])}))}removeMatchingKeysForTargetId(e,t){const s=Sa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(i)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sa(e);let o=ze();return i.ee({range:s,Y:!0},((l,d,f)=>{const m=Vr(l[1]),y=new ge(m);o=o.add(y)})).next((()=>o))}containsKey(e,t){const s=Pn(t.path),i=IDBKeyRange.bound([s],[qC(s)],!1,!0);let o=0;return Sa(e).ee({index:a_,Y:!0,range:i},(([l,d],f,m)=>{l!==0&&(o++,m.done())})).next((()=>o>0))}At(e,t){return oc(e).get(t).next((s=>s?Bd(s):null))}}function oc(n){return hn(n,Mc)}function Pk(n){return hn(n,Yo)}function Sa(n){return hn(n,Oc)}const Vk="LruGarbageCollector",gj=1048576;function Mk([n,e],[t,s]){const i=Oe(n,t);return i===0?Oe(e,s):i}class nB{constructor(e){this.Pr=e,this.buffer=new ht(Mk),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Mk(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yj{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(Vk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qa(t)?me(Vk,"Ignoring IndexedDB error during garbage collection: ",t):await Ka(t)}await this.Ar(3e5)}))}}class sB{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(Wn.ce);const s=new nB(t);return this.Vr.forEachTarget(e,(i=>s.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>s.Er(i))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Dk)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dk):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,i,o,l,d,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,l=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(s=b,d=Date.now(),this.removeTargets(e,s,t)))).next((b=>(o=b,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(m=Date.now(),uc()<=We.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(d-l)+`ms
	Removed ${o} targets in `+(f-d)+`ms
	Removed ${b} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:b}))))}}function xj(n,e){return new sB(n,e)}class rB{constructor(e,t){this.db=e,this.garbageCollector=xj(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((s,i)=>t(i)))}addReference(e,t,s){return qm(e,s)}removeReference(e,t,s){return qm(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return qm(e,t)}wr(e,t){return(function(i,o){let l=!1;return pj(i).te((d=>mj(i,d,o).next((f=>(f&&(l=!0),Y.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.yr(e,((l,d)=>{if(d<=t){const f=this.wr(e,l).next((m=>{if(!m)return o++,s.getEntry(e,l).next((()=>(s.removeEntry(l,je.min()),Sa(e).delete((function(b){return[0,Pn(b.path)]})(l)))))}));i.push(f)}})).next((()=>Y.waitFor(i))).next((()=>s.apply(e))).next((()=>o))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return qm(e,t)}yr(e,t){const s=Sa(e);let i,o=Wn.ce;return s.ee({index:a_},(([l,d],{path:f,sequenceNumber:m})=>{l===0?(o!==Wn.ce&&t(new ge(Vr(i)),o),o=m,i=f):o=Wn.ce})).next((()=>{o!==Wn.ce&&t(new ge(Vr(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qm(n,e){return Sa(n).put((function(s,i){return{targetId:0,path:Pn(s.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class bj{constructor(){this.changes=new Ri((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Y.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Ro(e).put(s)}removeEntry(e,t,s){return Ro(e).delete((function(o,l){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],$p(l),d[d.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.br(e,s))))}getEntry(e,t){let s=Et.newInvalidDocument(t);return Ro(e).ee({index:hp,range:IDBKeyRange.only(jd(t))},((i,o)=>{s=this.Sr(t,o)})).next((()=>s))}Dr(e,t){let s={size:0,document:Et.newInvalidDocument(t)};return Ro(e).ee({index:hp,range:IDBKeyRange.only(jd(t))},((i,o)=>{s={document:this.Sr(t,o),size:Qp(o)}})).next((()=>s))}getEntries(e,t){let s=Zn();return this.Cr(e,t,((i,o)=>{const l=this.Sr(i,o);s=s.insert(i,l)})).next((()=>s))}vr(e,t){let s=Zn(),i=new _t(ge.comparator);return this.Cr(e,t,((o,l)=>{const d=this.Sr(o,l);s=s.insert(o,d),i=i.insert(o,Qp(l))})).next((()=>({documents:s,Fr:i})))}Cr(e,t,s){if(t.isEmpty())return Y.resolve();let i=new ht(Uk);t.forEach((f=>i=i.add(f)));const o=IDBKeyRange.bound(jd(i.first()),jd(i.last())),l=i.getIterator();let d=l.getNext();return Ro(e).ee({index:hp,range:o},((f,m,y)=>{const b=ge.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&Uk(d,b)<0;)s(d,null),d=l.getNext();d&&d.isEqual(b)&&(s(d,m),d=l.hasNext()?l.getNext():null),d?y.j(jd(d)):y.done()})).next((()=>{for(;d;)s(d,null),d=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,s,i,o){const l=t.path,d=[l.popLast().toArray(),l.lastSegment(),$p(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ro(e).H(IDBKeyRange.bound(d,f,!0)).next((m=>{o?.incrementDocumentReadCount(m.length);let y=Zn();for(const b of m){const v=this.Sr(ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);v.isFoundDocument()&&(Gh(t,v)||i.has(v.key))&&(y=y.insert(v.key,v))}return y}))}getAllFromCollectionGroup(e,t,s,i){let o=Zn();const l=Lk(t,s),d=Lk(t,ys.max());return Ro(e).ee({index:eR,range:IDBKeyRange.bound(l,d,!0)},((f,m,y)=>{const b=this.Sr(ge.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);o=o.insert(b.key,b),o.size===i&&y.done()})).next((()=>o))}newChangeBuffer(e){return new aB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Ok(e).get(Sb).next((t=>(Ie(!!t,20021),t)))}br(e,t){return Ok(e).put(Sb,t)}Sr(e,t){if(t){const s=Hz(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(je.min())))return s}return Et.newInvalidDocument(e)}}function vj(n){return new iB(n)}class aB extends bj{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Ri((s=>s.toString()),((s,i)=>s.isEqual(i)))}applyChanges(e){const t=[];let s=0,i=new ht(((o,l)=>Oe(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const d=this.Or.get(o);if(t.push(this.Mr.removeEntry(e,o,d.readTime)),l.isValidDocument()){const f=vk(this.Mr.serializer,l);i=i.add(o.path.popLast());const m=Qp(f);s+=m-d.size,t.push(this.Mr.addEntry(e,o,f))}else if(s-=d.size,this.trackRemovals){const f=vk(this.Mr.serializer,l.convertToNoDocument(je.min()));t.push(this.Mr.addEntry(e,o,f))}})),i.forEach((o=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Mr.updateMetadata(e,s)),Y.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((s=>(this.Or.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:s,Fr:i})=>(i.forEach(((o,l)=>{this.Or.set(o,{size:l,readTime:s.get(o).readTime})})),s)))}}function Ok(n){return hn(n,yh)}function Ro(n){return hn(n,Bp)}function jd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Lk(n,e){const t=e.documentKey.path.toArray();return[n,$p(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Uk(n,e){const t=n.path.toArray(),s=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<s.length-2;++o)if(i=Oe(t[o],s[o]),i)return i;return i=Oe(t.length,s.length),i||(i=Oe(t[t.length-2],s[s.length-2]),i||Oe(t[t.length-1],s[s.length-1]))}class oB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _j{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(s!==null&&nh(s.mutation,i,Jn.empty(),at.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ze()){const i=Mr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,s).next((o=>{let l=Ud();return o.forEach(((d,f)=>{l=l.insert(d,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const s=Mr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ze())))}populateOverlays(e,t,s){const i=[];return s.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((l,d)=>{t.set(l,d)}))}))}computeViews(e,t,s,i){let o=Zn();const l=th(),d=(function(){return th()})();return t.forEach(((f,m)=>{const y=s.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof ji)?o=o.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),nh(y.mutation,m,y.mutation.getFieldMask(),at.now())):l.set(m.key,Jn.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((m,y)=>l.set(m,y))),t.forEach(((m,y)=>d.set(m,new oB(y,l.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=th();let i=new _t(((l,d)=>l-d)),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const d of l)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let y=s.get(f)||Jn.empty();y=d.applyToLocalView(m,y),s.set(f,y);const b=(i.get(d.batchId)||ze()).add(f);i=i.insert(d.batchId,b)}))})).next((()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,b=VR();y.forEach((v=>{if(!o.has(v)){const T=FR(t.get(v),s.get(v));T!==null&&b.set(v,T),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,b))}return Y.waitFor(l)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,i){return fz(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):f_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next((o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-o.size):Y.resolve(Mr());let d=jc,f=o;return l.next((m=>Y.forEach(m,((y,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(y)?Y.resolve():this.remoteDocumentCache.getEntry(e,y).next((v=>{f=f.insert(y,v)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,f,m,ze()))).next((y=>({batchId:d,changes:PR(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((s=>{let i=Ud();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const o=t.collectionGroup;let l=Ud();return this.indexManager.getCollectionParents(e,o).next((d=>Y.forEach(d,(f=>{const m=(function(b,v){return new Ci(v,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,s,i).next((y=>{y.forEach(((b,v)=>{l=l.insert(b,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,s,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,i)))).next((l=>{o.forEach(((f,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,Et.newInvalidDocument(y)))}));let d=Ud();return l.forEach(((f,m)=>{const y=o.get(f);y!==void 0&&nh(y.mutation,m,Jn.empty(),at.now()),Gh(t,m)&&(d=d.insert(f,m))})),d}))}}class lB{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Y.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ht(i.createTime)}})(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:Pg(i.bundledQuery),readTime:Ht(i.readTime)}})(t)),Y.resolve()}}class cB{constructor(){this.overlays=new _t(ge.comparator),this.Lr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Mr();return Y.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&s.set(i,o)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((i,o)=>{this.bt(e,t,o)})),Y.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.Lr.get(s);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(s)),Y.resolve()}getOverlaysForCollection(e,t,s){const i=Mr(),o=t.length+1,l=new ge(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>s&&i.set(f.getKey(),f)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let o=new _t(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let y=o.get(m.largestBatchId);y===null&&(y=Mr(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=Mr(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,y)=>d.set(m,y))),!(d.size()>=i)););return Y.resolve(d)}bt(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const l=this.Lr.get(i.largestBatchId).delete(s.key);this.Lr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(s.key,new b_(t,s));let o=this.Lr.get(t);o===void 0&&(o=ze(),this.Lr.set(t,o)),this.Lr.set(t,o.add(s.key))}}class uB{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}class E_{constructor(){this.kr=new ht(yn.Kr),this.qr=new ht(yn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new yn(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new yn(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new ge(new He([])),s=new yn(t,e),i=new yn(t,e+1),o=[];return this.qr.forEachInRange([s,i],(l=>{this.Wr(l),o.push(l.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ge(new He([])),s=new yn(t,e),i=new yn(t,e+1);let o=ze();return this.qr.forEachInRange([s,i],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new yn(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class yn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ge.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||ge.comparator(e.key,t.key)}}class dB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ht(yn.Kr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new y_(o,t,s,i);this.mutationQueue.push(l);for(const d of i)this.Jr=this.Jr.add(new yn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Y.resolve(l)}lookupMutationBatch(e,t){return Y.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.Xr(s),o=i<0?0:i;return Y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?ja:this.Yn-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new yn(t,0),i=new yn(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([s,i],(l=>{const d=this.Zr(l.Hr);o.push(d)})),Y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ht(Oe);return t.forEach((i=>{const o=new yn(i,0),l=new yn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],(d=>{s=s.add(d.Hr)}))})),Y.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let o=s;ge.isDocumentKey(o)||(o=o.child(""));const l=new yn(new ge(o),0);let d=new ht(Oe);return this.Jr.forEachWhile((f=>{const m=f.key.path;return!!s.isPrefixOf(m)&&(m.length===i&&(d=d.add(f.Hr)),!0)}),l),Y.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((s=>{const i=this.Zr(s);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ie(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return Y.forEach(t.mutations,(i=>{const o=new yn(i.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new yn(t,0),i=this.Jr.firstAfterOrEqual(s);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hB{constructor(e){this.ti=e,this.docs=(function(){return new _t(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),o=i?i.size:0,l=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Y.resolve(s?s.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let s=Zn();return t.forEach((i=>{const o=this.docs.get(i);s=s.insert(i,o?o.document.mutableCopy():Et.newInvalidDocument(i))})),Y.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let o=Zn();const l=t.path,d=new ge(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||r_(QC(y),s)<=0||(i.has(y.key)||Gh(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return Y.resolve(o)}getAllFromCollectionGroup(e,t,s,i){Te(9500)}ni(e,t){return Y.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new fB(this)}getSize(e){return Y.resolve(this.size)}}class fB extends bj{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(s)})),Y.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class mB{constructor(e){this.persistence=e,this.ri=new Ri((t=>el(t)),Fh),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.ii=0,this.si=new E_,this.targetCount=0,this.oi=il._r()}forEachTarget(e,t){return this.ri.forEach(((s,i)=>t(i))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),Y.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new il(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.lr(t),Y.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,s){let i=0;const o=[];return this.ri.forEach(((l,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),Y.waitFor(o).next((()=>i))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return Y.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),Y.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((l=>{o.push(i.markPotentiallyOrphaned(e,l))})),Y.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return Y.resolve(s)}containsKey(e,t){return Y.resolve(this.si.containsKey(t))}}class S_{constructor(e,t){this._i={},this.overlays={},this.ai=new Wn(0),this.ui=!1,this.ui=!0,this.ci=new uB,this.referenceDelegate=e(this),this.li=new mB(this),this.indexManager=new Zz,this.remoteDocumentCache=(function(i){return new hB(i)})((s=>this.referenceDelegate.hi(s))),this.serializer=new lj(t),this.Pi=new lB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new dB(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const i=new pB(this.ai.next());return this.referenceDelegate.Ti(),s(i).next((o=>this.referenceDelegate.Ii(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ei(e,t){return Y.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class pB extends XC{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new E_,this.Ai=null}static Vi(e){return new Og(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),Y.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.di.add(o.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.di,(s=>{const i=ge.fromPath(s);return this.mi(e,i).next((o=>{o||t.removeEntry(i,je.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Y.or([()=>Y.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Yp{constructor(e,t){this.persistence=e,this.fi=new Ri((s=>Pn(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=xj(this,t)}static Vi(e,t){return new Yp(e,t)}Ti(){}Ii(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return Y.forEach(this.fi,((s,i)=>this.wr(e,s,i).next((o=>o?Y.resolve():t(i)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,(l=>this.wr(e,l,t).next((d=>{d||(s++,o.removeEntry(l,je.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Y.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mp(e.data.value)),t}wr(e,t,s){return Y.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return Y.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class gB{constructor(e){this.serializer=e}k(e,t,s,i){const o=new Tg("createOrUpgrade",t);s<1&&i>=1&&((function(f){f.createObjectStore(Bh)})(e),(function(f){f.createObjectStore(gh,{keyPath:N7}),f.createObjectStore(Js,{keyPath:XA,autoIncrement:!0}).createIndex(Go,WA,{unique:!0}),f.createObjectStore(Vc)})(e),zk(e),(function(f){f.createObjectStore(Mo)})(e));let l=Y.resolve();return s<3&&i>=3&&(s!==0&&((function(f){f.deleteObjectStore(Oc),f.deleteObjectStore(Mc),f.deleteObjectStore(Yo)})(e),zk(e)),l=l.next((()=>(function(f){const m=f.store(Yo),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:je.min().toTimestamp(),targetCount:0};return m.put(Fp,y)})(o)))),s<4&&i>=4&&(s!==0&&(l=l.next((()=>(function(f,m){return m.store(Js).H().next((b=>{f.deleteObjectStore(Js),f.createObjectStore(Js,{keyPath:XA,autoIncrement:!0}).createIndex(Go,WA,{unique:!0});const v=m.store(Js),T=b.map((k=>v.put(k)));return Y.waitFor(T)}))})(e,o)))),l=l.next((()=>{(function(f){f.createObjectStore(Lc,{keyPath:O7})})(e)}))),s<5&&i>=5&&(l=l.next((()=>this.gi(o)))),s<6&&i>=6&&(l=l.next((()=>((function(f){f.createObjectStore(yh)})(e),this.pi(o))))),s<7&&i>=7&&(l=l.next((()=>this.yi(o)))),s<8&&i>=8&&(l=l.next((()=>this.wi(e,o)))),s<9&&i>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&i>=10&&(l=l.next((()=>this.bi(o)))),s<11&&i>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(Eg,{keyPath:L7})})(e),(function(f){f.createObjectStore(Sg,{keyPath:U7})})(e)}))),s<12&&i>=12&&(l=l.next((()=>{(function(f){const m=f.createObjectStore(Ag,{keyPath:$7});m.createIndex(kb,K7,{unique:!1}),m.createIndex(rR,Q7,{unique:!1})})(e)}))),s<13&&i>=13&&(l=l.next((()=>(function(f){const m=f.createObjectStore(Bp,{keyPath:C7});m.createIndex(hp,R7),m.createIndex(eR,j7)})(e))).next((()=>this.Si(e,o))).next((()=>e.deleteObjectStore(Mo)))),s<14&&i>=14&&(l=l.next((()=>this.Di(e,o)))),s<15&&i>=15&&(l=l.next((()=>(function(f){f.createObjectStore(o_,{keyPath:z7,autoIncrement:!0}).createIndex(Ab,B7,{unique:!1}),f.createObjectStore(Jd,{keyPath:F7}).createIndex(nR,q7,{unique:!1}),f.createObjectStore(Zd,{keyPath:G7}).createIndex(sR,H7,{unique:!1})})(e)))),s<16&&i>=16&&(l=l.next((()=>{t.objectStore(Jd).clear()})).next((()=>{t.objectStore(Zd).clear()}))),s<17&&i>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(l_,{keyPath:Y7})})(e)}))),s<18&&i>=18&&WI()&&(l=l.next((()=>{t.objectStore(Jd).clear()})).next((()=>{t.objectStore(Zd).clear()}))),l}pi(e){let t=0;return e.store(Mo).ee(((s,i)=>{t+=Qp(i)})).next((()=>{const s={byteSize:t};return e.store(yh).put(Sb,s)}))}gi(e){const t=e.store(gh),s=e.store(Js);return t.H().next((i=>Y.forEach(i,(o=>{const l=IDBKeyRange.bound([o.userId,ja],[o.userId,o.lastAcknowledgedBatchId]);return s.H(Go,l).next((d=>Y.forEach(d,(f=>{Ie(f.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const m=Lo(this.serializer,f);return fj(e,o.userId,m).next((()=>{}))}))))}))))}yi(e){const t=e.store(Oc),s=e.store(Mo);return e.store(Yo).get(Fp).next((i=>{const o=[];return s.ee(((l,d)=>{const f=new He(l),m=(function(b){return[0,Pn(b)]})(f);o.push(t.get(m).next((y=>y?Y.resolve():(b=>t.put({targetId:0,path:Pn(b),sequenceNumber:i.highestListenSequenceNumber}))(f))))})).next((()=>Y.waitFor(o)))}))}wi(e,t){e.createObjectStore(xh,{keyPath:M7});const s=t.store(xh),i=new T_,o=l=>{if(i.add(l)){const d=l.lastSegment(),f=l.popLast();return s.put({collectionId:d,parent:Pn(f)})}};return t.store(Mo).ee({Y:!0},((l,d)=>{const f=new He(l);return o(f.popLast())})).next((()=>t.store(Vc).ee({Y:!0},(([l,d,f],m)=>{const y=Vr(d);return o(y.popLast())}))))}bi(e){const t=e.store(Mc);return t.ee(((s,i)=>{const o=Bd(i),l=cj(this.serializer,o);return t.put(l)}))}Si(e,t){const s=t.store(Mo),i=[];return s.ee(((o,l)=>{const d=t.store(Bp),f=(function(b){return b.document?new ge(He.fromString(b.document.name).popFirst(5)):b.noDocument?ge.fromSegments(b.noDocument.path):b.unknownDocument?ge.fromSegments(b.unknownDocument.path):Te(36783)})(l).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(m))})).next((()=>Y.waitFor(i)))}Di(e,t){const s=t.store(Js),i=vj(this.serializer),o=new S_(Og.Vi,this.serializer.yt);return s.H().next((l=>{const d=new Map;return l.forEach((f=>{let m=d.get(f.userId)??ze();Lo(this.serializer,f).keys().forEach((y=>m=m.add(y))),d.set(f.userId,m)})),Y.forEach(d,((f,m)=>{const y=new xn(m),b=Vg.wt(this.serializer,y),v=o.getIndexManager(y),T=Mg.wt(y,this.serializer,v,o.referenceDelegate);return new _j(i,T,b,v).recalculateAndSaveOverlaysForDocumentKeys(new Nb(t,Wn.ce),f).next()}))}))}}function zk(n){n.createObjectStore(Oc,{keyPath:P7}).createIndex(a_,V7,{unique:!0}),n.createObjectStore(Mc,{keyPath:"targetId"}).createIndex(tR,D7,{unique:!0}),n.createObjectStore(Yo)}const xa="IndexedDbPersistence",kx=18e5,Nx=5e3,Ix="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wj="main";class A_{constructor(e,t,s,i,o,l,d,f,m,y,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ci=o,this.window=l,this.document=d,this.Fi=m,this.Mi=y,this.xi=b,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=v=>Promise.resolve(),!A_.v())throw new de(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rB(this,i),this.Ki=t+wj,this.serializer=new lj(f),this.qi=new zr(this.Ki,this.xi,new gB(this.serializer)),this.ci=new Kz,this.li=new tB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vj(this.serializer),this.Pi=new $z,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,y===!1&&Gt(xa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(Z.FAILED_PRECONDITION,Ix);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Wn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Gm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Qa(e))return me(xa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me(xa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Dd(e).get(nc).next((t=>Y.resolve(this.Xi(t))))}Yi(e){return Gm(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,kx)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=hn(t,Lc);return s.H().next((i=>{const o=this.ns(i,kx),l=i.filter((d=>o.indexOf(d)===-1));return Y.forEach(l,(d=>s.delete(d.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?Y.resolve(!0):Dd(e).get(nc).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Nx)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new de(Z.FAILED_PRECONDITION,Ix);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gm(e).H().next((s=>this.ns(s,Nx).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(o||l&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&me(xa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Bh,Lc],(e=>{const t=new Nb(e,Wn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((s=>this.ts(s.updateTimeMs,t)&&!this.ss(s.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Gm(e).H().next((t=>this.ns(t,kx).map((s=>s.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Mg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eB(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Vg.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,s){me(xa,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=(function(f){return f===18?J7:f===17?lR:f===16?W7:f===15?c_:f===14?oR:f===13?aR:f===12?X7:f===11?iR:void Te(60245)})(this.xi);let l;return this.qi.runTransaction(e,i,o,(d=>(l=new Nb(d,this.ai?this.ai.next():Wn.ce),t==="readwrite-primary"?this.ji(l).next((f=>!!f||this.Hi(l))).next((f=>{if(!f)throw Gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new de(Z.FAILED_PRECONDITION,YC);return s(l)})).next((f=>this.Zi(l).next((()=>f)))):this.Ps(l).next((()=>s(l)))))).then((d=>(l.raiseOnCommittedEvent(),d)))}Ps(e){return Dd(e).get(nc).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Nx)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(Z.FAILED_PRECONDITION,Ix)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dd(e).put(nc,t)}static v(){return zr.v()}Ji(e){const t=Dd(e);return t.get(nc).next((s=>this.Xi(s)?(me(xa,"Releasing primary lease."),t.delete(nc)):Y.resolve()))}ts(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(Gt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;XI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return me(xa,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gt(xa,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Gt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dd(n){return hn(n,Bh)}function Gm(n){return hn(n,Lc)}function k_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class N_{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=i}static Es(e,t){let s=ze(),i=ze();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new N_(e,t.fromCache,s,i)}}class yB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Tj{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return XI()?8:WC(un())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,i){const o={result:null};return this.gs(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ps(e,t,i,s).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new yB;return this.ys(e,t,l).next((d=>{if(o.result=d,this.As)return this.ws(e,t,l,d.size)}))})).next((()=>o.result))}ws(e,t,s,i){return s.documentReadCount<this.Vs?(uc()<=We.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",dc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Y.resolve()):(uc()<=We.DEBUG&&me("QueryEngine","Query:",dc(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ds*i?(uc()<=We.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",dc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):Y.resolve())}gs(e,t){if(uk(t))return Y.resolve(null);let s=Vn(t);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Hp(t,null,"F"),s=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const l=ze(...o);return this.fs.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,s).next((f=>{const m=this.bs(t,d);return this.Ss(t,m,l,f.readTime)?this.gs(e,Hp(t,null,"F")):this.Ds(e,m,t,f)}))))})))))}ps(e,t,s,i){return uk(t)||i.isEqual(je.min())?Y.resolve(null):this.fs.getDocuments(e,s).next((o=>{const l=this.bs(t,o);return this.Ss(t,l,s,i)?Y.resolve(null):(uc()<=We.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dc(t)),this.Ds(e,l,t,KC(i,jc)).next((d=>d)))}))}bs(e,t){let s=new ht(jR(e));return t.forEach(((i,o)=>{Gh(e,o)&&(s=s.add(o))})),s}Ss(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,s){return uc()<=We.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",dc(t)),this.fs.getDocumentsMatchingQuery(e,t,ys.min(),s)}Ds(e,t,s,i){return this.fs.getDocumentsMatchingQuery(e,s,i).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const I_="LocalStore",xB=3e8;class bB{constructor(e,t,s,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new _t(Oe),this.Fs=new Ri((o=>el(o)),Fh),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _j(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Ej(n,e,t,s){return new bB(n,e,t,s)}async function Sj(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next((o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((o=>{const l=[],d=[];let f=ze();for(const m of i){l.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of o){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(s,f).next((m=>({Ns:m,removedBatchIds:l,addedBatchIds:d})))}))}))}function vB(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,y){const b=m.batch,v=b.keys();let T=Y.resolve();return v.forEach((k=>{T=T.next((()=>y.getEntry(f,k))).next((I=>{const j=m.docVersions.get(k);Ie(j!==null,48541),I.version.compareTo(j)<0&&(b.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),y.addEntry(I)))}))})),T.next((()=>d.mutationQueue.removeMutationBatch(f,b)))})(t,s,e,o).next((()=>o.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let f=ze();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,i)))}))}function Aj(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function _B(n,e){const t=be(n),s=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const d=[];e.targetChanges.forEach(((y,b)=>{const v=i.get(b);if(!v)return;d.push(t.li.removeMatchingKeys(o,y.removedDocuments,b).next((()=>t.li.addMatchingKeys(o,y.addedDocuments,b))));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?T=T.withResumeToken(Pt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,s)),i=i.insert(b,T),(function(I,j,P){return I.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=xB?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(v,T,y)&&d.push(t.li.updateTargetData(o,T))}));let f=Zn(),m=ze();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))})),d.push(kj(o,l,e.documentUpdates).next((y=>{f=y.Bs,m=y.Ls}))),!s.isEqual(je.min())){const y=t.li.getLastRemoteSnapshotVersion(o).next((b=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,s)));d.push(y)}return Y.waitFor(d).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,f,m))).next((()=>f))})).then((o=>(t.vs=i,o)))}function kj(n,e,t){let s=ze(),i=ze();return t.forEach((o=>s=s.add(o))),e.getEntries(n,s).next((o=>{let l=Zn();return t.forEach(((d,f)=>{const m=o.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(je.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):me(I_,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Bs:l,Ls:i}}))}function wB(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ja),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Hc(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return t.li.getTargetData(s,e).next((o=>o?(i=o,Y.resolve(i)):t.li.allocateTargetId(s).next((l=>(i=new yi(e,l,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=t.vs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function $c(n,e,t){const s=be(n),i=s.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,(l=>s.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Qa(l))throw l;me(I_,`Failed to update sequence numbers for target ${e}: ${l}`)}s.vs=s.vs.remove(e),s.Fs.delete(i.target)}function Xp(n,e,t){const s=be(n);let i=je.min(),o=ze();return s.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,m,y){const b=be(f),v=b.Fs.get(y);return v!==void 0?Y.resolve(b.vs.get(v)):b.li.getTargetData(m,y)})(s,l,Vn(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(l,d.targetId).next((f=>{o=f}))})).next((()=>s.Cs.getDocumentsMatchingQuery(l,e,t?i:je.min(),t?o:ze()))).next((d=>(Cj(s,RR(e),d),{documents:d,ks:o})))))}function Nj(n,e){const t=be(n),s=be(t.li),i=t.vs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(o=>s.At(o,e).next((l=>l?l.target:null))))}function Ij(n,e){const t=be(n),s=t.Ms.get(e)||je.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.xs.getAllFromCollectionGroup(i,e,KC(s,jc),Number.MAX_SAFE_INTEGER))).then((i=>(Cj(t,e,i),i)))}function Cj(n,e,t){let s=n.Ms.get(e)||je.min();t.forEach(((i,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),n.Ms.set(e,s)}async function TB(n,e,t,s){const i=be(n);let o=ze(),l=Zn();for(const m of t){const y=e.Ks(m.metadata.name);m.document&&(o=o.add(y));const b=e.qs(m);b.setReadTime(e.Us(m.metadata.readTime)),l=l.insert(y,b)}const d=i.xs.newChangeBuffer({trackRemovals:!0}),f=await Hc(i,(function(y){return Vn(lu(He.fromString(`__bundle__/docs/${y}`)))})(s));return i.persistence.runTransaction("Apply bundle documents","readwrite",(m=>kj(m,d,l).next((y=>(d.apply(m),y))).next((y=>i.li.removeMatchingKeysForTargetId(m,f.targetId).next((()=>i.li.addMatchingKeys(m,o,f.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(m,y.Bs,y.Ls))).next((()=>y.Bs))))))}async function EB(n,e,t=ze()){const s=await Hc(n,Vn(Pg(e.bundledQuery))),i=be(n);return i.persistence.runTransaction("Save named query","readwrite",(o=>{const l=Ht(e.readTime);if(s.snapshotVersion.compareTo(l)>=0)return i.Pi.saveNamedQuery(o,e);const d=s.withResumeToken(Pt.EMPTY_BYTE_STRING,l);return i.vs=i.vs.insert(d.targetId,d),i.li.updateTargetData(o,d).next((()=>i.li.removeMatchingKeysForTargetId(o,s.targetId))).next((()=>i.li.addMatchingKeys(o,t,s.targetId))).next((()=>i.Pi.saveNamedQuery(o,e)))}))}const Rj="firestore_clients";function Bk(n,e){return`${Rj}_${n}_${e}`}const jj="firestore_mutations";function Fk(n,e,t){let s=`${jj}_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const Dj="firestore_targets";function Cx(n,e){return`${Dj}_${n}_${e}`}const Pr="SharedClientState";class Wp{constructor(e,t,s,i){this.user=e,this.batchId=t,this.state=s,this.error=i}static $s(e,t,s){const i=JSON.parse(s);let o,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(o=new de(i.error.code,i.error.message))),l?new Wp(e,t,i.state,o):(Gt(Pr,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sh{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static $s(e,t){const s=JSON.parse(t);let i,o=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new de(s.error.code,s.error.message))),o?new sh(e,s.state,i):(Gt(Pr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const s=JSON.parse(t);let i=typeof s=="object"&&s.activeTargetIds instanceof Array,o=m_();for(let l=0;i&&l<s.activeTargetIds.length;++l)i=JC(s.activeTargetIds[l]),o=o.add(s.activeTargetIds[l]);return i?new Jp(e,o):(Gt(Pr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class C_{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new C_(t.clientId,t.onlineState):(Gt(Pr,`Failed to parse online state: ${e}`),null)}}class qb{constructor(){this.activeTargetIds=m_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rx{constructor(e,t,s,i,o){this.window=e,this.Ci=t,this.persistenceKey=s,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new _t(Oe),this.started=!1,this.Zs=[];const l=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=Bk(this.persistenceKey,this.zs),this.Ys=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new qb),this.eo=new RegExp(`^${Rj}_${l}_([^_]*)$`),this.no=new RegExp(`^${jj}_${l}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${Dj}_${l}_(\\d+)$`),this.io=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.so=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const s of e){if(s===this.zs)continue;const i=this.getItem(Bk(this.persistenceKey,s));if(i){const o=Jp.$s(s,i);o&&(this.Js=this.Js.insert(o.clientId,o))}}this.oo();const t=this.storage.getItem(this.io);if(t){const s=this._o(t);s&&this.ao(s)}for(const s of this.Zs)this.Hs(s);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((s,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,s){this.co(e,t,s),this.lo(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Cx(this.persistenceKey,e));if(i){const o=sh.$s(e,i);o&&(s=o.state)}}return t&&this.ho.Qs(e),this.oo(),s}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cx(this.persistenceKey,e))}updateQueryState(e,t,s){this.Po(e,t,s)}handleUserChange(e,t,s){t.forEach((i=>{this.lo(i)})),this.currentUser=e,s.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return me(Pr,"READ",e,t),t}setItem(e,t){me(Pr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){me(Pr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(me(Pr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const s=this.Eo(t.key);return this.Ro(s,null)}{const s=this.Ao(t.key,t.newValue);if(s)return this.Ro(s.clientId,s)}}else if(this.no.test(t.key)){if(t.newValue!==null){const s=this.Vo(t.key,t.newValue);if(s)return this.mo(s)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(t.key===this.io){if(t.newValue!==null){const s=this._o(t.newValue);if(s)return this.ao(s)}}else if(t.key===this.Ys){const s=(function(o){let l=Wn.ce;if(o!=null)try{const d=JSON.parse(o);Ie(typeof d=="number",30636,{yo:o}),l=d}catch(d){Gt(Pr,"Failed to read sequence number from WebStorage",d)}return l})(t.newValue);s!==Wn.ce&&this.sequenceNumberHandler(s)}else if(t.key===this.so){const s=this.wo(t.newValue);await Promise.all(s.map((i=>this.syncEngine.bo(i))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,s){const i=new Wp(this.currentUser,e,t,s),o=Fk(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}lo(e){const t=Fk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,s){const i=Cx(this.persistenceKey,e),o=new sh(e,t,s);this.setItem(i,o.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const s=this.Eo(e);return Jp.$s(s,t)}Vo(e,t){const s=this.no.exec(e),i=Number(s[1]),o=s[2]!==void 0?s[2]:null;return Wp.$s(new xn(o),i,t)}fo(e,t){const s=this.ro.exec(e),i=Number(s[1]);return sh.$s(i,t)}_o(e){return C_.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);me(Pr,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const s=t?this.Js.insert(e,t):this.Js.remove(e),i=this.uo(this.Js),o=this.uo(s),l=[],d=[];return o.forEach((f=>{i.has(f)||l.push(f)})),i.forEach((f=>{o.has(f)||d.push(f)})),this.syncEngine.Co(l,d).then((()=>{this.Js=s}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=m_();return e.forEach(((s,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class Pj{constructor(){this.vo=new qb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new qb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class SB{Mo(e){}shutdown(){}}const qk="ConnectivityMonitor";class Gk{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(qk,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(qk,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hm=null;function Gb(){return Hm===null?Hm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hm++,"0x"+Hm.toString(16)}const jx="RestConnection",AB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class kB{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${i}`,this.$o=this.databaseId.database===vh?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(e,t,s,i,o){const l=Gb(),d=this.Qo(e,t.toUriEncodedString());me(jx,`Sending RPC '${e}' ${l}:`,d,s);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,i,o);const{host:m}=new URL(d),y=$a(m);return this.zo(e,d,f,s,y).then((b=>(me(jx,`Received RPC '${e}' ${l}: `,b),b)),(b=>{throw ss(jx,`RPC '${e}' ${l} failed with error: `,b,"url: ",d,"request:",s),b}))}jo(e,t,s,i,o,l){return this.Wo(e,t,s,i,o)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ou})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),s&&s.headers.forEach(((i,o)=>e[o]=i))}Qo(e,t){const s=AB[e];let i=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class NB{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Rn="WebChannelConnection",Pd=(n,e,t)=>{n.listen(e,(s=>{try{t(s)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Sc extends kB{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Sc.c_){const e=LC();Pd(e,OC.STAT_EVENT,(t=>{t.stat===vb.PROXY?me(Rn,"STAT_EVENT: detected buffering proxy"):t.stat===vb.NOPROXY&&me(Rn,"STAT_EVENT: detected no buffering proxy")})),Sc.c_=!0}}zo(e,t,s,i,o){const l=Gb();return new Promise(((d,f)=>{const m=new VC;m.setWithCredentials(!0),m.listenOnce(MC.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case up.NO_ERROR:const b=m.getResponseJson();me(Rn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(b)),d(b);break;case up.TIMEOUT:me(Rn,`RPC '${e}' ${l} timed out`),f(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case up.HTTP_ERROR:const v=m.getStatus();if(me(Rn,`RPC '${e}' ${l} failed with status:`,v,"response text:",m.getResponseText()),v>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T?.error;if(k&&k.status&&k.message){const I=(function(P){const L=P.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(L)>=0?L:Z.UNKNOWN})(k.status);f(new de(I,k.message))}else f(new de(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new de(Z.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{me(Rn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(i);me(Rn,`RPC '${e}' ${l} sending request:`,i),m.send(t,"POST",y,s,15)}))}T_(e,t,s){const i=Gb(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,s),d.encodeInitMessageHeaders=!0;const m=o.join("");me(Rn,`Creating RPC '${e}' stream ${i}: ${m}`,d);const y=l.createWebChannel(m,d);this.I_(y);let b=!1,v=!1;const T=new NB({Ho:k=>{v?me(Rn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(b||(me(Rn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),b=!0),me(Rn,`RPC '${e}' stream ${i} sending:`,k),y.send(k))},Jo:()=>y.close()});return Pd(y,Ld.EventType.OPEN,(()=>{v||(me(Rn,`RPC '${e}' stream ${i} transport opened.`),T.i_())})),Pd(y,Ld.EventType.CLOSE,(()=>{v||(v=!0,me(Rn,`RPC '${e}' stream ${i} transport closed`),T.o_(),this.E_(y))})),Pd(y,Ld.EventType.ERROR,(k=>{v||(v=!0,ss(Rn,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),T.o_(new de(Z.UNAVAILABLE,"The operation could not be completed")))})),Pd(y,Ld.EventType.MESSAGE,(k=>{if(!v){const I=k.data[0];Ie(!!I,16349);const j=I,P=j?.error||j[0]?.error;if(P){me(Rn,`RPC '${e}' stream ${i} received error:`,P);const L=P.status;let z=(function(ce){const D=tn[ce];if(D!==void 0)return $R(D)})(L),$=P.message;L==="NOT_FOUND"&&$.includes("database")&&$.includes("does not exist")&&$.includes(this.databaseId.database)&&ss(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),z===void 0&&(z=Z.INTERNAL,$="Unknown error status: "+L+" with message "+P.message),v=!0,T.o_(new de(z,$)),y.close()}else me(Rn,`RPC '${e}' stream ${i} received:`,I),T.__(I)}})),Sc.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return UC()}}function IB(n){return new Sc(n)}function Vj(){return typeof window<"u"?window:null}function bp(){return typeof document<"u"?document:null}function ul(n){return new Vz(n,!0)}Sc.c_=!1;class R_{constructor(e,t,s=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-s);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Hk="PersistentStream";class Mj{constructor(e,t,s,i,o,l,d,f){this.Ci=e,this.b_=s,this.S_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Gt(t.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===t&&this.G_(s,i)}),(s=>{e((()=>{const i=new de(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Hk,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(me(Hk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CB extends Mj{constructor(e,t,s,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Lz(this.serializer,e),s=(function(o){if(!("targetChange"in o))return je.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?je.min():l.readTime?Ht(l.readTime):je.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Lb(this.serializer),t.addTarget=(function(o,l){let d;const f=l.target;if(d=qp(f)?{documents:tj(o,f)}:{query:Dg(o,f).ft},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=XR(o,l.resumeToken);const m=Mb(o,l.expectedCount);m!==null&&(d.expectedCount=m)}else if(l.snapshotVersion.compareTo(je.min())>0){d.readTime=Gc(o,l.snapshotVersion.toTimestamp());const m=Mb(o,l.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=zz(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Lb(this.serializer),t.removeTarget=e,this.K_(t)}}class RB extends Mj{constructor(e,t,s,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Uz(e.writeResults,e.commitTime),s=Ht(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Lb(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Sh(this.serializer,s)))};this.K_(t)}}class jB{}class DB extends jB{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,Ob(t,s),i,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Z.UNKNOWN,o.toString())}))}jo(e,t,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.jo(e,Ob(t,s),i,l,d,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(Z.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function PB(n,e,t,s){return new DB(n,e,t,s)}class VB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gt(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const al="RemoteStore";class MB{constructor(e,t,s,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((l=>{s.enqueueAndForget((async()=>{Xa(this)&&(me(al,"Restarting streams for network reachability change."),await(async function(f){const m=be(f);m.Ea.add(4),await du(m),m.Va.set("Unknown"),m.Ea.delete(4),await Qh(m)})(this))}))})),this.Va=new VB(s,i)}}async function Qh(n){if(Xa(n))for(const e of n.Ra)await e(!0)}async function du(n){for(const e of n.Ra)await e(!1)}function Lg(n,e){const t=be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),P_(t)?D_(t):fu(t).O_()&&j_(t,e))}function Kc(n,e){const t=be(n),s=fu(t);t.Ia.delete(e),s.O_()&&Oj(t,e),t.Ia.size===0&&(s.O_()?s.L_():Xa(t)&&t.Va.set("Unknown"))}function j_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fu(n).Z_(e)}function Oj(n,e){n.da.$e(e),fu(n).X_(e)}function D_(n){n.da=new Rz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),fu(n).start(),n.Va.ua()}function P_(n){return Xa(n)&&!fu(n).x_()&&n.Ia.size>0}function Xa(n){return be(n).Ea.size===0}function Lj(n){n.da=void 0}async function OB(n){n.Va.set("Online")}async function LB(n){n.Ia.forEach(((e,t)=>{j_(n,e)}))}async function UB(n,e){Lj(n),P_(n)?(n.Va.ha(e),D_(n)):n.Va.set("Unknown")}async function zB(n,e,t){if(n.Va.set("Online"),e instanceof YR&&e.state===2&&e.cause)try{await(async function(i,o){const l=o.cause;for(const d of o.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.Ia.delete(d),i.da.removeTarget(d))})(n,e)}catch(s){me(al,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Zp(n,s)}else if(e instanceof yp?n.da.Xe(e):e instanceof QR?n.da.st(e):n.da.tt(e),!t.isEqual(je.min()))try{const s=await Aj(n.localStore);t.compareTo(s)>=0&&await(function(o,l){const d=o.da.Tt(l);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(m);y&&o.Ia.set(m,y.withResumeToken(f.resumeToken,l))}})),d.targetMismatches.forEach(((f,m)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(Pt.EMPTY_BYTE_STRING,y.snapshotVersion)),Oj(o,f);const b=new yi(y.target,f,m,y.sequenceNumber);j_(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){me(al,"Failed to raise snapshot:",s),await Zp(n,s)}}async function Zp(n,e,t){if(!Qa(e))throw e;n.Ea.add(1),await du(n),n.Va.set("Offline"),t||(t=()=>Aj(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(al,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Qh(n)}))}function Uj(n,e){return e().catch((t=>Zp(n,t,e)))}async function hu(n){const e=be(n),t=Ba(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ja;for(;BB(e);)try{const i=await wB(e.localStore,s);if(i===null){e.Ta.length===0&&t.L_();break}s=i.batchId,FB(e,i)}catch(i){await Zp(e,i)}zj(e)&&Bj(e)}function BB(n){return Xa(n)&&n.Ta.length<10}function FB(n,e){n.Ta.push(e);const t=Ba(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function zj(n){return Xa(n)&&!Ba(n).x_()&&n.Ta.length>0}function Bj(n){Ba(n).start()}async function qB(n){Ba(n).ra()}async function GB(n){const e=Ba(n);for(const t of n.Ta)e.ea(t.mutations)}async function HB(n,e,t){const s=n.Ta.shift(),i=x_.from(s,e,t);await Uj(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await hu(n)}async function $B(n,e){e&&Ba(n).Y_&&await(async function(s,i){if((function(l){return HR(l)&&l!==Z.ABORTED})(i.code)){const o=s.Ta.shift();Ba(s).B_(),await Uj(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,i))),await hu(s)}})(n,e),zj(n)&&Bj(n)}async function $k(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),me(al,"RemoteStore received new credentials");const s=Xa(t);t.Ea.add(3),await du(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qh(t)}async function Hb(n,e){const t=be(n);e?(t.Ea.delete(2),await Qh(t)):e||(t.Ea.add(2),await du(t),t.Va.set("Unknown"))}function fu(n){return n.ma||(n.ma=(function(t,s,i){const o=be(t);return o.sa(),new CB(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:OB.bind(null,n),Yo:LB.bind(null,n),t_:UB.bind(null,n),J_:zB.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),P_(n)?D_(n):n.Va.set("Unknown")):(await n.ma.stop(),Lj(n))}))),n.ma}function Ba(n){return n.fa||(n.fa=(function(t,s,i){const o=be(t);return o.sa(),new RB(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:qB.bind(null,n),t_:$B.bind(null,n),ta:GB.bind(null,n),na:HB.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await hu(n)):(await n.fa.stop(),n.Ta.length>0&&(me(al,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class V_{constructor(e,t,s,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=o,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,o){const l=Date.now()+s,d=new V_(e,t,l,i,o);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mu(n,e){if(Gt("AsyncQueue",`${e}: ${n}`),Qa(n))return new de(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class Xo{static emptySet(e){return new Xo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ge.comparator(t.key,s.key):(t,s)=>ge.comparator(t.key,s.key),this.keyedMap=Ud(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=s.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Xo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Kk{constructor(){this.ga=new _t(ge.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ol{constructor(e,t,s,i,o,l,d,f,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,i,o){const l=[];return t.forEach((d=>{l.push({type:0,doc:d})})),new ol(e,t,Xo.emptySet(t),l,s,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==s[i].type||!t[i].doc.isEqual(s[i].doc))return!1;return!0}}class KB{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class QB{constructor(){this.queries=Qk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const i=be(t),o=i.queries;i.queries=Qk(),o.forEach(((l,d)=>{for(const f of d.ba)f.onError(s)}))})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function Qk(){return new Ri((n=>CR(n)),qh)}async function M_(n,e){const t=be(n);let s=3;const i=e.query;let o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(s=2):(o=new KB,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const d=mu(l,`Initialization of query '${dc(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&L_(t)}async function O_(n,e){const t=be(n),s=e.query;let i=3;const o=t.queries.get(s);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function YB(n,e){const t=be(n);let s=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const d of l.ba)d.Fa(i)&&(s=!0);l.wa=i}}s&&L_(t)}function XB(n,e,t){const s=be(n),i=s.queries.get(e);if(i)for(const o of i.ba)o.onError(t);s.queries.delete(e)}function L_(n){n.Ca.forEach((e=>{e.next()}))}var $b,Yk;(Yk=$b||($b={})).Ma="default",Yk.Cache="cache";class U_{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$b.Cache}}class Fj{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class Xk{constructor(e){this.serializer=e}Ks(e){return Br(this.serializer,e)}qs(e){return e.metadata.exists?jg(this.serializer,e.document,!1):Et.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Ht(e)}}class z_{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=qj(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const s=He.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,s=new Xk(this.serializer);for(const i of e)if(i.metadata.queries){const o=s.Ks(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||ze()).add(o);t.set(l,d)}}return t}async ja(e){const t=await TB(e,new Xk(this.serializer),this.Qa,this.$a.id),s=this.za(this.documents);for(const i of this.Wa)await EB(e,i,s.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function qj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Gj{constructor(e){this.key=e}}class Hj{constructor(e){this.key=e}}class $j{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ze(),this.mutatedKeys=ze(),this.eu=jR(e),this.tu=new Xo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new Kk,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,b)=>{const v=i.get(y),T=Gh(this.query,b)?b:null,k=!!v&&this.mutatedKeys.has(v.key),I=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let j=!1;v&&T?v.data.isEqual(T.data)?k!==I&&(s.track({type:3,doc:T}),j=!0):this.su(v,T)||(s.track({type:2,doc:T}),j=!0,(f&&this.eu(T,f)>0||m&&this.eu(T,m)<0)&&(d=!0)):!v&&T?(s.track({type:0,doc:T}),j=!0):v&&!T&&(s.track({type:1,doc:v}),j=!0,(f||m)&&(d=!0)),j&&(T?(l=l.add(T),o=I?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),s.track({type:1,doc:y})}return{tu:l,iu:s,Ss:d,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,b)=>(function(T,k){const I=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:j})}};return I(T)-I(k)})(y.type,b.type)||this.eu(y.doc,b.doc))),this.ou(s),i=i??!1;const d=t&&!i?this._u():[],f=this.Ya.size===0&&this.current&&!i?1:0,m=f!==this.Xa;return this.Xa=f,l.length!==0||m?{snapshot:new ol(this.query,e.tu,o,l,e.mutatedKeys,f===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kk,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new Hj(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new Gj(s))})),t}cu(e){this.Za=e.ks,this.Ya=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Wa="SyncEngine";class WB{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class JB{constructor(e){this.key=e,this.hu=!1}}class ZB{constructor(e,t,s,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ri((d=>CR(d)),qh),this.Iu=new Map,this.Eu=new Set,this.Ru=new _t(ge.comparator),this.Au=new Map,this.Vu=new E_,this.du={},this.mu=new Map,this.fu=il.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eF(n,e,t=!0){const s=Ug(n);let i;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await Kj(s,e,t,!0),i}async function tF(n,e){const t=Ug(n);await Kj(t,e,!0,!1)}async function Kj(n,e,t,s){const i=await Hc(n.localStore,Vn(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let d;return s&&(d=await B_(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&Lg(n.remoteStore,i),d}async function B_(n,e,t,s,i){n.pu=(b,v,T)=>(async function(I,j,P,L){let z=j.view.ru(P);z.Ss&&(z=await Xp(I.localStore,j.query,!1).then((({documents:D})=>j.view.ru(D,z))));const $=L&&L.targetChanges.get(j.targetId),te=L&&L.targetMismatches.get(j.targetId)!=null,ce=j.view.applyChanges(z,I.isPrimaryClient,$,te);return Kb(I,j.targetId,ce.au),ce.snapshot})(n,b,v,T);const o=await Xp(n.localStore,e,!0),l=new $j(e,o.ks),d=l.ru(o.documents),f=Kh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",i),m=l.applyChanges(d,n.isPrimaryClient,f);Kb(n,t,m.au);const y=new WB(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function nF(n,e,t){const s=be(n),i=s.Tu.get(e),o=s.Iu.get(i.targetId);if(o.length>1)return s.Iu.set(i.targetId,o.filter((l=>!qh(l,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await $c(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),t&&Kc(s.remoteStore,i.targetId),Qc(s,i.targetId)})).catch(Ka)):(Qc(s,i.targetId),await $c(s.localStore,i.targetId,!0))}async function sF(n,e){const t=be(n),s=t.Tu.get(e),i=t.Iu.get(s.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Kc(t.remoteStore,s.targetId))}async function rF(n,e,t){const s=H_(n);try{const i=await(function(l,d){const f=be(l),m=at.now(),y=d.reduce(((T,k)=>T.add(k.key)),ze());let b,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let k=Zn(),I=ze();return f.xs.getEntries(T,y).next((j=>{k=j,k.forEach(((P,L)=>{L.isValidDocument()||(I=I.add(P))}))})).next((()=>f.localDocuments.getOverlayedDocuments(T,k))).next((j=>{b=j;const P=[];for(const L of d){const z=kz(L,b.get(L.key).overlayedDocument);z!=null&&P.push(new ji(L.key,z,bR(z.value.mapValue),It.exists(!0)))}return f.mutationQueue.addMutationBatch(T,m,P,d)})).next((j=>{v=j;const P=j.applyToLocalDocumentSet(b,I);return f.documentOverlayCache.saveOverlays(T,j.batchId,P)}))})).then((()=>({batchId:v.batchId,changes:PR(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(l,d,f){let m=l.du[l.currentUser.toKey()];m||(m=new _t(Oe)),m=m.insert(d,f),l.du[l.currentUser.toKey()]=m})(s,i.batchId,t),await Di(s,i.changes),await hu(s.remoteStore)}catch(i){const o=mu(i,"Failed to persist write");t.reject(o)}}async function Qj(n,e){const t=be(n);try{const s=await _B(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const l=t.Au.get(o);l&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Ie(l.hu,14607):i.removedDocuments.size>0&&(Ie(l.hu,42227),l.hu=!1))})),await Di(t,s,e)}catch(s){await Ka(s)}}function Wk(n,e,t){const s=be(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.Tu.forEach(((o,l)=>{const d=l.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(l,d){const f=be(l);f.onlineState=d;let m=!1;f.queries.forEach(((y,b)=>{for(const v of b.ba)v.va(d)&&(m=!0)})),m&&L_(f)})(s.eventManager,e),i.length&&s.Pu.J_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function iF(n,e,t){const s=be(n);s.sharedClientState.updateQueryState(e,"rejected",t);const i=s.Au.get(e),o=i&&i.key;if(o){let l=new _t(ge.comparator);l=l.insert(o,Et.newNoDocument(o,je.min()));const d=ze().add(o),f=new $h(je.min(),new Map,new _t(Oe),l,d);await Qj(s,f),s.Ru=s.Ru.remove(o),s.Au.delete(e),G_(s)}else await $c(s.localStore,e,!1).then((()=>Qc(s,e,t))).catch(Ka)}async function aF(n,e){const t=be(n),s=e.batch.batchId;try{const i=await vB(t.localStore,e);q_(t,s,null),F_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Di(t,i)}catch(i){await Ka(i)}}async function oF(n,e,t){const s=be(n);try{const i=await(function(l,d){const f=be(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return f.mutationQueue.lookupMutationBatch(m,d).next((b=>(Ie(b!==null,37113),y=b.keys(),f.mutationQueue.removeMutationBatch(m,b)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>f.localDocuments.getDocuments(m,y)))}))})(s.localStore,e);q_(s,e,t),F_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Di(s,i)}catch(i){await Ka(i)}}async function lF(n,e){const t=be(n);Xa(t.remoteStore)||me(Wa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=await(function(l){const d=be(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>d.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(s===ja)return void e.resolve();const i=t.mu.get(s)||[];i.push(e),t.mu.set(s,i)}catch(s){const i=mu(s,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function F_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function q_(n,e,t){const s=be(n);let i=s.du[s.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),s.du[s.currentUser.toKey()]=i}}function Qc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((s=>{n.Vu.containsKey(s)||Yj(n,s)}))}function Yj(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Kc(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),G_(n))}function Kb(n,e,t){for(const s of t)s instanceof Gj?(n.Vu.addReference(s.key,e),cF(n,s)):s instanceof Hj?(me(Wa,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,e),n.Vu.containsKey(s.key)||Yj(n,s.key)):Te(19791,{wu:s})}function cF(n,e){const t=e.key,s=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(s)||(me(Wa,"New document in limbo: "+t),n.Eu.add(s),G_(n))}function G_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ge(He.fromString(e)),s=n.fu.next();n.Au.set(s,new JB(t)),n.Ru=n.Ru.insert(t,s),Lg(n.remoteStore,new yi(Vn(lu(t.path)),s,"TargetPurposeLimboResolution",Wn.ce))}}async function Di(n,e,t){const s=be(n),i=[],o=[],l=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,f)=>{l.push(s.pu(f,e,t).then((m=>{if((m||t)&&s.isPrimaryClient){const y=m?!m.fromCache:t?.targetChanges.get(f.targetId)?.current;s.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(m){i.push(m);const y=N_.Es(f.targetId,m);o.push(y)}})))})),await Promise.all(l),s.Pu.J_(i),await(async function(f,m){const y=be(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Y.forEach(m,(v=>Y.forEach(v.Ts,(T=>y.persistence.referenceDelegate.addReference(b,v.targetId,T))).next((()=>Y.forEach(v.Is,(T=>y.persistence.referenceDelegate.removeReference(b,v.targetId,T)))))))))}catch(b){if(!Qa(b))throw b;me(I_,"Failed to update sequence numbers: "+b)}for(const b of m){const v=b.targetId;if(!b.fromCache){const T=y.vs.get(v),k=T.snapshotVersion,I=T.withLastLimboFreeSnapshotVersion(k);y.vs=y.vs.insert(v,I)}}})(s.localStore,o))}async function uF(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){me(Wa,"User change. New user:",e.toKey());const s=await Sj(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((d=>{d.forEach((f=>{f.reject(new de(Z.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Di(t,s.Ns)}}function dF(n,e){const t=be(n),s=t.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let i=ze();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const d=t.Tu.get(l);i=i.unionWith(d.view.nu)}return i}}async function hF(n,e){const t=be(n),s=await Xp(t.localStore,e.query,!0),i=e.view.cu(s);return t.isPrimaryClient&&Kb(t,e.targetId,i.au),i}async function fF(n,e){const t=be(n);return Ij(t.localStore,e).then((s=>Di(t,s)))}async function mF(n,e,t,s){const i=be(n),o=await(function(d,f){const m=be(d),y=be(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(b=>y.Xn(b,f).next((v=>v?m.localDocuments.getDocuments(b,v):Y.resolve(null)))))})(i.localStore,e);o!==null?(t==="pending"?await hu(i.remoteStore):t==="acknowledged"||t==="rejected"?(q_(i,e,s||null),F_(i,e),(function(d,f){be(be(d).mutationQueue).nr(f)})(i.localStore,e)):Te(6720,"Unknown batchState",{bu:t}),await Di(i,o)):me(Wa,"Cannot apply mutation batch with id: "+e)}async function pF(n,e){const t=be(n);if(Ug(t),H_(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),i=await Jk(t,s.toArray());t.gu=!0,await Hb(t.remoteStore,!0);for(const o of i)Lg(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const s=[];let i=Promise.resolve();t.Iu.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?s.push(l):i=i.then((()=>(Qc(t,l),$c(t.localStore,l,!0)))),Kc(t.remoteStore,l)})),await i,await Jk(t,s),(function(l){const d=be(l);d.Au.forEach(((f,m)=>{Kc(d.remoteStore,m)})),d.Vu.zr(),d.Au=new Map,d.Ru=new _t(ge.comparator)})(t),t.gu=!1,await Hb(t.remoteStore,!1)}}async function Jk(n,e,t){const s=be(n),i=[],o=[];for(const l of e){let d;const f=s.Iu.get(l);if(f&&f.length!==0){d=await Hc(s.localStore,Vn(f[0]));for(const m of f){const y=s.Tu.get(m),b=await hF(s,y);b.snapshot&&o.push(b.snapshot)}}else{const m=await Nj(s.localStore,l);d=await Hc(s.localStore,m),await B_(s,Xj(m),l,!1,d.resumeToken)}i.push(d)}return s.Pu.J_(o),i}function Xj(n){return kR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gF(n){return(function(t){return be(be(t).persistence).hs()})(be(n).localStore)}async function yF(n,e,t,s){const i=be(n);if(i.gu)return void me(Wa,"Ignoring unexpected query state notification.");const o=i.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await Ij(i.localStore,RR(o[0])),d=$h.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Pt.EMPTY_BYTE_STRING);await Di(i,l,d);break}case"rejected":await $c(i.localStore,e,!0),Qc(i,e,s);break;default:Te(64155,t)}}async function xF(n,e,t){const s=Ug(n);if(s.gu){for(const i of e){if(s.Iu.has(i)&&s.sharedClientState.isActiveQueryTarget(i)){me(Wa,"Adding an already active target "+i);continue}const o=await Nj(s.localStore,i),l=await Hc(s.localStore,o);await B_(s,Xj(o),l.targetId,!1,l.resumeToken),Lg(s.remoteStore,l)}for(const i of t)s.Iu.has(i)&&await $c(s.localStore,i,!1).then((()=>{Kc(s.remoteStore,i),Qc(s,i)})).catch(Ka)}}function Ug(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iF.bind(null,e),e.Pu.J_=YB.bind(null,e.eventManager),e.Pu.yu=XB.bind(null,e.eventManager),e}function H_(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oF.bind(null,e),e}function bF(n,e,t){const s=be(n);(async function(o,l,d){try{const f=await l.getMetadata();if(await(function(T,k){const I=be(T),j=Ht(k.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",(P=>I.Pi.getBundleMetadata(P,k.id))).then((P=>!!P&&P.createTime.compareTo(j)>=0))})(o.localStore,f))return await l.close(),d._completeWith((function(T){return{taskState:"Success",documentsLoaded:T.totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}})(f)),Promise.resolve(new Set);d._updateProgress(qj(f));const m=new z_(f,l.serializer);let y=await l.Su();for(;y;){const v=await m.Ga(y);v&&d._updateProgress(v),y=await l.Su()}const b=await m.ja(o.localStore);return await Di(o,b.Ja,void 0),await(function(T,k){const I=be(T);return I.persistence.runTransaction("Save bundle","readwrite",(j=>I.Pi.saveBundleMetadata(j,k)))})(o.localStore,f),d._completeWith(b.progress),Promise.resolve(b.Ha)}catch(f){return ss(Wa,`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}})(s,e,t).then((i=>{s.sharedClientState.notifyBundleLoaded(i)}))}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ul(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ej(this.persistence,new Tj,e.initialUser,this.serializer)}Cu(e){return new S_(Og.Vi,this.serializer)}Du(e){return new Pj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class $_ extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ie(this.persistence.referenceDelegate instanceof Yp,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yj(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new S_((s=>Yp.Vi(s,t)),this.serializer)}}class K_ extends Yc{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await H_(this.xu.syncEngine),await hu(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Ej(this.persistence,new Tj,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new yj(s,e.asyncQueue,t)}Mu(e,t){const s=new A7(t,this.persistence);return new S7(e.asyncQueue,s)}Cu(e){const t=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new A_(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Vj(),bp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Pj}}class Wj extends K_{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Rx&&(this.sharedClientState.syncEngine={So:mF.bind(null,t),Do:yF.bind(null,t),Co:xF.bind(null,t),hs:gF.bind(null,t),bo:fF.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async s=>{await pF(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=Vj();if(!Rx.v(t))throw new de(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rx(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Fa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Wk(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=uF.bind(null,this.syncEngine),await Hb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QB})()}createDatastore(e){const t=ul(e.databaseInfo.databaseId),s=IB(e.databaseInfo);return PB(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,i,o,l,d){return new MB(s,i,o,l,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Wk(this.syncEngine,t,0)),(function(){return Gk.v()?new Gk:new SB})())}createSyncEngine(e,t){return(function(i,o,l,d,f,m,y){const b=new ZB(i,o,l,d,f,m);return y&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=be(t);me(al,"RemoteStore shutting down."),s.Ea.add(5),await du(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Fa.provider={build:()=>new Fa};function Zk(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class zg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class vF{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new vn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((s=>{s&&s.Ua()?this.metadata.resolve(s.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(s?.qa)}`))}),(s=>this.metadata.reject(s)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),s=Number(t);isNaN(s)&&this.qu(`length string (${t}) is not valid number`);const i=await this.Uu(s);return new Fj(JSON.parse(i),e.length+s)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class _F{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let s=this.Su();if(!s||!s.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(s?.qa)}`);this.metadata=s;do s=this.Su(),s!==null&&this.elements.push(s);while(s!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),t=this.Uu(e);return new Fj(JSON.parse(t),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new de(Z.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if(this.bundleData[t]==="{"){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}let wF=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,o){const l=be(i),d={documents:o.map((b=>Eh(l.serializer,b)))},f=await l.jo("BatchGetDocuments",l.serializer.databaseId,He.emptyPath(),d,o.length),m=new Map;f.forEach((b=>{const v=Oz(l.serializer,b);m.set(v.key.toString(),v)}));const y=[];return o.forEach((b=>{const v=m.get(b.toString());Ie(!!v,55234,{key:b}),y.push(v)})),y})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new uu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const i=ge.fromPath(s);this.mutations.push(new g_(i,this.precondition(i)))})),await(async function(s,i){const o=be(s),l={writes:i.map((d=>Sh(o.serializer,d)))};await o.Wo("Commit",o.serializer.databaseId,He.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});t=je.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new de(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(je.min())?It.exists(!1):It.updateTime(t):It.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(je.min()))throw new de(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return It.updateTime(t)}return It.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class TF{constructor(e,t,s,i,o){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=i,this.deferred=o,this.zu=s.maxAttempts,this.M_=new R_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new wF(this.datastore),t=this.Ju(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((i=>{this.Zu(i)}))))})).catch((s=>{this.Zu(s)}))}))}Ju(e){try{const t=this.updateFunction(e);return!zh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!HR(t)}return!1}}const qa="FirestoreClient";class EF{constructor(e,t,s,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=i,this.user=xn.UNAUTHENTICATED,this.clientId=_g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async l=>{me(qa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(s,(l=>(me(qa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=mu(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Dx(n,e){n.asyncQueue.verifyOperationInProgress(),me(qa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async i=>{s.isEqual(i)||(await Sj(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function e2(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Q_(n);me(qa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>$k(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,i)=>$k(e.remoteStore,i))),n._onlineComponents=e}async function Q_(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(qa,"Using user provided OfflineComponentProvider");try{await Dx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ss("Error using user provided cache. Falling back to memory cache: "+t),await Dx(n,new Yc)}}else me(qa,"Using default OfflineComponentProvider"),await Dx(n,new $_(void 0));return n._offlineComponents}async function Bg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(qa,"Using user provided OnlineComponentProvider"),await e2(n,n._uninitializedComponentsProvider._online)):(me(qa,"Using default OnlineComponentProvider"),await e2(n,new Fa))),n._onlineComponents}function Jj(n){return Q_(n).then((e=>e.persistence))}function pu(n){return Q_(n).then((e=>e.localStore))}function Zj(n){return Bg(n).then((e=>e.remoteStore))}function Y_(n){return Bg(n).then((e=>e.syncEngine))}function eD(n){return Bg(n).then((e=>e.datastore))}async function Xc(n){const e=await Bg(n),t=e.eventManager;return t.onListen=eF.bind(null,e.syncEngine),t.onUnlisten=nF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sF.bind(null,e.syncEngine),t}function SF(n){return n.asyncQueue.enqueue((async()=>{const e=await Jj(n),t=await Zj(n);return e.setNetworkEnabled(!0),(function(i){const o=be(i);return o.Ea.delete(0),Qh(o)})(t)}))}function AF(n){return n.asyncQueue.enqueue((async()=>{const e=await Jj(n),t=await Zj(n);return e.setNetworkEnabled(!1),(async function(i){const o=be(i);o.Ea.add(0),await du(o),o.Va.set("Offline")})(t)}))}function kF(n,e,t,s){const i=new zg(s),o=new U_(e,i,t);return n.asyncQueue.enqueueAndForget((async()=>M_(await Xc(n),o))),()=>{i.Nu(),n.asyncQueue.enqueueAndForget((async()=>O_(await Xc(n),o)))}}function NF(n,e){const t=new vn;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,o,l){try{const d=await(function(m,y){const b=be(m);return b.persistence.runTransaction("read document","readonly",(v=>b.localDocuments.getDocument(v,y)))})(i,o);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new de(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=mu(d,`Failed to get document '${o} from cache`);l.reject(f)}})(await pu(n),e,t))),t.promise}function tD(n,e,t={}){const s=new vn;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,d,f,m){const y=new zg({next:v=>{y.Nu(),l.enqueueAndForget((()=>O_(o,b)));const T=v.docs.has(d);!T&&v.fromCache?m.reject(new de(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&f&&f.source==="server"?m.reject(new de(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(v)},error:v=>m.reject(v)}),b=new U_(lu(d.path),y,{includeMetadataChanges:!0,Ka:!0});return M_(o,b)})(await Xc(n),n.asyncQueue,e,t,s))),s.promise}function IF(n,e){const t=new vn;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,o,l){try{const d=await Xp(i,o,!0),f=new $j(o,d.ks),m=f.ru(d.documents),y=f.applyChanges(m,!1);l.resolve(y.snapshot)}catch(d){const f=mu(d,`Failed to execute query '${o} against cache`);l.reject(f)}})(await pu(n),e,t))),t.promise}function nD(n,e,t={}){const s=new vn;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,d,f,m){const y=new zg({next:v=>{y.Nu(),l.enqueueAndForget((()=>O_(o,b))),v.fromCache&&f.source==="server"?m.reject(new de(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(v)},error:v=>m.reject(v)}),b=new U_(d,y,{includeMetadataChanges:!0,Ka:!0});return M_(o,b)})(await Xc(n),n.asyncQueue,e,t,s))),s.promise}function CF(n,e,t){const s=new vn;return n.asyncQueue.enqueueAndForget((async()=>{try{const i=await eD(n);s.resolve((async function(l,d,f){const m=be(l),{request:y,gt:b,parent:v}=nj(m.serializer,NR(d),f);m.connection.Ko||delete y.parent;const T=(await m.jo("RunAggregationQuery",m.serializer.databaseId,v,y,1)).filter((I=>!!I.result));Ie(T.length===1,64727);const k=T[0].result?.aggregateFields;return Object.keys(k).reduce(((I,j)=>(I[b[j]]=k[j],I)),{})})(i,e,t))}catch(i){s.reject(i)}})),s.promise}function RF(n,e){const t=new vn;return n.asyncQueue.enqueueAndForget((async()=>rF(await Y_(n),e,t))),t.promise}function jF(n,e){const t=new zg(e);return n.asyncQueue.enqueueAndForget((async()=>(function(i,o){be(i).Ca.add(o),o.next()})(await Xc(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(i,o){be(i).Ca.delete(o)})(await Xc(n),t)))}}function DF(n,e,t){const s=new vn;return n.asyncQueue.enqueueAndForget((async()=>{const i=await eD(n);new TF(n.asyncQueue,i,t,e,s).ju()})),s.promise}function PF(n,e,t,s){const i=(function(l,d){let f;return f=typeof l=="string"?KR().encode(l):l,(function(y,b){return new vF(y,b)})((function(y,b){if(y instanceof Uint8Array)return Zk(y,b);if(y instanceof ArrayBuffer)return Zk(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),d)})(t,ul(e));n.asyncQueue.enqueueAndForget((async()=>{bF(await Y_(n),i,s)}))}function VF(n,e){return n.asyncQueue.enqueue((async()=>(function(s,i){const o=be(s);return o.persistence.runTransaction("Get named query","readonly",(l=>o.Pi.getNamedQuery(l,i)))})(await pu(n),e)))}function sD(n,e){return(function(s,i){return new _F(s,i)})(n,e)}function MF(n,e){return n.asyncQueue.enqueue((async()=>(async function(s,i){const o=be(s),l=o.indexManager,d=[];return o.persistence.runTransaction("Configure indexes","readwrite",(f=>l.getFieldIndexes(f).next((m=>(function(b,v,T,k,I){b=[...b],v=[...v],b.sort(T),v.sort(T);const j=b.length,P=v.length;let L=0,z=0;for(;L<P&&z<j;){const $=T(b[z],v[L]);$<0?I(b[z++]):$>0?k(v[L++]):(L++,z++)}for(;L<P;)k(v[L++]);for(;z<j;)I(b[z++])})(m,i,_7,(y=>{d.push(l.addFieldIndex(f,y))}),(y=>{d.push(l.deleteFieldIndex(f,y))})))).next((()=>Y.waitFor(d)))))})(await pu(n),e)))}function OF(n,e){return n.asyncQueue.enqueue((async()=>(function(s,i){be(s).Cs.As=i})(await pu(n),e)))}function LF(n){return n.asyncQueue.enqueue((async()=>(function(t){const s=be(t),i=s.indexManager;return s.persistence.runTransaction("Delete All Indexes","readwrite",(o=>i.deleteAllFieldIndexes(o)))})(await pu(n))))}function rD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const UF="ComponentProvider",t2=new Map;function zF(n,e,t,s,i){return new tz(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,rD(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,s)}const iD="firestore.googleapis.com",n2=!0;class s2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iD,this.ssl=n2}else this.host=e.host,this.ssl=e.ssl??n2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gj)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rD(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yh{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new FC;switch(s.type){case"firstParty":return new m7(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=t2.get(t);s&&(me(UF,"Removing Datastore"),t2.delete(t),s.terminate())})(this),Promise.resolve()}}function aD(n,e,t,s={}){n=$e(n,Yh);const i=$a(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(yg(`https://${d}`),Fv("Firestore",!0)),o.host!==iD&&o.host!==d&&ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:d,ssl:i,emulatorOptions:s};if(!or(f,l)&&(n._setSettings(f),s.mockUserToken)){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=xn.MOCK_USER;else{m=QI(s.mockUserToken,n._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new xn(b)}n._authCredentials=new d7(new BC(m,y))}}class dn{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new dn(this.firestore,e,this._query)}}class dt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(cl(t,dt._jsonSchema))return new dt(e,s||null,new ge(He.fromString(t.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:sn("string",dt._jsonSchemaVersion),referencePath:sn("string")};class rr extends dn{constructor(e,t,s){super(e,t,lu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ge(e))}withConverter(e){return new rr(this.firestore,e,this._path)}}function ps(n,e,...t){if(n=yt(n),s_("collection","path",e),n instanceof Yh){const s=He.fromString(e,...t);return HA(s),new rr(n,null,s)}{if(!(n instanceof dt||n instanceof rr))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(He.fromString(e,...t));return HA(s),new rr(n.firestore,null,s)}}function BF(n,e){if(n=$e(n,Yh),s_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dn(n,null,(function(s){return new Ci(He.emptyPath(),s)})(e))}function Zs(n,e,...t){if(n=yt(n),arguments.length===1&&(e=_g.newId()),s_("doc","path",e),n instanceof Yh){const s=He.fromString(e,...t);return GA(s),new dt(n,null,new ge(s))}{if(!(n instanceof dt||n instanceof rr))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(He.fromString(e,...t));return GA(s),new dt(n.firestore,n instanceof rr?n.converter:null,new ge(s))}}function FF(n,e){return n=yt(n),e=yt(e),(n instanceof dt||n instanceof rr)&&(e instanceof dt||e instanceof rr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function X_(n,e){return n=yt(n),e=yt(e),n instanceof dn&&e instanceof dn&&n.firestore===e.firestore&&qh(n._query,e._query)&&n.converter===e.converter}const r2="AsyncQueue";class i2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R_(this,"async_queue_retry"),this._c=()=>{const s=bp();s&&me(r2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=bp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=bp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Qa(e))throw e;me(r2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Gt("INTERNAL UNHANDLED ERROR: ",a2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=V_.createAndSchedule(this,e,t,s,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Te(47125,{Pc:a2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function a2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class oD{constructor(){this._progressObserver={},this._taskCompletionResolver=new vn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const qF=-1;class xt extends Yh{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new i2,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i2(e),this._firestoreClient=void 0,await e}}}function GF(n,e,t){t||(t=vh);const s=iu(n,"firestore");if(s.isInitialized(t)){const i=s.getImmediate({identifier:t}),o=s.getOptions(t);if(or(o,e))return i;throw new de(Z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new de(Z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gj)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&$a(e.host)&&yg(e.host),s.initialize({options:e,instanceIdentifier:t})}function lD(n,e){const t=typeof n=="object"?n:Hv(),s=typeof n=="string"?n:e||vh,i=iu(t,"firestore").getImmediate({identifier:s});if(!i._initialized){const o=HI("firestore");o&&aD(i,...o)}return i}function Rt(n){if(n._terminated)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cD(n),n._firestoreClient}function cD(n){const e=n._freezeSettings(),t=zF(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new EF(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}function HF(n,e){ss("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return uD(n,Fa.provider,{build:s=>new K_(s,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function $F(n){ss("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();uD(n,Fa.provider,{build:t=>new Wj(t,e.cacheSizeBytes)})}function uD(n,e,t){if((n=$e(n,xt))._firestoreClient||n._terminated)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(Z.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},cD(n)}function KF(n){if(n._initialized&&!n._terminated)throw new de(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(s){if(!zr.v())return Promise.resolve();const i=s+wj;await zr.delete(i)})(k_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function QF(n){return(function(t){const s=new vn;return t.asyncQueue.enqueueAndForget((async()=>lF(await Y_(t),s))),s.promise})(Rt(n=$e(n,xt)))}function YF(n){return SF(Rt(n=$e(n,xt)))}function XF(n){return AF(Rt(n=$e(n,xt)))}function WF(n){return $9(n.app,"firestore",n._databaseId.database),n._delete()}function Qb(n,e){const t=Rt(n=$e(n,xt)),s=new oD;return PF(t,n._databaseId,e,s),s}function dD(n,e){return VF(Rt(n=$e(n,xt)),e).then((t=>t?new dn(n,null,t.query):null))}class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(Pt.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cl(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:sn("string",Xn._jsonSchemaVersion),bytes:sn("string")};class dl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function JF(){return new dl(Tb)}class Ja{constructor(e){this._methodName=e}}class ir{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ir._jsonSchemaVersion}}static fromJSON(e){if(cl(e,ir._jsonSchema))return new ir(e.latitude,e.longitude)}}ir._jsonSchemaVersion="firestore/geoPoint/1.0",ir._jsonSchema={type:sn("string",ir._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};class gs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,i){if(s.length!==i.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cl(e,gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gs(e.vectorValues);throw new de(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gs._jsonSchemaVersion="firestore/vectorValue/1.0",gs._jsonSchema={type:sn("string",gs._jsonSchemaVersion),vectorValues:sn("object")};const ZF=/^__.*__$/;class eq{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}class hD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ji(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:n})}}class Fg{constructor(e,t,s,i,o,l){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Fg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return eg(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(fD(this.dataSource)&&ZF.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class tq{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ul(e)}createContext(e,t,s,i=!1){return new Fg({dataSource:e,methodName:t,targetDoc:s,path:St.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hl(n){const e=n._freezeSettings(),t=ul(n._databaseId);return new tq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qg(n,e,t,s,i,o={}){const l=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);sw("Data must be an object, but it was:",l,s);const d=gD(s,l);let f,m;if(o.merge)f=new Jn(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const b of o.mergeFields){const v=Ni(e,b,t);if(!l.contains(v))throw new de(Z.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);xD(y,v)||y.push(v)}f=new Jn(y),m=l.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,m=l.fieldTransforms;return new eq(new bn(d),f,m)}class Xh extends Ja{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function mD(n,e,t){return new Fg({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class W_ extends Ja{_toFieldTransform(e){return new Hh(e.path,new Fc)}isEqual(e){return e instanceof W_}}class J_ extends Ja{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=mD(this,e,!0),s=this.Ac.map((o=>fl(o,t))),i=new tl(s);return new Hh(e.path,i)}isEqual(e){return e instanceof J_&&or(this.Ac,e.Ac)}}class Z_ extends Ja{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=mD(this,e,!0),s=this.Ac.map((o=>fl(o,t))),i=new nl(s);return new Hh(e.path,i)}isEqual(e){return e instanceof Z_&&or(this.Ac,e.Ac)}}class ew extends Ja{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new qc(e.serializer,OR(e.serializer,this.Vc));return new Hh(e.path,t)}isEqual(e){return e instanceof ew&&this.Vc===e.Vc}}function tw(n,e,t,s){const i=n.createContext(1,e,t);sw("Data must be an object, but it was:",i,s);const o=[],l=bn.empty();Ya(s,((f,m)=>{const y=rw(e,f,t);m=yt(m);const b=i.childContextForFieldPath(y);if(m instanceof Xh)o.push(y);else{const v=fl(m,b);v!=null&&(o.push(y),l.set(y,v))}}));const d=new Jn(o);return new hD(l,d,i.fieldTransforms)}function nw(n,e,t,s,i,o){const l=n.createContext(1,e,t),d=[Ni(e,s,t)],f=[i];if(o.length%2!=0)throw new de(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)d.push(Ni(e,o[v])),f.push(o[v+1]);const m=[],y=bn.empty();for(let v=d.length-1;v>=0;--v)if(!xD(m,d[v])){const T=d[v];let k=f[v];k=yt(k);const I=l.childContextForFieldPath(T);if(k instanceof Xh)m.push(T);else{const j=fl(k,I);j!=null&&(m.push(T),y.set(T,j))}}const b=new Jn(m);return new hD(y,b,l.fieldTransforms)}function pD(n,e,t,s=!1){return fl(t,n.createContext(s?4:3,e))}function fl(n,e){if(yD(n=yt(n)))return sw("Unsupported field value:",e,n),gD(n,e);if(n instanceof Ja)return(function(s,i){if(!fD(i.dataSource))throw i.createError(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,i){const o=[];let l=0;for(const d of s){let f=fl(d,i.childContextForArray(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(n,e)}return(function(s,i){if((s=yt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return OR(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=at.fromDate(s);return{timestampValue:Gc(i.serializer,o)}}if(s instanceof at){const o=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Gc(i.serializer,o)}}if(s instanceof ir)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xn)return{bytesValue:XR(i.serializer,s._byteString)};if(s instanceof dt){const o=i.databaseId,l=s.firestore._databaseId;if(!l.isEqual(o))throw i.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:__(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof gs)return(function(l,d){const f=l instanceof gs?l.toArray():l;return{mapValue:{fields:{[u_]:{stringValue:d_},[Uc]:{arrayValue:{values:f.map((y=>{if(typeof y!="number")throw d.createError("VectorValues must only contain numeric values.");return p_(d.serializer,y)}))}}}}}})(s,i);if(oj(s))return s._toProto(i.serializer);throw i.createError(`Unsupported field value: ${wg(s)}`)})(n,e)}function gD(n,e){const t={};return uR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ya(n,((s,i)=>{const o=fl(i,e.childContextForField(s));o!=null&&(t[s]=o)})),{mapValue:{fields:t}}}function yD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof ir||n instanceof Xn||n instanceof dt||n instanceof Ja||n instanceof gs||oj(n))}function sw(n,e,t){if(!yD(t)||!HC(t)){const s=wg(t);throw s==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+s)}}function Ni(n,e,t){if((e=yt(e))instanceof dl)return e._internalPath;if(typeof e=="string")return rw(n,e);throw eg("Field path arguments must be of type string or ",n,!1,void 0,t)}const nq=new RegExp("[~\\*/\\[\\]]");function rw(n,e,t){if(e.search(nq)>=0)throw eg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dl(...e.split("."))._internalPath}catch{throw eg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eg(n,e,t,s,i){const o=s&&!s.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${s}`),l&&(f+=` in document ${i}`),f+=")"),new de(Z.INVALID_ARGUMENT,d+n+f)}function xD(n,e){return n.some((t=>t.isEqual(e)))}class iw{convertValue(e,t="none"){switch(La(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ya(e,((i,o)=>{s[i]=this.convertValue(o,t)})),s}convertVectorValue(e){const t=e.fields?.[Uc].arrayValue?.values?.map((s=>Nt(s.doubleValue)));return new gs(t)}convertGeoPoint(e){return new ir(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ng(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(bh(e));default:return null}}convertTimestamp(e){const t=Ai(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=He.fromString(e);Ie(aj(s),9688,{name:e});const i=new Oa(s.get(1),s.get(3)),o=new ge(s.popFirst(5));return i.isEqual(t)||Gt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}class Za extends iw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function sq(){return new Xh("deleteField")}function Yb(){return new W_("serverTimestamp")}function mc(...n){return new J_("arrayUnion",n)}function Xb(...n){return new Z_("arrayRemove",n)}function rq(n){return new ew("increment",n)}function iq(n){return new gs(n)}function aq(n){const e=Rt($e(n.firestore,xt)),t=e._onlineComponents?.datastore.serializer;return t===void 0?null:Dg(t,Vn(n._query)).ft}function oq(n,e){const t=cR(e,((o,l)=>new GR(l,o.aggregateType,o._internalFieldPath))),s=Rt($e(n.firestore,xt)),i=s._onlineComponents?.datastore.serializer;return i===void 0?null:nj(i,NR(n._query),t,!0).request}const o2="@firebase/firestore",l2="4.11.0";function Ac(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of s)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Wc{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class bD{constructor(e,t,s){this._userDataWriter=t,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new bn({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class Ah{constructor(e,t,s,i,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Ni("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lq extends Ah{data(){return super.data()}}function vD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aw{}class gu extends aw{}function xi(n,e,...t){let s=[];e instanceof aw&&s.push(e),s=s.concat(t),(function(o){const l=o.filter((f=>f instanceof ml)).length,d=o.filter((f=>f instanceof yu)).length;if(l>1||l>0&&d>0)throw new de(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)n=i._apply(n);return n}class yu extends gu{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new yu(e,t,s)}_apply(e){const t=this._parse(e);return wD(e._query,t),new dn(e.firestore,e.converter,Pb(e._query,t))}_parse(e){const t=hl(e.firestore);return(function(o,l,d,f,m,y,b){let v;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new de(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){u2(b,y);const k=[];for(const I of b)k.push(c2(f,o,I));v={arrayValue:{values:k}}}else v=c2(f,o,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||u2(b,y),v=pD(d,l,b,y==="in"||y==="not-in");return Je.create(m,y,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Fd(n,e,t){const s=e,i=Ni("where",n);return yu._create(i,s,t)}class ml extends aw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ml(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ut.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let l=i;const d=o.getFlattenedFilters();for(const f of d)wD(l,f),l=Pb(l,f)})(e._query,t),new dn(e.firestore,e.converter,Pb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function cq(...n){return n.forEach((e=>TD("or",e))),ml._create("or",n)}function uq(...n){return n.forEach((e=>TD("and",e))),ml._create("and",n)}class Gg extends gu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gg(e,t)}_apply(e){const t=(function(i,o,l){if(i.startAt!==null)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Th(o,l)})(e._query,this._field,this._direction);return new dn(e.firestore,e.converter,mz(e._query,t))}}function Wh(n,e="asc"){const t=e,s=Ni("orderBy",n);return Gg._create(s,t)}class Jh extends gu{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Jh(e,t,s)}_apply(e){return new dn(e.firestore,e.converter,Hp(e._query,this._limit,this._limitType))}}function xu(n){return $C("limit",n),Jh._create("limit",n,"F")}function dq(n){return $C("limitToLast",n),Jh._create("limitToLast",n,"L")}class Zh extends gu{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Zh(e,t,s)}_apply(e){const t=_D(e,this.type,this._docOrFields,this._inclusive);return new dn(e.firestore,e.converter,pz(e._query,t))}}function hq(...n){return Zh._create("startAt",n,!0)}function fq(...n){return Zh._create("startAfter",n,!1)}class ef extends gu{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new ef(e,t,s)}_apply(e){const t=_D(e,this.type,this._docOrFields,this._inclusive);return new dn(e.firestore,e.converter,gz(e._query,t))}}function mq(...n){return ef._create("endBefore",n,!1)}function pq(...n){return ef._create("endAt",n,!0)}function _D(n,e,t,s){if(t[0]=yt(t[0]),t[0]instanceof Ah)return(function(o,l,d,f,m){if(!f)throw new de(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const y=[];for(const b of Ec(o))if(b.field.isKeyField())y.push(Zo(l,f.key));else{const v=f.data.field(b.field);if(kg(v))throw new de(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const T=b.field.canonicalString();throw new de(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}y.push(v)}return new za(y,m)})(n._query,n.firestore._databaseId,e,t[0]._document,s);{const i=hl(n.firestore);return(function(l,d,f,m,y,b){const v=l.explicitOrderBy;if(y.length>v.length)throw new de(Z.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let k=0;k<y.length;k++){const I=y[k];if(v[k].field.isKeyField()){if(typeof I!="string")throw new de(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof I}`);if(!f_(l)&&I.indexOf("/")!==-1)throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${I}' contains a slash.`);const j=l.path.child(He.fromString(I));if(!ge.isDocumentKey(j))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const P=new ge(j);T.push(Zo(d,P))}else{const j=pD(f,m,I);T.push(j)}}return new za(T,b)})(n._query,n.firestore._databaseId,i,e,t,s)}}function c2(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new de(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f_(e)&&t.indexOf("/")!==-1)throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(He.fromString(t));if(!ge.isDocumentKey(s))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Zo(n,new ge(s))}if(t instanceof dt)return Zo(n,t._key);throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wg(t)}.`)}function u2(n,e){if(!Array.isArray(n)||n.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wD(n,e){const t=(function(i,o){for(const l of i)for(const d of l.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function TD(n,e){if(!(e instanceof yu||e instanceof ml))throw new de(Z.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function Hg(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class ow extends iw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function gq(n){return new Wc("sum",Ni("sum",n))}function yq(n){return new Wc("avg",Ni("average",n))}function ED(){return new Wc("count")}function xq(n,e){return n instanceof Wc&&e instanceof Wc&&n.aggregateType===e.aggregateType&&n._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function bq(n,e){return X_(n.query,e.query)&&or(n.data(),e.data())}function vq(n){return SD(n,{count:ED()})}function SD(n,e){const t=$e(n.firestore,xt),s=Rt(t),i=cR(e,((o,l)=>new GR(l,o.aggregateType,o._internalFieldPath)));return CF(s,n._query,i).then((o=>(function(d,f,m){const y=new Za(d);return new bD(f,y,m)})(t,n,o)))}class _q{constructor(e){this.kind="memory",this._onlineComponentProvider=Fa.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new $_(void 0)}}toJSON(){return{kind:this.kind}}}class wq{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=AD(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Tq{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Yc.provider}toJSON(){return{kind:this.kind}}}class Eq{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new $_(e)}}toJSON(){return{kind:this.kind}}}function Sq(){return new Tq}function Aq(n){return new Eq(n?.cacheSizeBytes)}function kq(n){return new _q(n)}function Nq(n){return new wq(n)}class Iq{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fa.provider,this._offlineComponentProvider={build:t=>new K_(t,e?.cacheSizeBytes,this.forceOwnership)}}}class Cq{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fa.provider,this._offlineComponentProvider={build:t=>new Wj(t,e?.cacheSizeBytes)}}}function AD(n){return new Iq(n?.forceOwnership)}function Rq(){return new Cq}const kD="NOT SUPPORTED";class bi{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class es extends Ah{constructor(e,t,s,i,o,l){super(e,t,s,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ni("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=es._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}function jq(n,e,t){if(cl(e,es._jsonSchema)){if(e.bundle===kD)throw new de(Z.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const s=ul(n._databaseId),i=sD(e.bundle,s),o=i.t(),l=new z_(i.getMetadata(),s);for(const y of o)l.o(y);const d=l.documents;if(d.length!==1)throw new de(Z.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${d.length} documents.`);const f=jg(s,d[0].document),m=new ge(He.fromString(e.bundleName));return new es(n,new ow(n),m,f,new bi(!1,!1),t||null)}}es._jsonSchemaVersion="firestore/documentSnapshot/1.0",es._jsonSchema={type:sn("string",es._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class rh extends es{data(e={}){return super.data(e)}}class ts{constructor(e,t,s,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bi(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new rh(this._firestore,this._userDataWriter,s.key,s,new bi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((d=>{const f=new rh(i._firestore,i._userDataWriter,d.doc.key,d.doc,new bi(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const f=new rh(i._firestore,i._userDataWriter,d.doc.key,d.doc,new bi(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return d.type!==0&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),y=l.indexOf(d.doc.key)),{type:Pq(d.type),doc:f,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ts._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_g.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Dq(n,e,t){if(cl(e,ts._jsonSchema)){if(e.bundle===kD)throw new de(Z.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const s=ul(n._databaseId),i=sD(e.bundle,s),o=i.t(),l=new z_(i.getMetadata(),s);for(const v of o)l.o(v);if(l.queries.length!==1)throw new de(Z.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${l.queries.length} queries.`);const d=Pg(l.queries[0].bundledQuery),f=l.documents;let m=new Xo;f.map((v=>{const T=jg(s,v.document);m=m.add(T)}));const y=ol.fromInitialDocuments(d,m,ze(),!1,!1),b=new dn(n,t||null,d);return new ts(n,new ow(n),b,y)}}function Pq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}function Vq(n,e){return n instanceof es&&e instanceof es?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ts&&e instanceof ts&&n._firestore===e._firestore&&X_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}ts._jsonSchemaVersion="firestore/querySnapshot/1.0",ts._jsonSchema={type:sn("string",ts._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};const Mq={maxAttempts:5};class ND{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hl(e)}set(e,t,s){this._verifyNotCommitted();const i=Na(e,this._firestore),o=Hg(i.converter,t,s),l=qg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,s);return this._mutations.push(l.toMutation(i._key,It.none())),this}update(e,t,s,...i){this._verifyNotCommitted();const o=Na(e,this._firestore);let l;return l=typeof(t=yt(t))=="string"||t instanceof dl?nw(this._dataReader,"WriteBatch.update",o._key,t,s,i):tw(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,It.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Na(e,this._firestore);return this._mutations=this._mutations.concat(new uu(t._key,It.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Na(n,e){if((n=yt(n)).firestore!==e)throw new de(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Oq{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hl(e)}get(e){const t=Na(e,this._firestore),s=new ow(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Te(24041);const o=i[0];if(o.isFoundDocument())return new Ah(this._firestore,s,o.key,o,t.converter);if(o.isNoDocument())return new Ah(this._firestore,s,t._key,null,t.converter);throw Te(18433,{doc:o})}))}set(e,t,s){const i=Na(e,this._firestore),o=Hg(i.converter,t,s),l=qg(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,l),this}update(e,t,s,...i){const o=Na(e,this._firestore);let l;return l=typeof(t=yt(t))=="string"||t instanceof dl?nw(this._dataReader,"Transaction.update",o._key,t,s,i):tw(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=Na(e,this._firestore);return this._transaction.delete(t._key),this}}class ID extends Oq{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Na(e,this._firestore),s=new Za(this._firestore);return super.get(e).then((i=>new es(this._firestore,s,t._key,i._document,new bi(!1,!1),t.converter)))}}function Lq(n,e,t){n=$e(n,xt);const s={...Mq,...t};(function(l){if(l.maxAttempts<1)throw new de(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s);const i=Rt(n);return DF(i,(o=>e(new ID(n,o))),s)}function Uq(n){n=$e(n,dt);const e=$e(n.firestore,xt),t=Rt(e);return tD(t,n._key).then((s=>lw(e,n,s)))}function zq(n){n=$e(n,dt);const e=$e(n.firestore,xt),t=Rt(e),s=new Za(e);return NF(t,n._key).then((i=>new es(e,s,n._key,i,new bi(i!==null&&i.hasLocalMutations,!0),n.converter)))}function Bq(n){n=$e(n,dt);const e=$e(n.firestore,xt),t=Rt(e);return tD(t,n._key,{source:"server"}).then((s=>lw(e,n,s)))}function kh(n){n=$e(n,dn);const e=$e(n.firestore,xt),t=Rt(e),s=new Za(e);return vD(n._query),nD(t,n._query).then((i=>new ts(e,s,n,i)))}function Fq(n){n=$e(n,dn);const e=$e(n.firestore,xt),t=Rt(e),s=new Za(e);return IF(t,n._query).then((i=>new ts(e,s,n,i)))}function qq(n){n=$e(n,dn);const e=$e(n.firestore,xt),t=Rt(e),s=new Za(e);return nD(t,n._query,{source:"server"}).then((i=>new ts(e,s,n,i)))}function CD(n,e,t){n=$e(n,dt);const s=$e(n.firestore,xt),i=Hg(n.converter,e,t),o=hl(s);return bu(s,[qg(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,It.none())])}function Ho(n,e,t,...s){n=$e(n,dt);const i=$e(n.firestore,xt),o=hl(i);let l;return l=typeof(e=yt(e))=="string"||e instanceof dl?nw(o,"updateDoc",n._key,e,t,s):tw(o,"updateDoc",n._key,e),bu(i,[l.toMutation(n._key,It.exists(!0))])}function Gq(n){return bu($e(n.firestore,xt),[new uu(n._key,It.none())])}function ih(n,e){const t=$e(n.firestore,xt),s=Zs(n),i=Hg(n.converter,e),o=hl(n.firestore);return bu(t,[qg(o,"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,It.exists(!1))]).then((()=>s))}function Ga(n,...e){n=yt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Ac(e[s])||(t=e[s++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ac(e[s])){const m=e[s];e[s]=m.next?.bind(m),e[s+1]=m.error?.bind(m),e[s+2]=m.complete?.bind(m)}let o,l,d;if(n instanceof dt)l=$e(n.firestore,xt),d=lu(n._key.path),o={next:m=>{e[s]&&e[s](lw(l,n,m))},error:e[s+1],complete:e[s+2]};else{const m=$e(n,dn);l=$e(m.firestore,xt),d=m._query;const y=new Za(l);o={next:b=>{e[s]&&e[s](new ts(l,y,m,b))},error:e[s+1],complete:e[s+2]},vD(n._query)}const f=Rt(l);return kF(f,d,i,o)}function Hq(n,e,...t){const s=yt(n),i=(function(f){const m={bundle:"",bundleName:"",bundleSource:""},y=["bundle","bundleName","bundleSource"];for(const b of y){if(!(b in f)){m.error=`snapshotJson missing required field: ${b}`;break}const v=f[b];if(typeof v!="string"){m.error=`snapshotJson field '${b}' must be a string.`;break}if(v.length===0){m.error=`snapshotJson field '${b}' cannot be an empty string.`;break}b==="bundle"?m.bundle=v:b==="bundleName"?m.bundleName=v:b==="bundleSource"&&(m.bundleSource=v)}return m})(e);if(i.error)throw new de(Z.INVALID_ARGUMENT,i.error);let o,l=0;if(typeof t[l]!="object"||Ac(t[l])||(o=t[l++]),i.bundleSource==="QuerySnapshot"){let d=null;if(typeof t[l]=="object"&&Ac(t[l])){const f=t[l++];d={next:f.next,error:f.error,complete:f.complete}}else d={next:t[l++],error:t[l++],complete:t[l++]};return(function(m,y,b,v,T){let k,I=!1;return Qb(m,y.bundle).then((()=>dD(m,y.bundleName))).then((P=>{P&&!I&&(T&&P.withConverter(T),k=Ga(P,b||{},v))})).catch((P=>(v.error&&v.error(P),()=>{}))),()=>{I||(I=!0,k&&k())}})(s,i,o,d,t[l])}if(i.bundleSource==="DocumentSnapshot"){let d=null;if(typeof t[l]=="object"&&Ac(t[l])){const f=t[l++];d={next:f.next,error:f.error,complete:f.complete}}else d={next:t[l++],error:t[l++],complete:t[l++]};return(function(m,y,b,v,T){let k,I=!1;return Qb(m,y.bundle).then((()=>{if(!I){const P=new dt(m,T||null,ge.fromPath(y.bundleName));k=Ga(P,b||{},v)}})).catch((P=>(v.error&&v.error(P),()=>{}))),()=>{I||(I=!0,k&&k())}})(s,i,o,d,t[l])}throw new de(Z.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function $q(n,e){n=$e(n,xt);const t=Rt(n),s=Ac(e)?e:{next:e};return jF(t,s)}function bu(n,e){const t=Rt(n);return RF(t,e)}function lw(n,e,t){const s=t.docs.get(e._key),i=new Za(n);return new es(n,i,e._key,s,new bi(t.hasPendingWrites,t.fromCache),e.converter)}function Kq(n){return n=$e(n,xt),Rt(n),new ND(n,(e=>bu(n,e)))}function Qq(n,e){n=$e(n,xt);const t=Rt(n);if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return ss("Cannot enable indexes when persistence is disabled"),Promise.resolve();const s=(function(o){const l=typeof o=="string"?(function(m){try{return JSON.parse(m)}catch(y){throw new de(Z.INVALID_ARGUMENT,"Failed to parse JSON: "+y?.message)}})(o):o,d=[];if(Array.isArray(l.indexes))for(const f of l.indexes){const m=d2(f,"collectionGroup"),y=[];if(Array.isArray(f.fields))for(const b of f.fields){const v=d2(b,"fieldPath"),T=rw("setIndexConfiguration",v);b.arrayConfig==="CONTAINS"?y.push(new Qo(T,2)):b.order==="ASCENDING"?y.push(new Qo(T,0)):b.order==="DESCENDING"&&y.push(new Qo(T,1))}d.push(new Dc(Dc.UNKNOWN_ID,m,y,Pc.empty()))}return d})(e);return MF(t,s)}function d2(n,e){if(typeof n[e]!="string")throw new de(Z.INVALID_ARGUMENT,"Missing string value for: "+e);return n[e]}class RD{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Yq(n){n=$e(n,xt);const e=h2.get(n);if(e)return e;if(Rt(n)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const s=new RD(n);return h2.set(n,s),s}function Xq(n){jD(n,!0)}function Wq(n){jD(n,!1)}function Jq(n){const e=Rt(n._firestore);LF(e).then((t=>me("deleting all persistent cache indexes succeeded"))).catch((t=>ss("deleting all persistent cache indexes failed",t)))}function jD(n,e){const t=Rt(n._firestore);OF(t,e).then((s=>me(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((s=>ss(`setting persistent cache index auto creation isEnabled=${e} failed`,s)))}const h2=new WeakMap;class Zq{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return cw.instance.onExistenceFilterMismatch(e)}}class cw{constructor(){this.i=new Map}static get instance(){return $m||($m=new cw,Iz($m)),$m}u(e){this.i.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),s=this.i;return s.set(t,e),()=>s.delete(t)}}let $m=null;(function(e,t=!0){l7(ll),Wo(new Va("firestore",((s,{instanceIdentifier:i,options:o})=>{const l=s.getProvider("app").getImmediate(),d=new xt(new h7(s.getProvider("auth-internal")),new p7(l,s.getProvider("app-check-internal")),nz(l,i),l);return o={useFetchStreams:t,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),Lr(o2,l2,e),Lr(o2,l2,"esm2020")})();const eG=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:iw,AggregateField:Wc,AggregateQuerySnapshot:bD,Bytes:Xn,CACHE_SIZE_UNLIMITED:qF,CollectionReference:rr,DocumentReference:dt,DocumentSnapshot:es,FieldPath:dl,FieldValue:Ja,Firestore:xt,FirestoreError:de,GeoPoint:ir,LoadBundleTask:oD,PersistentCacheIndexManager:RD,Query:dn,QueryCompositeFilterConstraint:ml,QueryConstraint:gu,QueryDocumentSnapshot:rh,QueryEndAtConstraint:ef,QueryFieldFilterConstraint:yu,QueryLimitConstraint:Jh,QueryOrderByConstraint:Gg,QuerySnapshot:ts,QueryStartAtConstraint:Zh,SnapshotMetadata:bi,Timestamp:at,Transaction:ID,VectorValue:gs,WriteBatch:ND,_AutoId:_g,_ByteString:Pt,_DatabaseId:Oa,_DocumentKey:ge,_EmptyAppCheckTokenProvider:g7,_EmptyAuthCredentialsProvider:FC,_FieldPath:St,_TestingHooks:Zq,_cast:$e,_debugAssert:u7,_internalAggregationQueryToProtoRunAggregationQueryRequest:oq,_internalQueryToProtoQueryTarget:aq,_isBase64Available:Z7,_logWarn:ss,_validateIsNotUsedTogether:GC,addDoc:ih,aggregateFieldEqual:xq,aggregateQuerySnapshotEqual:bq,and:uq,arrayRemove:Xb,arrayUnion:mc,average:yq,clearIndexedDbPersistence:KF,collection:ps,collectionGroup:BF,connectFirestoreEmulator:aD,count:ED,deleteAllPersistentCacheIndexes:Jq,deleteDoc:Gq,deleteField:sq,disableNetwork:XF,disablePersistentCacheIndexAutoCreation:Wq,doc:Zs,documentId:JF,documentSnapshotFromJSON:jq,enableIndexedDbPersistence:HF,enableMultiTabIndexedDbPersistence:$F,enableNetwork:YF,enablePersistentCacheIndexAutoCreation:Xq,endAt:pq,endBefore:mq,ensureFirestoreConfigured:Rt,executeWrite:bu,getAggregateFromServer:SD,getCountFromServer:vq,getDoc:Uq,getDocFromCache:zq,getDocFromServer:Bq,getDocs:kh,getDocsFromCache:Fq,getDocsFromServer:qq,getFirestore:lD,getPersistentCacheIndexManager:Yq,increment:rq,initializeFirestore:GF,limit:xu,limitToLast:dq,loadBundle:Qb,memoryEagerGarbageCollector:Sq,memoryLocalCache:kq,memoryLruGarbageCollector:Aq,namedQuery:dD,onSnapshot:Ga,onSnapshotResume:Hq,onSnapshotsInSync:$q,or:cq,orderBy:Wh,persistentLocalCache:Nq,persistentMultipleTabManager:Rq,persistentSingleTabManager:AD,query:xi,queryEqual:X_,querySnapshotFromJSON:Dq,refEqual:FF,runTransaction:Lq,serverTimestamp:Yb,setDoc:CD,setIndexConfiguration:Qq,setLogLevel:c7,snapshotEqual:Vq,startAfter:fq,startAt:hq,sum:gq,terminate:WF,updateDoc:Ho,vector:iq,waitForPendingWrites:QF,where:Fd,writeBatch:Kq},Symbol.toStringTag,{value:"Module"}));const DD="firebasestorage.googleapis.com",tG="storageBucket",nG=120*1e3,sG=600*1e3;class Kr extends $r{constructor(e,t,s=0){super(Px(e),`Firebase Storage: ${t} (${Px(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Px(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Hr||(Hr={}));function Px(n){return"storage/"+n}function rG(){const n="An unknown error occurred, please check the error payload for server response.";return new Kr(Hr.UNKNOWN,n)}function iG(){return new Kr(Hr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aG(){return new Kr(Hr.CANCELED,"User canceled the upload/download.")}function oG(n){return new Kr(Hr.INVALID_URL,"Invalid URL '"+n+"'.")}function lG(n){return new Kr(Hr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function f2(n){return new Kr(Hr.INVALID_ARGUMENT,n)}function PD(){return new Kr(Hr.APP_DELETED,"The Firebase app was deleted.")}function cG(n){return new Kr(Hr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class tr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=tr.makeFromUrl(e,t)}catch{return new tr(e,"")}if(s.path==="")return s;throw lG(e)}static makeFromUrl(e,t){let s=null;const i="([A-Za-z0-9.\\-_]+)";function o($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+i+l,"i"),f={bucket:1,path:3};function m($){$.path_=decodeURIComponent($.path)}const y="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",T=new RegExp(`^https?://${b}/${y}/b/${i}/o${v}`,"i"),k={bucket:1,path:3},I=t===DD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",P=new RegExp(`^https?://${I}/${i}/${j}`,"i"),z=[{regex:d,indices:f,postModify:o},{regex:T,indices:k,postModify:m},{regex:P,indices:{bucket:1,path:2},postModify:m}];for(let $=0;$<z.length;$++){const te=z[$],ce=te.regex.exec(e);if(ce){const D=ce[te.indices.bucket];let S=ce[te.indices.path];S||(S=""),s=new tr(D,S),te.postModify(s);break}}if(s==null)throw oG(e);return s}}class uG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dG(n,e,t){let s=1,i=null,o=null,l=!1,d=0;function f(){return d===2}let m=!1;function y(...j){m||(m=!0,e.apply(null,j))}function b(j){i=setTimeout(()=>{i=null,n(T,f())},j)}function v(){o&&clearTimeout(o)}function T(j,...P){if(m){v();return}if(j){v(),y.call(null,j,...P);return}if(f()||l){v(),y.call(null,j,...P);return}s<64&&(s*=2);let z;d===1?(d=2,z=0):z=(s+Math.random())*1e3,b(z)}let k=!1;function I(j){k||(k=!0,v(),!m&&(i!==null?(j||(d=2),clearTimeout(i),b(0)):j||(d=1)))}return b(0),o=setTimeout(()=>{l=!0,I(!0)},t),I}function hG(n){n(!1)}function fG(n){return n!==void 0}function m2(n,e,t,s){if(s<e)throw f2(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw f2(`Invalid value for '${n}'. Expected ${t} or less.`)}function mG(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const i=e(s)+"="+e(n[s]);t=t+i+"&"}return t=t.slice(0,-1),t}var tg;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(tg||(tg={}));function pG(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}class gG{constructor(e,t,s,i,o,l,d,f,m,y,b,v=!0,T=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=b,this.retry=v,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,I)=>{this.resolve_=k,this.reject_=I,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new Km(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const d=o.getErrorCode()===tg.NO_ERROR,f=o.getStatus();if(!d||pG(f,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===tg.ABORT;s(!1,new Km(!1,null,y));return}const m=this.successCodes_.indexOf(f)!==-1;s(!0,new Km(m,o))})},t=(s,i)=>{const o=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());fG(f)?o(f):o()}catch(f){l(f)}else if(d!==null){const f=rG();f.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,f)):l(f)}else if(i.canceled){const f=this.appDelete_?PD():aG();l(f)}else{const f=iG();l(f)}};this.canceled_?t(!1,new Km(!1,null,!0)):this.backoffId_=dG(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Km{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function yG(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function xG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bG(n,e){e&&(n["X-Firebase-GMPID"]=e)}function vG(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function _G(n,e,t,s,i,o,l=!0,d=!1){const f=mG(n.urlParams),m=n.url+f,y=Object.assign({},n.headers);return bG(y,e),yG(y,t),xG(y,o),vG(y,s),new gG(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,d)}function wG(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function TG(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class ng{constructor(e,t){this._service=e,t instanceof tr?this._location=t:this._location=tr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ng(e,t)}get root(){const e=new tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TG(this._location.path)}get storage(){return this._service}get parent(){const e=wG(this._location.path);if(e===null)return null;const t=new tr(this._location.bucket,e);return new ng(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw cG(e)}}function p2(n,e){const t=e?.[tG];return t==null?null:tr.makeFromBucketSpec(t,n)}function EG(n,e,t,s={}){n.host=`${e}:${t}`;const i=$a(e);i&&(yg(`https://${n.host}/b`),Fv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=s;o&&(n._overrideAuthToken=typeof o=="string"?o:QI(o,n.app.options.projectId))}class SG{constructor(e,t,s,i,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=DD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nG,this._maxUploadRetryTime=sG,this._requests=new Set,i!=null?this._bucket=tr.makeFromBucketSpec(i,this._host):this._bucket=p2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tr.makeFromBucketSpec(this._url,e):this._bucket=p2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){m2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){m2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(js(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ng(this,e)}_makeRequest(e,t,s,i,o=!0){if(this._deleted)return new uG(PD());{const l=_G(e,this._appId,s,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,i).getPromise()}}const g2="@firebase/storage",y2="0.14.0";const VD="storage";function AG(n=Hv(),e){n=yt(n);const s=iu(n,VD).getImmediate({identifier:e}),i=HI("storage");return i&&kG(s,...i),s}function kG(n,e,t,s={}){EG(n,e,t,s)}function NG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new SG(t,s,i,e,ll)}function IG(){Wo(new Va(VD,NG,"PUBLIC").setMultipleInstances(!0)),Lr(g2,y2,""),Lr(g2,y2,"esm2020")}IG();const CG={apiKey:"AIzaSyBxYxsLtsHK1cKKn6IP_wY5FLyG3Gqje5c",authDomain:"study-tracker-9d996.firebaseapp.com",projectId:"study-tracker-9d996",storageBucket:"study-tracker-9d996.firebasestorage.app",messagingSenderId:"896578359034",appId:"1:896578359034:web:730cec1b11329f22960343",measurementId:"G-ZDH3EW4063"},uw=tC(CG),Vx=r7(uw),RG=new mi,qt=lD(uw);AG(uw);const MD=C.createContext(void 0);function jG({children:n}){const[e,t]=C.useState(null),[s,i]=C.useState(!0);C.useEffect(()=>{const d=$8(Vx,f=>{t(f),i(!1)});return()=>d()},[]);const o=async()=>{try{await fU(Vx,RG)}catch(d){console.error("Error signing in with Google",d)}},l=async()=>{try{await K8(Vx)}catch(d){console.error("Error signing out",d)}};return h.jsx(MD.Provider,{value:{user:e,loading:s,signInWithGoogle:o,logout:l},children:!s&&n})}function Pi(){const n=C.useContext(MD);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}const OD=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();const DG=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const PG=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());const x2=n=>{const e=PG(n);return e.charAt(0).toUpperCase()+e.slice(1)};var VG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MG=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const OG=C.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:l,...d},f)=>C.createElement("svg",{ref:f,...VG,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:OD("lucide",i),...!o&&!MG(d)&&{"aria-hidden":"true"},...d},[...l.map(([m,y])=>C.createElement(m,y)),...Array.isArray(o)?o:[o]]));const _e=(n,e)=>{const t=C.forwardRef(({className:s,...i},o)=>C.createElement(OG,{ref:o,iconNode:e,className:OD(`lucide-${DG(x2(n))}`,`lucide-${n}`,s),...i}));return t.displayName=x2(n),t};const LG=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],UG=_e("arrow-down-right",LG);const zG=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],BG=_e("arrow-left",zG);const FG=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],LD=_e("arrow-right",FG);const qG=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],GG=_e("arrow-up-right",qG);const HG=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],UD=_e("award",HG);const $G=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],KG=_e("bell-off",$G);const QG=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],YG=_e("bell",QG);const XG=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],zD=_e("book-marked",XG);const WG=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Fn=_e("book-open",WG);const JG=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],ZG=_e("book",JG);const eH=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],tH=_e("bug",eH);const nH=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],vp=_e("calendar-clock",nH);const sH=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],b2=_e("calendar-range",sH);const rH=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sg=_e("calendar",rH);const iH=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],aH=_e("chart-column",iH);const oH=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],lH=_e("chart-pie",oH);const cH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],BD=_e("check",cH);const uH=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dH=_e("chevron-down",uH);const hH=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rg=_e("chevron-left",hH);const fH=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dw=_e("chevron-right",fH);const mH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],hw=_e("circle-alert",mH);const pH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Vi=_e("circle-check",pH);const gH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],yH=_e("circle-plus",gH);const xH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Wb=_e("circle-user",xH);const bH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vH=_e("circle",bH);const _H=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ig=_e("clock",_H);const wH=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],TH=_e("copy",wH);const EH=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fw=_e("download",EH);const SH=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],AH=_e("ellipsis-vertical",SH);const kH=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],_p=_e("flame",kH);const NH=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],IH=_e("funnel",NH);const CH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],RH=_e("globe",CH);const jH=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],FD=_e("graduation-cap",jH);const DH=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],PH=_e("hash",DH);const VH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],MH=_e("info",VH);const OH=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],v2=_e("layout-dashboard",OH);const LH=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],UH=_e("layout-grid",LH);const zH=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],BH=_e("loader-circle",zH);const FH=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ag=_e("log-out",FH);const qH=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Mx=_e("medal",qH);const GH=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Jb=_e("message-circle",GH);const HH=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],$H=_e("monitor",HH);const KH=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],og=_e("moon",KH);const QH=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],YH=_e("pause",QH);const XH=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],qD=_e("pen-tool",XH);const WH=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],JH=_e("pen",WH);const ZH=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],tf=_e("pencil",ZH);const e$=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],t$=_e("play",e$);const n$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_i=_e("plus",n$);const s$=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],r$=_e("quote",s$);const i$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],a$=_e("refresh-cw",i$);const o$=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],GD=_e("rotate-ccw",o$);const l$=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lg=_e("save",l$);const c$=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_2=_e("search",c$);const u$=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],d$=_e("send",u$);const h$=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],w2=_e("settings",h$);const f$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],qd=_e("shield-check",f$);const m$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],p$=_e("shield",m$);const g$=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],T2=_e("square-pen",g$);const y$=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Zb=_e("sun",y$);const x$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],HD=_e("target",x$);const b$=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],E2=_e("timer",b$);const v$=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],nf=_e("trash-2",v$);const _$=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],kc=_e("trending-up",_$);const w$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],T$=_e("triangle-alert",w$);const E$=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],lr=_e("trophy",E$);const S$=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],A$=_e("upload",S$);const k$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],N$=_e("user-minus",k$);const I$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],C$=_e("user-plus",I$);const R$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nc=_e("users",R$);const j$=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],$D=_e("volume-2",j$);const D$=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],KD=_e("volume-x",D$);const P$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vs=_e("x",P$);const V$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Nh=_e("zap",V$),QD=C.createContext(void 0);function $g(){const n=C.useContext(QD);if(!n)throw new Error("useToast must be used within a ToastProvider");return n.toast}function M$({children:n}){const[e,t]=C.useState([]),s=C.useCallback((l,d)=>{const f=Math.random().toString(36).substring(2,9);t(m=>[...m,{id:f,message:l,type:d}]),setTimeout(()=>{t(m=>m.filter(y=>y.id!==f))},3e3)},[]),i=C.useCallback(l=>{t(d=>d.filter(f=>f.id!==l))},[]),o={success:l=>s(l,"success"),error:l=>s(l,"error"),info:l=>s(l,"info"),warning:l=>s(l,"warning")};return h.jsxs(QD.Provider,{value:{toast:o,removeToast:i},children:[n,DV.createPortal(h.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:h.jsx(ns,{children:e.map(l=>h.jsx(O$,{toast:l,onRemove:i},l.id))})}),document.body)]})}function O$({toast:n,onRemove:e}){const t={success:h.jsx(Vi,{className:"w-5 h-5 text-emerald-500"}),error:h.jsx(hw,{className:"w-5 h-5 text-red-500"}),info:h.jsx(MH,{className:"w-5 h-5 text-blue-500"}),warning:h.jsx(T$,{className:"w-5 h-5 text-amber-500"})},s={success:"bg-white dark:bg-slate-800 border-emerald-100 dark:border-emerald-900/30",error:"bg-white dark:bg-slate-800 border-red-100 dark:border-red-900/30",info:"bg-white dark:bg-slate-800 border-blue-100 dark:border-blue-900/30",warning:"bg-white dark:bg-slate-800 border-amber-100 dark:border-amber-900/30"};return h.jsxs(ve.div,{layout:!0,initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.2}},className:`pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg border ${s[n.type]} min-w-[300px] max-w-sm backdrop-blur-sm`,children:[h.jsx("div",{className:"shrink-0",children:t[n.type]}),h.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200 flex-1",children:n.message}),h.jsx("button",{onClick:()=>e(n.id),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-400 dark:text-slate-500 transition-colors",children:h.jsx(Vs,{className:"w-4 h-4"})})]})}const ah=[{id:"hsc-science-2026-bn",name:"HSC Science",subjects:[{name:"  ",icon:"Book",color:"bg-emerald-500",chapters:[{name:"",topics:[{name:""},{name:""},{name:"-"},{name:""},{name:"    "},{name:" "},{name:""},{name:" "},{name:"  "},{name:" "},{name:"   "},{name:""}]},{name:"",topics:[{name:" "},{name:""},{name:""},{name:"  "},{name:" "},{name:"-"},{name:"  "},{name:""},{name:""},{name:"  "},{name:"   "},{name:" "}]},{name:"",topics:[{name:""}]},{name:"",topics:[{name:""}]}]},{name:"  ",icon:"Book",color:"bg-emerald-500",chapters:[{name:"",topics:[{name:""},{name:""},{name:""}]},{name:"",topics:[{name:" "},{name:""},{name:""},{name:""}]}]},{name:"  ",icon:"Book",color:"bg-teal-500",chapters:[{name:"  -   ",topics:[{name:" "},{name:"  "},{name:"  "},{name:" "},{name:"  "}]},{name:"  - ",topics:[{name:"  "},{name:" "},{name:" "},{name:" "},{name:"  "},{name:" "},{name:"  "},{name:" "},{name:"   "},{name:"   "},{name:"  "},{name:"  "}]},{name:"  - ",topics:[{name:"  "},{name:"  "},{name:" "},{name:"  "},{name:"   "},{name:" "},{name:""},{name:"    "},{name:"   "},{name:"  "},{name:"   "},{name:"   "}]},{name:"  -  ",topics:[{name:" "},{name:"   "},{name:"   "},{name:"   "},{name:"  "},{name:"  "},{name:" "},{name:"    "},{name:"  "},{name:"  "},{name:"   "},{name:"  "}]},{name:"  - ,   ",topics:[{name:"    "},{name:"    "},{name:""},{name:""},{name:"    "},{name:"  "},{name:""}]},{name:"  -   ",topics:[{name:""},{name:" "},{name:"   "},{name:"   "},{name:"  "},{name:"   "},{name:"  "},{name:" "},{name:"  - "}]},{name:"  -   ",topics:[{name:" "},{name:""},{name:" "},{name:" "},{name:"  "},{name:" "},{name:"   "}]},{name:"  -  ",topics:[{name:" "},{name:"  "},{name:"     "},{name:"       "},{name:"   "},{name:"   "},{name:"  "}]},{name:"  - ",topics:[{name:" "},{name:"  "},{name:"  "},{name:"  "},{name:" "},{name:" "},{name:"  "}]},{name:"  -     ",topics:[{name:" "},{name:" "},{name:" "},{name:"   "},{name:"      "},{name:" "},{name:"    "},{name:" "},{name:"  "}]}]},{name:"  ",icon:"Zap",color:"bg-violet-500",chapters:[{name:"",topics:[{name:" "},{name:"  "},{name:"   "},{name:"   "},{name:""},{name:"  "}]},{name:" ",topics:[{name:" "},{name:"   "},{name:" "},{name:" "},{name:"  "},{name:" "}]},{name:" ",topics:[{name:"   "},{name:" "},{name:" "},{name:" "},{name:""},{name:"   "}]},{name:"   ",topics:[{name:"- "},{name:" "},{name:" "},{name:" "}]},{name:" ",topics:[{name:" "},{name:" "},{name:"    "},{name:""}]},{name:" ",topics:[{name:""},{name:"   "},{name:"   "},{name:" "}]},{name:" ",topics:[{name:" "},{name:""},{name:""},{name:""}]},{name:"  ",topics:[{name:"  "},{name:"- "},{name:" "},{name:"- "},{name:"-"}]},{name:" ",topics:[{name:"   "},{name:" "},{name:""},{name:"   "},{name:"   "}]},{name:"  ",topics:[{name:" "},{name:"- "},{name:""},{name:" "},{name:""}]}]},{name:"  ",icon:"Beaker",color:"bg-rose-500",chapters:[{name:"  ",topics:[{name:"  "},{name:"  "},{name:"   "},{name:" "},{name:" "}]},{name:" ",topics:[{name:"  (  )"},{name:" "},{name:",    "},{name:" "},{name:"  "},{name:" "},{name:"   "},{name:" "},{name:""}]},{name:"  ",topics:[{name:"  (s, p, d, f )"},{name:"  ( ,  )"},{name:" "},{name:" "},{name:" (Hybridization)"},{name:"VSEPR    "},{name:" "},{name:"  "}]},{name:" ",topics:[{name:"   "},{name:" "},{name:"- "},{name:"   Kc, Kp"},{name:"- "},{name:"pH   "},{name:"    "}]},{name:" ",topics:[{name:"   "},{name:"  (, )"},{name:"  "},{name:"   "}]}]},{name:"  ",icon:"Beaker",color:"bg-rose-500",chapters:[{name:" ",topics:[{name:"  (, )"},{name:"   "},{name:"   "},{name:"  "},{name:"   "},{name:"    "},{name:"    (BOD, COD)"}]},{name:" ",topics:[{name:"     "},{name:""},{name:" (IUPAC)"},{name:" (, , )"},{name:"   "},{name:" "},{name:"  "},{name:"  "},{name:"    "},{name:""},{name:"  "}]},{name:" ",topics:[{name:"    "},{name:"  (, )"},{name:"- "},{name:"- "},{name:""},{name:"- "}]},{name:" ",topics:[{name:"   "},{name:" "},{name:"  "},{name:"    "},{name:"   "},{name:"pH "}]},{name:" ",topics:[{name:"   "},{name:"  "},{name:"   "},{name:"   "},{name:"   "}]}]},{name:"   ",icon:"Calculator",color:"bg-blue-500",chapters:[{name:"  ",topics:[{name:" "},{name:" ,   "},{name:"   "},{name:" "},{name:" "}]},{name:"",topics:[{name:" "},{name:"   "},{name:"   "},{name:" "}]},{name:"",topics:[{name:"   "},{name:"   "},{name:"  "},{name:"   "}]},{name:"",topics:[{name:" "},{name:"  "},{name:"  "}]},{name:"  ",topics:[{name:"    "},{name:""},{name:""},{name:"   "}]},{name:"",topics:[{name:"   "},{name:" "},{name:" "},{name:""}]},{name:"   ",topics:[{name:"  -"},{name:"-   "},{name:" "},{name:" "}]},{name:"",topics:[{name:"  "},{name:""},{name:"  "},{name:" "},{name:"  "}]},{name:"",topics:[{name:" "},{name:" "},{name:" "},{name:" "},{name:" "}]}]},{name:"   ",icon:"Calculator",color:"bg-blue-500",chapters:[{name:"   ",topics:[{name:"  "},{name:"  "},{name:" "}]},{name:" ",topics:[{name:"  "},{name:" "},{name:"  "}]},{name:" ",topics:[{name:"   "},{name:"  "},{name:" "},{name:" "}]},{name:"   ",topics:[{name:" "},{name:"   "},{name:"   "},{name:"  "}]},{name:" ",topics:[{name:" "},{name:"  "},{name:""},{name:"  "}]},{name:"",topics:[{name:" (Parabola)"},{name:" (Ellipse)"},{name:" (Hyperbola)"},{name:" "}]},{name:"  ",topics:[{name:"   "},{name:"  "},{name:"  "}]},{name:"",topics:[{name:"   "},{name:" "},{name:" "},{name:"    "}]},{name:"",topics:[{name:" "},{name:""},{name:" "},{name:" "}]},{name:"   ",topics:[{name:", , "},{name:"   "},{name:" "},{name:"   "},{name:" "}]}]},{name:"  ",icon:"Dna",color:"bg-green-500",chapters:[{name:"   ",topics:[{name:"    "},{name:"  "},{name:"  "},{name:""},{name:""},{name:"DNA  RNA  "},{name:"DNA "},{name:"  "}]},{name:" ",topics:[{name:"  "},{name:" "},{name:"   "},{name:" "}]},{name:"",topics:[{name:"   "},{name:""},{name:"   "},{name:" "}]},{name:"  ",topics:[{name:" (Riccia)"},{name:" (Pteris)"}]},{name:"  ",topics:[{name:" (Cycas)"},{name:" (Poaceae) "},{name:" (Malvaceae) "}]},{name:"  ",topics:[{name:" "},{name:" "},{name:" "},{name:"   /"}]},{name:" ",topics:[{name:"  "},{name:""},{name:" (   )"},{name:"C3  C4 "},{name:" (  )"},{name:"   "}]},{name:" ",topics:[{name:" "},{name:"   "},{name:""}]},{name:"",topics:[{name:"  "},{name:" DNA "},{name:" "},{name:" "}]}]},{name:"  ",icon:"Dna",color:"bg-green-500",chapters:[{name:"   ",topics:[{name:" "},{name:"-  (Major Phyla)"},{name:"   "}]},{name:" ",topics:[{name:" (, , )"},{name:" (, ,  )"},{name:"  (,  , )"}]},{name:"  ",topics:[{name:"   "},{name:"   (, , )"},{name:"   "},{name:""}]},{name:"  ",topics:[{name:"   "},{name:" "},{name:"   "},{name:" "},{name:"  "}]},{name:"  ",topics:[{name:" "},{name:" "},{name:" "}]},{name:"  ",topics:[{name:" "},{name:" "},{name:"  "},{name:"   "}]},{name:"  ",topics:[{name:"   "},{name:"  "},{name:" "},{name:""}]}]},{name:"   ",icon:"Cpu",color:"bg-indigo-500",chapters:[{name:"  -    ",topics:[{name:" "},{name:" "},{name:""},{name:""},{name:" "},{name:""},{name:""},{name:" "},{name:""}]},{name:"  -  ",topics:[{name:"    "},{name:""},{name:"  ( )"},{name:"  (Bluetooth, WiFi, WiMax)"},{name:" "},{name:"   "},{name:" "}]},{name:"  -     ",topics:[{name:"  "},{name:"  "},{name:" (BCD, ASCII)"},{name:" "},{name:"  (  )"},{name:"  "},{name:" (  )"},{name:"  "}]},{name:"  -   ",topics:[{name:" "},{name:"HTML  "},{name:"   "},{name:"  "},{name:" "},{name:" "}]},{name:"  -   (C)",topics:[{name:"  "},{name:"  "},{name:"   "},{name:"  "},{name:"  (if-else)"},{name:" (for, while)"},{name:""},{name:""}]}]}]}],Ox=[{level:1,minXP:0,title:"Novice"},{level:2,minXP:500,title:"Apprentice"},{level:3,minXP:1200,title:"Scholar"},{level:4,minXP:2500,title:"Sage"},{level:5,minXP:5e3,title:"Master"},{level:6,minXP:1e4,title:"Grandmaster"},{level:7,minXP:2e4,title:"Legend"}],ev=n=>{const e=[...Ox].reverse().find(s=>n>=s.minXP)||Ox[0],t=Ox.find(s=>s.level===e.level+1);return{currentLevel:e.level,currentTitle:e.title,nextLevelXP:t?t.minXP:null,progress:t?(n-e.minXP)/(t.minXP-e.minXP)*100:100}},S2={name:"Student",grade:"Class 10",language:"en",totalStudyTime:0,earnedBadges:[],currentStreak:0,dailyGoal:7200,todayStudyTime:0,weeklyStudyTime:0,monthlyStudyTime:0,xp:0,level:1,role:"student",scheduledSessions:[]},Lx="study-tracker-data",L$=()=>{const n=ah[0];return n?n.subjects.map(e=>({id:crypto.randomUUID(),name:e.name,color:e.color,icon:e.icon,chapters:e.chapters.map(t=>({id:crypto.randomUUID(),name:t.name,isCompleted:!1,completedAt:null,topics:t.topics.map(s=>({id:crypto.randomUUID(),name:s.name,isCompleted:!1,completedAt:null}))}))})):[]},YD=C.createContext(void 0);function U$({children:n}){const{user:e}=Pi(),t=$g(),[s,i]=C.useState(()=>{try{const oe=localStorage.getItem(Lx);if(oe){const M=JSON.parse(oe);if(M.userProfile)return M.userProfile}}catch(oe){console.error("Failed to load profile:",oe)}return S2}),[o,l]=C.useState(()=>{try{const oe=localStorage.getItem(Lx);if(oe){const M=JSON.parse(oe);if(M.subjects&&M.subjects.length>0)return M.subjects.map(H=>({...H,chapters:(H.chapters||[]).map(Q=>({...Q,topics:Q.topics||[]}))}))}}catch(oe){console.error("Failed to load subjects:",oe)}return L$()}),d=C.useCallback(async(oe,M)=>{if(e)try{await CD(Zs(qt,"users",e.uid),{userProfile:oe,subjects:M})}catch(H){console.error("Cloud save failed:",H)}else localStorage.setItem(Lx,JSON.stringify({userProfile:oe,subjects:M}))},[e]),f=C.useRef(!0);C.useEffect(()=>{if(f.current){f.current=!1;return}const oe=o.reduce((Q,se)=>Q+se.chapters.length,0);let M=0;o.forEach(Q=>{Q.chapters.forEach(se=>{se.topics?.length>0?se.topics.every(fe=>fe.isCompleted)&&M++:se.isCompleted&&M++})});const H=oe===0?0:Math.round(M/oe*100);s.syllabusCompletionPercentage!==H&&i(Q=>({...Q,syllabusCompletionPercentage:H})),d({...s,syllabusCompletionPercentage:H},o)},[o,s,d]),C.useEffect(()=>{if(!e)return;const M=e.email==="channel.data.transfer@gmail.com",H=Ga(Zs(qt,"users",e.uid),Q=>{if(Q.exists()){const se=Q.data();let fe=se.userProfile;M?fe.role!=="admin"&&(fe={...fe,role:"admin"}):fe.role==="admin"&&(fe={...fe,role:"student"},Ho(Zs(qt,"users",e.uid),{"userProfile.role":"student"}).catch(ye=>console.error("Failed to revoke role:",ye))),se.userProfile&&i(fe),se.subjects&&l(se.subjects)}else M&&i(se=>({...se,role:"admin"}))});return()=>H()},[e]),C.useEffect(()=>{const oe=ah[0];if(!oe)return;let M=!1;const H=[...o];oe.subjects.forEach(Q=>{H.some(fe=>fe.name===Q.name)||(H.push({id:crypto.randomUUID(),name:Q.name,color:Q.color,icon:Q.icon,chapters:Q.chapters.map(fe=>({id:crypto.randomUUID(),name:fe.name,isCompleted:!1,completedAt:null,topics:fe.topics.map(ye=>({id:crypto.randomUUID(),name:ye.name,isCompleted:!1,completedAt:null}))}))}),M=!0)}),M&&l(H)},[o]);const m=C.useCallback(oe=>{i(M=>({...M,...oe}))},[]),y=C.useCallback((oe,M)=>{i(H=>{const Q=H.xp+oe,{currentLevel:se}=ev(H.xp),{currentLevel:fe,currentTitle:ye}=ev(Q);return fe>se&&t.success(` Level Up! You are now a ${ye}!`),{...H,xp:Q,level:fe}})},[t]),b=oe=>{l(M=>[...M,{...oe,id:crypto.randomUUID(),chapters:[]}])},v=(oe,M)=>{l(H=>H.map(Q=>Q.id===oe?{...Q,...M}:Q))},T=oe=>{l(M=>M.filter(H=>H.id!==oe))},k=(oe,M)=>{l(H=>H.map(Q=>Q.id===oe?{...Q,chapters:[...Q.chapters,{id:crypto.randomUUID(),name:M,isCompleted:!1,topics:[]}]}:Q))},I=(oe,M,H)=>{l(Q=>Q.map(se=>se.id===oe?{...se,chapters:se.chapters.map(fe=>fe.id===M?{...fe,name:H}:fe)}:se))},j=(oe,M)=>{l(H=>H.map(Q=>Q.id===oe?{...Q,chapters:Q.chapters.map(se=>se.id===M?{...se,isCompleted:!se.isCompleted,completedAt:se.isCompleted?null:new Date().toISOString()}:se)}:Q))},P=(oe,M)=>{l(H=>H.map(Q=>Q.id===oe?{...Q,chapters:Q.chapters.filter(se=>se.id!==M)}:Q))},L=(oe,M,H)=>{l(Q=>Q.map(se=>se.id===oe?{...se,chapters:se.chapters.map(fe=>fe.id===M?{...fe,topics:[...fe.topics,{id:crypto.randomUUID(),name:H,isCompleted:!1,completedAt:null}]}:fe)}:se))},z=(oe,M,H,Q)=>{l(se=>se.map(fe=>fe.id===oe?{...fe,chapters:fe.chapters.map(ye=>ye.id===M?{...ye,topics:ye.topics.map(we=>we.id===H?{...we,name:Q}:we)}:ye)}:fe))},$=(oe,M,H)=>{let Q=0;l(se=>se.map(fe=>fe.id===oe?{...fe,chapters:fe.chapters.map(ye=>{if(ye.id===M){const we=ye.topics.map(Ce=>Ce.id===H?(Ce.isCompleted||(Q=50),{...Ce,isCompleted:!Ce.isCompleted,completedAt:Ce.isCompleted?null:new Date().toISOString()}):Ce),pe=we.length>0&&we.every(Ce=>Ce.isCompleted);return{...ye,topics:we,isCompleted:pe,completedAt:pe?new Date().toISOString():null}}return ye})}:fe)),Q>0&&(y(Q,"Topic Completed"),t.success("+50 XP: Topic Completed!"))},te=(oe,M,H)=>{l(Q=>Q.map(se=>se.id===oe?{...se,chapters:se.chapters.map(fe=>fe.id===M?{...fe,topics:fe.topics.filter(ye=>ye.id!==H)}:fe)}:se))},ce=()=>{const oe={userProfile:s,subjects:o,timestamp:new Date().toISOString()},M=new Blob([JSON.stringify(oe,null,2)],{type:"application/json"}),H=URL.createObjectURL(M),Q=document.createElement("a");Q.href=H,Q.download="study-tracker-backup.json",Q.click(),URL.revokeObjectURL(H)},D=oe=>{try{const M=JSON.parse(oe);if(M.userProfile&&Array.isArray(M.subjects))return i(M.userProfile),l(M.subjects),!0}catch(M){console.error("Import failed:",M)}return!1},S=oe=>{const M=oe.map(H=>({id:crypto.randomUUID(),name:H.name,color:H.color,icon:H.icon,chapters:H.chapters.map(Q=>({id:crypto.randomUUID(),name:Q.name,isCompleted:!1,completedAt:null,topics:Q.topics.map(se=>({id:crypto.randomUUID(),name:se.name,isCompleted:!1,completedAt:null}))}))}));l(H=>[...H,...M])},A=()=>{window.confirm("Reset all progress?")&&(i(S2),l([]))},O=async(oe,M,H)=>{const Q=new Date,se=Q.toISOString().split("T")[0];if(i(ye=>{const we=ye.totalStudyTime+oe;let pe=ye.currentStreak||0,Ce=ye.todayStudyTime||0;if(ye.lastStudyDate!==se){const tt=new Date;tt.setDate(tt.getDate()-1),ye.lastStudyDate===tt.toISOString().split("T")[0]?pe+=1:pe=1,Ce=oe}else Ce+=oe;return{...ye,totalStudyTime:we,todayStudyTime:Ce,currentStreak:pe,lastStudyDate:se,weeklyStudyTime:(ye.weeklyStudyTime||0)+oe,monthlyStudyTime:(ye.monthlyStudyTime||0)+oe}}),e)try{await ih(ps(qt,"study_sessions"),{userId:e.uid,userName:e.displayName||s.name,durationInSeconds:oe,subjectId:M||null,sessionGoal:H||null,createdAt:Q.toISOString()})}catch(ye){console.error("Session log failed:",ye)}const fe=Math.floor(oe/300)*10;fe>0&&(y(fe,"Study Session"),t.success(`+${fe} XP earned!`))},U=oe=>{const M={...oe,id:crypto.randomUUID(),isCompleted:!1};m({scheduledSessions:[...s.scheduledSessions||[],M]}),t.success("Study session scheduled!")},q=oe=>{const M=(s.scheduledSessions||[]).map(H=>H.id===oe?{...H,isCompleted:!H.isCompleted}:H);m({scheduledSessions:M})},V=oe=>{const M=(s.scheduledSessions||[]).filter(H=>H.id!==oe);m({scheduledSessions:M})},Pe=C.useCallback(()=>{const oe=new Date;oe.setHours(0,0,0,0);const M=[],H=[...s.scheduledSessions||[]];o.forEach(Q=>{if(!Q.examDate)return;const se=new Date(Q.examDate);if(se.setHours(0,0,0,0),se<=oe)return;const fe=[];if(Q.chapters.forEach(tt=>{tt.topics.forEach(jt=>{jt.isCompleted||fe.push({chapterId:tt.id,topicId:jt.id})})}),fe.length===0)return;const ye=se.getTime()-oe.getTime(),we=Math.floor(ye/(1e3*60*60*24));if(we<=0)return;const pe=Math.ceil(fe.length/we);let Ce=0;for(let tt=1;tt<=we&&Ce<fe.length;tt++){const jt=new Date(oe);jt.setDate(oe.getDate()+tt);const In=jt.toISOString().split("T")[0];if(!H.some(rn=>rn.date===In&&rn.subjectId===Q.id))for(let rn=0;rn<pe&&Ce<fe.length;rn++){const Mn=fe[Ce];M.push({id:crypto.randomUUID(),subjectId:Q.id,chapterId:Mn.chapterId,topicId:Mn.topicId,date:In,time:"18:00",durationMinutes:45,isCompleted:!1}),Ce++}}}),M.length>0?(m({scheduledSessions:[...H,...M]}),t.success(`AI Path Generated: ${M.length} sessions added!`)):t.info("No new topics could be scheduled. Ensure your subjects have future exam dates.")},[o,s.scheduledSessions,m,t]),Ve=s.majorExams||[],F=oe=>{const M={...oe,id:crypto.randomUUID()};m({majorExams:[...Ve,M]}),t.success("Major exam scheduled!")},ie=(oe,M)=>{const H=Ve.map(Q=>Q.id===oe?{...Q,...M}:Q);m({majorExams:H})},ne=oe=>{const M=Ve.filter(H=>H.id!==oe);m({majorExams:M})};C.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission();const oe=setInterval(()=>{const M=new Date;i(H=>{const Q=(H.scheduledSessions||[]).map(se=>{if(se.isCompleted||se.reminderSent||!se.time)return se;const ye=(new Date(`${se.date}T${se.time}`).getTime()-M.getTime())/6e4;if(ye<=10&&ye>-5){if(Notification.permission==="granted"){const we=o.find(pe=>pe.id===se.subjectId);new Notification(`Study Session: ${we?.name||"Upcoming"}`,{body:`Starting in ${Math.round(Math.max(0,ye))} minutes!`,icon:"/pwa-192x192.png"})}return{...se,reminderSent:!0}}return se});return{...H,scheduledSessions:Q}})},6e4);return()=>clearInterval(oe)},[o]);const Ee=s.role==="admin";return h.jsx(YD.Provider,{value:{userProfile:s,subjects:o,isAdmin:Ee,updateProfile:m,addSubject:b,editSubject:v,deleteSubject:T,addChapter:k,editChapter:I,toggleChapter:j,deleteChapter:P,addTopic:L,editTopic:z,toggleTopic:$,deleteTopic:te,resetData:A,exportData:ce,importData:D,importSyllabusData:S,saveStudySession:O,addScheduledSession:U,toggleScheduledSession:q,deleteScheduledSession:V,generateSmartSchedule:Pe,majorExams:Ve,addMajorExam:F,editMajorExam:ie,deleteMajorExam:ne},children:n})}function Lt(){const n=C.useContext(YD);if(!n)throw new Error("useStudy must be used within StudyProvider");return n}const z$=["bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500","bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-slate-500"];function mw({subject:n,onClose:e}){const{editSubject:t}=Lt(),[s,i]=C.useState(n.name),[o,l]=C.useState(n.color),[d,f]=C.useState(n.examDate||""),m=y=>{y.preventDefault(),s.trim()&&(t(n.id,{name:s.trim(),color:o,examDate:d||void 0}),e())};return h.jsx(ns,{children:h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:h.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50",children:[h.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Edit Subject"}),h.jsx("button",{onClick:e,className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:h.jsx(Vs,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Subject Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(Fn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"text",value:s,onChange:y=>i(y.target.value),placeholder:"e.g. Mathematics",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-10 pr-4 text-slate-800 dark:text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",autoFocus:!0})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Color Theme"}),h.jsx("div",{className:"grid grid-cols-4 gap-2",children:z$.map(y=>h.jsx("button",{type:"button",onClick:()=>l(y),className:`w-full h-8 rounded-lg ${y} ${o===y?"ring-2 ring-offset-2 ring-indigo-500":""}`},y))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Exam Date (Optional)"}),h.jsx("input",{type:"date",value:d,onChange:y=>f(y.target.value),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),h.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[h.jsx("div",{className:`w-10 h-10 rounded-lg ${o} flex items-center justify-center text-white shadow-sm`,children:h.jsx(Fn,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:s||"Subject Name"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Preview"})]})]}),h.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[h.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-slate-600 dark:text-slate-400 font-medium hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!s.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Save Changes"})]})]})]})})})}const B$=ve(gn);function F$({subject:n,index:e=0}){const[t,s]=C.useState(!1),i=n.chapters.length,o=n.chapters.filter(y=>y.isCompleted).length;let l=0;n.chapters.forEach(y=>{y.topics&&y.topics.length>0?l+=y.topics.filter(b=>b.isCompleted).length/y.topics.length*100:l+=y.isCompleted?100:0});const d=i===0?0:Math.round(l/i),f=n.examDate?Math.ceil((new Date(n.examDate).getTime()-new Date().getTime())/(1e3*60*60*24)):null,m=f!==null&&f<=7&&f>=0;return h.jsxs(h.Fragment,{children:[h.jsxs(B$,{to:`/subject/${n.id}`,whileHover:{y:-8,transition:{duration:.3,ease:[.25,1,.5,1]}},whileTap:{scale:.98},className:"group relative block bg-white dark:bg-slate-800 rounded-2xl md:rounded-3xl p-4 md:p-5 border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-2xl hover:shadow-blue-500/15 dark:hover:shadow-blue-900/20 transition-all overflow-hidden h-full flex flex-col",children:[h.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 md:w-32 md:h-32 bg-gradient-to-br ${n.color.replace("bg-","from-").replace("-500","-500/10")} to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-bl-full pointer-events-none`}),h.jsx(ve.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:y=>{y.preventDefault(),y.stopPropagation(),s(!0)},className:"absolute top-2 right-2 md:top-4 md:right-4 p-1.5 md:p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 dark:hover:text-blue-400 rounded-xl transition-colors opacity-100 md:opacity-0 md:group-hover:opacity-100 z-10",title:"Edit Subject",children:h.jsx(tf,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),h.jsxs("div",{className:"flex items-start justify-between mb-4 md:mb-6 relative z-10",children:[h.jsx(ve.div,{whileHover:{rotate:15,scale:1.1},className:`w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl ${n.color} flex items-center justify-center text-white shadow-lg shadow-blue-500/20`,children:h.jsx(Fn,{className:"w-5 h-5 md:w-7 md:h-7"})}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 backdrop-blur-sm px-2 py-1 md:px-3 md:py-1.5 rounded-lg md:rounded-xl text-[10px] md:text-xs font-bold text-slate-700 dark:text-slate-200 border border-slate-100 dark:border-slate-600",children:[d,"%"]})]}),n.examDate&&f!==null&&f>=0&&h.jsxs("div",{className:`absolute top-16 right-4 text-xs font-bold px-2 py-1 rounded-lg flex items-center gap-1 ${m?"bg-red-100 text-red-600 animate-pulse":"bg-indigo-50 text-indigo-600"}`,children:[h.jsx(vp,{className:"w-3 h-3"}),h.jsxs("span",{children:[f," days left"]})]}),h.jsx("h3",{className:"text-sm md:text-xl font-bold text-slate-800 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors line-clamp-1",children:n.name}),h.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-xs md:text-sm text-slate-500 dark:text-slate-400 mb-4 md:mb-6 mt-auto",children:[h.jsxs("div",{className:"flex items-center gap-1 md:gap-1.5 bg-slate-50 dark:bg-slate-700/50 px-1.5 py-0.5 md:px-2 md:py-1 rounded-md md:rounded-lg",children:[h.jsx(Fn,{className:"w-3 h-3 md:w-3.5 md:h-3.5"}),h.jsx("span",{children:i})]}),o>0&&h.jsxs("div",{className:"flex items-center gap-1 md:gap-1.5 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 px-1.5 py-0.5 md:px-2 md:py-1 rounded-md md:rounded-lg",children:[h.jsx(Vi,{className:"w-3 h-3 md:w-3.5 md:h-3.5"}),h.jsx("span",{children:o})]})]}),h.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[h.jsxs("div",{className:"hidden md:flex justify-between text-xs text-slate-400 dark:text-slate-500 font-medium",children:[h.jsx("span",{children:"Progress"}),h.jsxs("span",{children:[d,"%"]})]}),h.jsx("div",{className:"h-1.5 md:h-2.5 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:h.jsx(ve.div,{initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,delay:.5+e*.1,ease:"easeOut"},className:`h-full ${n.color} rounded-full`})})]}),h.jsxs("div",{className:"mt-4 md:mt-5 pt-3 md:pt-4 border-t border-slate-100 dark:border-slate-700 flex items-center justify-between text-xs md:text-sm",children:[h.jsx("span",{className:"text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-300 transition-colors",children:"Details"}),h.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full bg-slate-50 dark:bg-slate-700 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-all duration-300",children:h.jsx(LD,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]}),t&&h.jsx(mw,{subject:n,onClose:()=>s(!1)})]})}const A2=["bg-blue-500","bg-emerald-500","bg-violet-500","bg-amber-500","bg-rose-500","bg-cyan-500","bg-fuchsia-500","bg-orange-500"];function q$({onClose:n}){const{addSubject:e}=Lt(),[t,s]=C.useState(""),[i,o]=C.useState(A2[0]),l=d=>{d.preventDefault(),t.trim()&&(e({name:t.trim(),color:i,icon:"book"}),n())};return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 transition-colors",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-100 dark:border-slate-700",children:[h.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2 transition-colors",children:[h.jsx(ZG,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Add New Subject"]}),h.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:h.jsx(Vs,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 transition-colors",children:"Subject Name"}),h.jsx("input",{autoFocus:!0,type:"text",value:t,onChange:d=>s(d.target.value),placeholder:"e.g. Physics",className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium placeholder:font-normal placeholder:text-slate-400 dark:placeholder:text-slate-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 transition-colors",children:"Color Tag"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:A2.map(d=>h.jsx("button",{type:"button",onClick:()=>o(d),className:`w-8 h-8 rounded-full ${d} transition-all ${i===d?"ring-2 ring-offset-2 ring-slate-400 dark:ring-slate-500 scale-110":"hover:scale-105 opacity-80 hover:opacity-100"}`},d))})]}),h.jsx("div",{className:"pt-2",children:h.jsxs("button",{type:"submit",disabled:!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium py-3 rounded-xl flex items-center justify-center gap-2 transition-all active:scale-[0.98]",children:[h.jsx(lg,{className:"w-5 h-5"}),"Create Subject"]})})]})]})})}const G$={start_strong:{icon:Vi,label:"Start Strong",description:"Completed your first topic!",color:"text-emerald-500 bg-emerald-100 dark:bg-emerald-900/30"},streak_master:{icon:_p,label:"Streak Master",description:"Studied for 3 days in a row.",color:"text-orange-500 bg-orange-100 dark:bg-orange-900/30"},subject_conqueror:{icon:UD,label:"Subject Conqueror",description:"Completed 100% of a subject.",color:"text-purple-500 bg-purple-100 dark:bg-purple-900/30"},night_owl:{icon:og,label:"Night Owl",description:"Completed a session late at night (10PM - 4AM).",color:"text-blue-500 bg-blue-100 dark:bg-blue-900/30"}};function H$({type:n,isLocked:e=!1,dateEarned:t}){const s=G$[n],i=s.icon,[o,l]=C.useState(!1);return h.jsxs("div",{className:"relative flex flex-col items-center gap-2 group cursor-pointer",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:()=>l(!o),children:[h.jsx(ve.div,{whileHover:{scale:1.05},className:`w-16 h-16 rounded-full flex items-center justify-center shadow-sm border-2 transition-colors ${e?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 opacity-60 grayscale":`${s.color} border-transparent`}`,children:h.jsx(i,{className:`w-8 h-8 ${e?"text-slate-400":""}`})}),h.jsx("span",{className:`text-xs font-medium text-center max-w-[5rem] ${e?"text-slate-400":"text-slate-700 dark:text-slate-300"}`,children:s.label}),o&&h.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"absolute bottom-full mb-2 bg-slate-800 dark:bg-slate-700 text-white text-xs p-2 rounded-lg shadow-xl whitespace-nowrap z-50 pointer-events-none",children:[h.jsx("p",{className:"font-semibold",children:s.label}),h.jsx("p",{className:"text-slate-300",children:s.description}),!e&&t&&h.jsxs("p",{className:"text-slate-400 mt-1 text-[10px]",children:["Earned: ",new Date(t).toLocaleDateString()]})]})]})}function $$(){const{updateProfile:n}=Lt(),[e,t]=C.useState(""),[s,i]=C.useState(""),o=l=>{if(l.preventDefault(),!e.trim()){alert("Please enter your name");return}n({name:e.trim(),grade:s.trim()||"Not specified"})};return h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:h.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[h.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 text-white",children:[h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to TrackEd! "}),h.jsx("p",{className:"text-blue-100 text-sm",children:"Let's get started by setting up your profile"})]}),h.jsxs("form",{onSubmit:o,className:"p-6 space-y-5",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[h.jsx(Wb,{className:"w-4 h-4"}),"Your Name ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"text",value:e,onChange:l=>t(l.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"Enter your name",autoFocus:!0})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[h.jsx(FD,{className:"w-4 h-4"}),"Class / Grade"]}),h.jsx("input",{type:"text",value:s,onChange:l=>i(l.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"e.g., HSC 2026, SSC 2024"})]}),h.jsx("div",{className:"pt-2",children:h.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-3 rounded-xl transition-all shadow-lg shadow-blue-500/25 active:scale-[0.98]",children:"Get Started"})}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:"You can update these details anytime in Settings"})]})]})})}function K$(){const{userProfile:n,updateProfile:e}=Lt(),[t,s]=C.useState(!1),[i,o]=C.useState(n.dailyGoal?n.dailyGoal/3600:2),l=n.dailyGoal||7200,d=n.todayStudyTime||0,f=Math.min(100,Math.round(d/l*100)),m=()=>{e({dailyGoal:i*3600}),s(!1)};return h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-slate-100 dark:border-slate-700 shadow-sm md:h-full flex flex-col relative overflow-hidden",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2 z-10",children:[h.jsxs("h3",{className:"text-slate-500 dark:text-slate-400 font-medium flex items-center gap-2 text-sm",children:[h.jsx(HD,{className:"w-4 h-4"}),"Daily Goal"]}),t?h.jsxs("button",{onClick:m,className:"text-xs text-green-600 dark:text-green-400 hover:underline flex items-center gap-1 font-bold",children:["Save ",h.jsx(BD,{className:"w-3 h-3"})]}):h.jsxs("button",{onClick:()=>s(!0),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:["Edit ",h.jsx(JH,{className:"w-3 h-3"})]})]}),h.jsxs("div",{className:"flex-1 flex items-center justify-between z-10 mt-2",children:[h.jsxs("div",{className:"space-y-1",children:[t?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",min:"0.5",max:"24",step:"0.5",value:i,onChange:y=>o(parseFloat(y.target.value)),className:"w-16 p-1 border rounded text-lg font-bold bg-slate-50 dark:bg-slate-700 dark:text-white",autoFocus:!0}),h.jsx("span",{className:"text-slate-500",children:"hrs"})]}):h.jsxs("div",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:[Math.floor(d/3600),h.jsx("span",{className:"text-lg text-slate-400 font-normal",children:"h"})," ",Math.floor(d%3600/60),h.jsx("span",{className:"text-lg text-slate-400 font-normal",children:"m"})]}),h.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["of ",Math.floor(l/3600),"h goal"]})]}),h.jsxs("div",{className:"relative w-20 h-20 flex-shrink-0",children:[h.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[h.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-slate-100 dark:text-slate-700"}),h.jsx(ve.circle,{initial:{strokeDashoffset:226},animate:{strokeDashoffset:226-226*f/100},transition:{duration:1,ease:"easeOut"},cx:"40",cy:"40",r:"36",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:"226",strokeLinecap:"round",className:`${f>=100?"text-green-500":"text-blue-500"}`})]}),h.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-slate-700 dark:text-slate-300",children:[f,"%"]})]})]}),f>=100&&h.jsxs(ve.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 bg-green-50/90 dark:bg-green-900/90 flex items-center justify-center flex-col z-20 backdrop-blur-sm",children:[h.jsx(lr,{className:"w-10 h-10 text-green-600 dark:text-green-400 mb-2"}),h.jsx("span",{className:"text-green-800 dark:text-green-100 font-bold",children:"Goal Reached!"})]})]})}function Q$(){const{userProfile:n,subjects:e,toggleScheduledSession:t,saveStudySession:s}=Lt(),i=tu(),o=new Date().toISOString().split("T")[0],l=(n.scheduledSessions||[]).filter(v=>!v.isCompleted&&v.date>=o).sort((v,T)=>v.date!==T.date?v.date.localeCompare(T.date):(v.time||"").localeCompare(T.time||""))[0];if(!l)return h.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-3xl p-5 border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col items-center justify-center text-center gap-3 h-full",children:[h.jsx("div",{className:"w-12 h-12 bg-white dark:bg-slate-800 rounded-2xl flex items-center justify-center shadow-sm",children:h.jsx(Nh,{className:"w-6 h-6 text-slate-300"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 text-sm",children:"No Active Path"}),h.jsx("p",{className:"text-[10px] text-slate-500 mt-1 max-w-[150px]",children:"Generate an AI Path in the Planner to get daily targets."})]}),h.jsxs("button",{onClick:()=>i("/planner"),className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 hover:underline flex items-center gap-1",children:["Go to Planner ",h.jsx(dw,{className:"w-3 h-3"})]})]});const d=e.find(v=>v.id===l.subjectId),f=d?.chapters.find(v=>v.id===l.chapterId),m=f?.topics.find(v=>v.id===l.topicId),y=l.date===o,b=async()=>{confirm(`Mark "${m?.name||d?.name}" as completed?`)&&(await s(l.durationMinutes*60,l.subjectId),t(l.id))};return h.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-800 rounded-3xl p-5 border border-slate-100 dark:border-slate-700 shadow-xl shadow-indigo-500/5 flex flex-col relative overflow-hidden h-full group",children:[h.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-indigo-500/5 rounded-full blur-2xl group-hover:bg-indigo-500/10 transition-colors"}),h.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"p-1.5 bg-indigo-500 rounded-lg shadow-lg shadow-indigo-500/20",children:h.jsx(Nh,{className:"w-4 h-4 text-white fill-white"})}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-600 dark:text-indigo-400",children:y?"Target for Today":"Next Up"})]}),y&&h.jsx("div",{className:"px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 text-[10px] font-bold rounded-lg animate-pulse",children:"Priority"})]}),h.jsxs("div",{className:"space-y-4 relative z-10 flex-1 flex flex-col justify-center",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-bold text-slate-400 uppercase tracking-tighter mb-1 line-clamp-1",children:d?.name||"Unknown"}),h.jsx("h3",{className:"text-xl font-black text-slate-800 dark:text-white leading-tight line-clamp-2",children:m?.name||f?.name||"General Study"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-slate-500 dark:text-slate-400",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(ig,{className:"w-3.5 h-3.5 text-indigo-500"}),h.jsx("span",{className:"text-xs font-bold",children:l.time})]}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Fn,{className:"w-3.5 h-3.5 text-indigo-500"}),h.jsxs("span",{className:"text-xs font-bold",children:[l.durationMinutes,"m"]})]})]})]}),h.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-50 dark:border-slate-700 flex gap-2 relative z-10",children:[h.jsxs("button",{onClick:b,className:"flex-1 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xs font-bold transition-all flex items-center justify-center gap-2",children:[h.jsx(Vi,{className:"w-3.5 h-3.5"}),"Done"]}),h.jsx("button",{onClick:()=>i("/timer"),className:"px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition-all font-mono",children:"Start"})]})]})}const Vd=[{text:"   ,   ",author:" -: "},{text:",   !     ",author:" : "},{text:",           ?",author:" -: "},{text:"     ",author:" -: "},{text:"      ",author:" : "},{text:"       ",author:" -: "},{text:"    ",author:" -: "},{text:"       ",author:" -: "},{text:" !       ",author:" -: "},{text:"      ",author:" -: "},{text:"       ",author:" -: "},{text:"  !           ",author:" : -"},{text:"     ?",author:" -: "},{text:"   ",author:" : "},{text:"      ",author:"  : "},{text:"     ",author:" : "},{text:"  ",author:" : "},{text:"  ",author:"   "},{text:"    ",author:" : "},{text:"  ",author:" : "},{text:"      ",author:" "},{text:"   ",author:" : "},{text:"       ",author:" : "},{text:"     ",author:" "},{text:"    ",author:" "},{text:"  -    ",author:""},{text:"     ",author:"   "},{text:"     ",author:" "}];function Y$(){const[n,e]=C.useState(()=>Math.floor(Math.random()*Vd.length)),[t,s]=C.useState(!1),i=()=>{s(!0),setTimeout(()=>{let o;do o=Math.floor(Math.random()*Vd.length);while(o===n&&Vd.length>1);e(o),s(!1)},300)};return h.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-6 text-white relative overflow-hidden shadow-lg shadow-indigo-500/20 md:h-full flex flex-col justify-between",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4 relative z-10",children:[h.jsx("div",{className:"p-2 bg-white/20 backdrop-blur-sm rounded-lg",children:h.jsx(r$,{className:"w-5 h-5 text-white"})}),h.jsx("button",{onClick:i,disabled:t,className:"p-2.5 text-white/70 hover:text-white hover:bg-white/20 rounded-full transition-all active:scale-95 disabled:opacity-50",title:"Get New Quote",children:h.jsx(ve.div,{animate:t?{rotate:360}:{rotate:0},transition:{duration:.3,ease:"easeInOut"},children:h.jsx(a$,{className:"w-5 h-5"})})})]}),h.jsx("div",{className:"relative z-10 flex-1 flex flex-col justify-center",children:h.jsx(ns,{mode:"wait",children:h.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[h.jsx("p",{className:"text-xl md:text-2xl font-bold mb-4 leading-relaxed tracking-wide",children:Vd[n].text}),h.jsxs("p",{className:"text-indigo-200 text-sm font-medium",children:[" ",Vd[n].author]})]},n)})}),h.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/20 rounded-full blur-2xl"})]})}function X$(){const{user:n}=Pi(),[e,t]=C.useState([]),[s,i]=C.useState(!0);return C.useEffect(()=>{(async()=>{try{const l=xi(ps(qt,"users"),Wh("userProfile.syllabusCompletionPercentage","desc"),xu(10)),d=await kh(l),f=[];d.forEach(m=>{const y=m.data();y.userProfile&&f.push({uid:m.id,name:y.userProfile.name||"Anonymous",percentage:y.userProfile.syllabusCompletionPercentage||0,grade:y.userProfile.grade||"Student"})}),t(f)}catch(l){console.error("Error fetching leaderboard:",l)}finally{i(!1)}})()},[]),s?h.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 border border-slate-100 dark:border-slate-700 shadow-sm h-full flex items-center justify-center min-h-[300px]",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 border border-slate-100 dark:border-slate-700 shadow-sm h-full flex flex-col",children:[h.jsxs("h3",{className:"text-slate-800 dark:text-white font-bold text-lg mb-4 flex items-center gap-2",children:[h.jsx(lr,{className:"w-5 h-5 text-amber-500"}),"Leaderboard"]}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700",children:e.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center text-center text-slate-500 dark:text-slate-400 py-8 h-full",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-700/50 rounded-full flex items-center justify-center mb-3",children:h.jsx(lr,{className:"w-8 h-8 text-slate-300 dark:text-slate-500 opacity-50"})}),h.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-300",children:"No champions yet!"}),h.jsx("p",{className:"text-xs max-w-[150px] mt-1",children:"Complete chapters to climb the ranks."})]}):e.map((o,l)=>{const d=n?.uid===o.uid;let f=null;return l===0?f=h.jsx(Mx,{className:"w-5 h-5 text-yellow-500"}):l===1?f=h.jsx(Mx,{className:"w-5 h-5 text-slate-400"}):l===2?f=h.jsx(Mx,{className:"w-5 h-5 text-amber-700"}):f=h.jsx("span",{className:"text-sm font-bold text-slate-400 w-5 text-center",children:l+1}),h.jsxs(ve.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:l*.1},className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${d?"bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-100 dark:border-indigo-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[h.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-8",children:f}),h.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-xs font-bold text-slate-600 dark:text-slate-300",children:o.name[0].toUpperCase()}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:`text-sm font-medium truncate ${d?"text-indigo-700 dark:text-indigo-300":"text-slate-700 dark:text-slate-200"}`,children:[o.name," ",d&&"(You)"]}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:o.grade})]}),h.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm",children:[o.percentage,"%"]})]},o.uid)})})]})}function XD({className:n="",limit:e}){const{subjects:t,editSubject:s,majorExams:i,addMajorExam:o,editMajorExam:l,deleteMajorExam:d}=Lt(),[f,m]=C.useState("subjects"),[y,b]=C.useState(null),[v,T]=C.useState(null),[k,I]=C.useState(!1),[j,P]=C.useState(!1),[L,z]=C.useState({name:"",date:new Date().toISOString().split("T")[0],color:"bg-indigo-500"}),$=(t||[]).filter(V=>{if(!V.examDate)return!1;const Pe=new Date(V.examDate);return!isNaN(Pe.getTime())}).sort((V,Pe)=>new Date(V.examDate).getTime()-new Date(Pe.examDate).getTime()),te=[...i||[]].sort((V,Pe)=>new Date(V.date).getTime()-new Date(Pe.date).getTime()),ce=(t||[]).filter(V=>!V.examDate),D=f==="subjects"?e?$.slice(0,e):$:e?te.slice(0,e):te,S=V=>{const Pe=new Date;Pe.setHours(0,0,0,0);const Ve=new Date(V);if(isNaN(Ve.getTime()))return null;Ve.setHours(0,0,0,0);const F=Ve.getTime()-Pe.getTime();return Math.ceil(F/(1e3*60*60*24))},A=V=>{b(V),I(!1)},O=(V,Pe)=>{Pe.stopPropagation(),window.confirm("Remove this exam date?")&&s(V,{examDate:void 0})},U=(V,Pe)=>{Pe.stopPropagation(),window.confirm("Delete this major exam schedule?")&&d(V)},q=V=>{V.preventDefault(),v?(l(v.id,L),T(null)):o(L),P(!1),z({name:"",date:new Date().toISOString().split("T")[0],color:"bg-indigo-500"})};return h.jsxs("div",{className:`space-y-4 ${n}`,children:[h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(vp,{className:"w-5 h-5 text-indigo-500"}),"Upcoming Exams"]}),h.jsx("button",{onClick:()=>{f==="subjects"?I(!0):P(!0)},className:"p-1.5 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:f==="subjects"?"Add Subject Exam":"Add Major Exam",children:h.jsx(_i,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl",children:[h.jsxs("button",{onClick:()=>m("subjects"),className:`flex-1 flex items-center justify-center gap-2 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${f==="subjects"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500"}`,children:[h.jsx(UH,{className:"w-3 h-3"}),"Subject wise"]}),h.jsxs("button",{onClick:()=>m("major"),className:`flex-1 flex items-center justify-center gap-2 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${f==="major"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500"}`,children:[h.jsx(b2,{className:"w-3 h-3"}),"Exam wise"]})]})]}),D.length===0?h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-dashed border-slate-200 dark:border-slate-700 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-slate-50 dark:bg-slate-900 rounded-2xl flex items-center justify-center mx-auto mb-3",children:h.jsx(vp,{className:"w-6 h-6 text-slate-300"})}),h.jsx("h3",{className:"text-slate-800 dark:text-white font-bold text-sm mb-1",children:f==="subjects"?"No Subject Exams":"No Major Exams"}),h.jsx("p",{className:"text-slate-500 text-[10px] leading-tight mb-4 px-4",children:f==="subjects"?"Set exam dates for individual subjects like Physics or History.":"Track major schedules like Half Yearly, Yearly, or HSC exams."}),h.jsxs("button",{onClick:()=>{f==="subjects"?I(!0):P(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-xs font-black uppercase tracking-widest rounded-xl hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors shadow-sm",children:[h.jsx(_i,{className:"w-3.5 h-3.5"}),"Add ",f==="subjects"?"Subject":"Major"," Exam"]})]}):h.jsx("div",{className:"grid gap-3",children:D.map(V=>{const Pe=f==="subjects"?V.examDate:V.date,Ve=S(Pe),F=Ve!==null&&Ve<=7&&Ve>=0,ie=Ve!==null&&Ve<0,ne=isNaN(new Date(Pe).getTime())?"Invalid Date":new Date(Pe).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return h.jsxs(ve.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"group relative bg-white dark:bg-slate-900/50 rounded-2xl p-4 border border-slate-100 dark:border-slate-800 hover:border-indigo-200 dark:hover:border-indigo-900/50 transition-all flex items-center gap-4 overflow-hidden",children:[h.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${ie?"bg-slate-400":F?"bg-red-500":"bg-indigo-500"}`}),h.jsx("div",{className:`w-12 h-12 rounded-xl ${V.color||"bg-slate-500"} flex items-center justify-center text-white shadow-lg shadow-black/5 flex-shrink-0`,children:f==="subjects"?h.jsx(Fn,{className:"w-5 h-5"}):h.jsx(b2,{className:"w-6 h-6"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-200 text-base truncate tracking-tight",children:V.name}),h.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:()=>{f==="subjects"?b(V):(T(V),z({name:V.name,date:V.date,color:V.color}),P(!0))},className:"p-1.5 text-slate-400 hover:text-indigo-500 dark:hover:text-indigo-400 bg-slate-50 dark:bg-slate-800 rounded-lg transition-colors",children:h.jsx(tf,{className:"w-3.5 h-3.5"})}),h.jsx("button",{onClick:Ee=>f==="subjects"?O(V.id,Ee):U(V.id,Ee),className:"p-1.5 text-slate-400 hover:text-rose-500 dark:hover:text-rose-400 bg-slate-50 dark:bg-slate-800 rounded-lg transition-colors",children:h.jsx(nf,{className:"w-3.5 h-3.5"})})]})]}),h.jsx("p",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest mt-0.5",children:ne})]}),h.jsxs("div",{className:`text-right flex-shrink-0 min-w-[50px] ${ie?"text-slate-400":F?"text-red-500":"text-indigo-500"}`,children:[h.jsx("div",{className:"text-xl font-black leading-none",children:ie||Ve===null?"":Ve}),h.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest mt-1",children:ie?"Past":"Days"})]}),F&&!ie&&h.jsx("div",{className:"absolute top-2 right-2",children:h.jsx(hw,{className:"w-4 h-4 text-red-500 animate-pulse"})})]},V.id)})}),h.jsx(ns,{children:k&&h.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/40 backdrop-blur-[2px]",children:h.jsxs(ve.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-sm shadow-2xl overflow-hidden border border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{className:"p-4 border-b border-slate-50 dark:border-slate-700 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Schedule Subject Exam"}),h.jsx("button",{onClick:()=>I(!1),className:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:h.jsx(Vs,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"p-4 max-h-[60vh] overflow-y-auto custom-scrollbar text-left",children:[h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4 px-1 font-medium",children:"Select a subject to set its exam date."}),h.jsx("div",{className:"grid gap-2",children:ce.length>0?ce.map(V=>h.jsxs("button",{onClick:()=>A(V),className:"flex items-center gap-3 p-3 rounded-2xl hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all group text-left border border-transparent hover:border-slate-100 dark:hover:border-slate-600",children:[h.jsx("div",{className:`w-10 h-10 rounded-xl ${V.color||"bg-slate-500"} flex items-center justify-center text-white shadow-sm flex-shrink-0`,children:h.jsx(Fn,{className:"w-5 h-5"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm truncate",children:V.name}),h.jsxs("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest p-0.5",children:[V.chapters?.length||0," Chapters"]})]}),h.jsx(_i,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-500 transition-colors"})]},V.id)):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"w-12 h-12 bg-slate-50 dark:bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3",children:h.jsx(vp,{className:"w-6 h-6 text-slate-300"})}),h.jsx("p",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tighter",children:"All subjects have exams!"})]})})]})]})})}),h.jsx(ns,{children:j&&h.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/40 backdrop-blur-[2px]",children:h.jsxs(ve.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-sm shadow-2xl overflow-hidden border border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{className:"p-4 border-b border-slate-50 dark:border-slate-700 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:v?"Edit Major Exam":"Add Major Exam"}),h.jsx("button",{onClick:()=>{P(!1),T(null),z({name:"",date:new Date().toISOString().split("T")[0],color:"bg-indigo-500"})},className:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:h.jsx(Vs,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:q,className:"p-6 space-y-5 text-left",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Exam Name"}),h.jsx("input",{required:!0,type:"text",placeholder:"e.g. Year Final Exam",value:L.name,onChange:V=>z({...L,name:V.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-xl py-3 px-4 text-sm font-bold focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all placeholder:text-slate-300 dark:placeholder:text-slate-600"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Date"}),h.jsx("input",{required:!0,type:"date",value:L.date,onChange:V=>z({...L,date:V.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-xl py-3 px-4 text-sm font-bold focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Theme Color"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:["bg-indigo-500","bg-emerald-500","bg-amber-500","bg-rose-500","bg-purple-500","bg-blue-500"].map(V=>h.jsx("button",{type:"button",onClick:()=>z({...L,color:V}),className:`w-8 h-8 rounded-full ${V} transition-all ${L.color===V?"ring-4 ring-offset-2 ring-indigo-500 dark:ring-offset-slate-800":"opacity-60 hover:opacity-100"}`},V))})]}),h.jsx("button",{type:"submit",className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-black uppercase tracking-widest text-[11px] rounded-2xl shadow-xl shadow-indigo-500/20 transition-all hover:scale-[1.02] active:scale-[0.98] mt-2",children:v?"Update Schedule":"Launch Schedule"})]})]})})}),y&&h.jsx(mw,{subject:y,onClose:()=>b(null)})]})}const k2={hidden:{opacity:0,y:10},show:{opacity:1,y:0,transition:{duration:.4,when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,y:-10}},Ux={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:12}}};function W$(){const{userProfile:n,subjects:e}=Lt(),[t,s]=C.useState(!1),i=n.name==="Student",o=e.reduce((m,y)=>m+y.chapters.length,0),l=e.reduce((m,y)=>m+y.chapters.filter(b=>b.isCompleted).length,0);let d=0;e.forEach(m=>{m.chapters.forEach(y=>{y.topics&&y.topics.length>0?d+=y.topics.filter(b=>b.isCompleted).length/y.topics.length*100:d+=y.isCompleted?100:0})});const f=o===0?0:Math.round(d/o);return h.jsxs(ve.div,{className:"space-y-6 md:space-y-8",variants:k2,initial:"hidden",animate:"show",exit:"exit",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[h.jsxs("div",{children:[h.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-slate-800 dark:text-white transition-colors tracking-tight",children:["Hello, ",h.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-teal-500 dark:from-blue-400 dark:to-teal-400 bg-clip-text text-transparent",children:n.name}),h.jsx("span",{className:"inline-block animate-wave ml-2",children:""})]}),h.jsxs("p",{className:"text-base text-slate-500 dark:text-slate-400 mt-2 transition-colors",children:[h.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300 px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded-md mr-2",children:n.grade}),"Ready to crush your goals today?"]})]}),h.jsxs(ve.button,{id:"add-subject-btn",whileHover:{scale:1.05,boxShadow:"0 10px 25px -5px rgba(37, 99, 235, 0.4)"},whileTap:{scale:.95},onClick:()=>s(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3.5 rounded-2xl font-semibold flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30 transition-all text-sm md:text-base w-full md:w-auto",children:[h.jsx(_i,{className:"w-5 h-5"}),"New Subject"]})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-12 md:gap-6 auto-rows-min",children:[h.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-4 md:gap-6 order-1",children:[h.jsx(K$,{}),h.jsx(Q$,{})]}),h.jsx("div",{className:"md:col-span-full lg:col-span-4 h-full min-h-[400px] order-3 lg:order-2",children:h.jsx(X$,{})}),h.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-4 md:gap-6 order-2 lg:order-3",children:[h.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl p-6 border border-slate-100 dark:border-slate-700/50 shadow-xl shadow-blue-500/5 relative overflow-hidden group transition-all hover:shadow-blue-500/10",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-transparent -translate-x-full group-hover:animate-shimmer pointer-events-none"}),h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 group-hover:opacity-20 transition-all duration-500",children:h.jsx(lH,{className:"w-24 h-24 text-blue-500"})}),h.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between relative z-10 gap-6",children:[h.jsxs("div",{className:"flex-1 w-full space-y-5",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-xl shadow-inner",children:h.jsx(lr,{className:"w-5 h-5 text-amber-500"})}),h.jsx("h3",{className:"text-slate-800 dark:text-white font-bold text-lg tracking-tight",children:"Syllabus Status"})]}),h.jsxs("div",{className:"space-y-5",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-end justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-400 dark:text-slate-500",children:"Chapters"}),h.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[l," ",h.jsxs("span",{className:"text-slate-400 font-medium",children:["/ ",o]})]})]}),h.jsxs("span",{className:"text-sm font-black text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/40 px-2 py-0.5 rounded-lg border border-blue-100 dark:border-blue-800/50",children:[Math.round(l/(o||1)*100),"%"]})]}),h.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-700/50 rounded-full overflow-hidden p-0.5 ring-1 ring-slate-200 dark:ring-slate-700",children:h.jsx(ve.div,{initial:{width:0},animate:{width:`${l/(o||1)*100}%`},transition:{duration:1.5,ease:"circOut"},className:"h-full bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full shadow-lg shadow-blue-500/20"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-end justify-between",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-400 dark:text-slate-500",children:"Total Progress"}),h.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Completion Rate"})]}),h.jsxs("span",{className:"text-sm font-black text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/40 px-2 py-0.5 rounded-lg border border-emerald-100 dark:border-emerald-800/50",children:[f,"%"]})]}),h.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-700/50 rounded-full overflow-hidden p-0.5 ring-1 ring-slate-200 dark:ring-slate-700",children:h.jsx(ve.div,{initial:{width:0},animate:{width:`${f}%`},transition:{duration:1.5,ease:"circOut",delay:.2},className:"h-full bg-gradient-to-r from-emerald-400 to-teal-500 rounded-full shadow-lg shadow-emerald-500/20"})})]})]})]}),h.jsxs("div",{className:"relative w-32 h-32 md:w-40 md:h-40 flex-shrink-0 group/circle",children:[h.jsx("div",{className:"absolute inset-0 bg-blue-500/5 dark:bg-blue-500/10 rounded-full blur-2xl group-hover/circle:bg-blue-500/20 transition-all duration-700"}),h.jsxs("svg",{className:"w-full h-full transform -rotate-90 relative z-10",viewBox:"0 0 100 100",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#60A5FA"}),h.jsx("stop",{offset:"100%",stopColor:"#3B82F6"})]})}),h.jsx("circle",{className:"text-slate-100 dark:text-slate-700/50",strokeWidth:"8",stroke:"currentColor",fill:"transparent",r:"38",cx:"50",cy:"50"}),h.jsx(ve.circle,{stroke:"url(#progressGradient)",strokeWidth:"8",strokeDasharray:238.76,strokeDashoffset:238.76,strokeLinecap:"round",fill:"transparent",r:"38",cx:"50",cy:"50",initial:{strokeDashoffset:238.76},animate:{strokeDashoffset:238.76-238.76*f/100},transition:{duration:2,ease:"circOut"}})]}),h.jsxs("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center z-20",children:[h.jsxs(ve.span,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",damping:10,stiffness:100,delay:.5},className:"text-3xl md:text-4xl font-black text-slate-800 dark:text-white",children:[f,h.jsx("span",{className:"text-sm md:text-lg text-blue-500",children:"%"})]}),h.jsx("span",{className:"text-[8px] md:text-[10px] uppercase font-black tracking-tighter text-slate-400 dark:text-slate-500",children:"Done"})]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4 md:gap-6 flex-1",children:[h.jsx(XD,{limit:3,className:"h-full"}),h.jsx(Y$,{})]})]})]}),n.earnedBadges&&n.earnedBadges.length>0&&h.jsxs(ve.div,{variants:Ux,className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-slate-100 dark:border-slate-700 shadow-sm transition-colors",children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[h.jsx(lr,{className:"w-5 h-5 text-yellow-500"}),"Recent Achievements"]}),h.jsx("div",{className:"flex flex-wrap gap-4",children:n.earnedBadges.map((m,y)=>h.jsx(H$,{type:m.type,dateEarned:m.earnedAt},`${m.type}-${y}`))})]}),h.jsxs("div",{children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2 transition-colors",children:["Your Subjects",h.jsx("span",{className:"text-sm font-normal text-slate-400 dark:text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded-full",children:e.length})]}),e.length>0?h.jsxs(ve.div,{variants:k2,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.map((m,y)=>h.jsx(ve.div,{variants:Ux,children:h.jsx(F$,{subject:m,index:y})},m.id)),h.jsxs(ve.button,{variants:Ux,whileHover:{scale:1.02,backgroundColor:"rgba(239, 246, 255, 0.5)"},whileTap:{scale:.98},onClick:()=>s(!0),className:"group border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-6 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500 hover:border-blue-400 dark:hover:border-blue-500 hover:text-blue-600 dark:hover:text-blue-400 transition-all cursor-pointer h-full min-h-[180px] w-full",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/20 flex items-center justify-center mb-3 transition-colors",children:h.jsx(_i,{className:"w-6 h-6"})}),h.jsx("span",{className:"font-medium",children:"Add Another Subject"})]})]}):h.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 bg-white dark:bg-slate-800 rounded-2xl border border-dashed border-slate-200 dark:border-slate-700 transition-colors",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(zD,{className:"w-8 h-8 text-slate-300 dark:text-slate-500"})}),h.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"No subjects yet"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mx-auto mb-6",children:"Start by adding the subjects you want to track to organize your study plan."}),h.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-xl font-medium transition-all",children:"Add Your First Subject"})]})]}),t&&h.jsx(q$,{onClose:()=>s(!1)}),i&&h.jsx($$,{})]})}function J$({subjectId:n,onClose:e}){const{addChapter:t}=Lt(),[s,i]=C.useState(""),o=l=>{l.preventDefault(),s.trim()&&(t(n,s.trim()),i(""))};return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 transition-colors",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-100 dark:border-slate-700",children:[h.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2 transition-colors",children:[h.jsx(zD,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Add Chapters"]}),h.jsx("button",{onClick:e,className:"p-2 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:h.jsx(Vs,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 transition-colors",children:"Chapter Name / Topic"}),h.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 transition-colors",children:"Press Enter to add & continue"})]}),h.jsx("input",{autoFocus:!0,type:"text",value:s,onChange:l=>i(l.target.value),placeholder:"e.g. Newton's Laws",className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500"})]}),h.jsxs("div",{className:"flex gap-3 pt-2",children:[h.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 font-medium rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Done"}),h.jsxs("button",{type:"submit",disabled:!s.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium py-3 rounded-xl flex items-center justify-center gap-2 transition-all active:scale-[0.98]",children:[h.jsx(_i,{className:"w-5 h-5"}),"Add"]})]})]})]})})}const Z$={initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}};function Kg({children:n,className:e=""}){return h.jsx(ve.div,{variants:Z$,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3,ease:"easeOut"},className:e,children:n})}const WD=C.createContext(void 0);function eK({children:n}){const[e,t]=C.useState(()=>typeof window<"u"?localStorage.getItem("sound-muted")==="true":!1),s=C.useRef(null);C.useEffect(()=>{localStorage.setItem("sound-muted",String(e))},[e]);const i=()=>{s.current||(s.current=new(window.AudioContext||window.webkitAudioContext)),s.current.state==="suspended"&&s.current.resume()},o=m=>{if(e)return;s.current||(s.current=new(window.AudioContext||window.webkitAudioContext));const y=s.current,b=y.createOscillator(),v=y.createGain();b.connect(v),v.connect(y.destination);const T=y.currentTime;switch(m){case"pop":b.type="sine",b.frequency.setValueAtTime(800,T),b.frequency.exponentialRampToValueAtTime(1200,T+.1),v.gain.setValueAtTime(.1,T),v.gain.exponentialRampToValueAtTime(.01,T+.1),b.start(T),b.stop(T+.1);break;case"success":l(y,523.25,T,.1,"sine"),l(y,659.25,T+.1,.1,"sine"),l(y,783.99,T+.2,.2,"sine");break;case"complete":b.type="triangle",b.frequency.setValueAtTime(440,T),b.frequency.linearRampToValueAtTime(880,T+.5),v.gain.setValueAtTime(.1,T),v.gain.linearRampToValueAtTime(.3,T+.2),v.gain.linearRampToValueAtTime(0,T+1.5),b.start(T),b.stop(T+1.5);break;case"click":b.type="square",b.frequency.setValueAtTime(200,T),v.gain.setValueAtTime(.05,T),v.gain.exponentialRampToValueAtTime(.01,T+.05),b.start(T),b.stop(T+.05);break;case"error":b.type="sawtooth",b.frequency.setValueAtTime(150,T),b.frequency.linearRampToValueAtTime(100,T+.2),v.gain.setValueAtTime(.1,T),v.gain.linearRampToValueAtTime(0,T+.3),b.start(T),b.stop(T+.3);break}},l=(m,y,b,v,T="sine")=>{const k=m.createOscillator(),I=m.createGain();k.connect(I),I.connect(m.destination),k.type=T,k.frequency.setValueAtTime(y,b),I.gain.setValueAtTime(.1,b),I.gain.exponentialRampToValueAtTime(.01,b+v),k.start(b),k.stop(b+v)},d=m=>{s.current?.state==="suspended"&&s.current.resume().catch(()=>{}),o(m)},f=()=>{t(m=>!m),e&&i()};return h.jsx(WD.Provider,{value:{isMuted:e,toggleMute:f,playSound:d},children:n})}function pw(){const n=C.useContext(WD);if(n===void 0)throw new Error("useSound must be used within a SoundProvider");return n}function tK({subjectId:n,chapterId:e,topicId:t,currentName:s,onClose:i}){const{editTopic:o}=Lt(),[l,d]=C.useState(s);C.useEffect(()=>{d(s)},[s]);const f=m=>{m.preventDefault(),l.trim()&&(o(n,e,t,l.trim()),i())};return h.jsx(ns,{children:h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:h.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-sm shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50",children:[h.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Edit Topic"}),h.jsx("button",{onClick:i,className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:h.jsx(Vs,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Topic Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(qD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"text",value:l,onChange:m=>d(m.target.value),placeholder:"e.g. Algebra Basics",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-10 pr-4 text-slate-800 dark:text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",autoFocus:!0})]})]}),h.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[h.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 text-slate-600 dark:text-slate-400 font-medium hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!l.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Save Changes"})]})]})]})})})}function nK({subjectId:n,chapterId:e,topic:t}){const{toggleTopic:s,deleteTopic:i}=Lt(),{playSound:o}=pw(),[l,d]=C.useState(!1);return h.jsxs(h.Fragment,{children:[h.jsxs(ve.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex items-center gap-3 py-2 pl-4 pr-2 group/topic hover:bg-slate-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors ml-8 border-l border-slate-100 dark:border-slate-700",children:[h.jsx(ve.button,{whileTap:{scale:.8},onClick:()=>{s(n,e,t.id),t.isCompleted||o("pop")},className:`flex-shrink-0 w-4 h-4 rounded-full border flex items-center justify-center transition-colors ${t.isCompleted?"border-emerald-500 bg-emerald-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent hover:border-slate-400 dark:hover:border-slate-400"}`,children:h.jsx(Vi,{className:"w-3 h-3"})}),h.jsx("span",{className:`flex-1 text-sm font-google-sans transition-all ${t.isCompleted?"text-slate-400 line-through":"text-slate-600 dark:text-slate-300"}`,children:t.name}),h.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover/topic:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:()=>d(!0),className:"p-1.5 text-slate-300 hover:text-amber-500 dark:text-slate-600 dark:hover:text-amber-400 transition-all",title:"Edit Topic",children:h.jsx(tf,{className:"w-3.5 h-3.5"})}),h.jsx("button",{onClick:()=>confirm("Delete this topic?")&&i(n,e,t.id),className:"p-1.5 text-slate-300 hover:text-red-500 dark:text-slate-600 dark:hover:text-red-400 transition-all",title:"Delete Topic",children:h.jsx(nf,{className:"w-3.5 h-3.5"})})]})]}),l&&h.jsx(tK,{subjectId:n,chapterId:e,topicId:t.id,currentName:t.name,onClose:()=>d(!1)})]})}function sK({subjectId:n,chapterId:e,currentName:t,onClose:s}){const{editChapter:i}=Lt(),[o,l]=C.useState(t);C.useEffect(()=>{l(t)},[t]);const d=f=>{f.preventDefault(),o.trim()&&(i(n,e,o.trim()),s())};return h.jsx(ns,{children:h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:h.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50",children:[h.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Edit Chapter"}),h.jsx("button",{onClick:s,className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:h.jsx(Vs,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Chapter Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(qD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"text",value:o,onChange:f=>l(f.target.value),placeholder:"e.g. Differentiation",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-10 pr-4 text-slate-800 dark:text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",autoFocus:!0})]})]}),h.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[h.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-slate-600 dark:text-slate-400 font-medium hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!o.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Save Changes"})]})]})]})})})}function rK({subjectId:n,chapter:e,isExpanded:t,onToggle:s}){const{deleteChapter:i,addTopic:o}=Lt(),[l,d]=C.useState(!1),[f,m]=C.useState(!1),y=b=>{b.preventDefault();const v=b.target.elements.namedItem("topicName");v.value.trim()&&(o(n,e.id,v.value.trim()),v.value="",d(!1))};return h.jsxs("div",{className:"group transition-colors",children:[h.jsxs("div",{className:`flex items-center gap-3 p-4 pr-14 relative hover:bg-slate-50/80 dark:hover:bg-slate-700/50 cursor-pointer transition-colors ${e.isCompleted?"bg-slate-50/30 dark:bg-slate-700/30":""}`,onClick:s,children:[h.jsx("button",{className:"p-1 text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:h.jsx(ve.div,{animate:{rotate:t?180:0},transition:{duration:.2},children:h.jsx(dH,{className:"w-5 h-5"})})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:`block font-bold text-lg transition-all ${e.isCompleted?"text-emerald-700 dark:text-emerald-400":"text-slate-800 dark:text-slate-200"}`,children:e.name}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsxs("span",{className:"text-xs text-slate-400 dark:text-slate-500 font-medium whitespace-nowrap transition-colors",children:[e.topics?.filter(b=>b.isCompleted).length||0,"/",e.topics?.length||0," Topics",e.isCompleted&&h.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 ml-2 font-bold inline-flex items-center gap-1",children:[h.jsx(Vi,{className:"w-3 h-3"})," Done"]})]}),e.topics&&e.topics.length>0&&h.jsx("div",{className:"h-1.5 w-24 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden flex-shrink-0 transition-colors",children:h.jsx(ve.div,{initial:{width:0},animate:{width:`${Math.round(e.topics.filter(b=>b.isCompleted).length/e.topics.length*100)}%`},transition:{duration:.5,ease:"easeOut"},className:`h-full ${e.isCompleted?"bg-emerald-500":"bg-blue-500"}`})})]})]}),h.jsxs("div",{className:"flex items-center gap-2 absolute right-4 top-1/2 -translate-y-1/2",children:[h.jsx(ve.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:b=>{b.stopPropagation(),d(!0),t||s()},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 dark:hover:text-blue-400 rounded-lg transition-colors",title:"Add Topic",children:h.jsx(_i,{className:"w-4 h-4"})}),h.jsx(ve.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:b=>{b.stopPropagation(),m(!0)},className:"p-2 text-slate-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 dark:hover:text-amber-400 rounded-lg transition-colors",title:"Edit Chapter",children:h.jsx(tf,{className:"w-4 h-4"})}),h.jsx(ve.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:b=>{b.stopPropagation(),confirm("Delete this chapter?")&&i(n,e.id)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 dark:hover:text-red-400 rounded-lg transition-colors",title:"Delete Chapter",children:h.jsx(nf,{className:"w-4 h-4"})})]})]}),h.jsx(ns,{children:t&&h.jsx(ve.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden bg-slate-50/50 dark:bg-slate-800/50 transition-colors",children:h.jsxs("div",{className:"pb-2",children:[e.topics&&e.topics.length>0?e.topics.map(b=>h.jsx(nK,{subjectId:n,chapterId:e.id,topic:b},b.id)):h.jsx("div",{className:"pl-12 py-3 text-sm text-slate-400 italic",children:"No topics yet. Click + to add one."}),l&&h.jsxs(ve.form,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},onSubmit:y,className:"pl-12 pr-4 py-2 flex items-center gap-2",children:[h.jsx(vH,{className:"w-4 h-4 text-slate-300 dark:text-slate-500"}),h.jsx("input",{autoFocus:!0,name:"topicName",type:"text",placeholder:"Topic name...",className:"flex-1 bg-white dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 text-sm text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-colors",onBlur:()=>setTimeout(()=>d(!1),200)}),h.jsx("button",{type:"submit",className:"hidden",children:"Add"})]})]})})}),f&&h.jsx(sK,{subjectId:n,chapterId:e.id,currentName:e.name,onClose:()=>m(!1)})]})}function iK(){const{id:n}=LP(),e=tu(),{subjects:t,deleteSubject:s}=Lt(),[i,o]=C.useState(!1),[l,d]=C.useState(!1),[f,m]=C.useState({}),y=t.find(P=>P.id===n);if(!y)return h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center p-8",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:h.jsx(Fn,{className:"w-8 h-8 text-slate-300"})}),h.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Subject Not Found"}),h.jsx(gn,{to:"/",className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back Home"})]});const b=()=>{confirm(`Are you sure you want to delete ${y.name}? ALL progress will be lost.`)&&(s(y.id),e("/"))},v=P=>{m(L=>({...L,[P]:!L[P]}))},T=y.chapters.length,k=y.chapters.filter(P=>P.isCompleted).length;let I=0;y.chapters.forEach(P=>{P.topics&&P.topics.length>0?I+=P.topics.filter(L=>L.isCompleted).length/P.topics.length*100:I+=P.isCompleted?100:0});const j=T===0?0:Math.round(I/T);return h.jsxs(Kg,{className:"max-w-3xl mx-auto pb-12",children:[h.jsxs("div",{className:"mb-8",children:[h.jsxs(gn,{to:"/",className:"inline-flex items-center gap-2 text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 mb-6 transition-colors group",children:[h.jsx(BG,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Back to Dashboard"]}),h.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[h.jsxs("div",{children:[h.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold text-white mb-3 ${y.color}`,children:[h.jsx(Fn,{className:"w-3 h-3"}),y.name]}),h.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-800 dark:text-white transition-colors",children:y.name}),h.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-2 transition-colors",children:[k," of ",T," chapters completed"]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>d(!0),className:"text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 dark:hover:text-blue-400 p-2 rounded-lg transition-colors",title:"Edit Subject",children:h.jsx(tf,{className:"w-5 h-5"})}),h.jsx("button",{onClick:b,className:"text-red-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 dark:hover:text-red-400 p-2 rounded-lg transition-colors",title:"Delete Subject",children:h.jsx(nf,{className:"w-5 h-5"})})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsxs("div",{className:"flex justify-between items-end mb-2",children:[h.jsxs("span",{className:"text-3xl font-bold text-slate-800 dark:text-white transition-colors",children:[j,"%"]}),h.jsx("span",{className:"text-sm font-medium text-slate-400 dark:text-slate-500 transition-colors",children:"Progress"})]}),h.jsx("div",{className:"h-3 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden transition-colors",children:h.jsx(ve.div,{initial:{width:0},animate:{width:`${j}%`},transition:{duration:1,ease:"easeOut"},className:`h-full ${y.color}`})})]})]}),h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 shadow-sm overflow-hidden transition-colors",children:[h.jsxs("div",{className:"p-6 border-b border-slate-50 dark:border-slate-700 flex items-center justify-between bg-slate-50/50 dark:bg-slate-700/30 transition-colors",children:[h.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white transition-colors",children:"Syllabus / Chapters"}),h.jsxs(ve.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!0),className:"bg-slate-900 hover:bg-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[h.jsx(_i,{className:"w-4 h-4"}),"Add Chapter"]})]}),h.jsx("div",{className:"divide-y divide-slate-50 dark:divide-slate-700 transition-colors",children:y.chapters.length>0?y.chapters.map(P=>h.jsx(rK,{subjectId:y.id,chapter:P,isExpanded:!!f[P.id],onToggle:()=>v(P.id)},P.id)):h.jsxs("div",{className:"p-12 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3 transition-colors",children:h.jsx(Fn,{className:"w-6 h-6 text-slate-300 dark:text-slate-500"})}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4 transition-colors",children:"No chapters added yet."}),h.jsx("button",{onClick:()=>o(!0),className:"text-blue-600 dark:text-blue-400 font-medium hover:underline transition-colors",children:"Add your first chapter"})]})})]}),i&&h.jsx(J$,{subjectId:y.id,onClose:()=>o(!1)}),l&&h.jsx(mw,{subject:y,onClose:()=>d(!1)})]})}const JD=C.createContext(void 0);function aK({children:n}){const[e,t]=C.useState(()=>typeof window<"u"&&localStorage.getItem("theme")?localStorage.getItem("theme"):typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");C.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),localStorage.setItem("theme",e)},[e]);const s=()=>{t(i=>i==="light"?"dark":"light")};return h.jsx(JD.Provider,{value:{theme:e,toggleTheme:s},children:n})}function ZD(){const n=C.useContext(JD);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n}function oK({onClose:n}){const[e,t]=C.useState(ah[0].id),[s,i]=C.useState(new Set),o=ah.find(f=>f.id===e),l=f=>{const m=new Set(s);m.has(f)?m.delete(f):m.add(f),i(m)},d=()=>{if(o)if(s.size===o.subjects.length)i(new Set);else{const f=new Set(o.subjects.map(m=>m.name));i(f)}};return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(Fn,{className:"w-6 h-6 text-blue-600"}),"Import Syllabus"]}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Select a curriculum to quick-start your study plan."})]}),h.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:h.jsx(Vs,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[h.jsxs("div",{className:"w-full md:w-48 bg-slate-50 dark:bg-slate-900/50 border-r border-slate-100 dark:border-slate-700 p-4",children:[h.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Curriculums"}),h.jsx("div",{className:"space-y-2",children:ah.map(f=>h.jsx("button",{onClick:()=>{t(f.id),i(new Set)},className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e===f.id?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:f.name},f.id))})]}),h.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("h4",{className:"font-semibold text-slate-800 dark:text-white",children:[o?.name," Subjects"]}),h.jsx("button",{onClick:d,className:"text-xs font-medium text-blue-600 dark:text-blue-400 hover:underline",children:s.size===o?.subjects.length?"Deselect All":"Select All"})]}),h.jsx("div",{className:"space-y-3",children:o?.subjects.map(f=>h.jsxs("div",{onClick:()=>l(f.name),className:`relative flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all ${s.has(f.name)?"border-blue-500 bg-blue-50/50 dark:bg-blue-900/10":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[h.jsx("div",{className:`mt-1 flex-shrink-0 w-5 h-5 rounded border flex items-center justify-center transition-colors ${s.has(f.name)?"bg-blue-500 border-blue-500":"bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600"}`,children:s.has(f.name)&&h.jsx(BD,{className:"w-3.5 h-3.5 text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:`font-semibold ${s.has(f.name)?"text-blue-700 dark:text-blue-300":"text-slate-700 dark:text-slate-300"}`,children:f.name}),h.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500",children:[f.chapters.length," Chapters"]})]}),h.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 line-clamp-1",children:[f.chapters.slice(0,3).map(m=>m.name).join(", "),"..."]})]})]},f.name))})]})]}),h.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 bg-slate-50/50 dark:bg-slate-900/50",children:[h.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-xl font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),h.jsx(lK,{count:s.size,currentTemplate:o,selectedSubjects:s,onClose:n})]})]})})}function lK({count:n,currentTemplate:e,selectedSubjects:t,onClose:s}){const{importSyllabusData:i}=Lt(),o=()=>{if(n===0||!e)return;const l=e.subjects.filter(d=>t.has(d.name));i(l),s()};return h.jsxs("button",{onClick:o,disabled:n===0,className:"px-6 py-2.5 rounded-xl font-medium bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white shadow-lg shadow-blue-500/20 transition-all active:scale-95 flex items-center gap-2",children:[h.jsx(fw,{className:"w-4 h-4"}),"Import ",n>0?`${n} Subjects`:""]})}function cK(){const{user:n,logout:e}=Pi(),{userProfile:t,updateProfile:s,resetData:i,exportData:o,importData:l}=Lt(),{isMuted:d,toggleMute:f}=pw(),{theme:m,toggleTheme:y}=ZD(),b=C.useRef(null),v=C.useRef(null),[T,k]=C.useState(!1),[I,j]=C.useState(!1),[P,L]=C.useState("Notification"in window&&Notification.permission==="granted"),z=$g(),$=()=>{const S=b.current?.value.trim()||"",A=v.current?.value.trim()||"";if(!S){z.error("Please enter your name");return}s({name:S,grade:A}),j(!1),z.success("Profile updated successfully!")},te=()=>{const S=document.createElement("input");S.type="file",S.accept=".json",S.onchange=A=>{const O=A.target.files?.[0];if(O){const U=new FileReader;U.onload=q=>{const V=q.target?.result;l(V)&&alert("Data imported successfully!")},U.readAsText(O)}},S.click()},ce=()=>{confirm("Do you want to restart the welcome tour?")&&(localStorage.removeItem("tracked_tour_completed"),window.location.reload())},D=async()=>{if(!("Notification"in window)){alert("This browser does not support desktop notifications");return}if(Notification.permission==="granted")L(!P);else if(Notification.permission!=="denied"){const S=await Notification.requestPermission();L(S==="granted")}else alert("Notifications are blocked. Please enable them in your browser settings.")};return h.jsxs(Kg,{className:"max-w-2xl mx-auto space-y-8 pb-10",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(Wb,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),h.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white transition-colors",children:"Settings"})]}),h.jsxs(ve.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden transition-colors",children:[h.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700",children:h.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(Wb,{className:"w-5 h-5 text-blue-500"}),"Profile Information"]})}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 transition-colors",children:"Student Name"}),h.jsx("input",{ref:b,type:"text",defaultValue:t?.name||"",disabled:!I,className:`w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500 ${I?"":"opacity-60 cursor-not-allowed bg-slate-50 dark:bg-slate-800/50"}`,placeholder:"Enter your name"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 transition-colors",children:"Class / Grade"}),h.jsx("input",{ref:v,type:"text",defaultValue:t?.grade||"",disabled:!I,className:`w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500 ${I?"":"opacity-60 cursor-not-allowed bg-slate-50 dark:bg-slate-800/50"}`,placeholder:"e.g. HSC 2026"})]})]}),h.jsx("div",{className:"pt-2 flex gap-3",children:I?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>j(!1),className:"px-5 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-medium rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors text-sm",children:"Cancel"}),h.jsxs("button",{onClick:$,className:"px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2 text-sm shadow-sm",children:[h.jsx(lg,{className:"w-4 h-4"}),"Save Changes"]})]}):h.jsxs("button",{onClick:()=>j(!0),className:"px-5 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-medium rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors flex items-center gap-2 text-sm",children:[h.jsx(T2,{className:"w-4 h-4"}),"Edit Profile"]})})]})]}),h.jsxs(ve.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden transition-colors",children:[h.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700",children:h.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx($H,{className:"w-5 h-5 text-purple-500"}),"Appearance & Preferences"]})}),h.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[h.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${m==="dark"?"bg-slate-700 text-slate-300":"bg-orange-100 text-orange-600"}`,children:m==="dark"?h.jsx(og,{className:"w-5 h-5"}):h.jsx(Zb,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-800 dark:text-white font-medium",children:"App Theme"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Switch between light and dark mode"})]})]}),h.jsx("button",{onClick:y,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${m==="dark"?"bg-blue-600":"bg-slate-200"}`,children:h.jsx("span",{className:`${m==="dark"?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),h.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${d?"bg-slate-100 dark:bg-slate-700 text-slate-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"}`,children:d?h.jsx(KD,{className:"w-5 h-5"}):h.jsx($D,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-800 dark:text-white font-medium",children:"Sound Effects"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Play sounds for timer and interactions"})]})]}),h.jsx("button",{onClick:f,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${d?"bg-slate-200 dark:bg-slate-600":"bg-blue-600"}`,children:h.jsx("span",{className:`${d?"translate-x-1":"translate-x-6"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),h.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${P?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:P?h.jsx(YG,{className:"w-5 h-5"}):h.jsx(KG,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-800 dark:text-white font-medium",children:"Notifications"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Get reminders for study sessions"})]})]}),h.jsx("button",{onClick:D,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${P?"bg-blue-600":"bg-slate-200 dark:bg-slate-600"}`,children:h.jsx("span",{className:`${P?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),h.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400",children:h.jsx(RH,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-800 dark:text-white font-medium",children:"Language"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"App language preference"})]})]}),h.jsxs("select",{className:"bg-transparent border border-slate-200 dark:border-slate-600 rounded-lg text-sm px-2 py-1 text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-blue-500 outline-none",children:[h.jsx("option",{children:"English"}),h.jsx("option",{disabled:!0,children:"Bengali (Coming Soon)"})]})]})]})]}),h.jsxs(ve.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden transition-colors",children:[h.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700",children:h.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(lg,{className:"w-5 h-5 text-green-500"}),"Data & Backup"]})}),h.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[h.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors cursor-pointer",onClick:()=>k(!0),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400",children:h.jsx(Fn,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-800 dark:text-white font-medium",children:"Import Syllabus Template"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Quickly add pre-made subject templates"})]})]}),h.jsx("button",{className:"text-slate-400",children:h.jsx(T2,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"p-4 grid grid-cols-2 gap-4",children:[h.jsxs("button",{onClick:o,className:"flex items-center justify-center gap-2 py-2.5 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm font-medium",children:[h.jsx(fw,{className:"w-4 h-4"}),"Export Data"]}),h.jsxs("button",{onClick:te,className:"flex items-center justify-center gap-2 py-2.5 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm font-medium",children:[h.jsx(A$,{className:"w-4 h-4"}),"Import Data"]})]}),h.jsx("div",{className:"p-4 bg-red-50/50 dark:bg-red-900/10",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",children:h.jsx(nf,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-red-700 dark:text-red-400 font-medium",children:"Reset Application"}),h.jsx("p",{className:"text-xs text-red-600/70 dark:text-red-400/70",children:"Permanently delete all study data"})]})]}),h.jsx("button",{onClick:()=>{confirm("Are you absolutely sure? This cannot be undone.")&&i()},className:"px-4 py-2 bg-white dark:bg-slate-800 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 font-medium rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-xs shadow-sm",children:"Reset Data"})]})})]})]}),h.jsxs(ve.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden transition-colors",children:[h.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700",children:h.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(p$,{className:"w-5 h-5 text-gray-500"}),"Support & Info"]})}),h.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[h.jsx("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors cursor-pointer",onClick:ce,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400",children:h.jsx(GD,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-800 dark:text-white font-medium",children:"Restart Welcome Tour"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Show the onboarding guide again"})]})]})}),h.jsx("a",{href:"https://chat.whatsapp.com/K9mUpCp6Moo4poVbW5zgfr",target:"_blank",rel:"noopener noreferrer",className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400",children:h.jsx(tH,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-800 dark:text-white font-medium",children:"Report a Bug"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Report issues via our WhatsApp group"})]})]})}),h.jsx("a",{href:"https://chat.whatsapp.com/K9mUpCp6Moo4poVbW5zgfr",target:"_blank",rel:"noopener noreferrer",className:"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",children:h.jsx(Jb,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-800 dark:text-white font-medium",children:"Join WhatsApp Group"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Get help & discuss with community"})]})]})}),h.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 flex items-center justify-center rounded-2xl",children:h.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"TrackEd v1.0.0  Made with  for Students"})})]})]}),n&&h.jsxs(ve.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},onClick:e,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center justify-center gap-2",children:[h.jsx(ag,{className:"w-5 h-5"}),"Sign Out"]}),h.jsx(ns,{children:T&&h.jsx(oK,{onClose:()=>k(!1)})})]})}function Qm({title:n,value:e,icon:t,colorClass:s,bgClass:i,delay:o=0}){return h.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o,type:"spring",damping:15,stiffness:100},className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl p-6 border border-slate-100 dark:border-slate-700/50 shadow-xl shadow-slate-200/50 dark:shadow-none flex items-center justify-between transition-all hover:scale-[1.02] hover:shadow-2xl active:scale-[0.98] group",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsxs("h3",{className:"text-slate-400 dark:text-slate-500 font-bold text-[10px] uppercase tracking-widest flex items-center gap-2 group-hover:text-slate-500 transition-colors",children:[h.jsx(t,{className:`w-3.5 h-3.5 ${s}`})," ",n]}),h.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white transition-colors tracking-tight",children:e})]}),h.jsx("div",{className:`w-14 h-14 ${i} rounded-2xl flex items-center justify-center transition-all group-hover:rotate-6 shadow-inner ring-1 ring-white/20 dark:ring-white/5`,children:h.jsx(t,{className:`w-7 h-7 ${s}`})})]})}function uK(n){let e=0,t=0,s=0,i=0;return n.forEach(o=>{e+=o.chapters.length,o.chapters.forEach(l=>{l.isCompleted&&t++,l.topics&&(s+=l.topics.length,l.topics.forEach(d=>{d.isCompleted&&i++}))})}),{totalChapters:e,completedChapters:t,totalTopics:s,completedTopics:i}}function dK(n){const e=new Date,s=Array.from({length:7},(o,l)=>{const d=new Date;return d.setDate(e.getDate()-(6-l)),d.toISOString().split("T")[0]}).map(o=>{let l=0;return n.forEach(d=>{d.chapters.forEach(f=>{f.topics&&f.topics.forEach(m=>{m.isCompleted&&m.completedAt&&m.completedAt.startsWith(o)&&l++})})}),{date:o,count:l}}),i=Math.max(...s.map(o=>o.count),1);return{activityData:s,maxCount:i}}function hK(n){const e=new Set;n.forEach(d=>d.chapters.forEach(f=>f.topics?.forEach(m=>{m.isCompleted&&m.completedAt&&e.add(m.completedAt.split("T")[0])})));const t=Array.from(e).sort((d,f)=>new Date(f).getTime()-new Date(d).getTime());let s=0;const i=new Date().toISOString().split("T")[0],o=new Date;o.setDate(o.getDate()-1);const l=o.toISOString().split("T")[0];if(t.length>0){const d=t[0];if(d===i||d===l){s=1;let f=new Date(d);for(let m=1;m<t.length;m++){const y=new Date(t[m]),b=Math.abs(f.getTime()-y.getTime());if(Math.round(b/(1e3*60*60*24))===1)s++,f=y;else break}}}return s}function fK(){const{subjects:n}=Lt(),{completedChapters:e,totalTopics:t,completedTopics:s}=uK(n),{activityData:i,maxCount:o}=dK(n),l=hK(n),d=t>0?Math.round(s/t*100):0,f={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}};return h.jsxs(Kg,{className:"max-w-5xl mx-auto pb-16",children:[h.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-10",children:h.jsxs("div",{children:[h.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white flex items-center gap-4 tracking-tight transition-colors",children:[h.jsx("div",{className:"p-3 bg-blue-600 rounded-2xl shadow-lg shadow-blue-500/20",children:h.jsx(kc,{className:"w-8 h-8 text-white"})}),"Study Analytics"]}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 font-medium",children:"Track your progress and stay motivated"})]})}),h.jsxs(ve.div,{variants:f,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[h.jsx("div",{className:"sm:col-span-1",children:h.jsx(Qm,{title:"Focus Streak",value:`${l} days`,icon:UD,colorClass:"text-orange-500",bgClass:"bg-orange-100/50 dark:bg-orange-500/10",delay:.1})}),h.jsx("div",{className:"sm:col-span-1",children:h.jsx(Qm,{title:"Topics Mastered",value:`${s}`,icon:Fn,colorClass:"text-blue-500",bgClass:"bg-blue-100/50 dark:bg-blue-500/10",delay:.2})}),h.jsx("div",{className:"sm:col-span-1",children:h.jsx(Qm,{title:"Chapters Done",value:`${e}`,icon:lr,colorClass:"text-amber-500",bgClass:"bg-amber-100/50 dark:bg-amber-500/10",delay:.3})}),h.jsx("div",{className:"sm:col-span-1",children:h.jsx(Qm,{title:"Efficiency",value:`${d}%`,icon:Vi,colorClass:"text-emerald-500",bgClass:"bg-emerald-100/50 dark:bg-emerald-500/10",delay:.4})})]}),h.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[h.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-2 bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl p-8 rounded-[2rem] border border-slate-100 dark:border-slate-700/50 shadow-xl shadow-slate-200/50 dark:shadow-none transition-all group",children:[h.jsxs("div",{className:"flex items-center justify-between mb-10",children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-3 transition-colors",children:[h.jsx(aH,{className:"w-6 h-6 text-blue-500"}),"Activity Trend"]}),h.jsx("div",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Last 7 Days"})]}),h.jsx("div",{className:"flex items-end justify-between gap-3 md:gap-6 h-64 px-2",children:i.map((m,y)=>h.jsxs("div",{className:"flex-1 flex flex-col items-center gap-4 group/bar",children:[h.jsxs("div",{className:"w-full bg-slate-50 dark:bg-slate-900/50 rounded-2xl relative h-full flex items-end overflow-hidden transition-colors border border-slate-100 dark:border-slate-700/30",children:[h.jsx("div",{className:"absolute inset-x-0 h-px bg-slate-200 dark:bg-slate-700/50 top-1/4"}),h.jsx("div",{className:"absolute inset-x-0 h-px bg-slate-200 dark:bg-slate-700/50 top-2/4"}),h.jsx("div",{className:"absolute inset-x-0 h-px bg-slate-200 dark:bg-slate-700/50 top-3/4"}),h.jsxs(ve.div,{initial:{height:0},animate:{height:`${m.count/(o||1)*100}%`},transition:{duration:1.5,delay:y*.1,ease:[.34,1.56,.64,1]},className:"w-full bg-gradient-to-t from-blue-600 to-indigo-400 rounded-t-xl transition-all duration-300 group-hover/bar:brightness-110 relative shadow-lg shadow-blue-500/20",children:[h.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-white/20 rounded-full mx-1 mt-1"}),h.jsxs("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 text-[10px] font-black py-1.5 px-3 rounded-xl opacity-0 scale-90 group-hover/bar:opacity-100 group-hover/bar:scale-100 transition-all whitespace-nowrap z-20 shadow-xl pointer-events-none",children:[m.count," TOPICS"]})]})]}),h.jsx("span",{className:`text-[10px] sm:text-xs font-bold uppercase tracking-wider transition-colors ${y===i.length-1?"text-blue-500":"text-slate-400"}`,children:new Date(m.date).toLocaleDateString("en-US",{weekday:"short"})})]},m.date))})]}),h.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl p-8 rounded-[2rem] border border-slate-100 dark:border-slate-700/50 shadow-xl shadow-slate-200/50 dark:shadow-none transition-all",children:[h.jsx("div",{className:"flex items-center justify-between mb-8",children:h.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-3 transition-colors",children:[h.jsx(Fn,{className:"w-6 h-6 text-indigo-500"}),"Progress"]})}),h.jsxs("div",{className:"space-y-6 max-h-[400px] overflow-y-auto pr-3 custom-scrollbar",children:[n.map((m,y)=>{const b=m.chapters.reduce((k,I)=>k+(I.topics?.length||0),0),v=m.chapters.reduce((k,I)=>k+(I.topics?.filter(j=>j.isCompleted).length||0),0),T=b>0?Math.round(v/b*100):0;return h.jsxs(ve.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.5+y*.05},className:"group",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-sm font-black text-slate-700 dark:text-slate-200 group-hover:text-blue-500 transition-colors uppercase tracking-tight",children:m.name}),h.jsxs("span",{className:"text-[10px] font-bold text-slate-400 group-hover:text-slate-500 transition-colors",children:[v," of ",b," Topics"]})]}),h.jsxs("span",{className:`text-xs font-black px-2 py-1 rounded-lg border ${T===100?"bg-emerald-50 text-emerald-600 border-emerald-100 dark:bg-emerald-900/30 dark:border-emerald-800/50":"bg-blue-50 text-blue-600 border-blue-100 dark:bg-blue-900/30 dark:border-blue-800/50"}`,children:[T,"%"]})]}),h.jsx("div",{className:"h-2.5 w-full bg-slate-100 dark:bg-slate-900/50 rounded-full overflow-hidden p-0.5 ring-1 ring-slate-200/50 dark:ring-slate-700/30",children:h.jsx(ve.div,{initial:{width:0},animate:{width:`${T}%`},transition:{duration:1.5,ease:"backOut"},className:`h-full rounded-full shadow-lg ${m.color.replace("text-","bg-")} bg-gradient-to-r from-transparent to-white/20`})})]},m.id)}),n.length===0&&h.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400 text-center space-y-3",children:[h.jsx(Fn,{className:"w-10 h-10 opacity-20"}),h.jsx("p",{className:"text-sm font-bold uppercase tracking-widest opacity-50",children:"No subjects tracked yet"})]})]})]})]})]})}function mK(){const n=$g(),{saveStudySession:e,subjects:t}=Lt(),{user:s}=Pi(),{playSound:i,isMuted:o,toggleMute:l}=pw(),[d,f]=C.useState("stopwatch"),[m,y]=C.useState(!1),[b,v]=C.useState(0),[T,k]=C.useState(0),[I,j]=C.useState(30),[P,L]=C.useState("timer"),[z,$]=C.useState("today"),[te,ce]=C.useState(""),[D,S]=C.useState(""),[A,O]=C.useState(""),[U,q]=C.useState(!1),[V,Pe]=C.useState([]),[Ve,F]=C.useState(!0),ie=C.useRef(null);C.useEffect(()=>{Notification.permission==="default"&&Notification.requestPermission()},[]);const ne=(pe,Ce)=>{Notification.permission==="granted"&&new Notification(pe,{body:Ce,icon:"/vite.svg"})};C.useEffect(()=>(m?ie.current=window.setInterval(()=>{v(pe=>d==="stopwatch"?pe+1:pe<=1?(y(!1),i("complete"),ne("Time's Up! ","Your study session is complete. Take a break!"),0):pe-1)},1e3):ie.current&&clearInterval(ie.current),()=>{ie.current&&clearInterval(ie.current)}),[m,d,i]),C.useEffect(()=>{if(y(!1),q(!1),d==="stopwatch")v(0),k(0);else if(d==="pomodoro"||d==="countdown"){const pe=I*60;v(pe),k(pe)}},[d,I]),C.useEffect(()=>{(async()=>{if(s){F(!0);try{const Ce=ps(qt,"users");let tt="userProfile.todayStudyTime";z==="week"?tt="userProfile.weeklyStudyTime":z==="month"?tt="userProfile.monthlyStudyTime":z==="all_time"&&(tt="userProfile.totalStudyTime");const jt=xi(Ce,Wh(tt,"desc"),xu(10)),In=await kh(jt),cr=[];In.forEach(rn=>{const Mn=rn.data();if(Mn.userProfile){let rs=0;z==="today"?rs=Mn.userProfile.todayStudyTime||0:z==="week"?rs=Mn.userProfile.weeklyStudyTime||0:z==="month"?rs=Mn.userProfile.monthlyStudyTime||0:rs=Mn.userProfile.totalStudyTime||0,cr.push({userId:rn.id,userName:Mn.userProfile.name||"Anonymous",displayTime:rs})}}),Pe(cr)}catch(Ce){console.error("Error fetching leaderboard:",Ce)}finally{F(!1)}}})()},[s,P,z]),C.useEffect(()=>(m?document.title=`${H(b)} - ${A||(d==="pomodoro"?"Focus":"Timer")}`:document.title="Study Tracker",()=>{document.title="Study Tracker"}),[m,b,d,A]);const Ee=()=>{!m&&d!=="stopwatch"&&b===0&&v(T),y(!m),i("click")},oe=()=>{y(!1),q(!1),v(d==="stopwatch"?0:T),i("click")},M=async()=>{if(!D){n.error("Please select a subject to save session.");return}let pe=0;if(d==="stopwatch"?pe=b:pe=T-b,pe<60){n.error("Session must be at least 1 minute to save.");return}await e(pe,D,A),q(!0),i("success"),n.success("Session Saved! Great Job.")},H=pe=>{const Ce=Math.floor(pe/3600),tt=Math.floor(pe%3600/60),jt=pe%60;return Ce>0?`${Ce}:${tt.toString().padStart(2,"0")}:${jt.toString().padStart(2,"0")}`:`${tt.toString().padStart(2,"0")}:${jt.toString().padStart(2,"0")}`},Q=pe=>{const Ce=Math.floor(pe/3600),tt=Math.floor(pe%3600/60),jt=pe%60;return`${Ce.toString().padStart(2,"0")}:${tt.toString().padStart(2,"0")}:${jt.toString().padStart(2,"0")}`},se=d==="stopwatch"?100:Math.max(0,b/T*100),fe=120,ye=2*Math.PI*fe,we=ye-se/100*ye;return h.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[h.jsxs("header",{className:"flex items-center justify-between",children:[h.jsx("div",{children:h.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white transition-colors",children:"Focus Timer"})}),h.jsx("button",{onClick:l,className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:o?h.jsx(KD,{className:"w-6 h-6"}):h.jsx($D,{className:"w-6 h-6"})})]}),h.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl mb-6 md:hidden",children:[h.jsx("button",{onClick:()=>L("timer"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${P==="timer"?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:"Timer"}),h.jsx("button",{onClick:()=>L("leaderboard"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${P==="leaderboard"?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:"Leaderboard"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:`${P==="timer"?"block":"hidden"} md:block flex flex-col space-y-6`,children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 transition-colors",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-500 mb-2",children:"My Focus Goal"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",placeholder:"What are you working on? (e.g. Physics Chapter 3)",className:"flex-1 bg-slate-50 dark:bg-slate-700 border-none rounded-xl px-4 py-3 text-slate-800 dark:text-white placeholder:text-slate-400 focus:ring-2 focus:ring-blue-500 transition-all font-medium",value:A,onChange:pe=>O(pe.target.value),disabled:m}),h.jsxs("select",{className:"w-1/3 bg-slate-50 dark:bg-slate-700 border-none rounded-xl px-3 py-3 text-slate-600 dark:text-slate-300 font-medium focus:ring-2 focus:ring-blue-500 cursor-pointer text-sm",value:D,onChange:pe=>S(pe.target.value),disabled:m,children:[h.jsx("option",{value:"",children:"Subject"}),t.map(pe=>h.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]})]}),h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col items-center justify-center relative overflow-hidden transition-colors min-h-[400px]",children:[h.jsxs("div",{className:"relative w-64 h-64 md:w-72 md:h-72 mb-8 flex items-center justify-center",children:[h.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[h.jsx("circle",{cx:"50%",cy:"50%",r:fe,stroke:"currentColor",strokeWidth:"12",fill:"transparent",className:"text-slate-100 dark:text-slate-700"}),h.jsx("circle",{cx:"50%",cy:"50%",r:fe,stroke:"currentColor",strokeWidth:"12",fill:"transparent",strokeDasharray:ye,strokeDashoffset:d==="stopwatch"?0:we,strokeLinecap:"round",className:`transition-all duration-1000 ease-linear ${m?d==="pomodoro"?"text-rose-500":"text-blue-500":"text-slate-300 dark:text-slate-600"}`})]}),h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[h.jsx("div",{className:`text-5xl md:text-6xl font-bold tracking-tight tabular-nums mb-2 ${m?d==="pomodoro"?"text-rose-500":"text-blue-600":"text-slate-800 dark:text-white"}`,children:H(b)}),h.jsx("div",{className:"text-slate-400 dark:text-slate-500 font-medium uppercase tracking-widest text-sm",children:m?"Running":"Paused"})]})]}),h.jsxs("div",{className:"flex items-center gap-6 z-10",children:[!m&&h.jsx("button",{onClick:oe,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all hover:scale-110",title:"Reset",children:h.jsx(GD,{className:"w-5 h-5"})}),h.jsx("button",{onClick:Ee,className:`p-6 rounded-full shadow-xl transition-all hover:scale-105 active:scale-95 ${m?"bg-amber-100 text-amber-600 hover:bg-amber-200":"bg-blue-600 text-white hover:bg-blue-700"}`,children:m?h.jsx(YH,{className:"w-8 h-8 fill-current"}):h.jsx(t$,{className:"w-8 h-8 ml-1 fill-current"})}),!m&&(d==="stopwatch"&&b>60||d!=="stopwatch"&&b!==T)&&!U&&h.jsx("button",{onClick:M,className:"p-3 rounded-full bg-emerald-100 text-emerald-600 hover:bg-emerald-200 transition-all hover:scale-110 animate-pulse",title:"Save Session",children:h.jsx(lg,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"mt-8 flex gap-2",children:[h.jsx("button",{onClick:()=>{f("stopwatch"),j(0)},className:`px-4 py-2 text-sm font-medium rounded-full transition-all ${d==="stopwatch"?"bg-blue-100 text-blue-700":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:"Stopwatch"}),h.jsx("button",{onClick:()=>{f("pomodoro"),j(25)},className:`px-4 py-2 text-sm font-medium rounded-full transition-all ${d==="pomodoro"?"bg-rose-100 text-rose-700":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:"Pomodoro"}),h.jsx("button",{onClick:()=>{f("countdown"),j(30)},className:`px-4 py-2 text-sm font-medium rounded-full transition-all ${d==="countdown"?"bg-amber-100 text-amber-700":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:"Countdown"})]}),!m&&(d==="pomodoro"||d==="countdown")&&h.jsxs("div",{className:"mt-4 flex items-center gap-2 animate-in fade-in slide-in-from-bottom-2",children:[h.jsx("span",{className:"text-slate-400 text-sm",children:"Duration:"}),h.jsx("input",{type:"range",min:"5",max:"120",step:"5",value:I,onChange:pe=>j(Number(pe.target.value)),className:"w-32 accent-blue-600 cursor-pointer"}),h.jsxs("span",{className:"text-slate-700 dark:text-slate-300 font-bold w-12 text-center",children:[I,"m"]})]})]})]}),h.jsxs("div",{className:`${P==="leaderboard"?"block":"hidden"} md:block bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-xl border border-slate-100 dark:border-slate-700 h-fit transition-colors sticky top-24`,children:[h.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(lr,{className:"w-6 h-6 text-yellow-500"}),h.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Leaderboard"})]})}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search name...",value:te,onChange:pe=>ce(pe.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-slate-800 dark:text-white placeholder:text-slate-400 transition-all font-medium"}),h.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]}),h.jsx("div",{className:"flex p-1.5 bg-slate-100 dark:bg-slate-700/50 rounded-xl",children:["today","week","month","all_time"].map(pe=>h.jsx("button",{onClick:()=>$(pe),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all capitalize ${z===pe?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-white/50 dark:hover:bg-white/5"}`,children:pe==="all_time"?"Lifetime":pe==="today"?"24 Hours":pe==="week"?"7 Days":"1 Month"},pe))})]}),Ve?h.jsxs("div",{className:"text-center py-12 text-slate-400 flex flex-col items-center",children:[h.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-3"}),h.jsx("p",{className:"text-sm font-medium",children:"Loading rankings..."})]}):h.jsxs("div",{className:"space-y-3",children:[V.filter(pe=>pe.userName.toLowerCase().includes(te.toLowerCase())).map((pe,Ce)=>h.jsxs("div",{className:`flex items-center justify-between p-3 rounded-2xl transition-all ${pe.userId===s?.uid?"bg-blue-50/50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800":"hover:bg-slate-50 dark:hover:bg-slate-700/30 border border-transparent"}`,children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"font-bold text-slate-400 w-6 text-center text-sm",children:[Ce+1,"."]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`
                                                w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg shadow-sm border-2
                                                ${Ce===0?"bg-yellow-100 text-yellow-600 border-yellow-200":Ce===1?"bg-slate-200 text-slate-600 border-slate-300":Ce===2?"bg-orange-100 text-orange-600 border-orange-200":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-white dark:border-slate-600"}
                                            `,children:pe.userName.charAt(0).toUpperCase()}),h.jsxs("div",{children:[h.jsx("p",{className:`font-bold text-sm ${pe.userId===s?.uid?"text-blue-700 dark:text-blue-400":"text-slate-800 dark:text-white"}`,children:pe.userName}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[h.jsx("span",{className:`w-2 h-2 rounded-full ${pe.displayTime>3600?"bg-emerald-400":"bg-slate-300 dark:bg-slate-600"}`}),h.jsx("span",{className:"text-xs text-slate-400 font-medium",children:pe.displayTime>3600?"Studying":"Offline"})]})]})]})]}),h.jsx("div",{className:"text-right",children:h.jsx("div",{className:"font-bold text-blue-600 dark:text-blue-400 text-base md:text-lg tabular-nums tracking-tight",children:Q(pe.displayTime)})})]},pe.userId)),V.length===0&&h.jsxs("div",{className:"text-center py-10 px-6 text-slate-500 bg-slate-50 dark:bg-slate-700/30 rounded-2xl border border-dashed border-slate-200 dark:border-slate-700",children:[h.jsx("p",{className:"text-sm",children:"No records found for this period."}),h.jsx("p",{className:"text-xs mt-1 text-slate-400",children:"Be the first to start studying!"})]})]})]})]}),h.jsx(ns,{children:U&&h.jsxs(ve.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-20 left-1/2 -translate-x-1/2 md:bottom-8 bg-slate-900 text-white px-6 py-3 rounded-full shadow-lg flex items-center gap-3 z-50",children:[h.jsx("div",{className:"bg-emerald-500 rounded-full p-1",children:h.jsx(Vi,{className:"w-4 h-4 text-white"})}),h.jsx("span",{className:"font-medium",children:"Session Saved! Great Job."})]})})]})}const pK="modulepreload",gK=function(n){return"/Study-Mate/"+n},N2={},yK=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let m=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var l=m;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");i=m(t.map(y=>{if(y=gK(y),y in N2)return;N2[y]=!0;const b=y.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${v}`))return;const T=document.createElement("link");if(T.rel=b?"stylesheet":pK,b||(T.as="script"),T.crossOrigin="",T.href=y,f&&T.setAttribute("nonce",f),document.head.appendChild(T),b)return new Promise((k,I)=>{T.addEventListener("load",k),T.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${y}`)))})}))}function o(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return i.then(d=>{for(const f of d||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})},I2="global-study-lounge",e5=C.createContext(void 0);function xK({children:n}){const{user:e}=Pi(),t=$g(),[s,i]=C.useState([]),[o,l]=C.useState([]);C.useEffect(()=>{if(!e)return;(async()=>{try{const k=await kh(xi(ps(qt,"groups"),Fd("inviteCode","==","GLOBAL")));let I;if(k.empty){const j={name:"Global Study Lounge ",description:"The official community space for all TrackEd members. Collaborate, share, and grow together!",createdBy:"system",createdAt:new Date().toISOString(),members:[{userId:e.uid,name:e.displayName||"User",joinedAt:new Date().toISOString(),role:"member"}],memberIds:[e.uid],inviteCode:"GLOBAL"},{setDoc:P}=await yK(async()=>{const{setDoc:L}=await Promise.resolve().then(()=>eG);return{setDoc:L}},[]);await P(Zs(qt,"groups",I2),j)}else I=k.docs[0],I.data().memberIds.includes(e.uid)||await Ho(Zs(qt,"groups",I.id),{members:mc({userId:e.uid,name:e.displayName||"User",joinedAt:new Date().toISOString(),role:"member"}),memberIds:mc(e.uid)})}catch(k){console.error("Error syncing global group:",k)}})()},[e]),C.useEffect(()=>{if(!e){i([]),l([]);return}const T=xi(ps(qt,"groups"),Fd("memberIds","array-contains",e.uid)),k=Ga(T,P=>{const L=[];P.forEach(z=>{L.push({id:z.id,...z.data()})}),i(L)},P=>{console.error("Error loading groups:",P)}),I=xi(ps(qt,"challenges"),Fd("participants","array-contains",e.uid)),j=Ga(I,P=>{const L=[];P.forEach(z=>{L.push({id:z.id,...z.data()})}),l(L)},P=>{console.error("Error loading challenges:",P)});return()=>{k(),j()}},[e]);const d=async(T,k)=>{if(e)try{const I={name:T,description:k,createdBy:e.uid,createdAt:new Date().toISOString(),members:[{userId:e.uid,name:e.displayName||"Unknown",joinedAt:new Date().toISOString(),role:"admin"}],memberIds:[e.uid],inviteCode:Math.random().toString(36).substring(2,8).toUpperCase()};await ih(ps(qt,"groups"),I),t.success("Group created successfully!")}catch(I){console.error("Error creating group:",I),t.error("Failed to create group.")}},f=async T=>{if(e)try{const k=xi(ps(qt,"groups"),Fd("inviteCode","==",T.trim().toUpperCase()),xu(1)),I=await kh(k);if(I.empty){t.error("Invalid invite code.");return}const j=I.docs[0],P=j.data();if(P.memberIds.includes(e.uid)){t.info("You are already a member of this group.");return}const L={userId:e.uid,name:e.displayName||"Anonymous",joinedAt:new Date().toISOString(),role:"member"};await Ho(Zs(qt,"groups",j.id),{members:mc(L),memberIds:mc(e.uid)}),t.success(`Joined ${P.name}!`)}catch(k){console.error("Error joining group:",k),t.error("Failed to join group.")}},m=async T=>{if(e){if(T===I2||T==="global-study-lounge"){t.info("You cannot leave the Global Study Lounge.");return}try{const k=s.find(j=>j.id===T);if(!k)return;const I=k.members.find(j=>j.userId===e.uid);if(!I)return;await Ho(Zs(qt,"groups",T),{members:Xb(I),memberIds:Xb(e.uid)}),t.success("Left group successfully.")}catch(k){console.error("Error leaving group:",k),t.error("Failed to leave group.")}}},y=async(T,k)=>{if(e)try{await ih(ps(qt,"groups",T,"messages"),{senderId:e.uid,senderName:e.displayName||"User",text:k,timestamp:Yb()})}catch(I){console.error("Error sending message:",I),t.error("Failed to send message.")}},b=async(T,k,I,j)=>{if(e)try{const P=new Date,L=new Date;L.setDate(P.getDate()+j);const z={groupId:T,title:k,goalXP:I,startDate:P.toISOString(),endDate:L.toISOString(),participants:[e.uid],isCompleted:!1,createdAt:Yb()};await ih(ps(qt,"challenges"),z),t.success("Challenge created! Go go go!")}catch(P){console.error("Error creating challenge:",P),t.error("Failed to create challenge.")}},v=async T=>{if(e)try{await Ho(Zs(qt,"challenges",T),{participants:mc(e.uid)}),t.success("Joined the challenge!")}catch(k){console.error("Error joining challenge:",k),t.error("Failed to join challenge.")}};return h.jsx(e5.Provider,{value:{groups:s,challenges:o,createGroup:d,joinGroup:f,leaveGroup:m,sendMessage:y,createChallenge:b,joinChallenge:v},children:n})}function bK(){const n=C.useContext(e5);if(n===void 0)throw new Error("useSocial must be used within a SocialProvider");return n}function t5(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=t5(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function vK(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=t5(n))&&(s&&(s+=" "),s+=e);return s}const _K=(n,e)=>{const t=new Array(n.length+e.length);for(let s=0;s<n.length;s++)t[s]=n[s];for(let s=0;s<e.length;s++)t[n.length+s]=e[s];return t},wK=(n,e)=>({classGroupId:n,validator:e}),n5=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),cg="-",C2=[],TK="arbitrary..",EK=n=>{const e=AK(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return SK(l);const d=l.split(cg),f=d[0]===""&&d.length>1?1:0;return s5(d,f,e)},getConflictingClassGroupIds:(l,d)=>{if(d){const f=s[l],m=t[l];return f?m?_K(m,f):f:m||C2}return t[l]||C2}}},s5=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const i=n[e],o=t.nextPart.get(i);if(o){const m=s5(n,e+1,o);if(m)return m}const l=t.validators;if(l===null)return;const d=e===0?n.join(cg):n.slice(e).join(cg),f=l.length;for(let m=0;m<f;m++){const y=l[m];if(y.validator(d))return y.classGroupId}},SK=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),s=e.slice(0,t);return s?TK+s:void 0})(),AK=n=>{const{theme:e,classGroups:t}=n;return kK(t,e)},kK=(n,e)=>{const t=n5();for(const s in n){const i=n[s];gw(i,t,s,e)}return t},gw=(n,e,t,s)=>{const i=n.length;for(let o=0;o<i;o++){const l=n[o];NK(l,e,t,s)}},NK=(n,e,t,s)=>{if(typeof n=="string"){IK(n,e,t);return}if(typeof n=="function"){CK(n,e,t,s);return}RK(n,e,t,s)},IK=(n,e,t)=>{const s=n===""?e:r5(e,n);s.classGroupId=t},CK=(n,e,t,s)=>{if(jK(n)){gw(n(s),e,t,s);return}e.validators===null&&(e.validators=[]),e.validators.push(wK(t,n))},RK=(n,e,t,s)=>{const i=Object.entries(n),o=i.length;for(let l=0;l<o;l++){const[d,f]=i[l];gw(f,r5(e,d),t,s)}},r5=(n,e)=>{let t=n;const s=e.split(cg),i=s.length;for(let o=0;o<i;o++){const l=s[o];let d=t.nextPart.get(l);d||(d=n5(),t.nextPart.set(l,d)),t=d}return t},jK=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,DK=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),s=Object.create(null);const i=(o,l)=>{t[o]=l,e++,e>n&&(e=0,s=t,t=Object.create(null))};return{get(o){let l=t[o];if(l!==void 0)return l;if((l=s[o])!==void 0)return i(o,l),l},set(o,l){o in t?t[o]=l:i(o,l)}}},tv="!",R2=":",PK=[],j2=(n,e,t,s,i)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:s,isExternal:i}),VK=n=>{const{prefix:e,experimentalParseClassName:t}=n;let s=i=>{const o=[];let l=0,d=0,f=0,m;const y=i.length;for(let I=0;I<y;I++){const j=i[I];if(l===0&&d===0){if(j===R2){o.push(i.slice(f,I)),f=I+1;continue}if(j==="/"){m=I;continue}}j==="["?l++:j==="]"?l--:j==="("?d++:j===")"&&d--}const b=o.length===0?i:i.slice(f);let v=b,T=!1;b.endsWith(tv)?(v=b.slice(0,-1),T=!0):b.startsWith(tv)&&(v=b.slice(1),T=!0);const k=m&&m>f?m-f:void 0;return j2(o,T,v,k)};if(e){const i=e+R2,o=s;s=l=>l.startsWith(i)?o(l.slice(i.length)):j2(PK,!1,l,void 0,!0)}if(t){const i=s;s=o=>t({className:o,parseClassName:i})}return s},MK=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,s)=>{e.set(t,1e6+s)}),t=>{const s=[];let i=[];for(let o=0;o<t.length;o++){const l=t[o],d=l[0]==="[",f=e.has(l);d||f?(i.length>0&&(i.sort(),s.push(...i),i=[]),s.push(l)):i.push(l)}return i.length>0&&(i.sort(),s.push(...i)),s}},OK=n=>({cache:DK(n.cacheSize),parseClassName:VK(n),sortModifiers:MK(n),...EK(n)}),LK=/\s+/,UK=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:o}=e,l=[],d=n.trim().split(LK);let f="";for(let m=d.length-1;m>=0;m-=1){const y=d[m],{isExternal:b,modifiers:v,hasImportantModifier:T,baseClassName:k,maybePostfixModifierPosition:I}=t(y);if(b){f=y+(f.length>0?" "+f:f);continue}let j=!!I,P=s(j?k.substring(0,I):k);if(!P){if(!j){f=y+(f.length>0?" "+f:f);continue}if(P=s(k),!P){f=y+(f.length>0?" "+f:f);continue}j=!1}const L=v.length===0?"":v.length===1?v[0]:o(v).join(":"),z=T?L+tv:L,$=z+P;if(l.indexOf($)>-1)continue;l.push($);const te=i(P,j);for(let ce=0;ce<te.length;++ce){const D=te[ce];l.push(z+D)}f=y+(f.length>0?" "+f:f)}return f},zK=(...n)=>{let e=0,t,s,i="";for(;e<n.length;)(t=n[e++])&&(s=i5(t))&&(i&&(i+=" "),i+=s);return i},i5=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=i5(n[s]))&&(t&&(t+=" "),t+=e);return t},BK=(n,...e)=>{let t,s,i,o;const l=f=>{const m=e.reduce((y,b)=>b(y),n());return t=OK(m),s=t.cache.get,i=t.cache.set,o=d,d(f)},d=f=>{const m=s(f);if(m)return m;const y=UK(f,t);return i(f,y),y};return o=l,(...f)=>o(zK(...f))},FK=[],ln=n=>{const e=t=>t[n]||FK;return e.isThemeGetter=!0,e},a5=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,o5=/^\((?:(\w[\w-]*):)?(.+)\)$/i,qK=/^\d+\/\d+$/,GK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,HK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$K=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,KK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,QK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lc=n=>qK.test(n),Ge=n=>!!n&&!Number.isNaN(Number(n)),ba=n=>!!n&&Number.isInteger(Number(n)),zx=n=>n.endsWith("%")&&Ge(n.slice(0,-1)),fi=n=>GK.test(n),YK=()=>!0,XK=n=>HK.test(n)&&!$K.test(n),l5=()=>!1,WK=n=>KK.test(n),JK=n=>QK.test(n),ZK=n=>!Ae(n)&&!ke(n),eQ=n=>vu(n,d5,l5),Ae=n=>a5.test(n),jo=n=>vu(n,h5,XK),Bx=n=>vu(n,iQ,Ge),D2=n=>vu(n,c5,l5),tQ=n=>vu(n,u5,JK),Ym=n=>vu(n,f5,WK),ke=n=>o5.test(n),Md=n=>_u(n,h5),nQ=n=>_u(n,aQ),P2=n=>_u(n,c5),sQ=n=>_u(n,d5),rQ=n=>_u(n,u5),Xm=n=>_u(n,f5,!0),vu=(n,e,t)=>{const s=a5.exec(n);return s?s[1]?e(s[1]):t(s[2]):!1},_u=(n,e,t=!1)=>{const s=o5.exec(n);return s?s[1]?e(s[1]):t:!1},c5=n=>n==="position"||n==="percentage",u5=n=>n==="image"||n==="url",d5=n=>n==="length"||n==="size"||n==="bg-size",h5=n=>n==="length",iQ=n=>n==="number",aQ=n=>n==="family-name",f5=n=>n==="shadow",oQ=()=>{const n=ln("color"),e=ln("font"),t=ln("text"),s=ln("font-weight"),i=ln("tracking"),o=ln("leading"),l=ln("breakpoint"),d=ln("container"),f=ln("spacing"),m=ln("radius"),y=ln("shadow"),b=ln("inset-shadow"),v=ln("text-shadow"),T=ln("drop-shadow"),k=ln("blur"),I=ln("perspective"),j=ln("aspect"),P=ln("ease"),L=ln("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],te=()=>[...$(),ke,Ae],ce=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],S=()=>[ke,Ae,f],A=()=>[lc,"full","auto",...S()],O=()=>[ba,"none","subgrid",ke,Ae],U=()=>["auto",{span:["full",ba,ke,Ae]},ba,ke,Ae],q=()=>[ba,"auto",ke,Ae],V=()=>["auto","min","max","fr",ke,Ae],Pe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ve=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...S()],ie=()=>[lc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],ne=()=>[n,ke,Ae],Ee=()=>[...$(),P2,D2,{position:[ke,Ae]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],M=()=>["auto","cover","contain",sQ,eQ,{size:[ke,Ae]}],H=()=>[zx,Md,jo],Q=()=>["","none","full",m,ke,Ae],se=()=>["",Ge,Md,jo],fe=()=>["solid","dashed","dotted","double"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],we=()=>[Ge,zx,P2,D2],pe=()=>["","none",k,ke,Ae],Ce=()=>["none",Ge,ke,Ae],tt=()=>["none",Ge,ke,Ae],jt=()=>[Ge,ke,Ae],In=()=>[lc,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fi],breakpoint:[fi],color:[YK],container:[fi],"drop-shadow":[fi],ease:["in","out","in-out"],font:[ZK],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fi],shadow:[fi],spacing:["px",Ge],text:[fi],"text-shadow":[fi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",lc,Ae,ke,j]}],container:["container"],columns:[{columns:[Ge,Ae,ke,d]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:te()}],overflow:[{overflow:ce()}],"overflow-x":[{"overflow-x":ce()}],"overflow-y":[{"overflow-y":ce()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[ba,"auto",ke,Ae]}],basis:[{basis:[lc,"full","auto",d,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ge,lc,"auto","initial","none",Ae]}],grow:[{grow:["",Ge,ke,Ae]}],shrink:[{shrink:["",Ge,ke,Ae]}],order:[{order:[ba,"first","last","none",ke,Ae]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...Pe(),"normal"]}],"justify-items":[{"justify-items":[...Ve(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ve()]}],"align-content":[{content:["normal",...Pe()]}],"align-items":[{items:[...Ve(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ve(),{baseline:["","last"]}]}],"place-content":[{"place-content":Pe()}],"place-items":[{"place-items":[...Ve(),"baseline"]}],"place-self":[{"place-self":["auto",...Ve()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[d,"screen",...ie()]}],"min-w":[{"min-w":[d,"screen","none",...ie()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[l]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",t,Md,jo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ke,Bx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zx,Ae]}],"font-family":[{font:[nQ,Ae,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ke,Ae]}],"line-clamp":[{"line-clamp":[Ge,"none",ke,Bx]}],leading:[{leading:[o,...S()]}],"list-image":[{"list-image":["none",ke,Ae]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ke,Ae]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ge,"from-font","auto",ke,jo]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[Ge,"auto",ke,Ae]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke,Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke,Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ee()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:M()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ba,ke,Ae],radial:["",ke,Ae],conic:[ba,ke,Ae]},rQ,tQ]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:H()}],"gradient-via-pos":[{via:H()}],"gradient-to-pos":[{to:H()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...fe(),"hidden","none"]}],"divide-style":[{divide:[...fe(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ge,ke,Ae]}],"outline-w":[{outline:["",Ge,Md,jo]}],"outline-color":[{outline:ne()}],shadow:[{shadow:["","none",y,Xm,Ym]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",b,Xm,Ym]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[Ge,jo]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":ne()}],"text-shadow":[{"text-shadow":["none",v,Xm,Ym]}],"text-shadow-color":[{"text-shadow":ne()}],opacity:[{opacity:[Ge,ke,Ae]}],"mix-blend":[{"mix-blend":[...ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":we()}],"mask-image-linear-to-pos":[{"mask-linear-to":we()}],"mask-image-linear-from-color":[{"mask-linear-from":ne()}],"mask-image-linear-to-color":[{"mask-linear-to":ne()}],"mask-image-t-from-pos":[{"mask-t-from":we()}],"mask-image-t-to-pos":[{"mask-t-to":we()}],"mask-image-t-from-color":[{"mask-t-from":ne()}],"mask-image-t-to-color":[{"mask-t-to":ne()}],"mask-image-r-from-pos":[{"mask-r-from":we()}],"mask-image-r-to-pos":[{"mask-r-to":we()}],"mask-image-r-from-color":[{"mask-r-from":ne()}],"mask-image-r-to-color":[{"mask-r-to":ne()}],"mask-image-b-from-pos":[{"mask-b-from":we()}],"mask-image-b-to-pos":[{"mask-b-to":we()}],"mask-image-b-from-color":[{"mask-b-from":ne()}],"mask-image-b-to-color":[{"mask-b-to":ne()}],"mask-image-l-from-pos":[{"mask-l-from":we()}],"mask-image-l-to-pos":[{"mask-l-to":we()}],"mask-image-l-from-color":[{"mask-l-from":ne()}],"mask-image-l-to-color":[{"mask-l-to":ne()}],"mask-image-x-from-pos":[{"mask-x-from":we()}],"mask-image-x-to-pos":[{"mask-x-to":we()}],"mask-image-x-from-color":[{"mask-x-from":ne()}],"mask-image-x-to-color":[{"mask-x-to":ne()}],"mask-image-y-from-pos":[{"mask-y-from":we()}],"mask-image-y-to-pos":[{"mask-y-to":we()}],"mask-image-y-from-color":[{"mask-y-from":ne()}],"mask-image-y-to-color":[{"mask-y-to":ne()}],"mask-image-radial":[{"mask-radial":[ke,Ae]}],"mask-image-radial-from-pos":[{"mask-radial-from":we()}],"mask-image-radial-to-pos":[{"mask-radial-to":we()}],"mask-image-radial-from-color":[{"mask-radial-from":ne()}],"mask-image-radial-to-color":[{"mask-radial-to":ne()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":$()}],"mask-image-conic-pos":[{"mask-conic":[Ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":we()}],"mask-image-conic-to-pos":[{"mask-conic-to":we()}],"mask-image-conic-from-color":[{"mask-conic-from":ne()}],"mask-image-conic-to-color":[{"mask-conic-to":ne()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ee()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:M()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ke,Ae]}],filter:[{filter:["","none",ke,Ae]}],blur:[{blur:pe()}],brightness:[{brightness:[Ge,ke,Ae]}],contrast:[{contrast:[Ge,ke,Ae]}],"drop-shadow":[{"drop-shadow":["","none",T,Xm,Ym]}],"drop-shadow-color":[{"drop-shadow":ne()}],grayscale:[{grayscale:["",Ge,ke,Ae]}],"hue-rotate":[{"hue-rotate":[Ge,ke,Ae]}],invert:[{invert:["",Ge,ke,Ae]}],saturate:[{saturate:[Ge,ke,Ae]}],sepia:[{sepia:["",Ge,ke,Ae]}],"backdrop-filter":[{"backdrop-filter":["","none",ke,Ae]}],"backdrop-blur":[{"backdrop-blur":pe()}],"backdrop-brightness":[{"backdrop-brightness":[Ge,ke,Ae]}],"backdrop-contrast":[{"backdrop-contrast":[Ge,ke,Ae]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ge,ke,Ae]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ge,ke,Ae]}],"backdrop-invert":[{"backdrop-invert":["",Ge,ke,Ae]}],"backdrop-opacity":[{"backdrop-opacity":[Ge,ke,Ae]}],"backdrop-saturate":[{"backdrop-saturate":[Ge,ke,Ae]}],"backdrop-sepia":[{"backdrop-sepia":["",Ge,ke,Ae]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ke,Ae]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ge,"initial",ke,Ae]}],ease:[{ease:["linear","initial",P,ke,Ae]}],delay:[{delay:[Ge,ke,Ae]}],animate:[{animate:["none",L,ke,Ae]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[I,ke,Ae]}],"perspective-origin":[{"perspective-origin":te()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:tt()}],"scale-x":[{"scale-x":tt()}],"scale-y":[{"scale-y":tt()}],"scale-z":[{"scale-z":tt()}],"scale-3d":["scale-3d"],skew:[{skew:jt()}],"skew-x":[{"skew-x":jt()}],"skew-y":[{"skew-y":jt()}],transform:[{transform:[ke,Ae,"","none","gpu","cpu"]}],"transform-origin":[{origin:te()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:In()}],"translate-x":[{"translate-x":In()}],"translate-y":[{"translate-y":In()}],"translate-z":[{"translate-z":In()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke,Ae]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke,Ae]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[Ge,Md,jo,Bx]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},lQ=BK(oQ);function Rr(...n){return lQ(vK(n))}const cQ=n=>n?(typeof n=="object"&&"toDate"in n&&typeof n.toDate=="function"?n.toDate():new Date(n)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...";function uQ(){const{user:n}=Pi(),{groups:e,challenges:t,createGroup:s,joinGroup:i,sendMessage:o,leaveGroup:l,createChallenge:d,joinChallenge:f}=bK(),[m,y]=C.useState(null),[b,v]=C.useState([]),[T,k]=C.useState(""),[I,j]=C.useState(!1),[P,L]=C.useState("chat"),z=C.useRef(null);C.useEffect(()=>{const A=window.innerWidth<768;!m&&e.length>0&&!A&&y(e[0])},[e,m]),C.useEffect(()=>{if(!m)return;const A=xi(ps(qt,"groups",m.id,"messages"),Wh("timestamp","asc"),xu(50)),O=Ga(A,U=>{const q=[];U.forEach(V=>{q.push({id:V.id,...V.data()})}),v(q)},U=>console.error("Msg Load Err",U));return()=>{O(),v([])}},[m]),C.useEffect(()=>{z.current?.scrollIntoView({behavior:"smooth"})},[b]);const $=async A=>{A.preventDefault(),!(!T.trim()||!m||I)&&(j(!0),await o(m.id,T.trim()),k(""),j(!1))},te=()=>{const A=prompt("Enter Group Name:");if(!A)return;const O=prompt("Enter Description (optional):")||"";s(A,O)},ce=()=>{const A=prompt("Enter Invitation Code:");A&&i(A)},D=()=>{m&&confirm(`Leave group "${m.name}"?`)&&(l(m.id),y(null))},S=()=>{m&&(navigator.clipboard.writeText(m.inviteCode),alert("Invite code copied: "+m.inviteCode))};return h.jsxs(Kg,{className:"h-[calc(100vh-8rem)] md:h-[calc(100vh-4rem)] flex flex-col md:flex-row overflow-hidden",children:[h.jsx("div",{className:`md:hidden flex items-center justify-between p-4 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 ${m?"hidden":"flex"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Nc,{className:"w-6 h-6 text-indigo-500"}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-white truncate max-w-[200px]",children:"Study Groups"})]})}),m&&h.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:[h.jsxs("button",{onClick:()=>y(null),className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[h.jsx(rg,{className:"w-5 h-5"}),h.jsx("span",{className:"font-medium",children:"Back"})]}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-white truncate max-w-[150px]",children:m.name}),m.id!=="global-study-lounge"&&m.inviteCode!=="GLOBAL"?h.jsx("button",{onClick:D,className:"text-red-500",children:h.jsx(ag,{className:"w-5 h-5"})}):h.jsx("div",{className:"w-5"})]}),h.jsxs("div",{className:`flex-col bg-slate-50 dark:bg-slate-900 border-r border-slate-200 dark:border-slate-700 w-full md:w-72 md:flex ${m?"hidden":"flex"}`,children:[h.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 hidden md:flex justify-between items-center",children:h.jsxs("h2",{className:"font-bold text-xl text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(Nc,{className:"w-6 h-6 text-indigo-500"}),"My Groups"]})}),h.jsxs("div",{className:"p-4 space-y-2",children:[h.jsxs("button",{onClick:te,className:"w-full flex items-center justify-center gap-2 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:[h.jsx(_i,{className:"w-4 h-4"})," Create Group"]}),h.jsxs("button",{onClick:ce,className:"w-full flex items-center justify-center gap-2 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-lg font-medium transition-colors",children:[h.jsx(PH,{className:"w-4 h-4"})," Join via Code"]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-1",children:[e.length===0&&h.jsx("div",{className:"text-center text-slate-500 text-sm py-4",children:"You haven't joined any groups yet."}),e.map(A=>h.jsxs("button",{onClick:()=>{y(A)},className:Rr("w-full text-left px-3 py-3 rounded-xl flex items-center gap-3 transition-all",m?.id===A.id?"bg-white dark:bg-slate-800 shadow-sm ring-1 ring-indigo-500/20":"hover:bg-slate-100 dark:hover:bg-slate-800"),children:[h.jsx("div",{className:Rr("w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm",A.id==="global-study-lounge"||A.inviteCode==="GLOBAL"?"bg-amber-500":m?.id===A.id?"bg-indigo-500":"bg-slate-400"),children:A.id==="global-study-lounge"||A.inviteCode==="GLOBAL"?"":A.name[0].toUpperCase()}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:Rr("font-medium text-sm flex items-center justify-between",m?.id===A.id?"text-indigo-900 dark:text-indigo-100":"text-slate-700 dark:text-slate-300"),children:[A.name,(A.id==="global-study-lounge"||A.inviteCode==="GLOBAL")&&h.jsx("span",{className:"text-[8px] bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wider",children:"Public"})]}),h.jsxs("div",{className:"text-xs text-slate-500 truncate max-w-[140px]",children:[A.members.length," members"]})]})]},A.id))]})]}),h.jsx("div",{className:`flex-1 flex-col bg-white dark:bg-slate-800 relative md:flex ${m?"flex":"hidden"}`,children:m?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col border-b border-slate-100 dark:border-slate-700 shadow-sm z-10 bg-white dark:bg-slate-800",children:[h.jsxs("div",{className:"flex items-center justify-between p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>y(null),className:"md:hidden p-1 text-slate-500",children:h.jsx(rg,{className:"w-6 h-6"})}),h.jsxs("div",{children:[h.jsxs("h2",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[m.name,h.jsxs("span",{className:"text-xs font-normal px-2 py-0.5 bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 rounded-full",children:[m.members.length," Members"]})]}),h.jsx("p",{className:"text-xs text-slate-500 hidden md:block",children:m.description||"No description set"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:S,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-500",title:"Copy Invite Code",children:h.jsx(TH,{className:"w-5 h-5"})}),m.id!=="global-study-lounge"&&m.inviteCode!=="GLOBAL"&&h.jsx("button",{onClick:D,className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg text-red-500",title:"Leave Group",children:h.jsx(ag,{className:"w-5 h-5"})})]})]}),h.jsxs("div",{className:"flex px-4 border-t border-slate-50 dark:border-slate-700/50",children:[h.jsxs("button",{onClick:()=>L("chat"),className:Rr("py-3 px-4 text-sm font-medium border-b-2 transition-all flex items-center gap-2",P==="chat"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 hover:text-slate-700"),children:[h.jsx(Jb,{className:"w-4 h-4"}),"Chat"]}),h.jsxs("button",{onClick:()=>L("challenges"),className:Rr("py-3 px-4 text-sm font-medium border-b-2 transition-all flex items-center gap-2",P==="challenges"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 hover:text-slate-700"),children:[h.jsx(lr,{className:"w-4 h-4"}),"Challenges"]}),h.jsxs("button",{onClick:()=>L("leaderboard"),className:Rr("py-3 px-4 text-sm font-medium border-b-2 transition-all flex items-center gap-2",P==="leaderboard"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 hover:text-slate-700"),children:[h.jsx(_p,{className:"w-4 h-4"}),"Leaderboard"]})]})]}),h.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[P==="chat"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50 dark:bg-slate-900/50",children:[b.length===0&&h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[h.jsx(Jb,{className:"w-12 h-12 mb-2 opacity-50"}),h.jsx("p",{children:"No messages yet. Start the conversation!"}),h.jsxs("p",{className:"text-xs mt-2",children:["Invite Code: ",h.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-800 px-1 rounded select-all",children:m.inviteCode})]})]}),b.map(A=>{const O=A.senderId===n?.uid;return h.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:Rr("flex gap-3",O?"flex-row-reverse":""),children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-xs font-bold text-indigo-700 dark:text-indigo-300 flex-shrink-0",children:A.senderName[0]}),h.jsxs("div",{className:Rr("max-w-[75%]",O?"items-end":"items-start"),children:[h.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[h.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-400",children:A.senderName}),h.jsx("span",{className:"text-[10px] text-slate-400",children:cQ(A.timestamp)})]}),h.jsx("div",{className:Rr("px-4 py-2 rounded-2xl text-sm shadow-sm",O?"bg-indigo-600 text-white rounded-tr-sm":"bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-tl-sm"),children:A.text})]})]},A.id)}),h.jsx("div",{ref:z})]}),h.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700",children:h.jsxs("form",{onSubmit:$,className:"flex gap-2",children:[h.jsx("input",{value:T,onChange:A=>k(A.target.value),placeholder:`Message #${m.name}`,className:"flex-1 px-4 py-2 bg-slate-100 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-indigo-500"}),h.jsx("button",{disabled:I||!T.trim(),className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50",children:I?h.jsx(BH,{className:"animate-spin w-5 h-5"}):h.jsx(d$,{className:"w-5 h-5"})})]})})]}),P==="challenges"&&h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50/50 dark:bg-slate-900/50",children:[h.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(lr,{className:"w-5 h-5 text-yellow-500"}),"Group Challenges"]}),h.jsx("p",{className:"text-xs text-slate-500",children:"Achieve study goals together!"})]}),h.jsx("button",{onClick:()=>{const A=prompt("Challenge Title (e.g., Weekend Warrior):");if(!A)return;const O=parseInt(prompt("Goal XP:")||"1000"),U=parseInt(prompt("Duration in days:")||"7");d(m.id,A,O,U)},className:"p-2 bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400 rounded-xl hover:bg-indigo-100 transition-colors",children:h.jsx(yH,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"grid gap-4",children:[t.filter(A=>A.groupId===m.id).length===0&&h.jsxs("div",{className:"text-center py-12 text-slate-400",children:[h.jsx(HD,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),h.jsx("p",{children:"No active challenges for this group."}),h.jsx("p",{className:"text-xs",children:"Create one to motivate your team!"})]}),t.filter(A=>A.groupId===m.id).map(A=>{const O=A.participants.includes(n?.uid||""),U=Math.ceil((new Date(A.endDate).getTime()-new Date().getTime())/(1e3*3600*24));return h.jsxs(ve.div,{layout:!0,className:"bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 group hover:border-indigo-500/30 transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-600 transition-colors",children:A.title}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsxs("span",{className:"text-xs flex items-center gap-1 text-slate-500",children:[h.jsx(_p,{className:"w-3 h-3 text-orange-500"}),A.goalXP," XP Goal"]}),h.jsxs("span",{className:"text-xs flex items-center gap-1 text-slate-500",children:[h.jsx(sg,{className:"w-3 h-3"}),U>0?`${U} days left`:"Ended"]})]})]}),!O&&U>0&&h.jsx("button",{onClick:()=>f(A.id),className:"px-4 py-1.5 bg-indigo-600 text-white text-xs font-bold rounded-full hover:bg-indigo-700 shadow-lg shadow-indigo-500/20",children:"Join"}),O&&h.jsxs("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 text-[10px] font-bold rounded-full flex items-center gap-1",children:[h.jsx(Vi,{className:"w-3 h-3"})," Joined"]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex -space-x-2",children:[A.participants.slice(0,5).map(q=>h.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-700 border-2 border-white dark:border-slate-800 flex items-center justify-center text-[8px] font-bold text-slate-500",children:q[0].toUpperCase()},q)),A.participants.length>5&&h.jsxs("div",{className:"w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-700 border-2 border-white dark:border-slate-800 flex items-center justify-center text-[8px] font-bold text-slate-500",children:["+",A.participants.length-5]})]}),h.jsxs("span",{className:"text-[10px] text-slate-400",children:[A.participants.length," students participating"]})]})]},A.id)})]})]}),P==="leaderboard"&&h.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50/50 dark:bg-slate-900/50",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden",children:[h.jsxs("div",{className:"bg-indigo-600 p-6 text-white",children:[h.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[h.jsx(_p,{className:"w-6 h-6"}),"Group Standings"]}),h.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"Real-time ranking of study partners"})]}),h.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.members.map((A,O)=>h.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:Rr("w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",O===0?"bg-yellow-100 text-yellow-700":O===1?"bg-slate-100 text-slate-500":O===2?"bg-orange-100 text-orange-700":"text-slate-400"),children:O+1}),h.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-700 dark:text-indigo-300 font-bold",children:A.name[0]}),h.jsxs("div",{children:[h.jsxs("div",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[A.name,A.userId===n?.uid&&h.jsx("span",{className:"text-[10px] bg-indigo-500 text-white px-1.5 rounded-full",children:"Me"})]}),h.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",new Date(A.joinedAt).toLocaleDateString()]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:"... XP"}),h.jsx("div",{className:"text-[10px] text-slate-400 uppercase tracking-wider font-bold",children:A.role})]})]},A.userId))})]})})]})]}):h.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[h.jsx(Nc,{className:"w-16 h-16 mb-4 opacity-50"}),h.jsx("h3",{className:"text-lg font-medium text-slate-600 dark:text-slate-300",children:"Select a Group"}),h.jsx("p",{className:"max-w-xs text-center mt-2",children:"Join a study group or create your own to collaborate with friends."})]})})]})}function dQ({steps:n,onComplete:e,onSkip:t}){const[s,i]=C.useState(0),[o,l]=C.useState(null),d=n[s];C.useEffect(()=>{if(d.targetId){const y=document.getElementById(d.targetId);y?(l(y.getBoundingClientRect()),y.scrollIntoView({behavior:"smooth",block:"center"})):l(null)}else l(null)},[s,d,n]);const f=()=>{s<n.length-1?i(y=>y+1):e()},m=()=>{s>0&&i(y=>y-1)};return h.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 pointer-events-none"}),o&&h.jsx(ve.div,{layoutId:"highlight-box",className:"absolute border-4 border-blue-500 rounded-xl shadow-[0_0_0_9999px_rgba(0,0,0,0.6)] pointer-events-none transition-all duration-300",style:{top:o.top-4,left:o.left-4,width:o.width+8,height:o.height+8}}),h.jsx(ns,{mode:"wait",children:h.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`pointer-events-auto absolute bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-2xl border border-slate-100 dark:border-slate-700 max-w-sm w-full mx-4 ${o?"":"static"}`,style:o&&d.position!=="center"?{top:d.position==="bottom"?o.bottom+20:d.position==="top"?o.top-200:void 0,left:d.position==="right"?o.right+20:d.position==="left"?o.left-340:Math.max(16,o.left+o.width/2-160),marginTop:(d.position==="bottom",0)}:{},children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider",children:["Step ",s+1," of ",n.length]}),h.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:h.jsx(Vs,{className:"w-4 h-4"})})]}),h.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:d.title}),h.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-6 leading-relaxed",children:d.description}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("button",{onClick:m,disabled:s===0,className:`flex items-center gap-1 text-sm font-medium ${s===0?"text-slate-300":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[h.jsx(rg,{className:"w-4 h-4"})," Back"]}),h.jsxs("button",{onClick:f,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full font-medium text-sm flex items-center gap-2 shadow-sm transition-transform active:scale-95",children:[s===n.length-1?"Finish":"Next",s<n.length-1&&h.jsx(dw,{className:"w-4 h-4"})]})]})]},s)})]})}const hQ="/Study-Mate/assets/logo-C0C7fgvJ.png";function fQ({deferredPrompt:n,onInstall:e}){const[t,s]=C.useState(!1);C.useEffect(()=>{const o=setTimeout(()=>s(!0),3e3);return()=>clearTimeout(o)},[]);const i=()=>{s(!1)};return!t||!n?null:h.jsx(ns,{children:h.jsx(ve.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-24 md:bottom-6 left-1/2 transform -translate-x-1/2 z-50 w-[90%] md:w-auto",children:h.jsxs("div",{className:"bg-slate-900/90 dark:bg-white/90 backdrop-blur-md text-white dark:text-slate-900 px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4 border border-white/10 dark:border-slate-200/20",children:[h.jsx("div",{className:"bg-indigo-500 rounded-xl p-2",children:h.jsx(fw,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-bold text-sm",children:"Install App"}),h.jsx("p",{className:"text-xs text-slate-300 dark:text-slate-600",children:"Add to home screen for better experience"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:i,className:"p-2 hover:bg-white/10 dark:hover:bg-slate-200/50 rounded-lg transition-colors",children:h.jsx(Vs,{className:"w-4 h-4"})}),h.jsx("button",{onClick:e,className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg active:scale-95 transition-transform",children:"Install"})]})]})})})}function mQ(){const{userProfile:n}=Lt();C.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission();const e=()=>{if(!("Notification"in window)||Notification.permission!=="granted")return;const i=n.lastStudyDate?new Date(n.lastStudyDate):null;if(!i)return;const o=new Date,l=Math.abs(o.getTime()-i.getTime()),d=Math.ceil(l/(1e3*60*60*24));if(d>=3){const f=localStorage.getItem("tracked_last_reminder"),m=f?new Date(f):null;(m?(o.getTime()-m.getTime())/(1e3*60*60):999)>24&&(new Notification("Miss you! ",{body:`It's been ${d} days since your last study session. Keep your streak alive!`,icon:"/pwa-icon.svg",tag:"inactivity-reminder"}),localStorage.setItem("tracked_last_reminder",o.toISOString()))}},t=()=>{if(!("Notification"in window)||Notification.permission!=="granted")return;const i=n.dailyGoal||7200,o=n.todayStudyTime||0,l=i-o;if(l>0&&l<=1800){const d=localStorage.getItem("tracked_goal_reminder"),f=new Date().toISOString().split("T")[0];d!==f&&(new Notification("Almost there! ",{body:"You're less than 30 minutes away from your daily goal. Finish strong!",icon:"/pwa-icon.svg",tag:"goal-reminder"}),localStorage.setItem("tracked_goal_reminder",f))}},s=setTimeout(()=>{e(),t()},5e3);return()=>clearTimeout(s)},[n.lastStudyDate,n.todayStudyTime,n.dailyGoal])}const pQ=[{title:"Welcome to TrackEd! ",description:"Your personal companion for academic success. Let's take a quick tour to get you started.",position:"center"},{targetId:"add-subject-btn",title:"Add Your Subjects ",description:"Start by adding the subjects you want to track. You can organize them by chapters and topics.",position:"bottom"},{targetId:"nav-timer",title:"Focus Timer ",description:"Use the Pomodoro timer or stopwatch to track your study sessions and build streaks.",position:"right"},{targetId:"nav-settings",title:"Customize Experience ",description:"Manage your profile, data, and switch between light/dark modes here.",position:"top"}];function gQ(){const{logout:n}=Pi(),{theme:e,toggleTheme:t}=ZD(),{userProfile:s,isAdmin:i}=Lt(),{currentTitle:o,nextLevelXP:l,progress:d}=ev(s.xp||0),f=s.level||1,m=Ii(),y=OP();mQ();const[b,v]=C.useState(!1),[T,k]=C.useState(null);C.useEffect(()=>{localStorage.setItem("tracked_tour_completed","true");const L=z=>{z.preventDefault(),k(z)};return window.addEventListener("beforeinstallprompt",L),()=>window.removeEventListener("beforeinstallprompt",L)},[]);const I=()=>{v(!1),localStorage.setItem("tracked_tour_completed","true")},j=async()=>{if(!T)return;T.prompt();const{outcome:L}=await T.userChoice;L==="accepted"&&k(null)},P=L=>m.pathname===L;return h.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 pb-20 md:pb-0 font-sans transition-colors duration-300",children:[b&&h.jsx(dQ,{steps:pQ,onComplete:I,onSkip:I}),h.jsxs("header",{className:"glass sticky top-0 z-20 px-4 py-3 flex items-center justify-between md:hidden transition-colors duration-300",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-xs shadow-md",children:f}),h.jsx("div",{children:h.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:"TrackEd"})})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:t,className:"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100/50 dark:hover:bg-slate-700/50 rounded-full transition-colors backdrop-blur-sm","aria-label":"Toggle Theme",children:e==="light"?h.jsx(og,{className:"w-5 h-5"}):h.jsx(Zb,{className:"w-5 h-5"})}),h.jsx(gn,{to:"/settings",className:"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100/50 dark:hover:bg-slate-700/50 rounded-full transition-colors backdrop-blur-sm",children:h.jsx(w2,{className:"w-5 h-5"})})]})]}),h.jsxs("div",{className:"md:flex max-w-7xl mx-auto",children:[h.jsxs("aside",{className:"hidden md:flex flex-col w-72 h-[calc(100vh-2rem)] sticky top-4 m-4 rounded-3xl glass shadow-2xl shadow-slate-200/60 dark:shadow-slate-900/50 p-6 transition-all duration-300 z-10",children:[h.jsxs("div",{className:"flex items-center justify-between mb-10 pl-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:hQ,alt:"TrackEd Logo",className:"w-10 h-10 rounded-xl object-contain shadow-md"}),h.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white tracking-tight",children:"TrackEd"})]}),h.jsx("button",{onClick:t,className:"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100/80 dark:hover:bg-slate-700/50 rounded-xl transition-colors","aria-label":"Toggle Theme",children:e==="light"?h.jsx(og,{className:"w-5 h-5"}):h.jsx(Zb,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"mb-8 px-2",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-blue-500/30 ring-2 ring-white dark:ring-slate-700",children:f}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white leading-tight",children:s.name}),h.jsx("p",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:o})]})]}),h.jsxs("div",{className:"space-y-1.5",children:[h.jsxs("div",{className:"flex justify-between text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:[h.jsxs("span",{children:[s.xp," XP"]}),h.jsx("span",{children:l?`${l} XP`:"MAX"})]}),h.jsx("div",{className:"w-full h-2.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden shadow-inner ring-1 ring-slate-900/5 dark:ring-white/5",children:h.jsx(ve.div,{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full",initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,ease:"easeOut"}})})]})]}),h.jsxs("nav",{className:"space-y-1.5 flex-1",children:[h.jsxs(gn,{to:"/",className:`flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-200 ${P("/")?"bg-blue-600 text-white shadow-lg shadow-blue-500/30 font-medium translate-x-1":"text-slate-600 dark:text-slate-400 hover:bg-slate-100/80 dark:hover:bg-slate-800/50 hover:text-slate-900 dark:hover:text-white"}`,children:[h.jsx(v2,{className:"w-5 h-5"}),"Dashboard"]}),h.jsxs(gn,{to:"/planner",className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative ${P("/planner")?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[h.jsx(sg,{className:`w-5 h-5 transition-transform group-hover:scale-110 ${P("/planner")?"text-white":"text-slate-500 group-hover:text-blue-600 dark:text-slate-500 dark:group-hover:text-blue-400"}`}),h.jsx("span",{className:"font-medium",children:"Planner"}),P("/planner")&&h.jsx(ve.div,{layoutId:"activeTab",className:"absolute left-0 w-1 h-8 bg-white rounded-r-full opacity-30"})]}),h.jsxs(gn,{to:"/analytics",className:`flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-200 ${P("/analytics")?"bg-blue-600 text-white shadow-lg shadow-blue-500/30 font-medium translate-x-1":"text-slate-600 dark:text-slate-400 hover:bg-slate-100/80 dark:hover:bg-slate-800/50 hover:text-slate-900 dark:hover:text-white"}`,children:[h.jsx(kc,{className:"w-5 h-5"}),"Analytics"]}),h.jsxs(gn,{to:"/timer",id:"nav-timer",className:`flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-200 ${m.pathname==="/timer"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30 font-medium translate-x-1":"text-slate-600 dark:text-slate-400 hover:bg-slate-100/80 dark:hover:bg-slate-800/50 hover:text-slate-900 dark:hover:text-white"}`,children:[h.jsx(E2,{className:"w-5 h-5"}),"Timer"]}),h.jsxs(gn,{to:"/chat",className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative ${P("/chat")?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[h.jsx(Nc,{className:`w-5 h-5 transition-transform group-hover:scale-110 ${P("/chat")?"text-white":"text-slate-500 group-hover:text-blue-600 dark:text-slate-500 dark:group-hover:text-blue-400"}`}),h.jsx("span",{className:"font-medium",children:"Study Groups"}),P("/chat")&&h.jsx(ve.div,{layoutId:"activeTab",className:"absolute left-0 w-1 h-8 bg-white rounded-r-full opacity-30"})]}),h.jsxs(gn,{to:"/settings",id:"nav-settings",className:`flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-200 ${P("/settings")?"bg-blue-600 text-white shadow-lg shadow-blue-500/30 font-medium translate-x-1":"text-slate-600 dark:text-slate-400 hover:bg-slate-100/80 dark:hover:bg-slate-800/50 hover:text-slate-900 dark:hover:text-white"}`,children:[h.jsx(w2,{className:"w-5 h-5"}),"Settings"]}),i&&h.jsxs(gn,{to:"/admin",className:`flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-200 ${P("/admin")?"bg-rose-600 text-white shadow-lg shadow-rose-500/30 font-medium translate-x-1":"text-slate-600 dark:text-slate-400 hover:bg-slate-100/80 dark:hover:bg-slate-800/50 hover:text-slate-900 dark:hover:text-white"}`,children:[h.jsx(qd,{className:"w-5 h-5"}),"Admin Panel"]})]}),h.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-200/50 dark:border-slate-700/50",children:[h.jsxs("button",{onClick:n,className:"flex items-center gap-3 px-4 py-3.5 rounded-xl text-slate-600 dark:text-slate-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 dark:hover:text-red-400 transition-colors w-full text-left mb-4 group",children:[h.jsx(ag,{className:"w-5 h-5 group-hover:-translate-x-0.5 transition-transform"}),"Sign Out"]}),h.jsxs("div",{className:"text-xs text-center text-slate-400 dark:text-slate-500 font-medium",children:[h.jsx("p",{children:"Empowering Students"}),h.jsx("p",{className:"mt-1 opacity-70",children:" 2026 TrackEd"})]})]})]}),h.jsx("main",{className:"flex-1 p-4 md:p-8",children:h.jsx(ns,{mode:"wait",children:y&&C.cloneElement(y,{key:m.pathname})})})]}),h.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex justify-around pt-3 px-3 pb-[calc(0.75rem+env(safe-area-inset-bottom))] md:hidden z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] transition-colors duration-300",children:[h.jsxs(gn,{to:"/",className:`flex flex-col items-center gap-1 text-xs ${P("/")?"text-blue-600 dark:text-blue-400 font-medium":"text-slate-400 dark:text-slate-500"}`,children:[h.jsx(v2,{className:"w-6 h-6"}),h.jsx("span",{children:"Home"})]}),h.jsxs(gn,{to:"/planner",className:`flex flex-col items-center gap-1 text-xs ${P("/planner")?"text-blue-600 dark:text-blue-400 font-medium":"text-slate-400 dark:text-slate-500"}`,children:[h.jsx(sg,{className:"w-6 h-6"}),h.jsx("span",{children:"Planner"})]}),h.jsxs(gn,{to:"/timer",className:`flex flex-col items-center gap-1 text-xs ${P("/timer")?"text-blue-600 dark:text-blue-400 font-medium":"text-slate-400 dark:text-slate-500"}`,children:[h.jsx(E2,{className:"w-6 h-6"}),h.jsx("span",{children:"Timer"})]}),h.jsxs(gn,{to:"/chat",className:`flex flex-col items-center gap-1 text-xs ${P("/chat")?"text-blue-600 dark:text-blue-400 font-medium":"text-slate-400 dark:text-slate-500"}`,children:[h.jsx(Nc,{className:"w-6 h-6"}),h.jsx("span",{children:"Groups"})]}),h.jsxs(gn,{to:"/analytics",className:`flex flex-col items-center gap-1 text-xs ${P("/analytics")?"text-blue-600 dark:text-blue-400 font-medium":"text-slate-400 dark:text-slate-500"}`,children:[h.jsx(kc,{className:"w-6 h-6"}),h.jsx("span",{children:"Stats"})]})]}),T&&h.jsx(fQ,{deferredPrompt:T,onInstall:j})]})}function yQ(){const{signInWithGoogle:n,user:e}=Pi(),t=tu();return M2.useEffect(()=>{e&&t("/")},[e,t]),h.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-50 dark:bg-slate-900 transition-colors",children:[h.jsxs("div",{className:"absolute inset-0 z-0",children:[h.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-400/20 dark:bg-blue-600/10 rounded-full blur-3xl animate-pulse"}),h.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-400/20 dark:bg-indigo-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),h.jsx("div",{className:"absolute top-[20%] right-[10%] w-[20%] h-[20%] bg-purple-400/20 dark:bg-purple-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),h.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"relative z-10 w-full max-w-md px-6",children:[h.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 dark:border-slate-700/50 p-8 md:p-12 text-center transition-colors",children:[h.jsx("div",{className:"flex justify-center mb-8",children:h.jsx("div",{className:"p-4 bg-indigo-600 rounded-2xl shadow-lg transform rotate-3 hover:rotate-6 transition-transform duration-300",children:h.jsx(FD,{className:"w-10 h-10 text-white"})})}),h.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-3 tracking-tight transition-colors",children:["Welcome to ",h.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:"TrackEd"})]}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-10 text-lg leading-relaxed transition-colors",children:"Master your study habits and achieve your goals."}),h.jsxs(ve.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,className:"group w-full relative flex items-center justify-center gap-3 py-3.5 px-6 border border-transparent rounded-xl shadow-md text-base font-semibold text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200",children:[h.jsx("div",{className:"bg-white p-1 rounded-full",children:h.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"G",className:"w-4 h-4"})}),h.jsx("span",{children:"Sign in with Google"}),h.jsx(LD,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]}),h.jsx("p",{className:"mt-8 text-xs text-slate-400 dark:text-slate-500 transition-colors",children:"By signing in, you agree to our Terms of Service and Privacy Policy."})]}),h.jsx("div",{className:"mt-8 text-center",children:h.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 transition-colors",children:"Focus. Track. Succeed."})})]})]})}const xQ=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function bQ(){const{subjects:n,userProfile:e,addScheduledSession:t,toggleScheduledSession:s,deleteScheduledSession:i,saveStudySession:o,generateSmartSchedule:l}=Lt(),[d,f]=C.useState(new Date),[m,y]=C.useState(new Date),[b,v]=C.useState(!1),[T,k]=C.useState({subjectId:"",chapterId:"",topicId:"",time:"18:00",durationMinutes:60,notes:""}),I=()=>{n.length>0&&k(F=>({...F,subjectId:n[0].id})),v(!0)},j=F=>{if(F.preventDefault(),!m||!T.subjectId)return;const ie=m.getFullYear(),ne=String(m.getMonth()+1).padStart(2,"0"),Ee=String(m.getDate()).padStart(2,"0"),oe=`${ie}-${ne}-${Ee}`;t({subjectId:T.subjectId,date:oe,time:T.time,durationMinutes:T.durationMinutes,chapterId:T.chapterId||void 0,topicId:T.topicId||void 0,notes:T.notes}),v(!1)},P=C.useMemo(()=>{if(!m||!e.scheduledSessions)return[];const F=m.getFullYear(),ie=String(m.getMonth()+1).padStart(2,"0"),ne=String(m.getDate()).padStart(2,"0"),Ee=`${F}-${ie}-${ne}`;return e.scheduledSessions.filter(oe=>oe.date===Ee)},[m,e.scheduledSessions]),L=F=>{if(!e.scheduledSessions)return!1;const ie=d.getFullYear(),ne=String(d.getMonth()+1).padStart(2,"0"),Ee=String(F).padStart(2,"0"),oe=`${ie}-${ne}-${Ee}`;return e.scheduledSessions.some(M=>M.date===oe&&!M.isCompleted)},z=async F=>{F.isCompleted||confirm("Mark as done? Do you want to log this time to your stats?")&&await o(F.durationMinutes*60,F.subjectId),s(F.id)},$=(F,ie)=>new Date(F,ie+1,0).getDate(),te=(F,ie)=>new Date(F,ie,1).getDay(),ce=d.getFullYear(),D=d.getMonth(),S=$(ce,D),A=te(ce,D),O=()=>f(new Date(ce,D-1,1)),U=()=>f(new Date(ce,D+1,1)),q=new Date,V=F=>F===q.getDate()&&D===q.getMonth()&&ce===q.getFullYear(),Pe=F=>m&&F===m.getDate()&&D===m.getMonth()&&ce===m.getFullYear(),Ve=C.useMemo(()=>{const F=[];return n.forEach(ie=>{ie.chapters.forEach(ne=>{ne.isCompleted||ne.topics.forEach(Ee=>{Ee.isCompleted||F.push({subjectName:ie.name,chapterName:ne.name,topicName:Ee.name,priority:Math.random()})})})}),F.sort((ie,ne)=>ne.priority-ie.priority).slice(0,3)},[n]);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("header",{children:[h.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:"Study Planner"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage your schedule and stay on track."})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(sg,{className:"w-5 h-5 text-blue-500"}),d.toLocaleString("default",{month:"long",year:"numeric"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:O,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:h.jsx(rg,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"})}),h.jsx("button",{onClick:U,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:h.jsx(dw,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"})})]})]}),h.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2 text-center",children:xQ.map(F=>h.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider py-2",children:F},F))}),h.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:A}).map((F,ie)=>h.jsx("div",{className:"aspect-square"},`empty-${ie}`)),Array.from({length:S}).map((F,ie)=>{const ne=ie+1,Ee=V(ne)?"bg-blue-500 text-white shadow-lg shadow-blue-500/30 font-bold":"",oe=Pe(ne)&&!V(ne)?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 font-semibold":"";return h.jsxs(ve.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(new Date(ce,D,ne)),className:`aspect-square rounded-xl flex items-center justify-center text-sm cursor-pointer transition-all hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 relative ${Ee} ${oe}`,children:[ne,L(ne)&&h.jsx("div",{className:"absolute bottom-1 w-1 h-1 bg-indigo-500 rounded-full"})]},ne)})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(ig,{className:"w-5 h-5 text-indigo-500"}),m?.toLocaleDateString([],{weekday:"long",month:"long",day:"numeric"})]}),h.jsx("button",{onClick:I,className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:underline",children:"+ Add"})]}),h.jsx("div",{className:"space-y-3 min-h-[100px]",children:P.length>0?P.map(F=>{const ie=n.find(Ee=>Ee.id===F.subjectId);let ne="";if(ie&&F.chapterId){const Ee=ie.chapters.find(oe=>oe.id===F.chapterId);if(Ee&&(ne=Ee.name,F.topicId)){const oe=Ee.topics.find(M=>M.id===F.topicId);oe&&(ne+=` > ${oe.name}`)}}return h.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:[h.jsx("input",{type:"checkbox",checked:F.isCompleted,onChange:()=>z(F),className:"mt-1 w-4 h-4 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsx("span",{className:`font-semibold text-sm ${F.isCompleted?"line-through text-slate-400":"text-slate-800 dark:text-slate-200"}`,children:ie?.name||"Unknown Subject"}),h.jsx("button",{onClick:()=>i(F.id),className:"text-slate-400 hover:text-red-500",children:""})]}),ne&&h.jsx("div",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium mt-0.5",children:ne}),h.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex gap-2",children:[h.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-1.5 py-0.5 rounded",children:F.time}),h.jsxs("span",{children:[F.durationMinutes,"m"]})]}),F.notes&&h.jsxs("p",{className:"text-xs text-slate-500 mt-1 italic",children:['"',F.notes,'"']})]})]},F.id)}):h.jsxs("div",{className:"text-center py-8 text-slate-400 text-sm",children:[h.jsx("p",{children:"No study sessions scheduled."}),h.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-indigo-50 text-indigo-600 dark:bg-indigo-900/20 dark:text-indigo-400 rounded-lg text-sm font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors",children:"+ Schedule Session"})]})})]}),h.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-slate-100 dark:border-slate-700 shadow-sm transition-colors",children:h.jsx(XD,{})}),h.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg overflow-hidden relative",children:[h.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("h3",{className:"font-bold text-lg mb-1 flex items-center gap-2",children:[h.jsx(Nh,{className:"w-5 h-5 text-yellow-300 fill-yellow-300"}),"AI Study Path"]}),h.jsx("p",{className:"text-indigo-100 text-xs mb-4",children:"Automatically distribute your remaining topics until your exam dates."}),h.jsxs("button",{onClick:()=>{confirm("This will automatically schedule your incomplete topics across the calendar until your next exam dates. Existing manually scheduled sessions for those subjects on the same days will be skipped. Proceed?")&&l()},className:"w-full py-2.5 bg-white text-indigo-600 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2",children:[h.jsx(Nh,{className:"w-4 h-4 fill-indigo-600"}),"Generate AI Path"]})]})]}),h.jsxs("div",{className:"space-y-3 mt-4",children:[h.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest pl-1 mb-2",children:"Smart Suggestions"}),Ve.length>0?Ve.map((F,ie)=>h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-3 border border-slate-100 dark:border-slate-700 hover:border-indigo-200 dark:hover:border-indigo-900/50 transition-colors cursor-pointer shadow-sm",children:[h.jsx("div",{className:"text-[10px] font-medium text-indigo-600 dark:text-indigo-400 uppercase tracking-wider mb-1",children:F.subjectName}),h.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm line-clamp-1",children:F.topicName}),h.jsx("div",{className:"text-[10px] text-slate-500 mt-0.5 line-clamp-1",children:F.chapterName})]},ie)):h.jsxs("div",{className:"text-center py-4 text-indigo-100",children:[h.jsx("p",{children:" All caught up!"}),h.jsx("p",{className:"text-xs opacity-70 mt-1",children:"Great job clearing your backlog."})]})]})]})]}),b&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:h.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-md p-6",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Schedule Study Session"}),h.jsxs("form",{onSubmit:j,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subject"}),h.jsx("select",{value:T.subjectId,onChange:F=>k({...T,subjectId:F.target.value,chapterId:"",topicId:""}),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none",children:n.map(F=>h.jsx("option",{value:F.id,children:F.name},F.id))})]}),T.subjectId&&h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Chapter (Opt)"}),h.jsxs("select",{value:T.chapterId,onChange:F=>k({...T,chapterId:F.target.value,topicId:""}),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm",children:[h.jsx("option",{value:"",children:"Any Chapter"}),n.find(F=>F.id===T.subjectId)?.chapters.map(F=>h.jsx("option",{value:F.id,children:F.name},F.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Topic (Opt)"}),h.jsxs("select",{value:T.topicId,onChange:F=>k({...T,topicId:F.target.value}),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm",disabled:!T.chapterId,children:[h.jsx("option",{value:"",children:"Any Topic"}),T.chapterId&&n.find(F=>F.id===T.subjectId)?.chapters.find(F=>F.id===T.chapterId)?.topics.map(F=>h.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Time"}),h.jsx("input",{type:"time",value:T.time,onChange:F=>k({...T,time:F.target.value}),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Duration (mins)"}),h.jsx("input",{type:"number",min:"5",step:"5",value:T.durationMinutes,onChange:F=>k({...T,durationMinutes:parseInt(F.target.value)}),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Notes (Optional)"}),h.jsx("textarea",{value:T.notes,onChange:F=>k({...T,notes:F.target.value}),placeholder:"What topics will you cover?",className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none h-20 resize-none"})]}),h.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[h.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg font-medium",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg font-medium shadow-sm shadow-indigo-200 dark:shadow-none",children:"Schedule"})]})]})]})})]})}function vQ(){const[n,e]=C.useState("overview"),[t,s]=C.useState([]),[i,o]=C.useState(!0),[l,d]=C.useState(""),[f,m]=C.useState(null),[y,b]=C.useState(!1),{isAdmin:v}=Lt(),T=tu();C.useEffect(()=>{v||T("/",{replace:!0})},[v,T]),C.useEffect(()=>{if(!v)return;const $=xi(ps(qt,"users"),Wh("userProfile.xp","desc"),xu(100)),te=Ga($,ce=>{const D=[];ce.forEach(S=>{const A=S.data();A.userProfile&&D.push({id:S.id,userProfile:A.userProfile,lastActive:A.lastActive})}),s(D),o(!1)});return()=>te()},[]);const k=t.reduce(($,te)=>$+(te.userProfile.totalStudyTime||0),0),I=t.length>0?(t.reduce(($,te)=>$+(te.userProfile.level||1),0)/t.length).toFixed(1):"0",j=t.filter($=>$.userProfile.role==="admin").length,P=[{label:"Total Students",value:t.length.toString(),icon:Nc,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20",trend:"+12%",trendUp:!0},{label:"Total Study Hours",value:(k/3600).toFixed(1),icon:ig,color:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/20",trend:"+8%",trendUp:!0},{label:"Average Level",value:I,icon:lr,color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-900/20",trend:"Rising",trendUp:!0},{label:"Active Admins",value:j.toString(),icon:qd,color:"text-indigo-500",bg:"bg-indigo-50 dark:bg-indigo-900/20",trend:"Secured",trendUp:!0}],L=t.filter($=>$.userProfile.name?.toLowerCase().includes(l.toLowerCase())||$.id.toLowerCase().includes(l.toLowerCase())),z=async($,te,ce)=>{b(!0);try{const D=Zs(qt,"users",$);await Ho(D,{[`userProfile.${te}`]:ce}),f&&f.id===$&&m({...f,userProfile:{...f.userProfile,[te]:ce}})}catch(D){console.error("Error updating user:",D),alert("Failed to update user record.")}finally{b(!1)}};return h.jsxs("div",{className:"space-y-8 pb-20 max-w-7xl mx-auto",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-2.5 bg-indigo-600 rounded-2xl shadow-lg shadow-indigo-500/20",children:h.jsx(qd,{className:"w-6 h-6 text-white"})}),h.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight",children:"Admin Center"})]}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium tracking-tight",children:"System-wide monitoring & granular student control"})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-1.5 bg-slate-100/50 dark:bg-slate-800/50 backdrop-blur-md rounded-2xl border border-slate-200/50 dark:border-slate-700/50",children:[h.jsx("button",{onClick:()=>e("overview"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="overview"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm ring-1 ring-slate-200/50 dark:ring-slate-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-white/50 dark:hover:bg-white/5"}`,children:"Overview"}),h.jsx("button",{onClick:()=>e("users"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="users"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm ring-1 ring-slate-200/50 dark:ring-slate-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-white/50 dark:hover:bg-white/5"}`,children:"Management"}),h.jsx("button",{onClick:()=>e("system"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="system"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm ring-1 ring-slate-200/50 dark:ring-slate-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-white/50 dark:hover:bg-white/5"}`,children:"System"})]})]}),n==="overview"&&h.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-8",children:[h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:P.map(($,te)=>h.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:te*.1},className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl p-6 rounded-[2rem] border border-slate-100 dark:border-slate-700/50 shadow-xl shadow-slate-200/50 dark:shadow-none transition-all group hover:scale-[1.02] hover:shadow-2xl",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsx("div",{className:`p-4 rounded-2xl shadow-inner ${$.bg}`,children:h.jsx($.icon,{className:`w-6 h-6 ${$.color}`})}),h.jsxs("div",{className:`flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest ${$.trendUp?"text-emerald-600 dark:text-emerald-400":"text-rose-500"}`,children:[$.trendUp?h.jsx(GG,{className:"w-4 h-4"}):h.jsx(UG,{className:"w-4 h-4"}),$.trend]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight",children:$.value}),h.jsx("div",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:$.label})]})]},te))}),h.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm p-8 rounded-[2.5rem] border border-dashed border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center text-center py-20",children:[h.jsx(kc,{className:"w-12 h-12 text-slate-200 dark:text-slate-700 mb-4"}),h.jsx("h3",{className:"text-lg font-bold text-slate-400 dark:text-slate-600 uppercase tracking-widest",children:"Global Analytics Feed"}),h.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-600 mt-2",children:"Aggregated user behavior data will stream here in real-time"})]})]}),n==="users"&&h.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 py-2",children:[h.jsxs("div",{className:"relative w-full md:w-96",children:[h.jsx(_2,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),h.jsx("input",{type:"text",placeholder:"Search students by name or UID...",value:l,onChange:$=>d($.target.value),className:"bg-white/80 dark:bg-slate-800 uppercase text-[10px] font-black tracking-widest dark:text-white border border-slate-200 dark:border-slate-700/50 rounded-2xl py-3.5 pl-12 pr-6 focus:ring-4 focus:ring-indigo-500/10 outline-none w-full shadow-lg shadow-slate-200/30 dark:shadow-none transition-all placeholder:text-slate-300 dark:placeholder:text-slate-600"})]}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("button",{className:"flex items-center gap-2 px-5 py-3 bg-white dark:bg-slate-800 text-[10px] font-black text-slate-500 uppercase tracking-widest rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:bg-slate-50 transition-all",children:[h.jsx(IH,{className:"w-4 h-4"})," Filter By Role"]})})]}),h.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-2xl shadow-slate-400/5 dark:shadow-none overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-slate-50/50 dark:bg-slate-900/30",children:[h.jsx("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 dark:border-slate-700/50",children:"Registered Student"}),h.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 dark:border-slate-700/50 text-center",children:"Status"}),h.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 dark:border-slate-700/50 text-center",children:"XP & Power"}),h.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 dark:border-slate-700/50 text-center",children:"Engagement"}),h.jsx("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 dark:border-slate-700/50 text-right",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700/30",children:i?[1,2,3,4,5].map($=>h.jsx("tr",{className:"animate-pulse",children:h.jsxs("td",{colSpan:5,className:"px-8 py-10",children:[h.jsx("div",{className:"h-4 bg-slate-100 dark:bg-slate-700 rounded-full w-48 mb-2"}),h.jsx("div",{className:"h-2 bg-slate-50 dark:bg-slate-700/50 rounded-full w-32"})]})},$)):L.length>0?L.map($=>h.jsxs("tr",{className:"hover:bg-indigo-50/20 dark:hover:bg-indigo-500/5 transition-colors group",children:[h.jsx("td",{className:"px-8 py-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-black text-lg shadow-xl shadow-indigo-500/20 ring-4 ring-white dark:ring-slate-700 group-hover:scale-110 transition-transform",children:$.userProfile.name?.charAt(0)||"?"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-black text-slate-800 dark:text-white text-sm tracking-tight",children:$.userProfile.name}),h.jsxs("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-black tracking-widest uppercase mt-0.5",children:[$.id.substring(0,12),"..."]})]})]})}),h.jsx("td",{className:"px-6 py-6 text-center",children:h.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black tracking-widest uppercase border ${$.userProfile.role==="admin"?"bg-rose-50 text-rose-600 border-rose-100 dark:bg-rose-950/30 dark:border-rose-900/50":"bg-slate-100 text-slate-500 border-slate-200 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-400"}`,children:$.userProfile.role||"Student"})}),h.jsx("td",{className:"px-6 py-6 text-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsxs("span",{className:"text-xs font-black text-slate-700 dark:text-slate-300",children:["Level ",$.userProfile.level||1]}),h.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:[($.userProfile.xp||0).toLocaleString()," XP"]})]})}),h.jsx("td",{className:"px-6 py-6 text-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsxs("span",{className:"text-xs font-black text-slate-700 dark:text-slate-300",children:[Math.round(($.userProfile.totalStudyTime||0)/3600)," HRS"]}),h.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 uppercase tracking-widest",children:[$.userProfile.currentStreak||0," DAY STREAK"]})]})}),h.jsx("td",{className:"px-8 py-6 text-right",children:h.jsx("button",{onClick:()=>m($),className:"p-2.5 text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 bg-slate-50 dark:bg-slate-700/50 rounded-xl hover:shadow-lg transition-all",children:h.jsx(AH,{className:"w-5 h-5"})})})]},$.id)):h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"px-8 py-20 text-center",children:h.jsxs("div",{className:"flex flex-col items-center text-slate-400 dark:text-slate-600",children:[h.jsx(_2,{className:"w-12 h-12 mb-4 opacity-20"}),h.jsx("p",{className:"font-black text-sm uppercase tracking-widest",children:"No matching user records found"})]})})})})]})})})]}),n==="system"&&h.jsxs(ve.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-xl space-y-8",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-3 mb-6 transition-colors tracking-tight",children:[h.jsx(qd,{className:"w-6 h-6 text-indigo-500"}),"System Controls"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("button",{className:"flex flex-col items-center justify-center p-6 bg-slate-50/50 dark:bg-slate-900/50 rounded-3xl border border-slate-100 dark:border-slate-700/50 hover:bg-white dark:hover:bg-slate-700 transition-all group border-dashed",children:[h.jsx(ig,{className:"w-8 h-8 text-slate-400 mb-3 group-hover:text-indigo-500 transition-colors"}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Maintenance"})]}),h.jsxs("button",{className:"flex flex-col items-center justify-center p-6 bg-slate-50/50 dark:bg-slate-900/50 rounded-3xl border border-slate-100 dark:border-slate-700/50 hover:bg-white dark:hover:bg-slate-700 transition-all group border-dashed",children:[h.jsx(kc,{className:"w-8 h-8 text-slate-400 mb-3 group-hover:text-amber-500 transition-colors"}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Force Sync"})]})]})]}),h.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-700/50",children:[h.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-4",children:"Broadcast Message"}),h.jsx("textarea",{placeholder:"Global message to all users...",className:"w-full bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-700/50 rounded-2xl p-4 text-sm font-medium focus:ring-4 focus:ring-indigo-500/10 outline-none h-32 transition-all resize-none"}),h.jsx("button",{className:"w-full mt-4 py-3.5 bg-indigo-600 hover:bg-indigo-700 text-white font-black uppercase tracking-widest text-[10px] rounded-2xl shadow-xl shadow-indigo-500/20 transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Send Global Notification"})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 p-8 rounded-[2.5rem] shadow-2xl shadow-indigo-500/30 text-white flex flex-col justify-between overflow-hidden relative",children:[h.jsx(qd,{className:"absolute -top-10 -right-10 w-48 h-48 opacity-10 rotate-12"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("h2",{className:"text-2xl font-black mb-2 flex items-center gap-3 tracking-tight",children:"Security Status"}),h.jsx("span",{className:"px-3 py-1 bg-white/20 backdrop-blur-md rounded-full text-[10px] font-black tracking-widest uppercase border border-white/30",children:"Protected by Antigravity Shield"})]}),h.jsxs("div",{className:"space-y-4 relative z-10 mt-20",children:[h.jsxs("div",{className:"flex items-center justify-between text-xs font-bold p-4 bg-white/10 rounded-2xl border border-white/10 backdrop-blur-sm",children:[h.jsx("span",{children:"Firestore Rules"}),h.jsx("span",{className:"text-emerald-400",children:"ACTIVE"})]}),h.jsxs("div",{className:"flex items-center justify-between text-xs font-bold p-4 bg-white/10 rounded-2xl border border-white/10 backdrop-blur-sm",children:[h.jsx("span",{children:"Auth Persistence"}),h.jsx("span",{className:"text-emerald-400",children:"ENABLED"})]}),h.jsxs("div",{className:"flex items-center justify-between text-xs font-bold p-4 bg-white/10 rounded-2xl border border-white/10 backdrop-blur-sm",children:[h.jsx("span",{children:"Admin Encryption"}),h.jsx("span",{className:"text-emerald-400",children:"SOLID"})]})]})]})]}),h.jsx(ns,{children:f&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>m(null),className:"absolute inset-0 bg-slate-900/40 backdrop-blur-md"}),h.jsxs(ve.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl bg-white dark:bg-slate-800 rounded-[2.5rem] shadow-2xl overflow-hidden border border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{className:"p-8 border-b border-slate-50 dark:border-slate-700 flex items-center justify-between bg-slate-50/50 dark:bg-slate-900/30",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-black text-xl shadow-xl shadow-indigo-500/20",children:f.userProfile.name?.charAt(0)||"?"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-black text-slate-800 dark:text-white leading-tight",children:f.userProfile.name}),h.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:f.id})]})]}),h.jsx("button",{onClick:()=>m(null),className:"p-2.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-2xl text-slate-400 transition-colors",children:h.jsx(Vs,{className:"w-6 h-6"})})]}),h.jsxs("div",{className:"p-8 space-y-8 max-h-[70vh] overflow-y-auto custom-scrollbar",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Authority Role"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("button",{onClick:()=>z(f.id,"role",f.userProfile.role==="admin"?"student":"admin"),disabled:y,className:`flex-1 py-3 px-4 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${f.userProfile.role==="admin"?"bg-rose-50 text-rose-600 border-rose-100":"bg-slate-50 text-slate-600 border-slate-100"} border`,children:[f.userProfile.role==="admin"?h.jsx(N$,{className:"w-4 h-4"}):h.jsx(C$,{className:"w-4 h-4"}),f.userProfile.role==="admin"?"Remove Admin":"Make Admin"]})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Account Level"}),h.jsx("div",{className:"flex items-center gap-2 pt-0.5",children:h.jsx("div",{className:"flex-1 bg-indigo-50/50 dark:bg-indigo-500/10 border border-indigo-100/50 dark:border-indigo-500/20 rounded-2xl py-2.5 px-4 text-center",children:h.jsxs("span",{className:"text-sm font-black text-indigo-600 dark:text-indigo-400",children:["Level ",f.userProfile.level||1]})})})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h3",{className:"text-xs font-black text-slate-800 dark:text-white uppercase tracking-widest flex items-center gap-2",children:[h.jsx(Nh,{className:"w-4 h-4 text-amber-500"})," Granular Control"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-900/50 p-6 rounded-3xl border border-slate-100 dark:border-slate-700/50 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total XP"}),h.jsx(lr,{className:"w-4 h-4 text-amber-500"})]}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("input",{type:"number",value:f.userProfile.xp||0,onChange:$=>z(f.id,"xp",parseInt($.target.value)),className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-2 px-4 text-sm font-black text-indigo-600"})})]}),h.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-900/50 p-6 rounded-3xl border border-slate-100 dark:border-slate-700/50 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Streak Days"}),h.jsx(kc,{className:"w-4 h-4 text-orange-500"})]}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("input",{type:"number",value:f.userProfile.currentStreak||0,onChange:$=>z(f.id,"currentStreak",parseInt($.target.value)),className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-2 px-4 text-sm font-black text-orange-600"})})]})]})]}),h.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-700/50",children:[h.jsxs("h3",{className:"text-xs font-black text-rose-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[h.jsx(hw,{className:"w-4 h-4"})," Reset Controls"]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{className:"flex-1 py-3 bg-rose-50 hover:bg-rose-100 text-rose-600 text-[10px] font-black uppercase tracking-widest rounded-2xl transition-all",children:"Clear XP"}),h.jsx("button",{className:"flex-1 py-3 bg-rose-50 hover:bg-rose-100 text-rose-600 text-[10px] font-black uppercase tracking-widest rounded-2xl transition-all",children:"Reset Streak"})]})]})]}),h.jsxs("div",{className:"p-8 bg-slate-50/50 dark:bg-slate-900/30 border-t border-slate-50 dark:border-slate-700 flex justify-end gap-3",children:[h.jsx("button",{onClick:()=>m(null),className:"px-6 py-2.5 bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 font-black text-[10px] uppercase tracking-widest rounded-xl shadow-sm border border-slate-100 dark:border-slate-700",children:"Dismiss"}),h.jsx("button",{onClick:()=>m(null),className:"px-6 py-2.5 bg-indigo-600 text-white font-black text-[10px] uppercase tracking-widest rounded-xl shadow-xl shadow-indigo-500/20",children:"Complete Audit"})]})]})]})})]})}function _Q({children:n}){const{user:e,loading:t}=Pi();return t?h.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:"Loading..."}):e?h.jsx(h.Fragment,{children:n}):h.jsx(W2,{to:"/login"})}function wQ({children:n}){const{isAdmin:e}=Lt();return e?h.jsx(h.Fragment,{children:n}):h.jsx(W2,{to:"/",replace:!0})}function TQ(){return h.jsx(M$,{children:h.jsx(U$,{children:h.jsx(xK,{children:h.jsx(TV,{basename:"/Study-Mate/",children:h.jsxs(ZP,{children:[h.jsx(Xs,{path:"/login",element:h.jsx(yQ,{})}),h.jsxs(Xs,{path:"/",element:h.jsx(_Q,{children:h.jsx(gQ,{})}),children:[h.jsx(Xs,{index:!0,element:h.jsx(W$,{})}),h.jsx(Xs,{path:"subject/:id",element:h.jsx(iK,{})}),h.jsx(Xs,{path:"planner",element:h.jsx(bQ,{})}),h.jsx(Xs,{path:"analytics",element:h.jsx(fK,{})}),h.jsx(Xs,{path:"timer",element:h.jsx(mK,{})}),h.jsx(Xs,{path:"chat",element:h.jsx(uQ,{})}),h.jsx(Xs,{path:"settings",element:h.jsx(cK,{})}),h.jsx(Xs,{path:"admin",element:h.jsx(wQ,{children:h.jsx(vQ,{})})})]})]})})})})})}class EQ extends C.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-lg w-full",children:[h.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),h.jsx("p",{className:"text-slate-600 mb-4",children:"We encountered an unexpected error."}),h.jsx("pre",{className:"bg-slate-100 p-4 rounded text-xs text-slate-800 overflow-auto mb-4",children:this.state.error?.message}),h.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):this.props.children}}Z4.createRoot(document.getElementById("root")).render(h.jsx(M2.StrictMode,{children:h.jsx(EQ,{children:h.jsx(jG,{children:h.jsx(aK,{children:h.jsx(eK,{children:h.jsx(TQ,{})})})})})}));
